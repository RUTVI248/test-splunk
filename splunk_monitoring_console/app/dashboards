[
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" script=\"cell_fill_gauge.js, common_control.js\">\n  <label>Workload Management Admission Control: Distributed</label>\n\n  <fieldset autoRun=\"true\" submitButton=\"false\">\n    <input type=\"radio\" searchWhenChanged=\"true\" token=\"role\">\n      <label>Role</label>\n      <choice value=\"dmc_group_search_head\">Search Heads</choice>\n      <choice value=\"dmc_group_indexer\">Indexers</choice>\n      <default>dmc_group_search_head</default>\n    </input>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"dmc_group\">\n      <label>Group</label>\n      <showClearButton>false</showClearButton>\n      <search>\n        <query>\n          | `dmc_get_groups_containing_role($role$)`\n          | search search_group!=\"dmc_group_*\"\n        </query>\n      </search>\n      <fieldForLabel>label</fieldForLabel>\n      <fieldForValue>search_group</fieldForValue>\n      <choice value=\"*\">All</choice>\n      <selectFirstChoice>true</selectFirstChoice>\n    </input>\n  </fieldset>\n\n  <search id=\"base_search_prefiltered\">\n      <query>\n        `dmc_set_index_internal` search_group=$role$ search_group=$dmc_group$ sourcetype=wlm_* prefilter_action=filter\n        | stats count by search_type\n      </query>\n      <earliest>-60m</earliest>\n      <latest>now</latest>\n  </search>\n\n  <search base=\"base_search_prefiltered\">\n    <query> stats sum(count) as total_prefiltered</query>\n    <preview>\n      <eval token=\"total_prefiltered\">if(isnotnull('result.total_prefiltered'), 'result.total_prefiltered', 0)</eval>\n    </preview>\n    <finalized>\n      <eval token=\"total_prefiltered\">if(isnotnull('result.total_prefiltered'), 'result.total_prefiltered', 0)</eval>\n    </finalized>\n  </search>\n\n  <row>\n    <panel>\n      <title>Total Searches Prefiltered (Last Hour)</title>\n      <single>\n        <search>\n          <query>\n            `dmc_event_local_search_dispatch`\n            | stats dc(search_id) as total_dispatched\n            | eval output_with_percentage = \"$total_prefiltered$\".\" (\".round($total_prefiltered$/($total_prefiltered$ + total_dispatched) * 100, 2).\" %)\"\n            | fields output_with_percentage\n          </query>\n        </search>\n        <option name=\"height\">80px</option>\n      </single>\n    </panel>\n\n    <panel>\n      <title>Adhoc Searches Prefiltered (Last Hour)</title>\n      <single>\n        <search base=\"base_search_prefiltered\">\n          <query>\n            | where search_type=\"adhoc\"\n            | fields count\n          </query>\n        </search>\n        <option name=\"height\">80px</option>\n      </single>\n    </panel>\n\n    <panel>\n      <title>Scheduled Searches Prefiltered (Last Hour)</title>\n      <single>\n        <search base=\"base_search_prefiltered\">\n          <query>\n            | where search_type=\"scheduled\"\n            | fields count\n          </query>\n        </search>\n        <option name=\"height\">80px</option>\n      </single>\n    </panel>\n  </row>\n\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Historical Charts</title>\n      <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n        <label>Time Range:</label>\n        <default>\n          <earliestTime>-4h@m</earliestTime>\n          <latestTime>now</latestTime>\n        </default>\n      </input>\n    </panel>\n  </row>\n\n  <row>\n    <panel rejects=\"$hide_activity$\">\n      <title>Count of Prefiltered Searches</title>\n      <input type=\"dropdown\" token=\"SplitByVariable\">\n        <label>Group by</label>\n        <showClearButton>false</showClearButton>\n        <default>Rule</default>\n        <choice value=\"prefilter_rule\">Rule</choice>\n        <choice value=\"user\">User</choice>\n        <choice value=\"app\">App</choice>\n        <choice value=\"search_type\">Search Type</choice>\n        <choice value=\"search_name\">Search Name</choice>\n        <choice value=\"host\">Instance</choice>\n        <set token=\"searchBy\">by $SplitByVariable$</set>\n      </input>\n      <!-- here we use a pattern:\n       - base search: get counts grouped by metrics\n       - post-process-1: get total count, generate a token to store total\n       - post-process-2: use the $total$ token to calculate percent\n       -->\n      <search id=\"prefiltered_searches_count_base\">\n        <query>\n          `dmc_set_index_internal` search_group=$role$ search_group=$dmc_group$ sourcetype=wlm_* prefilter_action=filter\n          | stats count by $SplitByVariable$\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <search base=\"prefiltered_searches_count_base\">\n        <query>stats sum(count) as total</query>\n        <preview>\n          <eval token=\"total_prefiltered_searches\">if(isnotnull('result.total'), 'result.total', 0)</eval>\n        </preview>\n        <finalized>\n          <eval token=\"total_prefiltered_searches\">if(isnotnull('result.total'), 'result.total', 0)</eval>\n        </finalized>\n      </search>\n      <table>\n        <title>Total: $total_prefiltered_searches$</title>\n        <search base=\"prefiltered_searches_count_base\">\n          <query>\n            sort - count\n            | eval percent = round(count / $total_prefiltered_searches$ * 100, 2).\" %\"\n            | rename prefilter_rule as Rule, user as User, app as App, search_type as \"Search Type\", search_name as \"Search Name\", host as Instance, count as Count, percent as \"Percent of Total\"\n          </query>\n        </search>\n        <option name=\"dataOverlayMode\">heatmap</option>\n        <option name=\"drilldown\">none</option>\n      </table>\n    </panel>\n  </row>\n\n  <row>\n    <panel>\n      <title>Count of Prefiltered Searches Over Time</title>\n      <input type=\"dropdown\" token=\"TimechartSplitByVariable\">\n        <label>Group by</label>\n        <showClearButton>false</showClearButton>\n        <default>Rule</default>\n        <choice value=\"prefilter_rule\">Rule</choice>\n        <choice value=\"user\">User</choice>\n        <choice value=\"app\">App</choice>\n        <choice value=\"search_type\">Search Type</choice>\n        <choice value=\"search_name\">Search Name</choice>\n        <choice value=\"host\">Instance</choice>\n        <set token=\"searchBy\">by $TimechartSplitByVariable$</set>\n      </input>\n      <chart>\n        <searchString>\n          `dmc_set_index_internal` search_group=$role$ search_group=$dmc_group$ sourcetype=wlm_* prefilter_action=filter\n          | `dmc_timechart` partial=f bins=200 count by $TimechartSplitByVariable$\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">false</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\"># of searches</option>\n        <option name=\"list.drilldown\">full</option>\n        <option name=\"list.wrap\">1</option>\n        <option name=\"maxLines\">5</option>\n        <option name=\"raw.drilldown\">full</option>\n        <option name=\"rowNumbers\">false</option>\n        <option name=\"table.drilldown\">all</option>\n        <option name=\"table.wrap\">1</option>\n        <option name=\"type\">list</option>\n        <option name=\"wrap\">true</option>\n        <option name=\"dataOverlayMode\">none</option>\n        <!-- <option name=\"refresh.auto.interval\">300</option> -->\n        <drilldown target=\"_blank\">\n          <condition series=\"*\">\n            <link target=\"_blank\"><![CDATA[search?q=`dmc_set_index_internal` search_group=$role$ search_group=$dmc_group$ sourcetype=wlm_* $TimechartSplitByVariable$=$click.name2$&earliest=$earliest$&latest=$latest$]]></link>\n          </condition>\n        </drilldown>\n      </chart>\n    </panel>\n  </row>\n\n  <row>\n    <panel>\n      <title>Scheduled Searches Prefiltered</title>\n      <table id=\"prefiltered_scheduled_searches\">\n        <search>\n          <query>\n            `dmc_set_index_internal` search_group=$role$ search_group=$dmc_group$ sourcetype=wlm_* search_type=\"scheduled*\" prefilter_action=filter\n            | stats count as prefiltered_count by prefilter_rule, user, app, host, search_name\n            | fields search_name, app, user, host, prefilter_rule, prefiltered_count\n            | sort - prefiltered_count\n            | rename search_name as \"Search Name\", app as App, user as User, host as Instance, prefilter_rule as \"Prefiltering Rule Triggered\", prefiltered_count as \"Prefiltered Count\"\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"drilldown\">row</option>\n        <drilldown>\n          <set token=\"scheduled_search_drilldown\">$row.Search Name$</set>\n          <set token=\"scheduled_search_host_drilldown\">$row.Instance$</set>\n        </drilldown>\n      </table>\n    </panel>\n    <panel depends=\"$scheduled_search_drilldown$\">\n      <title>Scheduled Searches Prefiltered Drilldown: $scheduled_search_drilldown$</title>\n      <table>\n        <search>\n          <query>\n            | rest [inputlookup dmc_assets | where host = $scheduled_search_host_drilldown|s$ | rename serverName AS splunk_server | return splunk_server] \"/servicesNS/-/-/saved/searches/$scheduled_search_drilldown$\" earliest_time=`time_modifier(-0s@s)` latest_time=`time_modifier(+8d@d)` search=\"is_scheduled=1\" search=\"disabled=0\"\n            | fields cron_schedule, next_scheduled_time, search \n            | rename cron_schedule as \"Cron Schedule\", next_scheduled_time as \"Next Scheduled Time\", search as \"Search\"\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n      </table>\n      <html>\n        <a data-unset-token=\"scheduled_search_drilldown\">Close this panel</a>\n      </html>\n    </panel>\n  </row>\n\n</form>",
"eai:type": "views",
"name": "admission_control_monitoring_distributed",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" script=\"cell_fill_gauge.js, common_control.js\">\n  <label>Workload Management Admission Control: Instance</label>\n\n  <fieldset autoRun=\"true\" submitButton=\"false\">\n    <input type=\"radio\" searchWhenChanged=\"true\" token=\"role\">\n      <label>Role</label>\n      <choice value=\"dmc_group_search_head\">Search Heads</choice>\n      <choice value=\"dmc_group_indexer\">Indexers</choice>\n      <default>dmc_group_search_head</default>\n    </input>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"dmc_group\">\n      <label>Group</label>\n      <showClearButton>false</showClearButton>\n      <search>\n        <query>\n          | `dmc_get_groups_containing_role($role$)`\n          | search search_group!=\"dmc_group_*\"\n        </query>\n      </search>\n      <fieldForLabel>label</fieldForLabel>\n      <fieldForValue>search_group</fieldForValue>\n      <choice value=\"*\">All</choice>\n      <selectFirstChoice>true</selectFirstChoice>\n    </input>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"splunk_server\">\n      <label>Instance</label>\n      <showClearButton>false</showClearButton>\n      <populatingSearch fieldForLabel=\"serverName\" fieldForValue=\"serverName\">\n        | `dmc_get_instance_info($dmc_group$)`\n        | where search_group=\"$role$\"\n      </populatingSearch>\n      <change>\n        <condition value=\"*\">\n          <set token=\"host\">$row.host$</set>\n        </condition>\n      </change>\n      <selectFirstChoice>true</selectFirstChoice>\n    </input>\n  </fieldset>\n\n  <search id=\"base_search_prefiltered\">\n      <query>\n        `dmc_set_index_internal` host=$host$ sourcetype=wlm_* prefilter_action=filter\n        | stats count by search_type\n      </query>\n      <earliest>-60m</earliest>\n      <latest>now</latest>\n  </search>\n\n  <search base=\"base_search_prefiltered\">\n    <query> stats sum(count) as total_prefiltered</query>\n    <preview>\n      <eval token=\"total_prefiltered\">if(isnotnull('result.total_prefiltered'), 'result.total_prefiltered', 0)</eval>\n    </preview>\n    <finalized>\n      <eval token=\"total_prefiltered\">if(isnotnull('result.total_prefiltered'), 'result.total_prefiltered', 0)</eval>\n    </finalized>\n  </search>\n\n  <row>\n    <panel>\n      <title>Total Searches Prefiltered (Last Hour)</title>\n      <single>\n        <search>\n          <query>\n            `dmc_event_local_search_dispatch`\n            | stats dc(search_id) as total_dispatched\n            | eval output_with_percentage = \"$total_prefiltered$\".\" (\".round($total_prefiltered$/($total_prefiltered$ + total_dispatched) * 100, 2).\" %)\"\n            | fields output_with_percentage\n          </query>\n        </search>\n        <option name=\"height\">80px</option>\n      </single>\n    </panel>\n\n    <panel>\n      <title>Adhoc Searches Prefiltered (Last Hour)</title>\n      <single>\n        <search base=\"base_search_prefiltered\">\n          <query>\n            | where search_type=\"adhoc\"\n            | fields count\n          </query>\n        </search>\n        <option name=\"height\">80px</option>\n      </single>\n    </panel>\n\n    <panel>\n      <title>Scheduled Searches Prefiltered (Last Hour)</title>\n      <single>\n        <search base=\"base_search_prefiltered\">\n          <query>\n            | where search_type=\"scheduled\"\n            | fields count\n          </query>\n        </search>\n        <option name=\"height\">80px</option>\n      </single>\n    </panel>\n  </row>\n\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Historical Charts</title>\n      <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n        <label>Time Range:</label>\n        <default>\n          <earliestTime>-4h@m</earliestTime>\n          <latestTime>now</latestTime>\n        </default>\n      </input>\n    </panel>\n  </row>\n\n  <row>\n    <panel rejects=\"$hide_activity$\">\n      <title>Count of Prefiltered Searches</title>\n      <input type=\"dropdown\" token=\"SplitByVariable\">\n        <label>Group by</label>\n        <showClearButton>false</showClearButton>\n        <default>Rule</default>\n        <choice value=\"prefilter_rule\">Rule</choice>\n        <choice value=\"user\">User</choice>\n        <choice value=\"app\">App</choice>\n        <choice value=\"search_type\">Search Type</choice>\n        <choice value=\"search_name\">Search Name</choice>\n        <set token=\"searchBy\">by $SplitByVariable$</set>\n      </input>\n      <!-- here we use a pattern:\n       - base search: get counts grouped by metrics\n       - post-process-1: get total count, generate a token to store total\n       - post-process-2: use the $total$ token to calculate percent\n       -->\n      <search id=\"prefiltered_searches_count_base\">\n        <query>\n          `dmc_set_index_internal` sourcetype=wlm_* host=$host$ prefilter_action=filter\n          | stats count by $SplitByVariable$\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <search base=\"prefiltered_searches_count_base\">\n        <query>stats sum(count) as total</query>\n        <preview>\n          <eval token=\"total_prefiltered_searches\">if(isnotnull('result.total'), 'result.total', 0)</eval>\n        </preview>\n        <finalized>\n          <eval token=\"total_prefiltered_searches\">if(isnotnull('result.total'), 'result.total', 0)</eval>\n        </finalized>\n      </search>\n      <table>\n        <title>Total: $total_prefiltered_searches$</title>\n        <search base=\"prefiltered_searches_count_base\">\n          <query>\n            sort - count\n            | eval percent = round(count / $total_prefiltered_searches$ * 100, 2).\" %\"\n            | rename prefilter_rule as Rule, user as User, app as App, search_type as \"Search Type\", search_name as \"Search Name\", count as Count, percent as \"Percent of Total\"\n          </query>\n        </search>\n        <option name=\"dataOverlayMode\">heatmap</option>\n        <option name=\"drilldown\">none</option>\n      </table>\n    </panel>\n  </row>\n\n  <row>\n    <panel>\n      <title>Count of Prefiltered Searches Over Time</title>\n      <input type=\"dropdown\" token=\"TimechartSplitByVariable\">\n        <label>Group by</label>\n        <showClearButton>false</showClearButton>\n        <default>Rule</default>\n        <choice value=\"prefilter_rule\">Rule</choice>\n        <choice value=\"user\">User</choice>\n        <choice value=\"app\">App</choice>\n        <choice value=\"search_type\">Search Type</choice>\n        <choice value=\"search_name\">Search Name</choice>\n        <set token=\"searchBy\">by $TimechartSplitByVariable$</set>\n      </input>\n      <chart>\n        <searchString>\n          `dmc_set_index_internal` host=$host$ sourcetype=wlm_* prefilter_action=filter\n          | `dmc_timechart` partial=f bins=200 count by $TimechartSplitByVariable$\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">false</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\"># of searches</option>\n        <option name=\"list.drilldown\">full</option>\n        <option name=\"list.wrap\">1</option>\n        <option name=\"maxLines\">5</option>\n        <option name=\"raw.drilldown\">full</option>\n        <option name=\"rowNumbers\">false</option>\n        <option name=\"table.drilldown\">all</option>\n        <option name=\"table.wrap\">1</option>\n        <option name=\"type\">list</option>\n        <option name=\"wrap\">true</option>\n        <option name=\"dataOverlayMode\">none</option>\n        <!-- <option name=\"refresh.auto.interval\">300</option> -->\n        <drilldown target=\"_blank\">\n          <condition series=\"*\">\n            <link target=\"_blank\"><![CDATA[search?q=`dmc_set_index_internal` sourcetype=wlm_* host=$host$ $TimechartSplitByVariable$=$click.name2$&earliest=$earliest$&latest=$latest$]]></link>\n          </condition>\n        </drilldown>\n      </chart>\n    </panel>\n  </row>\n\n  <row>\n    <panel>\n      <title>Scheduled Searches Prefiltered</title>\n      <table id=\"prefiltered_scheduled_searches\">\n        <search>\n          <query>\n            `dmc_set_index_internal` host=$host$ sourcetype=wlm_* search_type=\"scheduled*\" prefilter_action=filter\n            | stats count as prefiltered_count by prefilter_rule, user, app, search_name\n            | fields search_name, app, user, prefilter_rule, prefiltered_count\n            | sort - prefiltered_count\n            | rename search_name as \"Search Name\", app as App, user as User, prefilter_rule as \"Prefiltering Rule Triggered\", prefiltered_count as \"Prefiltered Count\"\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"drilldown\">row</option>\n        <drilldown>\n          <set token=\"scheduled_search_drilldown\">$row.Search Name$</set>\n        </drilldown>\n      </table>\n    </panel>\n    <panel depends=\"$scheduled_search_drilldown$\">\n      <title>Scheduled Searches Prefiltered Drilldown: $scheduled_search_drilldown$</title>\n      <table>\n        <search>\n          <query>\n            | rest splunk_server=$splunk_server$ \"/servicesNS/-/-/saved/searches/$scheduled_search_drilldown$\" earliest_time=`time_modifier(-0s@s)` latest_time=`time_modifier(+8d@d)` search=\"is_scheduled=1\" search=\"disabled=0\"\n            | fields cron_schedule, next_scheduled_time, search \n            | rename cron_schedule as \"Cron Schedule\", next_scheduled_time as \"Next Scheduled Time\", search as \"Search\"\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n      </table>\n      <html>\n        <a data-unset-token=\"scheduled_search_drilldown\">Close this panel</a>\n      </html>\n    </panel>\n  </row>\n\n</form>",
"eai:type": "views",
"name": "admission_control_monitoring_instance",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<?xml version=\"1.0\"?>\n<view template=\"pages/app.html\" type=\"html\" isDashboard=\"False\">\n    <label>Alerts</label>\n</view>",
"eai:type": "views",
"name": "alerts",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<?xml version=\"1.0\"?>\n<view template=\"/splunk_monitoring_console:/template/mc_app.html\" type=\"html\">\n    <label>Assist</label>\n</view>",
"eai:type": "views",
"name": "assist",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" isVisible=\"true\" script=\"common_control.js\">\n    <label>Knowledge Bundle Replication</label>\n    \n    <fieldset autoRun=\"true\" submitButton=\"false\">\n        <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"dmc_group\">\n          <label>Group</label>\n          <showClearButton>false</showClearButton>\n          <search>\n            <query>\n              | `dmc_get_groups_containing_role(dmc_group_search_head)` \n              | search search_group!=\"dmc_group_*\"\n            </query>\n          </search>\n          <fieldForLabel>label</fieldForLabel>\n          <fieldForValue>search_group</fieldForValue>\n          <choice value=\"dmc_group_search_head\">All Search Heads</choice>\n          <default>dmc_group_search_head</default>\n        </input>\n        <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"splunk_server\">\n          <label>Instance</label>\n          <showClearButton>false</showClearButton>\n          <populatingSearch fieldForLabel=\"serverName\" fieldForValue=\"serverName\">\n            | `dmc_get_instance_info($dmc_group$)`\n            | where search_group=\"dmc_group_search_head\"\n          </populatingSearch>\n          <selectFirstChoice>true</selectFirstChoice>\n          <change>\n            <condition value=\"*\">\n              <set token=\"host\">$row.host$</set>\n            </condition>\n          </change>\n        </input>\n    </fieldset>\n    \n    <row>\n       <html>\n          <p>\"Replication Time\" measures the elapsed time from the creation of a knowledge bundle \n            on the search head until the bundle has been sent to all peers. This does not include \n            any time spent indexing lookup files in the bundle.</p>\n       </html>\n    </row>\n    \n    <row>\n      <panel rejects=\"$historical$\">\n        <title>Snapshots</title>\n      </panel>\n    </row>\n    \n    <row>\n      <panel>\n          <search id=\"replication_config_api_base\">\n            <query>\n              | rest splunk_server=$splunk_server$ /services/search/distributed/bundle/replication/config\n            </query>\n          </search>\n          <single>\n            <search base=\"replication_config_api_base\">\n              <query>\n                | fields replicationPolicy\n                | eval replicationPolicy = upper(substr(replicationPolicy,1,1)).substr(replicationPolicy,2)\n              </query>\n            </search>\n            <option name=\"underLabel\">Replication Policy</option>\n            <option name=\"height\">80px</option>\n          </single>\n          <single>\n            <search base=\"replication_config_api_base\">\n              <query>\n                | eval replicationThreads = case(isnull(replicationThreads), \"N/A\", isnotnull(replicationThreads), replicationThreads)\n                | fields replicationThreads\n              </query>\n            </search>\n            <option name=\"underLabel\">Replication Threads</option>\n            <option name=\"height\">80px</option>\n          </single>\n      </panel>\n    </row> \n\n    <row>\n        <panel>\n          <single>\n              <search>\n                <query>\n                  `dmc_set_index_internal` host=$host$ source=*metrics.log* group=bundles_uploads name=peer_dispatch\n                  bundle_type=full_bundle\n                  | eval repl_sec = replication_time_msec/1000\n                  | stats avg(repl_sec)\n                </query>\n              </search>\n              <option name=\"underLabel\">Average Full Bundle Replication Time</option>\n              <option name=\"afterLabel\">sec</option>\n              <option name=\"height\">80px</option>\n          </single>\n          <single>\n              <search>\n                <query>\n                  `dmc_set_index_internal` host=$host$ source=*metrics.log* group=bundles_uploads name=peer_dispatch\n                  bundle_type=delta_bundle\n                  | eval repl_sec = replication_time_msec/1000\n                  | stats avg(repl_sec)\n                </query>\n              </search>\n              <option name=\"underLabel\">Average Delta Bundle Replication Time</option>\n              <option name=\"afterLabel\">sec</option>\n              <option name=\"height\">80px</option>\n          </single>\n        </panel>\n        <panel>\n          <single>\n              <search>\n                <query>\n                  `dmc_set_index_internal` host=$host$ source=*metrics.log* group=bundle_replication name=bundle_metadata\n                  bundle_type=full_bundle\n                  | eval size_mb = round(bundle_bytes /1024 / 1024, 2)\n                  | stats avg(size_mb)\n                  </query>\n              </search>\n              <option name=\"underLabel\">Average Full Bundle Size</option>\n              <option name=\"afterLabel\">MB</option>\n              <option name=\"height\">80px</option>\n          </single>\n          <single>\n              <search>\n                <query>\n                  `dmc_set_index_internal` host=$host$ source=*metrics.log* group=bundle_replication name=bundle_metadata\n                  bundle_type=delta_bundle\n                  | eval size_mb = round(bundle_bytes /1024 / 1024, 2)\n                  | stats avg(size_mb)\n                </query>\n              </search>\n              <option name=\"underLabel\">Average Delta Bundle Size</option>\n              <option name=\"afterLabel\">MB</option>\n              <option name=\"height\">80px</option>\n          </single>\n        </panel>  \n    </row>\n\n    <row>\n      <panel>\n        <title>Latest Common Bundle Across All Peers</title>\n            <search id=\"common_bundle_base\">\n              <query>\n                | rest splunk_server_group=dmc_group_indexer /services/admin/bundles/$splunk_server$\n                | fields bundle_name, checksum, id, splunk_server, upload_time\n                | mvcombine splunk_server\n                | sort upload_time desc\n                | eval latest_common=case(mvcount(splunk_server)==[\n                  | rest splunk_server_group=dmc_group_indexer /services/admin/bundles/$splunk_server$\n                  | stats dc(splunk_server) AS total_server_count\n                  | return $total_server_count], \n                \"found\", mvcount(splunk_server)!=[\n                  | rest splunk_server_group=dmc_group_indexer /services/admin/bundles/$splunk_server$\n                  | stats dc(splunk_server) AS total_server_count\n                  | return $total_server_count],\n                \"none\")\n                | where latest_common==\"found\"\n                | head 1\n              </query>\n            </search>\n            <single depends=\"$show_panel$\">\n              <search base=\"common_bundle_base\">\n                <query>\n                  | eval upload_time=\"Created at: \".(strftime(upload_time, \"%m/%d/%Y %H:%M:%S %p\"))\n                  | fields upload_time\n                </query>\n              </search>\n              <option name=\"height\">50%</option>\n            </single>\n            <single depends=\"$show_panel$\">\n              <search base=\"common_bundle_base\">\n                <query>\n                  | rex field=id \"(?&lt;id&gt;([^\\/]+$))\"\n                  | eval id = \"Bundle Id: \".tostring(id)\n                  | fields id\n                </query>\n              </search>\n              <option name=\"height\">50%</option>\n            </single>\n            <html depends=\"$show_panel$\">\n            </html>\n            <single depends=\"$show_panel$\">\n              <search base=\"common_bundle_base\">\n                <query>\n                  | eval checksum = \"Checksum: \".tostring(checksum)\n                  | fields checksum\n                </query>\n                <progress>\n                   <condition match=\"$job.resultCount$ != 0\">\n                     <set token=\"show_panel\">true</set>\n                   </condition>\n                   <condition>\n                      <unset token=\"show_panel\"/>\n                  </condition>\n                </progress>\n              </search>\n              <option name=\"height\">50%</option>\n            </single>\n            <single rejects=\"$show_panel$\">\n              <search base=\"common_bundle_base\">\n                <query>\n                  | appendpipe [\n                    stats count\n                    | eval checksum=\"No common knowledge bundle found across all peers\"\n                    | where count=0]\n                  | fields checksum\n                </query>\n              </search>\n            </single>\n      </panel>\n    </row>\n\n    <row>\n        <panel rejects=\"$snapshot$\">\n          <title>Historical Charts</title>\n          <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n            <label>Time Range:</label>\n            <default>\n              <earliestTime>-4h@m</earliestTime>\n              <latestTime>now</latestTime>\n            </default>\n          </input>\n        </panel>\n    </row>\n    \n    <row>\n      <html>\n        <p>A bundle replication cycle corresponds to one round of replication initiated by the search head, which \n          includes sending at least one bundle to a set of search peers.</p>\n      </html>\n    </row>\n    \n    <row>\n        <panel rejects=\"$snapshot$\">\n          <title>Replication Cycle Count</title>\n          <html>\n          </html>\n          <html>\n          </html>\n           <single>\n            <search>\n              <query>\n                `dmc_set_index_internal` host=$host$ source=*metrics.log* group=bundle_replication name=cycle_dispatch\n                | stats count\n              </query>\n              <earliest>$time.earliest$</earliest>\n              <latest>$time.latest$</latest>\n            </search>\n            <option name=\"height\">100%</option>\n         </single>\n         <html>\n         </html>\n         <html>\n         </html>\n         <html>\n         </html>\n         <html>\n            <p>The number of cycles dispatched from the search head.</p>\n         </html>\n        </panel>\n        <panel rejects=\"$snapshot$\">\n         <title>Replication Cycle Count by Peer Success Ratio</title>\n         <chart>\n            <search>\n              <query>\n                `dmc_set_index_internal` host=$host$ source=*metrics.log* group=bundle_replication name=cycle_dispatch\n                | eval ratio = round((peer_success_count/peer_count)*100, 2)\n                | stats count by ratio\n                | rename ratio as \"Peer Success Ratio\"\n              </query>\n              <earliest>$time.earliest$</earliest>\n              <latest>$time.latest$</latest>\n            </search>\n            <option name=\"charting.chart\">bar</option>\n            <option name=\"height\">200px</option>\n            <option name=\"charting.legend.placement\">none</option>\n         </chart>\n         <html>\n            <p>Peer success ratio is the ratio of peers that received the bundles in a cycle successfully, to all intended peers.</p>\n         </html>\n        </panel>\n    </row>\n\n    <row>\n      <panel rejects=\"$snapshot$\">\n        <title>Average Bundle Replication Time by Bundle Type</title>\n        <chart>\n          <search>\n            <query>\n             `dmc_set_index_internal` host=$host$ source=*metrics.log* group=bundles_uploads name=peer_dispatch\n              | eval repl_sec = replication_time_msec/1000\n              | `dmc_timechart_for_metrics_log` avg(repl_sec) by bundle_type\n            </query>\n            <earliest>$time.earliest$</earliest>\n            <latest>$time.latest$</latest>\n          </search>\n          <option name=\"charting.chart\">column</option>\n          <option name=\"charting.axisTitleX.text\">Time</option>\n          <option name=\"charting.axisTitleY.text\">Replication Time (sec)</option>\n        </chart>\n      </panel>\n    </row>\n\n    <row>\n      <panel rejects=\"$snapshot$\">\n        <title>Average Bundle Size by Bundle Type</title>\n        <chart>\n          <search>\n            <query>\n               `dmc_set_index_internal` host=$host$ source=*metrics.log* group=bundle_replication name=bundle_metadata\n                | eval size_mb = round(bundle_bytes /1024 / 1024, 2)\n                | `dmc_timechart_for_metrics_log` avg(size_mb) by bundle_type\n            </query>\n            <earliest>$time.earliest$</earliest>\n            <latest>$time.latest$</latest>\n          </search>\n          <option name=\"charting.chart\">column</option>\n          <option name=\"charting.axisTitleX.text\">Time</option>\n          <option name=\"charting.axisTitleY.text\">Bundle Size (MB)</option>\n        </chart>\n      </panel>\n    </row>\n\n    <row>\n        <panel rejects=\"$snapshot$\">\n            <title rejects=\"$split_by_peer$\">Bundle Replication Activity</title>\n            <input type=\"checkbox\" searchWhenChanged=\"true\" token=\"split_by_peer\">\n              <label></label>\n              <choice>Split by peer</choice>\n            </input>\n            <chart rejects=\"$split_by_peer$\">\n                <search>\n                  <query>\n                     `dmc_set_index_internal` host=$host$ source=*metrics.log* group=bundles_uploads name=peer_dispatch\n                     | eval repl_sec = replication_time_msec/1000\n                     | `dmc_timechart_for_metrics_log` avg(repl_sec) AS avg_repl_time p90(repl_sec) AS 90th_perc_repl_time p10(repl_sec) AS 10th_perc_repl_time\n                  </query>\n                  <earliest>$time.earliest$</earliest>\n                  <latest>$time.latest$</latest>\n                </search>\n                <option name=\"charting.chart\">line</option>\n                <option name=\"charting.axisTitleX.text\">Time</option>\n                <option name=\"charting.axisTitleY.text\">Replication Time (sec)</option>\n            </chart>\n            <html rejects=\"$split_by_peer$\">\n              <p>Average, 90th percentile, and 10th percentile of bundle replication time, in seconds.</p>\n            </html>\n            <title depends=\"$split_by_peer$\">Bundle Replication Activity (Per-Peer)</title>\n            <chart depends=\"$split_by_peer$\">\n                <search>\n                  <query>\n                     `dmc_set_index_internal` host=$host$ source=*metrics.log* group=bundles_uploads name=peer_dispatch\n                     | eval repl_sec = replication_time_msec/1000\n                     | `dmc_timechart_for_metrics_log` limit=50 avg(repl_sec) AS avg_repl_time by peer_name\n                  </query>\n                  <earliest>$time.earliest$</earliest>\n                  <latest>$time.latest$</latest>\n                </search>\n                <option name=\"charting.chart\">line</option>\n                <option name=\"charting.axisTitleX.text\">Time</option>\n                <option name=\"charting.axisTitleY.text\">Replication Time (sec)</option>\n            </chart>\n            <html depends=\"$split_by_peer$\">\n              <p>Average bundle replication time, in seconds, grouped by peer. Only 50 peers are visible.</p>\n            </html>\n        </panel>\n    </row>\n    \n    <row>\n        <panel rejects=\"$snapshot$\">\n         <title>Average Bundle Replication Time and Size</title>\n          <table>\n            <search>\n              <query>\n                `dmc_set_index_internal` host=$host$ source=*metrics.log* group=bundles_uploads name=peer_dispatch\n                | stats avg(replication_time_msec) AS avg_time by peer_name\n                | eval avg_time=round(avg_time/1000, 2)\n                | rename avg_time AS \"Replication Time (sec)\"\n                | appendcols [\n                  search `dmc_set_index_internal` host=$host$ source=*metrics.log* group=bundles_uploads name=peer_dispatch\n                  | join type=inner bundle_id [\n                    search `dmc_set_index_internal` source=*metrics.log* group=bundle_replication name=bundle_metadata]\n                  | stats avg(bundle_bytes) AS avg_size by peer_name\n                  | eval avg_size = round(avg_size /1024 / 1024, 2)\n                  | rename avg_size AS \"Bundle Size (MB)\"]\n                | rename peer_name AS \"Peer\"\n              </query>\n              <earliest>$time.earliest$</earliest>\n              <latest>$time.latest$</latest>           \n           </search>  \n         </table>\n        </panel>\n    </row>\n    \n    <row>\n      <panel rejects=\"$snapshot$\">\n        <title>Knowledge Bundle Replication Warnings and Errors Over Time</title>\n        <chart>\n          <search>\n            <query>\n              `dmc_set_index_internal` (search_group=dmc_group_indexers OR search_group=dmc_group_search_head) source=*splunkd.log*\n              (component=BundlesAdminHandler OR  component=BundleDataProcessor OR component=BundleDeltaHandler OR\n              component=BundleReplicationProvider OR component=BundleStatusManager OR component=BundleTransaction OR\n              component=CascadePlan OR component=CascadeReplicationReaper OR component=CascadingBundleReplicationProvider OR\n              component=CascadingReplicationManager OR component=CascadingReplicationTransaction OR \n              component=CascadingReplicationStatusActor OR component=CascadingUploadHandler OR component=ClassicBundleReplicationProvider OR\n              component=DistBundleRestHandler OR component=DistributedBundleReplicationManager OR\n              component=GetCascadingReplicationStatusTransaction OR component=RFSManager OR component=RFSBundleReplicationProvider)\n              (log_level=WARN OR log_level=ERROR)\n              | timechart bins=200 partial=f count by component\n            </query>\n            <earliest>$time.earliest$</earliest>\n            <latest>$time.latest$</latest>\n          </search>\n          <option name=\"charting.chart\">column</option>\n          <option name=\"charting.chart.stackMode\">stacked</option>\n          <option name=\"charting.axisTitleX.text\">Time</option>\n          <option name=\"charting.axisTitleY.text\">Event Count</option>\n        </chart>\n      </panel>\n      <panel rejects=\"$snapshot$\">\n        <title>Knowledge Bundle Replication Warnings and Errors By Component</title>\n        <chart>\n          <search>\n            <query>\n              `dmc_set_index_internal` (search_group=dmc_group_indexers OR search_group=dmc_group_search_head) source=*splunkd.log*\n              (component=BundlesAdminHandler OR  component=BundleDataProcessor OR component=BundleDeltaHandler  OR\n              component=BundleReplicationProvider OR component=BundleStatusManager OR component=BundleTransaction OR\n              component=CascadePlan OR component=CascadeReplicationReaper OR component=CascadingBundleReplicationProvider OR component=CascadingReplicationManager OR component=CascadingReplicationTransaction OR component=CascadingReplicationStatusActor OR component=CascadingUploadHandler OR component=ClassicBundleReplicationProvider OR component=DistBundleRestHandler OR\n              component=DistributedBundleReplicationManager OR component=GetCascadingReplicationStatusTransaction OR\n              component=RFSManager OR component=RFSBundleReplicationProvider)\n              (log_level=WARN OR log_level=ERROR)\n              | chart count by component, log_level\n              | sort - ERROR, WARN\n            </query>\n            <earliest>$time.earliest$</earliest>\n            <latest>$time.latest$</latest>\n          </search>\n          <option name=\"charting.chart\">bar</option>\n          <option name=\"charting.axisTitleX.text\">Component</option>\n          <option name=\"charting.axisTitleY.text\">Event Count</option>\n          <option name=\"charting.fieldColors\">{\"WARN\": 0xF2B827, \"ERROR\": 0xAF575A}</option>\n        </chart>\n      </panel>\n    </row>\n\n</form>              ",
"eai:type": "views",
"name": "bundle_replication",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" isVisible=\"true\" script=\"common_control.js\" >\n  <label>Cascading Replication</label>\n\n  <fieldset autoRun=\"true\" submitButton=\"false\">\n    <input type=\"radio\" searchWhenChanged=\"true\" token=\"role\">\n      <label>Role</label>\n      <choice value=\"dmc_group_search_head\">Search Heads</choice>\n      <choice value=\"dmc_group_indexer\">Indexers (Search Peers)</choice>\n      <default>dmc_group_search_head</default>\n    </input>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"dmc_group\">\n      <label>Group</label>\n      <showClearButton>false</showClearButton>\n      <search>\n        <query>\n          | `dmc_get_groups_containing_role($role$)`\n          | search search_group!=\"dmc_group_*\"\n        </query>\n      </search>\n      <fieldForLabel>label</fieldForLabel>\n      <fieldForValue>search_group</fieldForValue>\n      <choice value=\"*\">All</choice>\n      <default>*</default>\n    </input>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"splunk_server\">\n      <label>Instance</label>\n      <showClearButton>false</showClearButton>\n      <search>\n        <query>\n          | `dmc_get_instance_info($dmc_group$)`\n          | where search_group=\"$role$\"\n        </query>\n      </search>\n      <fieldForLabel>serverName</fieldForLabel>\n      <fieldForValue>serverName</fieldForValue>\n      <selectFirstChoice>true</selectFirstChoice>\n      <change>\n        <condition value=\"*\">\n          <set token=\"host\">$row.host$</set>\n        </condition>\n      </change>\n    </input>\n  </fieldset>\n  \n  <row depends=\"$show_cascade$\">\n    <panel>\n        <search id=\"replication_config_api_base\">\n          <query>\n            | rest splunk_server=$splunk_server$ /services/search/distributed/bundle/replication/config\n          </query>\n        </search>\n        <single>\n          <search base=\"replication_config_api_base\">\n            <query>\n              | fields replicationPolicy\n              | eval replicationPolicy = upper(substr(replicationPolicy,1,1)).substr(replicationPolicy,2)\n            </query>\n            <done>\n              <condition match=\"'result.replicationPolicy'=&quot;Cascading&quot;\">\n                 <set token=\"show_cascade\">true</set>\n              </condition>\n              <condition>\n                 <set token=\"show_msg\">true</set>\n              </condition>\n            </done>\n          </search>\n          <option name=\"underLabel\">Replication Policy</option>\n          <option name=\"height\">80px</option>\n        </single>\n        <single>\n          <search base=\"replication_config_api_base\">\n            <query>\n              | fields replicationThreads\n            </query>\n          </search>\n          <option name=\"underLabel\">Replication Threads</option>\n          <option name=\"height\">80px</option>\n        </single>\n    </panel>\n  </row>\n \n  <row depends=\"$show_msg$\">\n    <panel>\n      <html>\n        <h3>Cascading Replication is disabled. Set replicationPolicy = cascading under the [replicationSettings] stanza in distsearch.conf to enable.</h3>\n      </html>\n    </panel>\n  </row>\n\n  <row depends=\"$show_cascade$\">\n    <panel rejects=\"$snapshot$\">\n        <title>Historical Charts</title>\n        <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n            <label>Time Range:</label>\n            <default>\n              <earliestTime>-4h@m</earliestTime>\n              <latestTime>now</latestTime>\n            </default>\n          </input>\n    </panel>\n  </row>\n\n  <row depends=\"$show_cascade$\">\n    <html>\n        <p>In cascading replication, the search head first creates a <b>plan</b> that specifies the \n        replication relationships between peers; in other words, which peers send the payload to which \n        other peers. The search head distributes this plan to all search peers. There can be multiple plans\n        associated with a knowledge bundle replication cycle.</p>\n        <p>Each sender node, including the search head and any sender search peers, then sends the payload\n        to its own set of receiver search peers. A <b>payload</b> is any packet of information exchanged\n        by nodes during the cascading replication process. Payloads can include, but are not limited to,\n        full or delta knowledge bundles.</p>\n    </html>\n  </row>\n  \n  <!-- Plan Metadata -->\n  <row depends=\"$show_cascade$\">\n    <panel rejects=\"$snapshot$\">\n        <title>Plan Count by Number of Levels</title>\n        <chart>\n          <search>\n            <query>\n              `dmc_set_index_internal` host=$host$ source=*metrics.log* group=cascading name=plan_metadata\n               | dedup planid\n               | stats count by num_levels\n            </query>\n            <earliest>$time.earliest$</earliest>\n            <latest>$time.latest$</latest>\n          </search>\n          <option name=\"charting.chart\">pie</option>\n          <option name=\"charting.legend.placement\">none</option>\n        </chart>\n        <html>\n          <p>The search head is one level. Cascading replication occurs when there are at least \n             three levels: The search head sends the payload to a subset of search peers, which in turn \n             distribute the payload to their own set of search peers, and so on.</p>\n        </html>\n    </panel>\n    <panel rejects=\"$snapshot$\">\n        <title>Plan Count by Number of Peers</title>\n        <chart>\n          <search>\n            <query>\n              `dmc_set_index_internal` host=$host$ source=*metrics.log* group=cascading name=plan_metadata\n               | dedup planid\n               | stats count by num_peers\n            </query>\n            <earliest>$time.earliest$</earliest>\n            <latest>$time.latest$</latest>\n          </search>\n          <option name=\"charting.chart\">pie</option>\n          <option name=\"charting.legend.placement\">none</option>\n        </chart>\n        <html>\n            <p>Count of plans by number of peers involved.</p>\n        </html>\n    </panel>\n    <panel rejects=\"$snapshot$\">\n        <title>Plan Count by Replication Type</title>\n        <chart>\n          <search>\n            <query>\n              `dmc_set_index_internal` host=$host$ source=*metrics.log* group=cascading name=plan_metadata\n               | dedup planid\n               | stats count by endpoint\n            </query>\n            <earliest>$time.earliest$</earliest>\n            <latest>$time.latest$</latest>\n          </search>\n          <option name=\"charting.chart\">pie</option>\n          <option name=\"charting.legend.placement\">none</option>\n        </chart>\n        <html>\n            <p>Count of plans by replication type.</p>\n        </html>\n    </panel>\n  </row>\n\n  <row depends=\"$show_cascade$\">\n    <panel rejects=\"$snapshot$\">\n      <title>Plan Count by Number of Receivers</title>\n        <chart>\n          <search>\n            <query>\n               `dmc_set_index_internal` host=$host$ source=*metrics.log* group=cascading name=plan_replication\n               | dedup planid\n               | stats count by num_receivers\n            </query>\n            <earliest>$time.earliest$</earliest>\n            <latest>$time.latest$</latest>\n          </search>\n          <option name=\"charting.chart\">pie</option>\n          <option name=\"charting.legend.placement\">none</option>\n        </chart>\n        <html>\n            <p>Count of plans by number of intended receivers.</p>\n        </html>\n    </panel>\n    <panel rejects=\"$snapshot$\">\n      <title>Payload Count by Number of Receivers</title>\n        <chart>\n          <search>\n            <query>\n               `dmc_set_index_internal` host=$host$ source=*metrics.log* group=cascading name=payload_replication\n               | dedup planid\n               | stats count by num_receivers\n            </query>\n            <earliest>$time.earliest$</earliest>\n            <latest>$time.latest$</latest>\n          </search>\n          <option name=\"charting.chart\">pie</option>\n          <option name=\"charting.legend.placement\">none</option>\n        </chart>\n        <html>\n            <p>Count of payloads by number of intended receivers.</p>\n        </html>\n    </panel>\n    <panel rejects=\"$snapshot$\">\n      <title>Plan and Payload Replication Status</title>\n        <chart>\n          <search>\n            <query>\n               | multisearch\n                 [search `dmc_set_index_internal` source=*metrics.log group=cascading name=plan_replication]\n                 [search `dmc_set_index_internal` source=*metrics.log group=cascading name=payload_replication]\n               | chart count over name by status\n               | replace payload_replication WITH payload\n               | replace plan_replication WITH plan\n               | rename name as \"Replication Type\" \n               | sort -\"Replication Type\"\n            </query>\n            <earliest>$time.earliest$</earliest>\n            <latest>$time.latest$</latest>\n          </search>\n          <option name=\"charting.chart\">column</option>\n          <option name=\"charting.chart.stackMode\">stacked</option>\n          <option name=\"charting.legend.placement\">none</option>\n          <option name=\"charting.axisTitleX.text\">Replication Type</option>\n          <option name=\"charting.axisTitleY.text\">Status Count</option>\n          <option name=\"charting.fieldColors\">{\"success\": 0x4FA484, \"failure\": 0xAF575A}</option>\n        </chart>\n        <html>\n            <p>Count of plans and payloads by status; success indicates successful replication to <i>all</i> intended peers.</p>\n        </html>\n    </panel>\n  </row>\n\n  <row depends=\"$show_cascade$\">\n    <panel rejects=\"$snapshot$\">\n        <title>Plan Replication Performance</title>\n        <chart>\n          <search>\n            <query>\n              `dmc_set_index_internal` host=$host$ source=*metrics.log* group=cascading name=plan_replication\n               | dedup planid\n               | `dmc_timechart_for_metrics_log` avg(dispatch_time_ms) AS avg_plan_msec\n            </query>\n            <earliest>$time.earliest$</earliest>\n            <latest>$time.latest$</latest>\n          </search>\n          <option name=\"charting.chart\">line</option>\n          <option name=\"charting.legend.placement\">none</option>\n          <option name=\"charting.axisTitleX.text\">Time</option>\n          <option name=\"charting.axisTitleY.text\">Time Spent (msec)</option>\n        </chart>\n        <html>\n          <p>\"Time spent\" is the average msec for the search head to send a plan to all search peers.</p>\n        </html>\n    </panel>\n  </row>\n\n  <row depends=\"$show_cascade$\">\n    <panel rejects=\"$snapshot$\">\n        <title rejects=\"$split_by_peer$\">Payload Replication Performance</title>\n        <input type=\"checkbox\" searchWhenChanged=\"true\" token=\"split_by_peer\">\n          <label></label>\n          <choice>Split by peer</choice>\n        </input>\n        <chart rejects=\"$split_by_peer$\">\n          <search>\n            <query>\n              `dmc_set_index_internal` search_group=dmc_group_indexer source=*metrics.log* group=cascading name=payload_replication\n               | dedup planid\n               | eval dispatch_time_sec=dispatch_time_ms/1000\n               | `dmc_timechart_for_metrics_log` avg(dispatch_time_sec) AS avg_payload_sec\n            </query>\n            <earliest>$time.earliest$</earliest>\n            <latest>$time.latest$</latest>\n          </search>\n          <option name=\"charting.chart\">line</option>\n          <option name=\"charting.legend.placement\">none</option>\n          <option name=\"charting.axisTitleX.text\">Time</option>\n          <option name=\"charting.axisTitleY.text\">Time Spent (sec)</option>\n        </chart>\n        <html rejects=\"$split_by_peer$\">\n          <p>\"Time spent\" is the average sec for a sender peer (the search head or any other sender peer)\n            to send a payload to all of its receivers.</p>\n        </html>\n        <title depends=\"$split_by_peer$\">Payload Replication Performance (Per-Peer)</title>\n        <chart depends=\"$split_by_peer$\">\n          <search>\n            <query>\n              `dmc_set_index_internal` search_group=dmc_group_indexer source=*metrics.log* group=cascading name=payload_replication\n               | dedup planid\n               | eval dispatch_time_sec=dispatch_time_ms/1000\n               | `dmc_timechart_for_metrics_log` avg(dispatch_time_sec) by peer_guid\n            </query>\n            <earliest>$time.earliest$</earliest>\n            <latest>$time.latest$</latest>\n          </search>\n          <option name=\"charting.chart\">line</option>\n          <option name=\"charting.axisTitleX.text\">Time</option>\n          <option name=\"charting.axisTitleY.text\">Time Spent (sec)</option>\n        </chart>\n        <html depends=\"$split_by_peer$\">\n          <p> Time spent is the average sec for the given peer (which may be the search head, or any other sender peer)\n            to send a payload to all of its receivers.</p>\n        </html>\n    </panel>\n  </row>\n\n  <row depends=\"$show_cascade$\">\n    <panel rejects=\"$snapshot$\">\n        <title>Average Peer Time to Receive Payload</title>\n        <table>\n            <searchString>\n              `dmc_set_index_internal` host=$host$ source=*metrics.log* group=cascading name=per_peer_replication\n               | dedup planid\n               | stats avg(repl_time_ms) AS avg_time by peer_uri\n               | eval avg_time=round(avg_time, 2)\n               | rename avg_time AS \"Time To Receive (msec)\"\n               | rename peer_uri AS \"Peer URI\"\n               | sort 0 - \"Time to Receive (msec)\"\n            <earliest>$time.earliest$</earliest>\n            <latest>$time.latest$</latest>\n          </searchString>\n         </table>\n        <html>\n            <p>\"Time to receive\" is the average time for a peer to receive a payload from its sender.</p>\n        </html>\n    </panel>\n  </row>\n\n</form>",
"eai:type": "views",
"name": "cascading_replication",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<?xml version=\"1.0\"?>\n<view template=\"pages/app.html\" type=\"html\" isDashboard=\"False\">\n    <label>Dashboards</label>\n</view>",
"eai:type": "views",
"name": "dashboards",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<dashboard version=\"1.1\" hideEdit=\"True\" script=\"common_control.js\">\n  <label>Data Quality</label>\n  <description>\n      This dashboard helps you assess the quality of your incoming data by revealing issues that\n      occur when the data is being indexed. These issues appear as warnings and errors in your splunkd.log.\n  </description>\n  <fieldset autoRun=\"true\" submitButton=\"false\">\n    <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n      <label>Time Range</label>\n      <default>\n        <earliestTime>-15m@m</earliestTime>\n        <latestTime>now</latestTime>\n      </default>\n      <change>\n         <!-- \n          This condition is satisfied for any time selection which doesn't have empty value for\n          token $time.latest$ i.e. e.g. \"All Time\".\n         -->\n         <condition match=\"len($time.latest$)!=0\">\n           <set token=\"latest_time\">$time.latest$</set>\n         </condition>\n         <!-- \n          This condition is satisfied when \"All Time\" is selected.\n          In this case, $time.latest$ will be set to empty string by the component.\n          This causes issue if token is used in a search for comparison value e.g. 'search field=$time.latest$ '  gets evaled as 'search field= '\n          To eliminate this issue, we use the $latest_time$ token set here e.g. 'search field=$latest_time$ '  gets evaled as 'search field=\"\" '\n          This makes the search query complete and works fine.\n         -->\n         <condition  match=\"len($time.latest$)==0\">\n           <set token=\"latest_time\">\"\"</set>\n         </condition>\n         <!-- \n          This condition is satisfied for any time selection which doesn't meet above condition.\n          We set it to now, because the default component value for latestTime is now.\n         -->\n         <condition>\n          <set token=\"latest_time\">now</set>\n         </condition>\n      </change>\n    </input>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"dmc_group\">\n      <label>Group</label>\n      <showClearButton>false</showClearButton>\n      <search>\n        <query>\n          | `dmc_get_groups_containing_role(dmc_group_indexer)`\n          | search search_group!=\"dmc_group_*\"\n        </query>\n      </search>\n      <fieldForLabel>label</fieldForLabel>\n      <fieldForValue>search_group</fieldForValue>\n      <choice value=\"dmc_group_indexer\">All indexers</choice>\n      <default>dmc_group_indexer</default>\n    </input>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"splunk_server\">\n      <label>Instance</label>\n      <showClearButton>false</showClearButton>\n      <search>\n        <query>\n          | `dmc_get_instance_info($dmc_group$)`\n          | search search_group=dmc_group_indexer\n        </query>\n      </search>\n      <fieldForLabel>serverName</fieldForLabel>\n      <fieldForValue>serverName</fieldForValue>\n      <choice value=\"*\">All indexers of selected group</choice>\n      <default>*</default>\n    </input>\n  </fieldset>\n  <init>\n    <unset token=\"sourcetype\"/>\n    <unset token=\"host\"/>\n    <unset token=\"source\"/>\n    <unset token=\"sourcetype_text\"/>\n    <unset token=\"host_and_source_text\"/>\n    <!-- If this is not set, it will remain an unset token $latest_time$ on first page load and query will not execute -->\n    <set token=\"latest_time\">now</set>\n  </init>\n    <search id=\"distribution_base\">\n    <query>\n      (index=* OR index=_*) host=$host$ source=$source$ sourcetype=$sourcetype$ _index_earliest=$time.earliest$ _index_latest=$latest_time$\n      | search splunk_server=*\n      | eval event_size = len(_raw)\n      | eval time_disparity = (_indextime - _time) / 36000\n      | stats count by linecount, event_size, time_disparity\n    </query>\n    <earliest>$time.earliest$</earliest>\n    <latest>$time.latest$</latest>\n  </search>\n  <row>\n    <panel>\n      <table id=\"sourcetypes_table\">\n        <title>Event Processing Issues by Source Type</title>\n        <search id=\"sourcetypes_search\">\n          <query>\n            <![CDATA[\n            `dmc_set_index_internal` search_group=dmc_group_indexer splunk_server=$splunk_server$ source=*splunkd.log*\n            (component=AggregatorMiningProcessor OR component=LineBreakingProcessor OR component=DateParserVerbose OR component=MetricSchemaProcessor OR component=MetricsProcessor)\n            (log_level=WARN OR log_level=ERROR)\n            | rex field=event_message \"Context: source(::|=)(?<context_source>[^\\|]*?)\\|host(::|=)(?<context_host>[^\\|]*?)\\|(?<context_sourcetype>[^\\|]*?)\\|\"\n            | eval data_source = if(isnull(data_source) AND isnotnull(context_source), context_source, data_source)\n            | eval data_host = if(isnull(data_host) AND isnotnull(context_host), context_host, data_host)\n            | eval data_sourcetype = if(isnull(data_sourcetype) AND isnotnull(context_sourcetype), context_sourcetype, data_sourcetype)\n            | stats\n              count(eval(component==\"LineBreakingProcessor\" OR component==\"DateParserVerbose\" OR component==\"AggregatorMiningProcessor\" OR component==\"MetricSchemaProcessor\" OR component==\"MetricsProcessor\")) as total_issues\n              dc(data_host) AS \"Host Count\"\n              dc(data_source) AS \"Source Count\"\n              count(eval(component==\"LineBreakingProcessor\")) AS \"Line Breaking Issues\"\n              count(eval(component==\"DateParserVerbose\")) AS \"Timestamp Parsing Issues\"\n              count(eval(component==\"AggregatorMiningProcessor\")) AS \"Aggregation Issues\"\n              count(eval(component==\"MetricSchemaProcessor\")) AS \"Metric Schema Issues\"\n              count(eval(component==\"MetricsProcessor\")) AS \"Metrics Issues\" by data_sourcetype\n            | sort - total_issues\n            | rename\n              data_sourcetype as Sourcetype\n              total_issues as \"Total Issues\"\n            ]]>\n          </query>\n          <progress>\n            <set token=\"sourcetype_search_string\">$job.eventSearch$</set>\n          </progress>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <drilldown target=\"_blank\">\n          <condition field=\"Sourcetype\">\n            <set token=\"sourcetype\">$row.Sourcetype$</set>\n          </condition>\n          <condition field=\"Line Breaking Issues\">\n            <link target=\"_blank\">search?q=$sourcetype_search_string|u$ | search data_sourcetype=$row.Sourcetype$ component=LineBreakingProcessor &amp;earliest=$time.earliest$&amp;latest=$time.latest$</link>\n          </condition>\n          <condition field=\"Timestamp Parsing Issues\">\n            <link target=\"_blank\">search?q=$sourcetype_search_string|u$ | search data_sourcetype=$row.Sourcetype$ component=DateParserVerbose &amp;earliest=$time.earliest$&amp;latest=$time.latest$</link>\n          </condition>\n          <condition field=\"Aggregation Issues\">\n            <link target=\"_blank\">search?q=$sourcetype_search_string|u$ | search data_sourcetype=$row.Sourcetype$ component=AggregatorMiningProcessor &amp;earliest=$time.earliest$&amp;latest=$time.latest$</link>\n          </condition>\n          <condition field=\"Metric Schema Issues\">\n            <link target=\"_blank\">search?q=$sourcetype_search_string|u$ | search data_sourcetype=$row.Sourcetype$ component=MetricSchemaProcessor &amp;earliest=$time.earliest$&amp;latest=$time.latest$</link>\n          </condition>\n          <condition field=\"Metrics Issues\">\n            <link target=\"_blank\">search?q=$sourcetype_search_string|u$ | search data_sourcetype=$row.Sourcetype$ component=MetricsProcessor &amp;earliest=$time.earliest$&amp;latest=$time.latest$</link>\n          </condition>\n          <condition field=\"*\">\n\t            <link target=\"_blank\">search?q=$sourcetype_search_string|u$ | search data_sourcetype=$row.Sourcetype$ &amp;earliest=$time.earliest$&amp;latest=$time.latest$</link>\n          </condition>\n        </drilldown>\n      </table>\n      <html rejects=\"$sourcetype_text$\">\n        <p>Clicking a source type shows issues by host and source, helping you locate the origin of this data.\n          <a href=\"#\" data-set-token=\"sourcetype_text\" data-value=\"true\">[Show more info]</a>\n        </p>\n      </html>\n      <html depends=\"$sourcetype_text$\">\n        <p>Clicking a source type shows issues by host and source, helping you locate the origin of this data.\n          <a href=\"#\" data-unset-token=\"sourcetype_text\">[Show less info]</a>\n        </p>\n      </html>\n      <html depends=\"$sourcetype_text$\">\n        <p>This table shows errors and warnings emitted when the index-time settings in place do not allow for the\n          proper processing of ingested data. Issues in this table indicate the presence of one or more of these scenarios:\n        </p>\n        <ul>\n          <li>\n            Line Breaking Issues -  Lines in the event are too long and exceed the TRUNCATE setting in props.conf.\n            <a href=\"/help?location=learnmore.monitoringconsole.dataquality.linebreak\" class=\"external\" target=\"_blank\">Learn More.</a>\n          </li>\n          <li>\n            Timestamp Parsing Issues - The extraction of event time stamps was partially or completely unsuccessful.\n            <a href=\"/help?location=learnmore.monitoringconsole.dataquality.timestamp\" class=\"external\" target=\"_blank\">Learn More.</a>\n          </li>\n          <li>\n            Aggregation Issues - The number of lines per event exceeds the MAX_EVENTS setting in props.conf.\n            <a href=\"/help?location=learnmore.monitoringconsole.dataquality.aggregation\" class=\"external\" target=\"_blank\">Learn More.</a>\n          </li>\n          <li>\n            Metric Schema Issues - The conversion of log events to metric data was partially or completely unsuccessful.\n            <a href=\"/help?location=settings.sourcetype.logtometrics\" class=\"external\" target=\"_blank\">Learn More.</a>\n          </li>\n          <li>\n            Metrics Issues - The collection of metric data was partially or completely unsuccessful.\n            <a href=\"/help?location=learnmore.monitoringconsole.dataquality.metrics\" class=\"external\" target=\"_blank\">Learn More.</a>\n          </li>\n        </ul>\n      </html>\n    </panel>\n  </row>\n  <row depends=\"$sourcetype$\">\n    <panel>\n      <table id=\"sourcetype_table\">\n        <title>Issues for source type $sourcetype$ by host and source</title>\n        <search id=\"sourcetype_search\">\n          <query>\n            <![CDATA[\n            `dmc_set_index_internal` search_group=dmc_group_indexer splunk_server=$splunk_server$ source=*splunkd.log*\n            (component=AggregatorMiningProcessor OR component=LineBreakingProcessor OR component=DateParserVerbose OR component=MetricSchemaProcessor OR component=MetricsProcessor)\n            (log_level=WARN OR log_level=ERROR)\n            | rex field=event_message \"Context: source(::|=)(?<context_source>[^\\|]*?)\\|host(::|=)(?<context_host>[^\\|]*?)\\|(?<context_sourcetype>[^\\|]*?)\\|\"\n            | eval data_source = if(isnull(data_source) AND isnotnull(context_source), context_source, data_source)\n            | eval data_host = if(isnull(data_host) AND isnotnull(context_host), context_host, data_host)\n            | eval data_sourcetype = if(isnull(data_sourcetype) AND isnotnull(context_sourcetype), context_sourcetype, data_sourcetype)\n            | search data_sourcetype=$sourcetype$\n            | stats\n              count(eval(component==\"LineBreakingProcessor\" OR component==\"DateParserVerbose\" OR component==\"AggregatorMiningProcessor\" OR component==\"MetricSchemaProcessor\" OR component=\"MetricsProcessor\")) as total_issues\n              count(eval(component==\"LineBreakingProcessor\")) AS \"Line Breaking Issues\"\n              count(eval(component==\"DateParserVerbose\")) AS \"Timestamp Parsing Issues\"\n              count(eval(component==\"AggregatorMiningProcessor\")) AS \"Aggregation Issues\"\n              count(eval(component==\"MetricSchemaProcessor\")) AS \"Metric Schema Issues\"\n              count(eval(component==\"MetricsProcessor\")) AS \"Metrics Issues\" by data_host, data_source\n            | sort - total_issues\n            | rename\n              data_host as Host\n              data_source as Source\n              total_issues as \"Total Issues\"\n            ]]>\n          </query>\n          <progress>\n            <set token=\"host_and_source_search_string\">$job.eventSearch$</set>\n          </progress>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <drilldown target=\"_blank\">\n          <condition field=\"Host\">\n            <set token=\"host\">$row.Host$</set>\n            <set token=\"source\">$row.Source$</set>\n          </condition>\n          <condition field=\"Source\">\n            <set token=\"host\">$row.Host$</set>\n            <set token=\"source\">$row.Source$</set>\n          </condition>\n          <condition field=\"Line Breaking Issues\">\n            <link target=\"_blank\">search?q=$host_and_source_search_string|u$ | search data_host=$row.Host$ data_source=$row.Source$ component=LineBreakingProcessor &amp;earliest=$time.earliest$&amp;latest=$time.latest$</link>\n          </condition>\n          <condition field=\"Timestamp Parsing Issues\">\n            <link target=\"_blank\">search?q=$host_and_source_search_string|u$ | search data_host=$row.Host$ data_source=$row.Source$ component=DateParserVerbose &amp;earliest=$time.earliest$&amp;latest=$time.latest$</link>\n          </condition>\n          <condition field=\"Aggregation Issues\">\n            <link target=\"_blank\">search?q=$host_and_source_search_string|u$ | search data_host=$row.Host$ data_source=$row.Source$ component=AggregatorMiningProcessor &amp;earliest=$time.earliest$&amp;latest=$time.latest$</link>\n          </condition>\n          <condition field=\"Metric Schema Issues\">\n            <link target=\"_blank\">search?q=$sourcetype_search_string|u$ | search data_sourcetype=$row.Sourcetype$ component=MetricSchemaProcessor &amp;earliest=$time.earliest$&amp;latest=$time.latest$</link>\n          </condition>\n          <condition field=\"Metrics Issues\">\n            <link target=\"_blank\">search?q=$sourcetype_search_string|u$ | search data_sourcetype=$row.Sourcetype$ component=MetricsProcessor &amp;earliest=$time.earliest$&amp;latest=$time.latest$</link>\n          </condition>\n          <condition field=\"*\">\n            <link target=\"_blank\">search?q=$host_and_source_search_string|u$ | search data_host=$row.Host$ data_source=$row.Source$ &amp;earliest=$time.earliest$&amp;latest=$time.latest$</link>\n          </condition>\n        </drilldown>\n      </table>\n      <html rejects=\"$host_and_source_text$\">\n        <p>\n          Clicking a host or source shows statistics for events from that host and source.\n          <a href=\"#\" data-set-token=\"host_and_source_text\" data-value=\"true\">[Show more info]</a>\n        </p>\n      </html>\n      <html depends=\"$host_and_source_text$\">\n        <p>\n          Clicking a host or source shows statistics for events from that host and source.\n          <a href=\"#\" data-unset-token=\"host_and_source_text\">[Show less info]</a>\n        </p>\n      </html>\n      <html depends=\"$host_and_source_text$\">\n        <p>This table shows errors and warnings emitted when the index-time settings in place do not allow for the\n          proper processing of ingested data. Issues in this table indicate the presence of one or more of these scenarios:\n        </p>\n        <ul>\n          <li>\n            Line Breaking Issues -  Lines in the event are too long and exceed the TRUNCATE setting in props.conf.\n            <a href=\"/help?location=learnmore.monitoringconsole.dataquality.linebreak\" class=\"external\" target=\"_blank\">Learn More.</a>\n          </li>\n          <li>\n            Timestamp Parsing Issues - The extraction of event time stamps was partially or completely unsuccessful.\n              <a href=\"/help?location=learnmore.monitoringconsole.dataquality.timestamp\" class=\"external\" target=\"_blank\">Learn More.</a>\n          </li>\n          <li>\n            Aggregation Issues - The number of lines per event exceeds the MAX_EVENTS setting in props.conf.\n            <a href=\"/help?location=learnmore.monitoringconsole.dataquality.aggregation\" class=\"external\" target=\"_blank\">Learn More.</a>\n          </li>\n          <li>\n            Metric Schema Issues - The conversion of log events to metric data was partially or completely unsuccessful.\n            <a href=\"/help?location=settings.sourcetype.logtometrics\" class=\"external\" target=\"_blank\">Learn More.</a>\n          </li>\n          <li>\n            Metrics Issues - The collection of metric data was partially or completely unsuccessful.\n            <a href=\"/help?location=learnmore.monitoringconsole.dataquality.metrics\" class=\"external\" target=\"_blank\">Learn More.</a>\n          </li>\n        </ul>\n      </html>\n      <html>\n        <a href=\"#\" data-unset-token=\"sourcetype\">[Close this panel]</a>\n      </html>\n    </panel>\n  </row>\n  <row depends=\"$host$, $source$, $sourcetype$\">\n    <panel>\n      <table id=\"line_count_distribution_chart\">\n        <title>Event Line Count</title>\n        <search base=\"distribution_base\" id=\"line_count_distribution_search\">\n          <query>\n            | stats sum(count) as \"Event Count\" by linecount\n            | rename linecount as \"Line Count\"\n          </query>\n        </search>\n      </table>\n      <html>\n        <p>\n          <a href=\"/help?location=learnmore.monitoringconsole.dataquality.linecount\" class=\"external\" target=\"_blank\">Learn More.</a>\n        </p>\n        <p>\n          <a href=\"#\" data-unset-token=\"host\">[Close these panels]</a>\n        </p>\n      </html>\n    </panel>\n    <panel>\n      <chart id=\"event_size_distribution_chart\">\n        <title>Event Size</title>\n        <search base=\"distribution_base\" id=\"event_size_distribution_search\">\n          <query>\n            | bin event_size span=log2\n            | stats sum(count) as \"Event Count\" by event_size\n            | rename event_size as \"Event Size (bytes)\"\n            </query>\n        </search>\n        <option name=\"charting.legend.placement\">none</option>\n      </chart>\n      <html>\n        <a href=\"/help?location=learnmore.monitoringconsole.dataquality.eventsize\" class=\"external\" target=\"_blank\">Learn More.</a>\n      </html>\n    </panel>\n    <panel>\n      <chart id=\"time_disparity_distribution_chart\">\n        <title>Event Time Disparity</title>\n        <search base=\"distribution_base\" id=\"time_disparity_distribution_search\">\n          <query>\n            | bin time_disparity span=1 start=-24 end=-24\n            | stats sum(count) as \"Event Count\" by time_disparity\n            | rename time_disparity as \"Observed Latency (hours)\"\n          </query>\n        </search>\n         <option name=\"charting.legend.placement\">none</option>\n      </chart>\n      <html>\n        <p>Latency = _indextime - _time.</p>\n        <p>If the latency is off by multiples of approximately an hour, you might have a timezone configuration issue.</p>\n        <p>If the latency is suspiciously large, there is a possibility the timestamp is extracted incorrectly.</p>\n        <a href=\"/help?location=learnmore.monitoringconsole.dataquality.delay\" class=\"external\" target=\"_blank\">Learn More.</a>\n      </html>\n    </panel>\n  </row>\n</dashboard>",
"eai:type": "views",
"name": "data_quality",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" script=\"common_control.js\" stylesheet=\"shared.css, health-check.css\">\n  <label>Distributed Search: Deployment</label>\n  <fieldset autoRun=\"true\" submitButton=\"false\">\n    <input type=\"radio\" searchWhenChanged=\"true\" token=\"role\">\n      <label>Role</label>\n      <choice value=\"dmc_group_search_head\">Search Heads</choice>\n      <choice value=\"dmc_group_indexer\">Indexers (Search Peers)</choice>\n      <default>dmc_group_search_head</default>\n      <change>\n        <condition value=\"dmc_group_search_head\">\n          <set token=\"instances_snapshot_title\">Search Heads</set>\n          <set token=\"show_peer_heartbeat_log\">true</set>\n          <set token=\"show_peer_status_health_kpi\">true</set>\n          <set token=\"bundles_group\">bundles_uploads</set>\n          <set token=\"bundles_group_label\">Upload</set>\n          <set token=\"instance_fields_filter\">fields splunk_server, peer_count, bundle_file_count, avg_baseline_mb, avg_sec, \"Dispatch_Directory_Reaper_Average_Time(ms)\", \"Dispatch_Directory_Reaper_Max_Time(ms)\"</set>\n          <unset token=\"show_bundle_reaper\"></unset>\n        </condition>\n        <condition value=\"dmc_group_indexer\">\n          <set token=\"instances_snapshot_title\">Search Peers</set>\n          <unset token=\"show_peer_heartbeat_log\"></unset>\n          <unset token=\"show_peer_status_health_kpi\"></unset>\n          <set token=\"bundles_group\">bundles_downloads</set>\n          <set token=\"bundles_group_label\">Download</set>\n          <set token=\"instance_fields_filter\">fields splunk_server, bundle_file_count, avg_sec, \"Bundle_Directory_Reaper_Average_Time(ms)\", \"Bundle_Directory_Reaper_Max_Time(ms)\", \"Dispatch_Directory_Reaper_Average_Time(ms)\", \"Dispatch_Directory_Reaper_Max_Time(ms)\"</set>\n          <set token=\"show_bundle_reaper\">true</set>\n        </condition>\n      </change>\n    </input>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"group\">\n      <label>Group</label>\n      <showClearButton>false</showClearButton>\n      <search fieldForValue=\"search_group\">\n        <query>| `dmc_get_groups_containing_role($role|h$)` | search search_group!=\"dmc_group_*\"</query>\n      </search>\n      <fieldForLabel>label</fieldForLabel>\n      <fieldForValue>search_group</fieldForValue>\n      <choice value=\"*\">All</choice>\n      <selectFirstChoice>true</selectFirstChoice>\n    </input>\n  </fieldset>\n  <row>\n    <panel rejects=\"$historical$\" depends=\"$show_peer_status_health_kpi$\">\n      <title>Health Check</title>\n      <search id=\"peer_status_health_api_base\">\n        <query>\n          | rest splunk_server_group=$role|h$ splunk_server_group=\"$group$\" /services/search/distributed/peers\n          | join type=outer title, splunk_server [\n          | rest splunk_server_group=$role|h$ splunk_server_group=\"$group$\" /services/server/introspection/search/distributed\n          | where title != \"per_searchhead_metrics\" AND title != \"window_metrics\"\n          ]\n          | fields status, health_status, splunk_server, peerName\n        </query>\n      </search>\n      <viz type=\"splunk_monitoring_console.KpiTrafficLight\">\n        <search base=\"peer_status_health_api_base\">\n          <query>\n            where status!=\"Up\"\n            | stats dc(splunk_server) as down_count, values(splunk_server) as splunk_server\n          </query>\n          <preview>\n            <set token=\"down_count\">$result.down_count$</set>\n          </preview>\n        </search>\n        <option name=\"height\">45</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.field\">down_count</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.detail\">splunk_server</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.rangeValues\">[0]</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.rangeIcons\">[\"success\", \"error\"]</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.rangeLabels\">[\"All search heads' peers are up.\", \"$down_count$ search heads have peers that are not up.\"]</option>\n        <!--<option name=\"splunk_monitoring_console.KpiTrafficLight.description\">Please check your network connectivity and make sure all search heads' peers are running.</option>-->\n      </viz>\n      <viz type=\"splunk_monitoring_console.KpiTrafficLight\">\n        <search base=\"peer_status_health_api_base\">\n          <!-- can use this search string to test tooltip: -->\n          <!-- eval health_status = if(random() % 2 == 1, \"Healthy\", \"Unhealthy\") -->\n          <query>\n            where health_status!=\"Healthy\"\n            | stats dc(splunk_server) as unhealthy_count, values(splunk_server) as splunk_server\n          </query>\n          <preview>\n            <set token=\"unhealthy_count\">$result.unhealthy_count$</set>\n          </preview>\n        </search>\n        <option name=\"height\">50</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.field\">unhealthy_count</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.detail\">splunk_server</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.rangeValues\">[0]</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.rangeIcons\">[\"success\", \"error\"]</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.rangeLabels\">[\"All search heads' peers are healthy.\", \"$unhealthy_count$ search heads have peers that are unhealthy.\"]</option>\n        <!--<option name=\"splunk_monitoring_console.KpiTrafficLight.description\">Please check the \"Distributed Search: Instance\" dashboard to see the details of unhealthy peers.</option>-->\n      </viz>\n    </panel>\n  </row>\n  <row>\n    <panel>\n      <html>\n        <h2>\n          <span>Select views: </span>\n          <span id=\"link-switcher-view\">\n            <a href=\"#\" class=\"btn-pill active\" data-item=\"all\">All</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"snapshot\">Snapshot</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"historical\">Historical</a>\n          </span>\n        </h2>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Snapshots</title>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>$instances_snapshot_title$ ($instance_count$)</title>\n      <table>\n        <search>\n          <query>\n            | rest splunk_server_group=$role|h$ splunk_server_group=\"$group$\" /services/server/introspection/search/distributed/window_metrics\n            | eval avg_baseline_mb = if(isNotNull(average_baseline_file_size), round(average_baseline_file_size /1024 / 1024, 2), \"Unknown\")\n            | eval avg_sec = round(average_msecs / 1000, 2)\n            | eval bundle_file_count = if(isNotNull(bundle_file_count), bundle_file_count, count)\n            | fields splunk_server, bundle_file_count, avg_baseline_mb, avg_sec\n            | join type=outer splunk_server [\n              | rest splunk_server_group=$role|h$ splunk_server_group=\"$group$\" /services/search/distributed/peers\n              | stats count as peer_count by splunk_server\n            ]\n            | join type=outer splunk_server [\n              | rest splunk_server_group=$role|h$ splunk_server_group=\"$group$\" /services/server/introspection/search/dispatch/Bundle_Directory_Reaper\n              | eval Bundle_Directory_Reaper_Average_Time(ms) = round('Bundle_Directory_Reaper_Average_Time(ms)')\n              | eval Bundle_Directory_Reaper_Max_Time(ms) = round('Bundle_Directory_Reaper_Max_Time(ms)')\n              | fields splunk_server, \"Bundle_Directory_Reaper_Average_Time(ms)\", \"Bundle_Directory_Reaper_Max_Time(ms)\"\n            ]\n            | join type=outer splunk_server [\n              | rest splunk_server_group=$role|h$ splunk_server_group=\"$group$\" /services/server/introspection/search/dispatch/Dispatch_Directory_Reaper\n              | eval Dispatch_Directory_Reaper_Average_Time(ms) = round('Dispatch_Directory_Reaper_Average_Time(ms)')\n              | eval Dispatch_Directory_Reaper_Max_Time(ms) = round('Dispatch_Directory_Reaper_Max_Time(ms)')\n              | fields splunk_server, \"Dispatch_Directory_Reaper_Average_Time(ms)\", \"Dispatch_Directory_Reaper_Max_Time(ms)\"\n            ]\n            | $instance_fields_filter$\n            | rename splunk_server as Instance, peer_count as \"Peer Count\", bundle_file_count as \"Knowledge Bundle Replication Count\", avg_baseline_mb as \"Average Size of Baseline Knowledge Bundle (MB)\", avg_sec as \"Average Time Spent on Knowledge Bundle Replication (sec)\", \"Bundle_Directory_Reaper_Average_Time(ms)\" as \"Average Time to Reap Knowledge Bundle Directory (ms)\", \"Bundle_Directory_Reaper_Max_Time(ms)\" as \"Max Time to Reap Knowledge Bundle Directory (ms)\", \"Dispatch_Directory_Reaper_Average_Time(ms)\" as \"Average Time to Reap Dispatch Directory (ms)\", \"Dispatch_Directory_Reaper_Max_Time(ms)\" as \"Max Time to Reap Dispatch Directory (ms)\"\n          </query>\n          <preview>\n            <set token=\"instance_count\">$job.resultCount$</set>\n          </preview>\n          <finalized>\n            <set token=\"instance_count\">$job.resultCount$</set>\n          </finalized>\n        </search>\n        <option name=\"drilldown\">row</option>\n        <drilldown>\n          <link target=\"_blank\">\n            <![CDATA[\n              distributed_search_instance?form.splunk_server=$row.Instance$&form.role=$role|h$\n            ]]>\n          </link>\n        </drilldown>\n      </table>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Historical Charts</title>\n      <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n        <label>Time Range:</label>\n        <default>\n          <earliestTime>-4h@m</earliestTime>\n          <latestTime>now</latestTime>\n        </default>\n      </input>\n      <input type=\"checkbox\" searchWhenChanged=\"true\" token=\"split_by_host\">\n        <label></label>\n        <choice>Split by host</choice>\n      </input>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$, $split_by_host$\" depends=\"$show_peer_heartbeat_log$\">\n      <title>Peer Heartbeat</title>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"peer_heartbeat_no_split_agg\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"mean\">Average</choice>\n        <choice value=\"max\">Maximum</choice>\n        <default>max</default>\n      </input>\n      <chart>\n        <title>Time to Get Authentication, Bundle List, and Peer Info</title>\n        <search>\n          <query>\n            `dmc_set_index_internal` sourcetype=splunkd group=search_health_metrics name=distributed_peer_heartbeat search_group=$role|h$ search_group=\"$group$\"\n            | `dmc_timechart_for_metrics_reaper_and_heartbeat`\n              avg(get_auth_$peer_heartbeat_no_split_agg$_ms) as get_auth_$peer_heartbeat_no_split_agg$_ms\n              avg(get_bundleList_$peer_heartbeat_no_split_agg$_ms) as get_bundleList_$peer_heartbeat_no_split_agg$_ms\n              avg(get_serverInfo_$peer_heartbeat_no_split_agg$_ms) as get_serverInfo_$peer_heartbeat_no_split_agg$_ms\n            | eval get_auth_$peer_heartbeat_no_split_agg$_ms = round(get_auth_$peer_heartbeat_no_split_agg$_ms)\n            | eval get_bundleList_$peer_heartbeat_no_split_agg$_ms = round(get_bundleList_$peer_heartbeat_no_split_agg$_ms)\n            | eval get_serverInfo_$peer_heartbeat_no_split_agg$_ms = round(get_serverInfo_$peer_heartbeat_no_split_agg$_ms)\n            | rename get_auth_$peer_heartbeat_no_split_agg$_ms as \"Get Authentication\",\n                get_bundleList_$peer_heartbeat_no_split_agg$_ms as \"Get Bundle List\",\n                get_serverInfo_$peer_heartbeat_no_split_agg$_ms as \"Get Peer Info\"\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Time Spent (ms)</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n      </chart>\n      <html>\n        <p><b>Authentication:</b> the search head requests an authentication token from the peer's /services/admin/auth-tokens endpoint. </p>\n        <p><b>Get Bundle List:</b> the search head requests a list of available knowledge bundles from the peer's /services/admin/bundles endpoint. </p>\n        <p><b>Get Peer Info:</b> the search head requests instance information from the peer's /services/server/info endpoint. </p>\n      </html>\n    </panel>\n    <!-- <panel rejects=\"$snapshot$\" depends=\"$split_by_host$, $show_peer_heartbeat_log$\">\n      <title>Peer Count</title>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"peer_count_agg\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"avg\">Average</choice>\n        <choice value=\"min\">Minimum</choice>\n        <choice value=\"max\">Maximum</choice>\n        <default>min</default>\n      </input>\n      <input type=\"text\" searchWhenChanged=\"true\" token=\"peer_count_filter\">\n        <label>Count > </label>\n        <default>0</default>\n      </input>\n      <chart>\n        <search>\n          <query>\n            `dmc_set_index_internal` sourcetype=splunkd group=search_health_metrics name=distributed_peer_heartbeat search_group=$role|h$ search_group=\"$group$\"\n            | where Peer_Count > $peer_count_filter$\n            | `dmc_timechart_for_metrics_reaper_and_heartbeat` $peer_count_agg$(Peer_Count) as peer_count by host\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Count</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n      </chart>\n    </panel> -->\n    <panel rejects=\"$snapshot$\" depends=\"$split_by_host$, $show_peer_heartbeat_log$\">\n      <title>Peer Heartbeat: Time to Get $peer_heartbeat_metric_label$</title>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"peer_heartbeat_metric\">\n        <label>Metric</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"auth\">Authentication</choice>\n        <choice value=\"bundleList\">Bundle List</choice>\n        <choice value=\"serverInfo\">Peer Info</choice>\n        <default>serverInfo</default>\n        <change>\n          <set token=\"peer_heartbeat_metric_label\">$label$</set>\n        </change>\n      </input>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"peer_heartbeat_split_agg\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"mean\">Average</choice>\n        <choice value=\"max\">Maximum</choice>\n        <default>max</default>\n      </input>\n      <input type=\"text\" searchWhenChanged=\"true\" token=\"peer_heartbeat_metric_filter\">\n        <label>Time to Get $peer_heartbeat_metric_label$ > </label>\n        <default>0</default>\n      </input>\n      <chart>\n        <search>\n          <query>\n            `dmc_set_index_internal` sourcetype=splunkd group=search_health_metrics name=distributed_peer_heartbeat search_group=$role|h$ search_group=\"$group$\"\n            | where get_$peer_heartbeat_metric$_$peer_heartbeat_split_agg$_ms > $peer_heartbeat_metric_filter$\n            | `dmc_timechart_for_metrics_reaper_and_heartbeat` $peer_heartbeat_split_agg$(get_$peer_heartbeat_metric$_$peer_heartbeat_split_agg$_ms) as metric by host\n            | eval metric = round(metric)\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Time Spent (ms)</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n      </chart>\n      <html>\n        <p><b>Authentication:</b> the search head requests an authentication token from the peer's /services/admin/auth-tokens endpoint. </p>\n        <p><b>Get Bundle List:</b> the search head requests a list of available knowledge bundles from the peer's /services/admin/bundles endpoint. </p>\n        <p><b>Get Peer Info:</b> the search head requests instance information from the peer's /services/server/info endpoint. </p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$, $split_by_host$\">\n      <title>Knowledge Bundle $bundles_group_label$ Activity</title>\n      <search id=\"bundle_rep_log_base\">\n        <query>\n          `dmc_set_index_internal` sourcetype=splunkd group=$bundles_group$ search_group=$role|h$ search_group=\"$group$\"\n          | `dmc_timechart_for_metrics_log` sum(total_count) as total_count,\n            sum(success_count) as success_count, sum(failure_count) as failure_count,\n            sum(baseline_count) as baseline_count, sum(delta_count) as delta_count,\n            sum(already_present_count) as already_present_count, sum(unattempted_count) as unattempted_count,\n            sum(total_msec_spent), as total_msec_spent,\n            sum(baseline_msec_spent) as baseline_msec_spent, sum(delta_msec_spent) as delta_msec_spent,\n            sum(total_bytes) as total_bytes,\n            sum(baseline_bytes) as baseline_bytes, sum(delta_bytes) as delta_bytes\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <chart>\n        <title>Total $bundles_group_label$ Count</title>\n        <search base=\"bundle_rep_log_base\">\n          <query>\n            fields _time, baseline_count, delta_count\n          </query>\n        </search>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Count</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n      </chart>\n      <chart>\n        <title>Total $bundles_group_label$ Size</title>\n        <search base=\"bundle_rep_log_base\">\n          <query>\n            eval baseline_size_mb = round(baseline_bytes / 1024 / 1024, 2)\n            | eval delta_size_mb = round(delta_bytes / 1024 / 1024, 2)\n            | fields _time, baseline_size_mb, delta_size_mb\n          </query>\n        </search>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Size (MB)</option>\n      </chart>\n      <chart>\n        <title>Total $bundles_group_label$ Time</title>\n        <search base=\"bundle_rep_log_base\">\n          <query>\n            eval baseline_sec_spent = round(baseline_msec_spent / 1000, 2)\n            | eval delta_sec_spent = round(delta_msec_spent / 1000, 2)\n            | fields _time, baseline_sec_spent, delta_sec_spent\n          </query>\n        </search>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Time Spent (sec)</option>\n      </chart>\n    </panel>\n    <panel rejects=\"$snapshot$\" depends=\"$split_by_host$\">\n      <title>Bundle $bundles_group_label$ Activity</title>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"bundle_rep_mode\">\n        <label>Mode</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"baseline\">Baseline</choice>\n        <choice value=\"delta\">Delta</choice>\n        <choice value=\"total\">Baseline + Delta</choice>\n        <default>total</default>\n        <change>\n          <set token=\"bundle_rep_mode_label\">$label$</set>\n        </change>\n      </input>\n      <chart>\n        <title>$bundle_rep_mode_label$ $bundles_group_label$ Count</title>\n        <search>\n          <query>\n            `dmc_set_index_internal` sourcetype=splunkd group=$bundles_group$ search_group=$role|h$ search_group=\"$group$\"\n            | `dmc_timechart_for_metrics_log` sum($bundle_rep_mode$_count) as count by host\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Count</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n      </chart>\n      <chart>\n        <title>$bundle_rep_mode_label$ $bundles_group_label$ Size</title>\n        <search>\n          <query>\n            `dmc_set_index_internal` sourcetype=splunkd group=$bundles_group$ search_group=$role|h$ search_group=\"$group$\"\n            | eval $bundle_rep_mode$_mb = round($bundle_rep_mode$_bytes / 1024 / 1024, 2)\n            | `dmc_timechart_for_metrics_log` sum($bundle_rep_mode$_mb) as size by host\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Size (MB)</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n      </chart>\n      <chart>\n        <title>$bundle_rep_mode_label$ $bundles_group_label$ Time</title>\n        <search>\n          <query>\n            `dmc_set_index_internal` sourcetype=splunkd group=$bundles_group$ search_group=$role|h$ search_group=\"$group$\"\n            | eval $bundle_rep_mode$_sec_spent = round($bundle_rep_mode$_msec_spent / 1000, 2)\n            | `dmc_timechart_for_metrics_log` sum($bundle_rep_mode$_sec_spent) as msec_spent by host\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Time Spent (sec)</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <html>\n        <p>Total $bundles_group_label$ size is the sum of all bundles sent by all search heads to all search peers.</p>\n        <p>Total $bundles_group_label$ time is the sum of all time taken by all search heads to push bundles to all search peers.</p>\n        <p>Time spent is related to bundle size, larger bundles take more time to be replicated.</p>\n        <p>These panels account for the replication of both baseline (full bundle) and delta (incremental changes only) bundles.</p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$, $split_by_host$\">\n      <title>Time to Reap</title>\n      <chart>\n        <title>Dispatch Directory</title>\n        <search>\n          <query>\n            `dmc_set_index_internal` sourcetype=splunkd group=search_health_metrics name=dispatch_directory_reaper search_group=$role|h$ search_group=\"$group$\"\n            | `dmc_timechart_for_metrics_reaper_and_heartbeat` avg(dispatch_dir_reaper_mean_ms) as dispatch_dir_reaper_mean_ms, max(dispatch_dir_reaper_max_ms) as dispatch_dir_reaper_max_ms\n            | eval dispatch_dir_reaper_mean_ms = round(dispatch_dir_reaper_mean_ms)\n            | eval dispatch_dir_reaper_max_ms = round(dispatch_dir_reaper_max_ms)\n            | rename dispatch_dir_reaper_mean_ms as Average, dispatch_dir_reaper_max_ms as Max\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Time Spent (ms)</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n      </chart>\n      <chart depends=\"$show_bundle_reaper$\">\n        <title>Bundle Directory</title>\n        <search>\n          <query>\n            `dmc_set_index_internal` sourcetype=splunkd group=search_health_metrics name=bundle_directory_reaper search_group=$role|h$ search_group=\"$group$\"\n            | `dmc_timechart_for_metrics_reaper_and_heartbeat` avg(bundle_dir_reaper_mean_ms) as bundle_dir_reaper_mean_ms, max(bundle_dir_reaper_max_ms) as bundle_dir_reaper_max_ms\n            | eval bundle_dir_reaper_mean_ms = round(bundle_dir_reaper_mean_ms)\n            | eval bundle_dir_reaper_max_ms = round(bundle_dir_reaper_max_ms)\n            | rename bundle_dir_reaper_mean_ms as Average, bundle_dir_reaper_max_ms as Max\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Time Spent (ms)</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n      </chart>\n    </panel>\n    <panel rejects=\"$snapshot$\" depends=\"$split_by_host$\">\n      <title>Time to Reap Directories</title>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"reaper_agg\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"mean\">Average</choice>\n        <choice value=\"max\">Maximum</choice>\n        <default>max</default>\n      </input>\n      <input type=\"text\" searchWhenChanged=\"true\" token=\"dispatch_dir_filter\">\n        <label>Time to Reap Dispatch Directory > </label>\n        <default>0</default>\n      </input>\n      <input type=\"text\" searchWhenChanged=\"true\" depends=\"$show_bundle_reaper$\" token=\"bundle_dir_filter\">\n        <label>Time to Reap Bundle Directory</label>\n        <default>0</default>\n      </input>\n      <chart>\n        <title>Dispatch Directory Reaper</title>\n        <search>\n          <query>\n            `dmc_set_index_internal` sourcetype=splunkd group=search_health_metrics name=dispatch_directory_reaper search_group=$role|h$ search_group=\"$group$\"\n            | where dispatch_dir_reaper_$reaper_agg$_ms > $dispatch_dir_filter$\n            | eval dispatch_dir_reaper_$reaper_agg$_ms = round(dispatch_dir_reaper_$reaper_agg$_ms)\n            | `dmc_timechart_for_metrics_reaper_and_heartbeat` $reaper_agg$(dispatch_dir_reaper_$reaper_agg$_ms) as dispatch_dir_reaper_ms by host\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Time Spent (ms)</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n      </chart>\n      <html>\n        <p>The dispatch reaper clears expired search artifacts from the dispatch directory. <a href=\"/help?location=learnmore.dmc.distsearch.dispatch\" target=\"_blank\" title=\"Splunk help\">Learn More</a></p>\n        <p>Long reap times can indicate storage performance issues or an <a href=\"/help?location=learnmore.dmc.distsearch.searchartifacts\" target=\"_blank\" title=\"Splunk help\">excessive number of artifacts</a>.</p>\n        <p>The Average reap time is averaged across all instances in scope.</p>\n        <p>The Maximum reap time is the highest reap time across all instances in scope.</p>\n      </html>\n      <chart depends=\"$show_bundle_reaper$\">\n        <title>Bundle Directory Reaper</title>\n        <search>\n          <query>\n            `dmc_set_index_internal` sourcetype=splunkd group=search_health_metrics name=bundle_directory_reaper search_group=$role|h$ search_group=\"$group$\"\n            | where bundle_dir_reaper_$reaper_agg$_ms > $bundle_dir_filter$\n            | `dmc_timechart_for_metrics_reaper_and_heartbeat` $reaper_agg$(bundle_dir_reaper_$reaper_agg$_ms) as bundle_dir_reaper_$reaper_agg$_ms by host\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Time Spent (ms)</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n      </chart>\n      <html depends=\"$show_bundle_reaper$\">\n        <p>The knowledge bundle reaper clears expired knowledge bundles from a search peer's $SPLUNK_HOME/var/run/searchpeers directory.</p>\n        <p>Long reap times can indicate storage performance issues or an excessive number of bundles.</p>\n        <p>The Average reap time is averaged across all instances in scope.</p>\n        <p>The Maximum reap time is the highest reap time across all instances in scope.</p>\n      </html>\n    </panel>\n  </row>\n</form>",
"eai:type": "views",
"name": "distributed_search_deployment",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" script=\"common_control.js\">\n  <label>Distributed Search: Instance</label>\n  <fieldset autoRun=\"true\" submitButton=\"false\">\n    <input type=\"radio\" searchWhenChanged=\"true\" token=\"role\">\n      <label>Role</label>\n      <choice value=\"dmc_group_search_head\">Search Heads</choice>\n      <choice value=\"dmc_group_indexer\">Indexers (Search Peers)</choice>\n      <default>dmc_group_search_head</default>\n      <change>\n        <condition value=\"dmc_group_search_head\">\n          <set token=\"show_peer_status_health_kpi\">true</set>\n          <unset token=\"show_bundle_reaper\"></unset>\n          <set token=\"show_peers\">true</set>\n          <set token=\"show_peer_heartbeat_log\">true</set>\n          <set token=\"bundles_group\">bundles_uploads</set>\n          <set token=\"bundles_group_label\">Upload</set>\n        </condition>\n        <condition value=\"dmc_group_indexer\">\n          <unset token=\"show_peer_status_health_kpi\"></unset>\n          <unset token=\"show_peers\"></unset>\n          <unset token=\"show_peer_heartbeat_log\"></unset>\n          <set token=\"show_bundle_reaper\">true</set>\n          <set token=\"bundles_group\">bundles_downloads</set>\n          <set token=\"bundles_group_label\">Download</set>\n        </condition>\n      </change>\n    </input>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"dmc_group\">\n      <label>Group</label>\n      <showClearButton>false</showClearButton>\n      <search>\n        <query>\n          | `dmc_get_groups_containing_role($role$)`\n          | search search_group!=\"dmc_group_*\"\n        </query>\n      </search>\n      <fieldForLabel>label</fieldForLabel>\n      <fieldForValue>search_group</fieldForValue>\n      <choice value=\"*\">All</choice>\n      <default>*</default>\n    </input>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"splunk_server\">\n      <label>Instance</label>\n      <showClearButton>false</showClearButton>\n      <search>\n        <query>\n          | `dmc_get_instance_info($dmc_group$)`\n          | where search_group=\"$role$\"\n        </query>\n      </search>\n      <fieldForLabel>serverName</fieldForLabel>\n      <fieldForValue>serverName</fieldForValue>\n      <selectFirstChoice>true</selectFirstChoice>\n      <change>\n        <condition value=\"*\">\n          <set token=\"host\">$row.host$</set>\n        </condition>\n      </change>\n    </input>\n  </fieldset>\n  <search id=\"peers_base\">\n    <query>\n      | rest splunk_server=$splunk_server$ /services/search/distributed/peers\n      | join type=outer title [\n        | rest splunk_server=$splunk_server$ /services/server/introspection/search/distributed\n        | where title != \"per_searchhead_metrics\" AND title != \"window_metrics\"\n        | fields title, get_auth_max_ms, get_auth_mean_ms, get_bundleList_max_ms, get_bundleList_mean_ms, get_serverInfo_max_ms, get_serverInfo_mean_ms, health_status, health_check_failures\n        | eval get_auth_max_ms = round(get_auth_max_ms, 0)\n        | eval get_auth_mean_ms = round(get_auth_mean_ms, 0)\n        | eval get_bundleList_max_ms = round(get_bundleList_max_ms, 0)\n        | eval get_bundleList_mean_ms = round(get_bundleList_mean_ms, 0)\n        | eval get_serverInfo_max_ms = round(get_serverInfo_max_ms, 0)\n        | eval get_serverInfo_mean_ms = round(get_serverInfo_mean_ms, 0)\n      ]\n    </query>\n    <preview>\n      <eval token=\"peer_count\">if(isnotnull('job.resultCount'), 'job.resultCount', 0)</eval>\n    </preview>\n    <finalized>\n      <eval token=\"peer_count\">if(isnotnull('job.resultCount'), 'job.resultCount', 0)</eval>\n    </finalized>\n  </search>\n  <search id=\"bundle_rep_log_base\">\n    <query>\n      `dmc_set_index_internal` sourcetype=splunkd group=$bundles_group$ host=$host$\n      | `dmc_timechart_for_metrics_log` sum(total_count) as total_count, sum(success_count) as success_count, sum(failure_count) as failure_count, sum(baseline_count) as baseline_count, sum(delta_count) as delta_count, sum(already_present_count) as already_present_count, sum(unattempted_count) as unattempted_count, sum(total_msec_spent), as total_msec_spent, sum(baseline_msec_spent) as baseline_msec_spent, sum(delta_msec_spent) as delta_msec_spent, sum(total_bytes) as total_bytes, sum(baseline_bytes) as baseline_bytes, sum(delta_bytes) as delta_bytes\n    </query>\n    <earliest>$time.earliest$</earliest>\n    <latest>$time.latest$</latest>\n  </search>\n  <row>\n    <panel depends=\"$show_peer_status_health_kpi$\">\n      <title>Health Check</title>\n      <viz type=\"splunk_monitoring_console.KpiTrafficLight\">\n        <search base=\"peers_base\">\n          <query>\n            where status!=\"Up\"\n            | stats count as down_count, values(peerName) as peer_name\n          </query>\n          <preview>\n            <set token=\"down_count\">$result.down_count$</set>\n          </preview>\n        </search>\n        <option name=\"height\">45</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.field\">down_count</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.detail\">peer_name</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.rangeValues\">[0]</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.rangeIcons\">[\"success\", \"error\"]</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.rangeLabels\">[\"All peers are up.\", \"$down_count$ peers are down.\"]</option>\n        <!--<option name=\"splunk_monitoring_console.KpiTrafficLight.description\">Please check your network connectivity and make sure all search peers are running.</option>-->\n      </viz>\n      <viz type=\"splunk_monitoring_console.KpiTrafficLight\">\n        <search base=\"peers_base\">\n          <!-- can use this search string to test tooltip: -->\n          <!-- eval health_status = if(random() % 2 == 1, \"Healthy\", \"Unhealthy\") -->\n          <query>\n            where health_status!=\"Healthy\"\n            | stats count as unhealthy_count, values(peerName) as peer_name\n          </query>\n          <preview>\n            <set token=\"unhealthy_count\">$result.unhealthy_count$</set>\n          </preview>\n        </search>\n        <option name=\"height\">50</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.field\">unhealthy_count</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.detail\">peer_name</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.rangeValues\">[0]</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.rangeIcons\">[\"success\", \"error\"]</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.rangeLabels\">[\"All peers are healthy.\", \"$unhealthy_count$ peers are unhealthy.\"]</option>\n        <!--<option name=\"splunk_monitoring_console.KpiTrafficLight.description\">Please check the table below in this dashboard to see the details of unhealthy peers.</option>-->\n      </viz>\n    </panel>\n  </row>\n  <row>\n    <panel>\n      <html>\n        <h2>\n          <span>Select views: </span>\n          <span id=\"link-switcher-view\">\n            <a href=\"#\" class=\"btn-pill active\" data-item=\"all\">All</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"snapshot\">Snapshot</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"historical\">Historical</a>\n          </span>\n        </h2>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Snapshots</title>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\" depends=\"$show_peers$\">\n      <title>Peers ($peer_count$)</title>\n      <table>\n        <search base=\"peers_base\">\n          <query>\n            eval mem_gb = round(physicalMemoryMB / 1024, 2)\n            | eval disabled = if(disabled == 1, \"yes\", \"no\")\n            | `dmc_time_format(startup_time)`\n            | fields peerName, status, status_details, get_auth_max_ms, get_auth_mean_ms, get_bundleList_max_ms, get_bundleList_mean_ms, get_serverInfo_max_ms, get_serverInfo_mean_ms, health_status, health_check_failures, replicationStatus, startup_time, disabled\n            | rename peerName as Peer, status as Status, status_details as \"Status Details\", get_auth_max_ms as \"Authentication Max Time (ms)\", get_auth_mean_ms as \"Authentication Mean Time (ms)\", get_bundleList_max_ms as \"Get Bundle List Max Time (ms)\", get_bundleList_mean_ms as \"Get Bundle List Mean Time (ms)\", get_serverInfo_max_ms as \"Get Peer Info Max Time (ms)\", get_serverInfo_mean_ms as \"Get Peer Info Mean Time (ms)\", health_status as \"Health Condition\", health_check_failures as \"Health Details\", replicationStatus as \"Replication Status\", startup_time as \"Startup Time\", disabled as Disabled, version as Version, numberOfCores as \"CPU Cores\", mem_gb as \"Physical Memory (GB)\"\n          </query>\n        </search>\n        <option name=\"drilldown\">row</option>\n        <drilldown>\n          <set token=\"peer_drilldown\">$row.Peer$</set>\n        </drilldown>\n      </table>\n      <html>\n        <p>Health Condition indicates the overall status of the peer over the last 10 minutes.</p>\n        <p>Peer response times shown are computed over the last 10 minutes. Abnormally high response times (greater than 1000 ms) indicate peer oversubscription. <a href=\"/help?location=learnmore.dmc.peerauth\" target=\"_blank\" title=\"Splunk help\">Learn More</a></p>\n        <p><b>Authentication:</b> the search head requests an authentication token from the peer's /services/admin/auth-tokens endpoint. </p>\n        <p><b>Get Bundle List:</b> the search head requests a list of available knowledge bundles from the peer's /services/admin/bundles endpoint. </p>\n        <p><b>Get Peer Info:</b> the search head requests instance information from the peer's /services/server/info endpoint. </p>\n      </html>\n    </panel>\n    <panel rejects=\"$historical$\" depends=\"$peer_drilldown$, $show_peers$\">\n      <title>Peer: $peer_drilldown$</title>\n      <table>\n        <search base=\"peers_base\">\n          <query>\n            search peerName = $peer_drilldown$\n            | fields - _timediff, peerName, status, status_details, get_auth_max_ms, get_auth_mean_ms, get_bundleList_max_ms, get_bundleList_mean_ms, get_serverInfo_max_ms, get_serverInfo_mean_ms, health_status, health_check_failures, replicationStatus, startup_time, disabled, server_roles, peerType, title, author, published, updated, remote_session, splunk_server, eai*\n            | transpose\n            | rename column as Property, \"row 1\" as Value\n          </query>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <html>\n        <a data-unset-token=\"peer_drilldown\">Close this panel</a>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel>\n      <title>Knowledge Bundle Replication (in last 10 minutes)</title>\n      <search id=\"bundle_replication_api_base\">\n        <query>\n          | rest splunk_server=$splunk_server$ /services/server/introspection/search/distributed/window_metrics\n        </query>\n      </search>\n      <single>\n        <search base=\"bundle_replication_api_base\">\n          <query>\n            eval bundle_file_count = if(isNotNull(bundle_file_count), bundle_file_count, count)\n            | fields bundle_file_count\n          </query>\n        </search>\n        <option name=\"underLabel\">Local Bundle Files</option>\n        <option name=\"height\">80px</option>\n      </single>\n      <single>\n        <search base=\"bundle_replication_api_base\">\n          <query>\n            eval avg_mb = if(isNotNull(average_baseline_file_size), round(average_baseline_file_size /1024 / 1024, 2), \"Unknown\")\n            | fields avg_mb\n          </query>\n        </search>\n        <option name=\"numberPrecision\">0.00</option>\n        <option name=\"afterLabel\">MB</option>\n        <option name=\"underLabel\">Average Size of Baseline Bundle File</option>\n        <option name=\"height\">80px</option>\n      </single>\n      <single>\n        <search base=\"bundle_replication_api_base\">\n          <query>\n            eval avg_sec = average_msecs / 1000\n            | fields avg_sec\n          </query>\n        </search>\n        <option name=\"numberPrecision\">0.00</option>\n        <option name=\"afterLabel\">sec</option>\n        <option name=\"underLabel\">Average Bundle Push Time</option>\n        <option name=\"height\">80px</option>\n      </single>\n      <html>\n        <p>Average Bundle Push Time is the average time per bundle push to all search peers. This is not the average time spent to send one bundle.</p>\n        <p>Time spent is related to bundle size, larger bundles would take more time to be replicated.</p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel depends=\"$show_bundle_reaper$\" rejects=\"$historical$\">\n      <title>Time to Reap Knowledge Bundle Directory (in last 10 minutes)</title>\n      <search id=\"bundle_directory_reaper_api_base\">\n        <query>\n          | rest splunk_server=$splunk_server$ /services/server/introspection/search/dispatch/Bundle_Directory_Reaper\n        </query>\n      </search>\n      <single>\n        <search base=\"bundle_directory_reaper_api_base\">\n          <query>\n            fields \"Bundle_Directory_Reaper_Average_Time(ms)\"\n          </query>\n        </search>\n        <option name=\"afterLabel\">ms</option>\n        <option name=\"underLabel\">Average</option>\n        <option name=\"height\">80px</option>\n        <option name=\"useColors\">true</option>\n        <option name=\"rangeValues\">[15000]</option>\n        <option name=\"rangeColors\">[\"0x5cc05c\",\"0xed8440\"]</option>\n      </single>\n      <single>\n        <search base=\"bundle_directory_reaper_api_base\">\n          <query>\n            fields \"Bundle_Directory_Reaper_Max_Time(ms)\"\n          </query>\n        </search>\n        <option name=\"afterLabel\">ms</option>\n        <option name=\"underLabel\">Max</option>\n        <option name=\"height\">80px</option>\n        <option name=\"useColors\">true</option>\n        <option name=\"rangeValues\">[25000]</option>\n        <option name=\"rangeColors\">[\"0x5cc05c\",\"0xed8440\"]</option>\n      </single>\n      <html>\n        <p>The knowledge bundle reaper clears expired knowledge bundles from a search peer's $SPLUNK_HOME/var/run/searchpeers directory.</p>\n        <p>Long reap times can indicate storage performance issues or an excessive number of bundles.</p>\n      </html>\n    </panel>\n    <panel rejects=\"$historical$\">\n      <title>Time to Reap Dispatch Directory (in last 10 minutes)</title>\n      <search id=\"dispatch_directory_reaper_api_base\">\n        <query>\n          | rest splunk_server=$splunk_server$ /services/server/introspection/search/dispatch/Dispatch_Directory_Reaper\n        </query>\n      </search>\n      <single>\n        <search base=\"dispatch_directory_reaper_api_base\">\n          <query>\n            fields \"Dispatch_Directory_Reaper_Average_Time(ms)\"\n          </query>\n        </search>\n        <option name=\"afterLabel\">ms</option>\n        <option name=\"underLabel\">Average</option>\n        <option name=\"height\">80px</option>\n        <option name=\"useColors\">true</option>\n        <option name=\"rangeValues\">[15000]</option>\n        <option name=\"rangeColors\">[\"0x5cc05c\",\"0xed8440\"]</option>\n      </single>\n      <single>\n        <search base=\"dispatch_directory_reaper_api_base\">\n          <query>\n            fields \"Dispatch_Directory_Reaper_Max_Time(ms)\"\n          </query>\n        </search>\n        <option name=\"afterLabel\">ms</option>\n        <option name=\"underLabel\">Max</option>\n        <option name=\"height\">80px</option>\n        <option name=\"useColors\">true</option>\n        <option name=\"rangeValues\">[25000]</option>\n        <option name=\"rangeColors\">[\"0x5cc05c\",\"0xed8440\"]</option>\n      </single>\n      <html>\n        <p>The dispatch reaper clears expired search artifacts from the dispatch directory. <a href=\"/help?location=learnmore.dmc.distsearch.dispatch\" target=\"_blank\" title=\"Splunk help\">Learn More</a></p>\n        <p>Long reap times can indicate storage performance issues or an <a href=\"/help?location=learnmore.dmc.distsearch.searchartifacts\" target=\"_blank\" title=\"Splunk help\">excessive number of artifacts</a>.</p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Historical Charts</title>\n      <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n        <label>Time Range:</label>\n        <default>\n          <earliestTime>-4h@m</earliestTime>\n          <latestTime>now</latestTime>\n        </default>\n      </input>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\" depends=\"$show_peer_heartbeat_log$\">\n      <title>Peer Heartbeat</title>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"peer_heartbeat_agg\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"mean\">Average</choice>\n        <choice value=\"max\">Maximum</choice>\n        <default>max</default>\n      </input>\n      <search id=\"peer_heartbeat_log_base\">\n        <query>\n          `dmc_set_index_internal` sourcetype=splunkd group=search_health_metrics name=distributed_peer_heartbeat host=$host$\n          | `dmc_timechart_for_metrics_reaper_and_heartbeat` $peer_heartbeat_agg$(Peer_Count) as peer_count,\n              $peer_heartbeat_agg$(get_auth_$peer_heartbeat_agg$_ms) as get_auth_$peer_heartbeat_agg$_ms,\n              $peer_heartbeat_agg$(get_bundleList_$peer_heartbeat_agg$_ms) as get_bundleList_$peer_heartbeat_agg$_ms,\n              $peer_heartbeat_agg$(get_serverInfo_$peer_heartbeat_agg$_ms) as get_serverInfo_$peer_heartbeat_agg$_ms,\n          | eval get_auth_$peer_heartbeat_agg$_ms = round(get_auth_$peer_heartbeat_agg$_ms)\n          | eval get_bundleList_$peer_heartbeat_agg$_ms = round(get_bundleList_$peer_heartbeat_agg$_ms)\n          | eval get_serverInfo_$peer_heartbeat_agg$_ms = round(get_serverInfo_$peer_heartbeat_agg$_ms)\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <!-- <chart>\n        <title>Peer Count</title>\n        <search base=\"peer_heartbeat_log_base\">\n          <query>\n            fields _time, peer_count\n          </query>\n        </search>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.legend.placement\">none</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Count</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n      </chart> -->\n      <chart>\n        <title>Time to Get Authentication, Bundle List, and Peer Info</title>\n        <search base=\"peer_heartbeat_log_base\">\n          <query>\n            fields _time, get_auth_$peer_heartbeat_agg$_ms, get_bundleList_$peer_heartbeat_agg$_ms, get_serverInfo_$peer_heartbeat_agg$_ms\n            | rename get_auth_$peer_heartbeat_agg$_ms as \"Get Authentication\",\n                get_bundleList_$peer_heartbeat_agg$_ms as \"Get Bundle List\",\n                get_serverInfo_$peer_heartbeat_agg$_ms as \"Get Peer Info\"\n          </query>\n        </search>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Time Spent (ms)</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n      </chart>\n      <html>\n        <p><b>Authentication:</b> the search head requests an authentication token from the peer's /services/admin/auth-tokens endpoint. </p>\n        <p><b>Get Bundle List:</b> the search head requests a list of available knowledge bundles from the peer's /services/admin/bundles endpoint. </p>\n        <p><b>Get Peer Info:</b> the search head requests instance information from the peer's /services/server/info endpoint. </p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Knowledge Bundle $bundles_group_label$ Activity</title>\n      <chart>\n        <title>$bundles_group_label$ Count</title>\n        <search base=\"bundle_rep_log_base\">\n          <query>\n            fields _time, baseline_count, delta_count\n          </query>\n        </search>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Count</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n      </chart>\n      <chart>\n        <title>$bundles_group_label$ Size</title>\n        <search base=\"bundle_rep_log_base\">\n          <query>\n            eval baseline_size_mb = round(baseline_bytes / 1024 / 1024, 2)\n            | eval delta_size_mb = round(delta_bytes / 1024 / 1024, 2)\n            | fields _time, baseline_size_mb, delta_size_mb\n          </query>\n        </search>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Size (MB)</option>\n      </chart>\n      <chart>\n        <title>$bundles_group_label$ Time</title>\n        <search base=\"bundle_rep_log_base\">\n          <query>\n            eval baseline_sec_spent = round(baseline_msec_spent / 1000, 2)\n            | eval delta_sec_spent = round(delta_msec_spent / 1000, 2)\n            | fields _time, baseline_sec_spent, delta_sec_spent\n          </query>\n        </search>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Time Spent (sec)</option>\n      </chart>\n      <html>\n        <p>$bundles_group_label$ Size is the total size of bundle pushes to all search peers. This is not bundle size.</p>\n        <p>$bundles_group_label$ Time is the total time of bundle pushes to all search peers. This is not the time spent to send one bundle.</p>\n        <p>Time spent is related to bundle size, larger bundles take more time to be replicated.</p>\n        <p>These panels account for the replication of both baseline (full bundle) and delta (incremental changes only) bundles.</p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Time to Reap</title>\n      <chart>\n        <title>Dispatch Directory</title>\n        <search>\n          <query>\n            `dmc_set_index_internal` sourcetype=splunkd group=search_health_metrics name=dispatch_directory_reaper host=$host$\n            | `dmc_timechart_for_metrics_reaper_and_heartbeat` avg(dispatch_dir_reaper_mean_ms) as dispatch_dir_reaper_mean_ms, max(dispatch_dir_reaper_max_ms) as dispatch_dir_reaper_max_ms\n            | eval dispatch_dir_reaper_mean_ms = round(dispatch_dir_reaper_mean_ms)\n            | eval dispatch_dir_reaper_max_ms = round(dispatch_dir_reaper_max_ms)\n            | rename dispatch_dir_reaper_mean_ms as Average, dispatch_dir_reaper_max_ms as Max\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Time Spent (ms)</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n      </chart>\n      <html>\n        <p>The dispatch reaper clears expired search artifacts from the dispatch directory. <a href=\"/help?location=learnmore.dmc.distsearch.dispatch\" target=\"_blank\" title=\"Splunk help\">Learn More</a></p>\n        <p>Long reap times can indicate storage performance issues or an <a href=\"/help?location=learnmore.dmc.distsearch.searchartifacts\" target=\"_blank\" title=\"Splunk help\">excessive number of artifacts</a>.</p>\n      </html>\n      <chart depends=\"$show_bundle_reaper$\">\n        <title>Knowledge Bundle Directory</title>\n        <search>\n          <query>\n            `dmc_set_index_internal` sourcetype=splunkd group=search_health_metrics name=bundle_directory_reaper host=$host$\n            | `dmc_timechart_for_metrics_reaper_and_heartbeat` avg(bundle_dir_reaper_mean_ms) as bundle_dir_reaper_mean_ms, max(bundle_dir_reaper_max_ms) as bundle_dir_reaper_max_ms\n            | eval bundle_dir_reaper_mean_ms = round(bundle_dir_reaper_mean_ms)\n            | eval bundle_dir_reaper_max_ms = round(bundle_dir_reaper_max_ms)\n            | rename bundle_dir_reaper_mean_ms as Average, bundle_dir_reaper_max_ms as Max\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Time Spent (ms)</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n      </chart>\n      <html depends=\"$show_bundle_reaper$\">\n        <p>The knowledge bundle reaper clears expired knowledge bundles from a search peer's $SPLUNK_HOME/var/run/searchpeers directory.</p>\n        <p>Long reap times can indicate storage performance issues or an excessive number of bundles.</p>\n      </html>\n    </panel>\n  </row>\n</form>",
"eai:type": "views",
"name": "distributed_search_instance",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" script=\"common_control.js, forwarder_monitoring_extension.js\" stylesheet=\"forwarder_monitoring_extension.css\">\n  <label>Forwarders: Deployment</label>\n  <fieldset autoRun=\"true\" submitButton=\"false\">\n    <input id=\"show_instances_input\" type=\"checkbox\" searchWhenChanged=\"true\" token=\"show_instances_forwarding_logs\">\n      <label></label>\n      <choice>Show instances forwarding internal logs</choice>\n    </input>\n  </fieldset>\n  <search id=\"loadForwarderAssetsSearch\">\n    <query>\n| inputlookup dmc_forwarder_assets\n| makemv delim=\" \" avg_tcp_kbps_sparkline\n| eval sum_kb = if (status == \"missing\", \"N/A\", sum_kb)\n| eval avg_tcp_kbps_sparkline = if (status == \"missing\", \"N/A\", avg_tcp_kbps_sparkline)\n| eval avg_tcp_kbps = if (status == \"missing\", \"N/A\", avg_tcp_kbps)\n| eval avg_tcp_eps = if (status == \"missing\", \"N/A\", avg_tcp_eps)\n| `dmc_rename_forwarder_type(forwarder_type)`\n| `dmc_time_format(last_connected)`\n    </query>\n  </search>\n  <search base=\"loadForwarderAssetsSearch\" id=\"loadForwarderExcludingInternalAssetsSearch\">\n    <query>\n| search NOT [| inputlookup dmc_assets | dedup serverName | rename serverName as hostname | fields hostname]\n    </query>\n  </search>\n  <search>\n    <query>\n      | rest splunk_server=local /servicesNS/nobody/splunk_monitoring_console/saved/searches/DMC%20Forwarder%20-%20Build%20Asset%20Table/history\n      | eval endtime = strptime(updated, \"%Y-%m-%dT%H:%M:%S\")\n      | sort 1 -endtime\n      | fields updated\n      | rename updated AS last_run_time\n      | eval last_run_time = if(isnotnull(last_run_time), \" - As of \".replace(last_run_time, \"T\", \" \"), \" \")\n    </query>\n    <finalized>\n      <set token=\"last_run_time\">$result.last_run_time$</set>\n    </finalized>\n  </search>\n  <row id=\"forwarder_monitoring_extension\">\n    <panel>\n      <html>\n        <h3>Forwarder Monitoring is <b>disabled</b>. Go to the <a href=\"monitoringconsole_forwarder_setup\" target=\"_blank\">setup<span class=\"icon-external\"></span></a> page to enable it.</h3>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Forwarders by $forwarderCountSplitByLabel$</title>\n      <input type=\"dropdown\" token=\"forwarderCountSplitBy\" searchWhenChanged=\"true\">\n        <label>Split by</label>\n        <showClearButton>false</showClearButton>\n        <default>status</default>\n        <choice value=\"status\">Status</choice>\n        <choice value=\"forwarder_type\">Forwarder Type</choice>\n        <choice value=\"version\">Splunk Version</choice>\n        <choice value=\"os\">OS</choice>\n        <choice value=\"arch\">Architecture</choice>\n        <change>\n          <set token=\"forwarderCountSplitByLabel\">$label$</set>\n        </change>\n      </input>\n      <html>\n        <p><b>Note:</b> A forwarder is \"missing\" if it does not connect to indexers for 15 minutes. Forwarder status takes 30 minutes minimum to reflect a monitoring data collection interval of 15 minutes, and higher intervals can take longer.</p>\n      </html>\n      <chart depends=\"$show_instances_forwarding_logs$\">\n        <title>Total: $forwarder_count_including_internal_logs$</title>\n        <search base=\"loadForwarderAssetsSearch\">\n          <query>stats dc(guid) as \"count\" by $forwarderCountSplitBy$</query>\n        </search>\n        <option name=\"charting.chart\">pie</option>\n      </chart>\n      <search base=\"loadForwarderAssetsSearch\">\n        <query>stats dc(guid) as count</query>\n        <finalized>\n          <set token=\"forwarder_count_including_internal_logs\">$result.count$</set>\n        </finalized>\n      </search>\n      <chart rejects=\"$show_instances_forwarding_logs$\">\n        <title>Total: $true_forwarder_count$</title>\n        <search base=\"loadForwarderExcludingInternalAssetsSearch\">\n          <query>stats dc(guid) as \"count\" by $forwarderCountSplitBy$</query>\n        </search>\n        <option name=\"charting.chart\">pie</option>\n      </chart>\n      <search base=\"loadForwarderExcludingInternalAssetsSearch\">\n        <query>stats dc(guid) as count</query>\n        <finalized>\n          <set token=\"true_forwarder_count\">$result.count$</set>\n        </finalized>\n      </search>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Status and Configuration $last_run_time$</title>\n      <input type=\"text\" searchWhenChanged=\"true\" token=\"forwarderNameFilter\">\n        <label>Instance</label>\n        <default>*</default>\n        <prefix>search hostname=\"*</prefix>\n        <suffix>*\"</suffix>\n      </input>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"forwarderStatusFilter\">\n        <label>Status</label>\n        <default>*</default>\n        <showClearButton>false</showClearButton>\n        <choice value=\"*\">All</choice>\n        <choice value=\"active\">active</choice>\n        <choice value=\"missing\">missing</choice>\n        <prefix>search status=\"</prefix>\n        <suffix>\"</suffix>\n      </input>\n      <table depends=\"$show_instances_forwarding_logs$\">\n        <title>Total: $forwarder_count_including_internal_logs$</title>\n        <search base=\"loadForwarderAssetsSearch\">\n          <query>\n| fields hostname, forwarder_type, version, os, arch, status, last_connected, sum_kb, avg_tcp_kbps_sparkline, avg_tcp_kbps, avg_tcp_eps\n| $forwarderNameFilter$\n| $forwarderStatusFilter$\n| rename hostname as Instance, forwarder_type as Type, version as Version, os as OS, arch as Architecture, status as Status, last_connected as \"Last Connected to Indexers\", sum_kb as \"Total KB\", avg_tcp_kbps_sparkline as \"Average KB/s Over Time\", avg_tcp_kbps as \"Average KB/s\", avg_tcp_eps as \"Average Events/s\"\n          </query>\n          <finalized>\n            <set token=\"forwarder_count_including_internal_logs\">$job.resultCount$</set>\n          </finalized>\n        </search>\n        <option name=\"drilldown\">row</option>\n        <format type=\"sparkline\" field=\"Average KB/s Over Time\">\n          <option name=\"type\">bar</option>\n          <option name=\"height\">20px</option>\n          <option name=\"barColor\">#006d9c</option>\n          <option name=\"barWidth\">5px</option>\n        </format>\n        <drilldown>\n          <link target=\"_blank\">forwarder_instance?form.hostname=$row.Instance$</link>\n        </drilldown>\n      </table>\n      <table rejects=\"$show_instances_forwarding_logs$\">\n        <title>Total: $true_forwarder_count$</title>\n        <search base=\"loadForwarderAssetsSearch\">\n          <query>\n search NOT [| inputlookup dmc_assets | dedup serverName | rename serverName as hostname | fields hostname]\n| fields hostname, forwarder_type, version, os, arch, status, last_connected, sum_kb, avg_tcp_kbps_sparkline, avg_tcp_kbps, avg_tcp_eps\n| $forwarderNameFilter$\n| $forwarderStatusFilter$\n| rename hostname as Instance, forwarder_type as Type, version as Version, os as OS, arch as Architecture, status as Status, last_connected as \"Last Connected to Indexers\", sum_kb as \"Total KB\", avg_tcp_kbps_sparkline as \"Average KB/s Over Time\", avg_tcp_kbps as \"Average KB/s\", avg_tcp_eps as \"Average Events/s\"\n          </query>\n          <finalized>\n            <!-- this doesn't include the splunk instances forwarding internal logs -->\n            <set token=\"true_forwarder_count\">$job.resultCount$</set>\n          </finalized>\n        </search>\n        <option name=\"drilldown\">row</option>\n        <format type=\"sparkline\" field=\"Average KB/s Over Time\">\n          <option name=\"type\">bar</option>\n          <option name=\"height\">20px</option>\n          <option name=\"barColor\">#006d9c</option>\n          <option name=\"barWidth\">5px</option>\n        </format>\n        <drilldown>\n          <link target=\"_blank\">forwarder_instance?form.hostname=$row.Instance$</link>\n        </drilldown>\n      </table>\n      <html>\n        <p>Click on a forwarder to see more details.</p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Historical Charts</title>\n      <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n        <label>Time Range:</label>\n        <default>\n          <earliestTime>-60m@m</earliestTime>\n          <latestTime>now</latestTime>\n        </default>\n      </input>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Total Count of Forwarders and Receivers</title>\n      <search id=\"forwarderReceiverCountBaseSearch\">\n        <query>\n          `dmc_get_forwarder_tcpin`\n          | eval forwarder = guid\n          | eval receiver = host.\":\".destPort\n          | stats dc(forwarder) as count_forwarder, dc(receiver) as count_receiver\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <search id=\"forwarderReceiverExcludingInternalCountBaseSearch\">\n        <query>\n          `dmc_get_forwarder_tcpin`\n           | eval forwarder = guid\n           | eval receiver = host.\":\".destPort\n           | search NOT [| inputlookup dmc_assets | dedup serverName | rename serverName as hostname | fields hostname]\n           | stats dc(forwarder) as count_forwarder, dc(receiver) as count_receiver\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <single depends=\"$show_instances_forwarding_logs$\">\n        <option name=\"height\">80px</option>\n        <search base=\"forwarderReceiverCountBaseSearch\">\n          <query>fields count_forwarder</query>\n        </search>\n        <option name=\"underLabel\">Forwarders</option>\n      </single>\n      <single rejects=\"$show_instances_forwarding_logs$\">\n        <option name=\"height\">80px</option>\n        <search base=\"forwarderReceiverExcludingInternalCountBaseSearch\">\n          <query>fields count_forwarder</query>\n        </search>\n        <option name=\"underLabel\">Forwarders</option>\n      </single>\n      <single>\n        <option name=\"height\">80px</option>\n        <search base=\"forwarderReceiverCountBaseSearch\">\n          <query>fields count_receiver</query>\n        </search>\n        <option name=\"underLabel\">Receivers</option>\n      </single>\n      <html>\n        <p><b>Note:</b> \"Forwarder\" is the GUID. \"Receiver\" is \"serverName:port\" combination.</p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Forwarder Connection Count Over Time</title>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"funcForwarderCountOverlay\">\n        <label>Overlay</label>\n        <showClearButton>false</showClearButton>\n        <default>kb</default>\n        <choice value=\"kb\">KB/s</choice>\n        <choice value=\"event_count\">Events/s</choice>\n        <change>\n          <condition value=\"kb\">\n            <set token=\"forwarderCountOverlayLabel\">KB/s</set>\n          </condition>\n          <condition value=\"event_count\">\n            <set token=\"forwarderCountOverlayLabel\">Events/s</set>\n          </condition>\n        </change>\n      </input>\n      <chart>\n        <search>\n          <query>\n`dmc_get_forwarder_tcpin`\n| eval connection = hostname.\":\".sourcePort.\"->\".host.\":\".destPort\n| eval event_count = tcp_eps * 30\n| `dmc_timechart_for_metrics_log` dc(connection) as connection_count, per_second($funcForwarderCountOverlay$) as $funcForwarderCountOverlay$\n| rename connection_count as \"Connections\", $funcForwarderCountOverlay$ as $forwarderCountOverlayLabel$\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">true</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n        <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n        <option name=\"charting.chart.bubbleSizeBy\">area</option>\n        <option name=\"charting.chart.nullValueMode\">gaps</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">default</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.chart.showLabels\">auto</option>\n        <option name=\"charting.chart.overlayFields\">$forwarderCountOverlayLabel$</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.axisLabelsY2.majorUnit\">1</option>\n        <option name=\"charting.axisTitleY.text\">Count</option>\n        <option name=\"charting.axisTitleY2.text\">Average $forwarderCountOverlayLabel$</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n      </chart>\n      <html>\n        <p><b>Note:</b> \"Forwarder connection count\" is the total number of connections between forwarders and receivers. For example, if a forwarder connects to three receivers, its count is three.</p>\n      </html>\n    </panel>\n  </row>\n</form>",
"eai:type": "views",
"name": "forwarder_deployment",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" script=\"common_control.js, forwarder_monitoring_extension.js\">\n  <label>Forwarders: Instance</label>\n  <fieldset autoRun=\"true\" submitButton=\"false\">\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"hostname\">\n      <label>Instance:</label>\n      <showClearButton>false</showClearButton>\n      <populatingSearch fieldForLabel=\"hostname\" fieldForValue=\"hostname\">\n        | `dmc_get_forwarder_info`\n        | stats count by hostname\n      </populatingSearch>\n      <selectFirstChoice>true</selectFirstChoice>\n    </input>\n    <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n      <label>Time Range:</label>\n      <default>\n        <earliestTime>-4h@m</earliestTime>\n        <latestTime>now</latestTime>\n      </default>\n    </input>\n  </fieldset>\n  <row id=\"forwarder_monitoring_extension\">\n    <panel>\n      <html>\n        <h3>Forwarder Monitoring is <b>disabled</b>. Please go to the <a href=\"monitoringconsole_forwarder_setup\" target=\"_blank\">setup<span class=\"icon-external\"></span></a> page to enable it.</h3>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Status and Configuration</title>\n      <table>\n        <search>\n          <query>\n`dmc_get_forwarder_tcpin` hostname=$hostname$\n| eval source_uri = hostname.\":\".sourcePort\n| eval dest_uri = host.\":\".destPort\n| eval connection = source_uri.\"->\".dest_uri\n| stats values(fwdType) as fwdType, values(sourceIp) as sourceIp, latest(version) as version,  values(os) as os, values(arch) as arch, dc(dest_uri) as dest_count, dc(connection) as connection_count, avg(tcp_KBps) as avg_tcp_kbps, avg(tcp_eps) as avg_tcp_eps by hostname, guid\n| eval avg_tcp_kbps = round(avg_tcp_kbps, 2)\n| eval avg_tcp_eps = round(avg_tcp_eps, 2)\n| `dmc_rename_forwarder_type(fwdType)`\n| rename hostname as Instance, fwdType as \"Forwarder Type\", sourceIp as IP, version as \"Splunk Version\", os as OS, arch as Architecture, guid as GUID, dest_count as \"Receiver Count\", connection_count as \"Connection Count\", avg_tcp_kbps as \"Average KB/s\", avg_tcp_eps as \"Average Events/s\"\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"drilldown\">row</option>\n        <drilldown>\n          <set token=\"forwarderStatusDrilldown\">$row.Instance$</set>\n        </drilldown>\n      </table>\n      <html>\n        <p>Click on a forwarder to see a list of connected receivers.</p>\n        <p><b>Note: </b>Multiple forwarders installed on one host appear with identical host names, but different GUIDs.</p>\n      </html>\n    </panel>\n    <panel depends=\"$forwarderStatusDrilldown$\">\n      <title>List of Instances $forwarderStatusDrilldown$ Connects to</title>\n      <table>\n        <search>\n          <query>\n`dmc_get_forwarder_tcpin` hostname=$hostname$\n| eval dest_uri = host.\": \".destPort\n| stats count by dest_uri\n| fields dest_uri\n| rename dest_uri as \"Receivers\"\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <html>\n        <a data-unset-token=\"forwarderStatusDrilldown\">Close this panel</a>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Outgoing Data Rate</title>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"funcVolume\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>avg</default>\n        <choice value=\"avg\">Average</choice>\n        <choice value=\"max\">Maximum</choice>\n      </input>\n      <chart>\n        <search id=\"confRepPerfSearch\">\n          <query>\n`dmc_get_forwarder_tcpin` hostname=$hostname$\n| `dmc_timechart_for_metrics_log` $funcVolume$(eval(tcp_KBps)) as \"KB/s\", $funcVolume$(tcp_eps) as \"Events/s\"\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisLabelsY2.majorUnit\">auto</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">true</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n        <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n        <option name=\"charting.chart.bubbleSizeBy\">area</option>\n        <option name=\"charting.chart.nullValueMode\">gaps</option>\n        <option name=\"charting.chart.overlayFields\">Events/s</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">default</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.chart.showLabels\">auto</option>\n        <option name=\"charting.axisTitleY2.text\">Events/s</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">auto</option>\n        <option name=\"charting.axisTitleY.text\">KB/s</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n      </chart>\n    </panel>\n  </row>\n</form>",
"eai:type": "views",
"name": "forwarder_instance",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<?xml version=\"1.0\"?>\n<view template=\"pages/error.html\" type=\"redirect\" target=\"error\" isDashboard=\"False\">\n<label>Error</label>\n</view>",
"eai:type": "views",
"name": "forwarder_overview",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"true\" script=\"common_control.js, http_event_collector_extension.js\" stylesheet=\"http_event_collector.css\">\n  <label>HTTP Event Collector: Deployment</label>\n  <row id=\"no_token_message_view\">\n    <html>\n    </html>\n  </row>\n  <search id=\"base_time_search\">\n    <query>\n      `dmc_set_index_introspection` component=\"HttpEventCollector\" search_group=$role$ search_group=\"$group$\" data.series=\"$data_series$\" $token_clause$ \n      | timechart minspan=1m sum(data.num_of_events) as events_total, sum(data.num_of_requests) as requests_total, sum(data.num_of_parser_errors) as parser_error_total, sum(data.num_of_requests_to_disabled_token) as requests_to_disabled_token_total, sum(data.num_of_auth_failures) as auth_failures_total, sum(data.num_of_requests_to_incorrect_url) as requests_to_incorrect_url_total, sum(data.total_bytes_indexed) as data_indexed, sum(data.total_bytes_received) as data_received\n      | eval data_received=data_received/pow(1024, 2) \n      | eval data_indexed=data_indexed/pow(1024, 2) \n      | eval valid_requests_total = requests_total\n    </query>\n    <earliest>$time.earliest$</earliest>\n    <latest>$time.latest$</latest>\n  </search>\n  <search id=\"base_snapshot_search\">\n    <query>\n      `dmc_set_index_introspection` component=\"HttpEventCollector\" search_group=$role$ search_group=\"$group$\" data.series=\"$data_series$\" $token_clause$\n      | bin _time minspan=1m \n      | stats sum(data.num_of_events) as events_total, sum(data.num_of_requests) as requests_total, sum(data.num_of_requests_to_disabled_token) as disabled_token_total, sum(data.num_of_requests_to_incorrect_url) as incorrect_url_total, sum(data.num_of_auth_failures) as auth_fail_total, sum(data.num_of_parser_errors) as parser_error_total, sum(data.total_bytes_indexed) as data_indexed, sum(data.total_bytes_received) as data_received by _time\n      | eval incorrect_url_total=if(isnull(incorrect_url_total), 0, incorrect_url_total) \n      | eval auth_fail_total=if(isnull(auth_fail_total), 0, auth_fail_total)\n      | eval data_indexed=data_indexed/pow(1024, 2) \n      | eval data_received=data_received/pow(1024, 2) \n      | eval valid_requests_total = requests_total\n      | eval invalid_requests_total = disabled_token_total + incorrect_url_total + auth_fail_total\n    </query>\n    <earliest>rt-30m</earliest>\n    <latest>rt</latest>\n  </search>\n  <search id=\"base_historical_search\">\n    <query>\n      `dmc_set_index_introspection` component=\"HttpEventCollector\" search_group=$role$ search_group=\"$group$\" data.series=\"$data_series$\" $token_clause$\n      | bin _time minspan=1m \n      | stats sum(data.num_of_events) as events_total, sum(data.num_of_requests) as requests_total, sum(data.num_of_requests_to_disabled_token) as disabled_token_total, sum(data.num_of_requests_to_incorrect_url) as incorrect_url_total, sum(data.num_of_auth_failures) as auth_fail_total, sum(data.num_of_parser_errors) as parser_error_total, sum(data.total_bytes_indexed) as data_indexed, sum(data.total_bytes_received) as data_received by _time, host\n      | join host [ \n      | inputlookup dmc_assets \n      | mvcombine search_group \n      | search search_group=$role$ OR search_group=\"$group$\" ]\n      | eval incorrect_url_total=if(isnull(incorrect_url_total), 0, incorrect_url_total) \n      | eval auth_fail_total=if(isnull(auth_fail_total), 0, auth_fail_total)\n      | eval data_indexed=data_indexed/pow(1024, 2) \n      | eval data_received=data_received/pow(1024, 2) \n      | eval valid_requests_total = requests_total\n      | eval invalid_requests_total = disabled_token_total + incorrect_url_total + auth_fail_total\n      | stats sum(events_total) as events_total, sum(valid_requests_total) as valid_requests_total, sum(invalid_requests_total) as invalid_requests_total, sum(data_received) as data_received, sum(data_indexed) as data_indexed\n      | appendcols [search `dmc_set_index_introspection` component=\"HttpEventCollector\" search_group=$role$ search_group=\"$group$\" data.series=\"$data_series$\" $token_clause$ | stats count as event_count]\n    </query>\n    <earliest>$time.earliest$</earliest>\n    <latest>$time.latest$</latest>\n  </search>\n <fieldset autoRun=\"true\" submitButton=\"false\">\n  <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"role\">\n    <label>Role</label>\n    <choice value=\"*\">All</choice>\n    <choice value=\"dmc_group_indexer\">Indexer</choice>\n    <choice value=\"dmc_group_search_head\">Search Head</choice>\n    <selectFirstChoice>true</selectFirstChoice>\n    <showClearButton>false</showClearButton>\n  </input>\n  <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"group\">\n    <label>Group</label>\n    <showClearButton>false</showClearButton>\n    <search>\n      <query>\n        | `dmc_get_groups_containing_role($role$)` \n        | search search_group!=\"dmc_group_*\"\n      </query>\n    </search>\n    <fieldForLabel>label</fieldForLabel>\n    <fieldForValue>search_group</fieldForValue>\n    <choice value=\"*\">All</choice>\n    <default>*</default>\n  </input>\n  <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"token_name\">\n    <label>Token</label>\n    <showClearButton>false</showClearButton>\n    <search>\n      <query>\n        | rest splunk_server_group=$role$ splunk_server_group=\"$group$\" /services/data/inputs/http \n        | eval token_name=substr('title', 8)\n      </query>\n    </search>\n    <choice value=\"*\">All Tokens</choice>\n    <default>*</default>\n    <fieldForLabel>token_name</fieldForLabel>\n    <fieldForValue>token_name</fieldForValue>\n    <change>\n      <condition label=\"All Tokens\">\n        <set token=\"data_series\">http_event_collector</set>\n        <set token=\"token_clause\"> </set>\n        <unset token=\"token_selected\" />\n        <set token=\"allow_split_by_token\">true</set>\n      </condition>\n      <condition label=\"*\">\n        <set token=\"data_series\">http_event_collector_token</set>\n        <set token=\"token_clause\" prefix=\"data.token_name=&quot;\" suffix=\"&quot;\">$row.token_name$</set>\n        <set token=\"token_selected\">true</set>\n        <unset token=\"allow_split_by_token\" />\n      </condition>\n    </change>\n  </input>\n</fieldset>\n<row>\n  <panel>\n    <html>\n      <h2>\n        <span>Select views: </span>\n        <span id=\"link-switcher-view\">\n          <a href=\"#\" class=\"btn-pill active\" data-item=\"all\">All</a>\n          <a href=\"#\" class=\"btn-pill\" data-item=\"snapshot\">Snapshot</a>\n          <a href=\"#\" class=\"btn-pill\" data-item=\"historical\">Historical</a>\n        </span>\n      </h2>\n    </html>\n  </panel>\n</row>\n<row>\n  <panel rejects=\"$historical$\">\n    <title>Snapshots</title>\n  </panel>\n</row>\n<row>\n  <panel rejects=\"$historical$\">\n    <title>Current Throughput</title>\n    <html>\n      <h3>Requests</h3>\n    </html>\n    <single id=\"events_per_second_single_view\">\n      <search base=\"base_snapshot_search\">\n        <query>\n          stats sum(events_total) as events_total by _time\n          | stats latest(events_total) as event_latest \n          | eval event_throughput = event_latest/60 \n          | fields event_throughput\n        </query>\n      </search>\n      <option name=\"underLabel\">Events Per Second</option>\n      <option name=\"height\">80px</option>\n    </single>\n    <single id=\"valid_requests_per_second_single_view\">\n      <search base=\"base_snapshot_search\">\n        <query>\n          stats sum(valid_requests_total) as valid_requests_total by _time\n          | stats latest(valid_requests_total) as valid_request_latest \n          | eval valid_requests_throughput=valid_request_latest/60 \n          | fields valid_requests_throughput\n        </query>\n      </search>\n      <option name=\"underLabel\">Valid Requests Per Second</option>\n      <option name=\"height\">80px</option>\n    </single>\n    <single id=\"invalid_requests_per_second_single_view\">\n      <search base=\"base_snapshot_search\">\n        <query>\n          stats sum(invalid_requests_total) as invalid_requests_total by _time\n          | stats latest(invalid_requests_total) as invalid_request_latest \n          | eval invalid_requests_throughput=invalid_request_latest/60 \n          | fields invalid_requests_throughput\n        </query>\n      </search>\n      <option name=\"underLabel\">Invalid Requests Per Second</option>\n      <option name=\"height\">80px</option>\n    </single>\n    <html>\n      <h3>Data</h3>\n    </html>\n    <single id=\"data_received_per_second_single_view\">\n      <search base=\"base_snapshot_search\">\n        <query>\n          stats latest(data_received) as data_received_latest \n          | eval data_received_throughput = round(data_received_latest/60, 3) \n          | fields data_received_throughput\n        </query>\n      </search>\n      <option name=\"underLabel\">Data Received (MB) Per Second</option>\n      <option name=\"numberPrecision\">0.000</option>\n      <option name=\"height\">80px</option>\n    </single>\n    <single id=\"data_indexed_per_second_single_view\">\n      <search base=\"base_snapshot_search\">\n        <query>\n          stats latest(data_indexed) as data_indexed_latest \n          | eval data_indexed_throughput = round(data_indexed_latest/60, 3) \n          | fields data_indexed_throughput\n        </query>\n      </search>\n      <option name=\"underLabel\">Data Indexed (MB) Per Second</option>\n      <option name=\"numberPrecision\">0.000</option>\n      <option name=\"height\">80px</option>\n    </single>\n    <html>\n      <p>Invalid requests consist of authentication failures, requests to a disabled token, and requests to an incorrect URL.</p>\n    </html>\n  </panel>\n</row>\n<row rejects=\"$historical$\">\n  <panel>\n    <title>Activity (Last 30 Minutes)</title>\n    <chart>\n      <search base=\"base_snapshot_search\">\n        <query>\n          timechart minspan=\"1m\" sum(valid_requests_total) as \"Valid Requests\" sum(invalid_requests_total) as \"Invalid Requests\" sum(data_received) as \"Data Received\"\n        </query>\n      </search>\n      <option name=\"charting.chart\">column</option>\n      <option name=\"charting.chart.overlayFields\">\"Data Received\"</option>\n      <option name=\"charting.axisY2.enabled\">true</option>\n      <option name=\"charting.axisY2.fields\">\"Data Received\"</option>\n      <option name=\"charting.axisTitleY2.text\">Data Received (MB)</option>\n      <option name=\"charting.axisY2.scale\">linear</option>\n      <option name=\"charting.axisTitleX.text\">Time</option>\n      <option name=\"charting.lineDashStyle\">solid</option>\n      <option name=\"charting.chart.stackMode\">stacked</option>\n      <option name=\"charting.axisTitleY.text\">Count of Requests</option>\n      <option name=\"charting.legend.placement\">bottom</option>\n    </chart>\n  </panel>\n</row>\n<row rejects=\"$historical$\">\n  <panel>\n    <title>Instances</title>\n    <table>\n      <search>\n        <query>\n          | rest splunk_server_group=\"$group$\" /services/data/inputs/http \n          | search title=\"http://$token_name$\" \n          | dedup splunk_server                          \n          | fields splunk_server                          \n          | join type=left splunk_server [|`dmc_get_instance_roles` | rename serverName as splunk_server]                                              \n          | fields host, splunk_server, role                          \n          | join type=left splunk_server [| rest /services/server/status/resource-usage/hostwide\n          | eval mem_used=round(mem_used / mem * 100, 0)  \n          | eval cpu_usage=cpu_system_pct + cpu_user_pct\n          | fields splunk_server, mem_used, cpu_usage]\n          | eval port = if(isnotnull(port), port, 8088)                                 \n          | fields host, cpu_usage, mem_used, role, port\n          | rename host as \"Instance\", cpu_usage as \"CPU Usage (%)\", mem_used as \"Memory Usage (%)\", role as Role, port as \"HTTP Event Collector Port Number\"\n        </query>\n      </search>\n      <drilldown target=\"_blank\">\n        <link>\n          /app/splunk_monitoring_console/http_event_collector_instance?form.host=$row.Instance$\n        </link>\n      </drilldown>\n    </table>\n  </panel>\n</row>\n<row>\n  <panel rejects=\"$snapshot$\">\n    <title>Historical Charts</title>\n    <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n      <label>Time Range:</label>\n      <default>\n        <earliestTime>-4h@m</earliestTime>\n        <latestTime>now</latestTime>\n      </default>\n    </input>\n  </panel>\n</row>\n<row>\n  <panel rejects=\"$snapshot$\">\n    <title>Request Overview</title>\n    <single>\n      <search base=\"base_historical_search\">\n        <query>\n          eval events_total = if(event_count==0, 0, events_total)\n          | fields events_total\n          | rename events_total as \"Event Count\"\n        </query>\n      </search>\n      <option name=\"underLabel\">Event Count</option>\n      <option name=\"height\">80px</option>                  \n    </single>\n    <single>\n      <search base=\"base_historical_search\">\n        <query>\n          eval valid_requests_total = if(event_count==0, 0, valid_requests_total)\n          | fields valid_requests_total\n          | rename valid_requests_total as \"Valid Request Count\"\n        </query>\n      </search>\n      <option name=\"underLabel\">Valid Request Count</option>\n      <option name=\"height\">80px</option>                  \n    </single>\n    <single>\n      <search base=\"base_historical_search\">\n        <query>\n          eval invalid_requests_total = if(event_count==0, 0, invalid_requests_total)\n          | fields invalid_requests_total\n          | rename invalid_requests_total as \"Invalid Request Count\"\n        </query>\n      </search>\n      <option name=\"underLabel\">Invalid Request Count</option>\n      <option name=\"height\">80px</option>                  \n    </single>\n    <html depends=\"$token_selected$\">\n      <p>\n        The invalid request count for this token does not include invalid requests due to authentication failures or requests to an incorrect URL because those errors are not associated with any specific token.\n      </p>\n    </html>\n  </panel>\n</row>\n<row>\n  <panel rejects=\"$snapshot$\">\n    <title>Data Overview</title>\n    <single>\n      <search base=\"base_historical_search\">\n        <query>\n          eval data_received = if(event_count==0, 0, data_received)\n          | fields data_received\n          | rename data_received as \"Data Received\"\n        </query>\n      </search>\n      <option name=\"underLabel\">MB Received</option>\n      <option name=\"height\">80px</option>\n    </single>\n    <single>\n      <search base=\"base_historical_search\">\n        <query>\n          eval data_indexed = if(event_count==0, 0, data_indexed)\n          | fields data_indexed\n          | rename data_indexed as \"Data Indexed\"\n        </query>\n      </search>\n      <option name=\"underLabel\">MB Indexed</option>\n      <option name=\"height\">80px</option>                  \n    </single>\n  </panel>\n</row>\n<row>\n  <panel rejects=\"$snapshot$\">\n    <title>$activity_chart_label$ Count</title>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"event_type\">\n      <label>Activity Type</label>\n      <choice value=\"events_total, valid_requests_total\">Events and Valid Requests</choice>\n      <choice value=\"events_total\">Events</choice>\n      <choice value=\"valid_requests_total\">Valid Requests</choice>\n      <change>\n        <condition value=\"events_total, valid_requests_total\">\n          <set token=\"activity_chart_label\">$label$</set>\n          <set token=\"show_all_activity_chart\">true</set>\n          <unset token=\"show_activity_chart_split_by_token\" />\n        </condition>\n        <condition value=\"*\">\n          <set token=\"activity_chart_label\">$label$</set>\n          <set token=\"show_activity_chart_split_by_token\">true</set>\n          <unset token=\"show_all_activity_chart\" />\n        </condition>\n      </change>\n      <selectFirstChoice>true</selectFirstChoice>\n      <showClearButton>false</showClearButton>\n    </input>\n    <input depends=\"$allow_split_by_token$ $show_activity_chart_split_by_token$\" searchWhenChanged=\"true\" type=\"checkbox\" token=\"activity_chart_split_by_token\">\n      <label></label>\n      <choice>Split by Token</choice>\n    </input>\n    <chart depends=\"$show_all_activity_chart$\">\n      <search>\n        <query>\n          `dmc_set_index_introspection` component=\"HttpEventCollector\" search_group=$role$ search_group=\"$group$\" data.series=\"$data_series$\" $token_clause$ \n          | timechart partial=f minspan=1m sum(data.num_of_events) as events_total, sum(data.num_of_requests) as requests_total, sum(data.num_of_parser_errors) as parser_error_total, sum(data.num_of_requests_to_disabled_token) as requests_to_disabled_token_total, sum(data.num_of_auth_failures) as auth_failures_total, sum(data.num_of_requests_to_incorrect_url) as requests_to_incorrect_url_total, sum(data.total_bytes_indexed) as data_indexed, sum(data.total_bytes_received) as data_received\n          | eval data_received=data_received/pow(1024, 2) \n          | eval data_indexed=data_indexed/pow(1024, 2) \n          | eval valid_requests_total = requests_total\n          | fields _time, $event_type$\n          | rename events_total as \"Events\", valid_requests_total as \"Valid Requests\"\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <option name=\"charting.chart\">line</option>\n      <option name=\"charting.axisTitleY.text\">Count</option>\n      <option name=\"charting.axisTitleX.text\">Time</option>\n      <option name=\"charting.legend.placement\">bottom</option>\n      <option name=\"charting.axisY.minimumNumber\">0</option>\n      <option name=\"charting.chart.nullValueMode\">zero</option>\n    </chart>\n    <chart rejects=\"$activity_chart_split_by_token$ $token_selected$ $show_all_activity_chart$\">\n      <search>\n        <query>\n          `dmc_set_index_introspection` component=\"HttpEventCollector\" search_group=$role$ search_group=\"$group$\" data.series=\"$data_series$\" $token_clause$ \n          | timechart partial=f minspan=1m sum(data.num_of_events) as events_total, sum(data.num_of_requests) as requests_total, sum(data.num_of_parser_errors) as parser_error_total, sum(data.num_of_requests_to_disabled_token) as requests_to_disabled_token_total, sum(data.num_of_auth_failures) as auth_failures_total, sum(data.num_of_requests_to_incorrect_url) as requests_to_incorrect_url_total, sum(data.total_bytes_indexed) as data_indexed, sum(data.total_bytes_received) as data_received\n          | eval data_received=data_received/pow(1024, 2) \n          | eval data_indexed=data_indexed/pow(1024, 2) \n          | eval valid_requests_total = requests_total\n          | fields _time, $event_type$\n          | rename events_total as \"Events\", valid_requests_total as \"Valid Requests\"\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <option name=\"charting.chart\">line</option>\n      <option name=\"charting.axisTitleY.text\">Count</option>\n      <option name=\"charting.axisTitleX.text\">Time</option>\n      <option name=\"charting.legend.placement\">bottom</option>\n      <option name=\"charting.axisY.minimumNumber\">0</option>\n      <option name=\"charting.chart.nullValueMode\">zero</option>\n    </chart>\n    <chart depends=\"$token_selected$\" rejects=\"$show_all_activity_chart$\">\n      <search>\n        <query>\n          `dmc_set_index_introspection` component=\"HttpEventCollector\" search_group=$role$ search_group=\"$group$\" data.series=\"$data_series$\" $token_clause$ \n          | timechart partial=f minspan=1m sum(data.num_of_events) as events_total, sum(data.num_of_requests) as requests_total, sum(data.num_of_parser_errors) as parser_error_total, sum(data.num_of_requests_to_disabled_token) as requests_to_disabled_token_total, sum(data.num_of_auth_failures) as auth_failures_total, sum(data.num_of_requests_to_incorrect_url) as requests_to_incorrect_url_total, sum(data.total_bytes_indexed) as data_indexed, sum(data.total_bytes_received) as data_received\n          | eval data_received=data_received/pow(1024, 2) \n          | eval data_indexed=data_indexed/pow(1024, 2) \n          | eval valid_requests_total = requests_total\n          | fields _time, $event_type$\n          | rename events_total as \"Events\", valid_requests_total as \"Valid Requests\"\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <option name=\"charting.chart\">line</option>\n      <option name=\"charting.axisTitleY.text\">Count</option>\n      <option name=\"charting.axisTitleX.text\">Time</option>\n      <option name=\"charting.legend.placement\">bottom</option>\n      <option name=\"charting.axisY.minimumNumber\">0</option>\n      <option name=\"charting.chart.nullValueMode\">zero</option>\n    </chart>\n    <chart depends=\"$allow_split_by_token$ $activity_chart_split_by_token$\" rejects=\"$show_all_activity_chart$\">\n      <search>\n        <query>\n          `dmc_set_index_introspection` component=\"HttpEventCollector\" search_group=$role$ search_group=\"$group$\" data.series=\"http_event_collector_token\" $token_clause$      \n          | bin _time minspan=1m                     \n          | stats sum(data.num_of_events) as events_total, sum(data.num_of_requests) as requests_total, sum(data.num_of_parser_errors) as parser_error_total, values(data.token_name) as token_name by _time\n          | eval valid_requests_total = requests_total\n          | timechart partial=f minspan=1m sum($event_type$) as $event_type$ by token_name\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <option name=\"charting.chart\">line</option>\n      <option name=\"charting.axisTitleY.text\">Count</option>\n      <option name=\"charting.axisTitleX.text\">Time</option>\n      <option name=\"charting.legend.placement\">bottom</option>\n      <option name=\"charting.axisY.minimumNumber\">0</option>\n      <option name=\"charting.chart.nullValueMode\">zero</option>\n    </chart>\n  </panel>\n</row>\n<row>\n  <panel rejects=\"$snapshot$\">\n    <title>Errors</title>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"invalid_request_reason\">\n      <label>Reason</label>\n      <choice value=\"all_errors\">All Errors</choice>\n      <choice value=\"num_of_auth_failures\">Authentication Failures</choice>\n      <choice value=\"num_of_requests_to_disabled_token\">Requests to Disabled Token</choice>\n      <choice value=\"num_of_requests_to_incorrect_url\">Requests to Incorrect URL</choice>\n      <choice value=\"num_of_parser_errors\">Parser Errors</choice>\n      <change>\n        <condition value=\"all_errors\">\n          <set token=\"all_errors_selected\">true</set>\n          <unset token=\"show_invalid_request_chart_split_by_token\" />\n          <unset token=\"incorrect_url_selected\" />\n          <unset token=\"authentication_failure_selected\" />\n        </condition>\n        <condition value=\"num_of_auth_failures\">\n          <set token=\"show_invalid_request_chart_split_by_token\">true</set>\n          <set token=\"authentication_failure_selected\">true</set>\n          <unset token=\"incorrect_url_selected\" />\n          <unset token=\"all_errors_selected\" />\n        </condition>\n        <condition value=\"num_of_requests_to_incorrect_url\">\n          <set token=\"show_invalid_request_chart_split_by_token\">true</set>\n          <set token=\"incorrect_url_selected\">true</set>\n          <unset token=\"authentication_failure_selected\" />\n          <unset token=\"all_errors_selected\" />\n        </condition>\n        <condition value=\"*\">\n          <set token=\"show_invalid_request_chart_split_by_token\">true</set>\n          <unset token=\"incorrect_url_selected\" />\n          <unset token=\"authentication_failure_selected\" />\n          <unset token=\"all_errors_selected\" />\n        </condition>\n      </change>\n      <selectFirstChoice>true</selectFirstChoice>\n      <showClearButton>false</showClearButton>\n    </input>\n    <input depends=\"$allow_split_by_token$ $show_invalid_request_chart_split_by_token$\" searchWhenChanged=\"true\" type=\"checkbox\" token=\"invalid_request_split_by_token\">\n      <label></label>\n      <choice>Split by Token</choice>\n    </input>\n\n\n    <!-- chart for when \"All Tokens\" is selected -->\n    <chart depends=\"$all_errors_selected$\" rejects=\"$token_selected$\">\n      <search>\n        <query>\n          `dmc_set_index_introspection` component=\"HttpEventCollector\" search_group=$role$ search_group=\"$group$\" data.series=\"$data_series$\" $token_clause$\n          | timechart partial=f minspan=1m sum(data.num_of_auth_failures) as num_of_auth_failures, sum(data.num_of_requests_to_disabled_token) as num_of_requests_to_disabled_token, sum(data.num_of_requests_to_incorrect_url) as num_of_requests_to_incorrect_url, sum(data.num_of_parser_errors) as num_of_parser_errors\n          | fields _time, num_of_auth_failures, num_of_requests_to_disabled_token, num_of_requests_to_incorrect_url, num_of_parser_errors\n          | rename num_of_auth_failures as \"Authentication Failures\", num_of_requests_to_disabled_token as \"Requests to Disabled Token\", num_of_requests_to_incorrect_url as \"Requests to Incorrect URL\", num_of_parser_errors as \"Parser Errors\"\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <option name=\"charting.chart\">line</option>\n      <option name=\"charting.axisTitleY.text\">Count</option>\n      <option name=\"charting.axisTitleX.text\">Time</option>\n      <option name=\"charting.legend.placement\">bottom</option>\n      <option name=\"charting.axisY.minimumNumber\">0</option>\n      <option name=\"charting.chart.nullValueMode\">zero</option>\n    </chart>\n\n    <!-- chart for when \"All Tokens\" is selected and a \"All Errors\" is selected -->\n    <!-- exclude errors related to authentication failure or requests to incorrect url -->\n    <chart depends=\"$all_errors_selected$ $token_selected$\">\n      <search>\n        <query>\n          `dmc_set_index_introspection` component=\"HttpEventCollector\" search_group=$role$ search_group=\"$group$\" data.series=\"$data_series$\" $token_clause$\n          | timechart partial=f minspan=1m sum(data.num_of_auth_failures) as num_of_auth_failures, sum(data.num_of_requests_to_disabled_token) as num_of_requests_to_disabled_token, sum(data.num_of_requests_to_incorrect_url) as num_of_requests_to_incorrect_url, sum(data.num_of_parser_errors) as num_of_parser_errors\n          | fields _time, num_of_requests_to_disabled_token, num_of_parser_errors\n          | rename num_of_auth_failures as \"Authentication Failures\", num_of_requests_to_disabled_token as \"Requests to Disabled Token\", num_of_requests_to_incorrect_url as \"Requests to Incorrect URL\", num_of_parser_errors as \"Parser Errors\"\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <option name=\"charting.chart\">line</option>\n      <option name=\"charting.axisTitleY.text\">Count</option>\n      <option name=\"charting.axisTitleX.text\">Time</option>\n      <option name=\"charting.legend.placement\">bottom</option>\n      <option name=\"charting.axisY.minimumNumber\">0</option>\n      <option name=\"charting.chart.nullValueMode\">zero</option>\n    </chart>\n\n    <!-- chart for when every error reason other than \"All Error\" is selected and token is not selected -->    \n    <chart rejects=\"$invalid_request_split_by_token$ $all_errors_selected$ $token_selected$\">\n      <search>\n        <query>\n          `dmc_set_index_introspection` component=\"HttpEventCollector\" search_group=$role$ search_group=\"$group$\" data.series=\"$data_series$\" $token_clause$\n          | timechart partial=f minspan=1m sum(data.num_of_auth_failures) as num_of_auth_failures, sum(data.num_of_requests_to_disabled_token) as num_of_requests_to_disabled_token, sum(data.num_of_requests_to_incorrect_url) as num_of_requests_to_incorrect_url, sum(data.num_of_parser_errors) as num_of_parser_errors\n          | fields _time, $invalid_request_reason$\n          | rename num_of_auth_failures as \"Authentication Failures\", num_of_requests_to_disabled_token as \"Requests to Disabled Token\", num_of_requests_to_incorrect_url as \"Requests to Incorrect URL\", num_of_parser_errors as \"Parser Errors\"\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <option name=\"charting.chart\">line</option>\n      <option name=\"charting.axisTitleY.text\">Count</option>\n      <option name=\"charting.axisTitleX.text\">Time</option>\n      <option name=\"charting.legend.placement\">bottom</option>\n      <option name=\"charting.axisY.minimumNumber\">0</option>\n      <option name=\"charting.chart.nullValueMode\">zero</option>\n    </chart>\n\n    <!-- chart for when a token is selected and the invalid_request_split_by_token is still set -->\n    <!-- this chart graphs the results of an error or errors for a specified token -->\n    <chart depends=\"$invalid_request_split_by_token$ $token_selected$\" rejects=\"$all_errors_selected$ $authentication_failure_selected$ $incorrect_url_selected$\">\n      <search>\n        <query>\n          `dmc_set_index_introspection` component=\"HttpEventCollector\" search_group=$role$ search_group=\"$group$\" data.series=\"$data_series$\" $token_clause$\n          | timechart partial=f minspan=1m sum(data.num_of_auth_failures) as num_of_auth_failures, sum(data.num_of_requests_to_disabled_token) as num_of_requests_to_disabled_token, sum(data.num_of_requests_to_incorrect_url) as num_of_requests_to_incorrect_url, sum(data.num_of_parser_errors) as num_of_parser_errors\n          | fields _time, $invalid_request_reason$\n          | rename num_of_auth_failures as \"Authentication Failures\", num_of_requests_to_disabled_token as \"Requests to Disabled Token\", num_of_requests_to_incorrect_url as \"Requests to Incorrect URL\", num_of_parser_errors as \"Parser Errors\"\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <option name=\"charting.chart\">line</option>\n      <option name=\"charting.axisTitleY.text\">Count</option>\n      <option name=\"charting.axisTitleX.text\">Time</option>\n      <option name=\"charting.legend.placement\">bottom</option>\n      <option name=\"charting.axisY.minimumNumber\">0</option>\n      <option name=\"charting.chart.nullValueMode\">zero</option>\n    </chart>\n\n    <!-- chart for when a token is selected and the invalid_request_split_by_token is not set -->\n    <!-- this chart graphs the results of an error or errors for a specified token -->\n    <chart depends=\"$token_selected$\" rejects=\"$authentication_failure_selected$ $all_errors_selected$ $incorrect_url_selected$ $invalid_request_split_by_token$\">\n      <search>\n        <query>\n          `dmc_set_index_introspection` component=\"HttpEventCollector\" search_group=$role$ search_group=\"$group$\" data.series=\"$data_series$\" $token_clause$\n          | timechart partial=f minspan=1m sum(data.num_of_auth_failures) as num_of_auth_failures, sum(data.num_of_requests_to_disabled_token) as num_of_requests_to_disabled_token, sum(data.num_of_requests_to_incorrect_url) as num_of_requests_to_incorrect_url, sum(data.num_of_parser_errors) as num_of_parser_errors\n          | fields _time, $invalid_request_reason$\n          | rename num_of_auth_failures as \"Authentication Failures\", num_of_requests_to_disabled_token as \"Requests to Disabled Token\", num_of_requests_to_incorrect_url as \"Requests to Incorrect URL\", num_of_parser_errors as \"Parser Errors\"\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <option name=\"charting.chart\">line</option>\n      <option name=\"charting.axisTitleY.text\">Count</option>\n      <option name=\"charting.axisTitleX.text\">Time</option>\n      <option name=\"charting.legend.placement\">bottom</option>\n      <option name=\"charting.axisY.minimumNumber\">0</option>\n      <option name=\"charting.chart.nullValueMode\">zero</option>\n    </chart>\n\n    <!-- chart for when the split by token box is selected and \"All tokens\" us selected -->\n    <chart depends=\"$invalid_request_split_by_token$\" rejects=\"$token_selected$ $authentication_failure_selected$ $incorrect_url_selected$ $all_errors_selected$\">\n      <search>\n        <query>\n          `dmc_set_index_introspection` component=\"HttpEventCollector\" search_group=$role$ search_group=\"$group$\" data.series=\"http_event_collector_token\" $token_clause$\n          | bin _time minspan=1m\n          | timechart partial=f minspan=1m sum(data.$invalid_request_reason$) as $invalid_request_reason$ by data.token_name\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <option name=\"charting.chart\">line</option>\n      <option name=\"charting.axisTitleY.text\">Count</option>\n      <option name=\"charting.axisTitleX.text\">Time</option>\n      <option name=\"charting.legend.placement\">bottom</option>\n      <option name=\"charting.axisY.minimumNumber\">0</option>\n      <option name=\"charting.chart.nullValueMode\">zero</option>\n    </chart>\n\n    <!-- Error message for when a token is selected and \"All Errors\" is selected. -->\n    <html depends=\"$all_errors_selected$ $token_selected$\">\n      <p>Errors due to authentication failure or requests to an incorrect URL are excluded from this chart because they are not associated with any specific token.</p>\n    </html>\n\n    <!-- Error message for when a token is selected and the authentication failure or requests to an incorrect url error reason is selected -->\n    <html depends=\"$token_selected$ $authentication_failure_selected$\">\n      <p>There are no results for the selected reason because authentication failures are not associated with any specific token.</p>\n    </html>\n    <html depends=\"$token_selected$ $incorrect_url_selected$\">\n      <p>There are no results for the selected reason because requests to an incorrect url are not associated with any specific token.</p>\n    </html>\n\n    <!-- Error message for when the split-by-token option is selected and the authentication failure or request to incorrect url error reason is selected -->\n    <html depends=\"$authentication_failure_selected$ $invalid_request_split_by_token$\" rejects=\"$token_selected$\">\n      <p>The split by token option for this reason is disabled because authentication failures are not associated with any specific token.</p>\n    </html>\n    <html depends=\"$incorrect_url_selected$ $invalid_request_split_by_token$\" rejects=\"$token_selected$\">\n      <p>The split by token option for this reason is disabled because requests to an incorrect url are not associated with any specific token.</p>\n    </html>\n  </panel>\n</row>\n<row>\n  <panel rejects=\"$snapshot$\">\n    <title>Data $data_ingested_label$</title>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"data_type\">\n      <label>Data Type</label>\n      <choice value=\"data_received, data_indexed\">Received and Indexed</choice>\n      <choice value=\"data_received\">Received</choice>\n      <choice value=\"data_indexed\">Indexed</choice>\n      <change>\n        <condition value=\"data_received, data_indexed\">\n          <set token=\"show_all_data_charts\">true</set>\n          <set token=\"data_ingested_label\">$label$</set>\n          <unset token=\"show_data_ingested_split_by_token\" />\n        </condition>\n        <condition value=\"data_received\">\n          <unset token=\"show_all_data_charts\" />\n          <set token=\"data_ingested_label\">$label$</set>\n          <set token=\"show_data_ingested_split_by_token\">true</set>\n        </condition>\n        <condition value=\"data_indexed\">\n          <unset token=\"show_all_data_charts\" />\n          <set token=\"data_ingested_label\">$label$</set>\n          <set token=\"show_data_ingested_split_by_token\">true</set>\n        </condition>\n      </change>\n      <selectFirstChoice>true</selectFirstChoice>\n      <showClearButton>false</showClearButton>\n    </input>\n    <input depends=\"$show_data_ingested_split_by_token$ $allow_split_by_token$\" searchWhenChanged=\"true\" type=\"checkbox\" token=\"data_ingested_split_by_token\">\n      <label></label>\n      <choice>Split by Token</choice>\n    </input>\n    <chart depends=\"$show_all_data_charts$\">\n      <search>\n        <query>\n          `dmc_set_index_introspection` component=\"HttpEventCollector\" search_group=$role$ search_group=\"$group$\" data.series=\"$data_series$\" $token_clause$ \n          | timechart partial=f minspan=1m sum(data.num_of_events) as events_total, sum(data.num_of_requests) as requests_total, sum(data.num_of_parser_errors) as parser_error_total, sum(data.num_of_requests_to_disabled_token) as requests_to_disabled_token_total, sum(data.num_of_auth_failures) as auth_failures_total, sum(data.num_of_requests_to_incorrect_url) as requests_to_incorrect_url_total, sum(data.total_bytes_indexed) as data_indexed, sum(data.total_bytes_received) as data_received\n          | eval data_received=data_received/pow(1024, 2) \n          | eval data_indexed=data_indexed/pow(1024, 2) \n          | eval valid_requests_total = requests_total\n          | fields _time, $data_type$\n          | rename data_received as \"Data Received\", data_indexed as \"Data Indexed\"\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <option name=\"charting.chart\">line</option>\n      <option name=\"charting.axisTitleY.text\">MB</option>\n      <option name=\"charting.axisTitleX.text\">Time</option>\n      <option name=\"charting.legend.placement\">bottom</option>\n      <option name=\"charting.axisY.minimumNumber\">0</option>\n      <option name=\"charting.chart.nullValueMode\">zero</option>\n    </chart>\n    <chart rejects=\"$data_ingested_split_by_token$ $token_selected$ $show_all_data_charts$\">\n      <search>\n        <query>\n          `dmc_set_index_introspection` component=\"HttpEventCollector\" search_group=$role$ search_group=\"$group$\" data.series=\"$data_series$\" $token_clause$ \n          | timechart partial=f minspan=1m sum(data.num_of_events) as events_total, sum(data.num_of_requests) as requests_total, sum(data.num_of_parser_errors) as parser_error_total, sum(data.num_of_requests_to_disabled_token) as requests_to_disabled_token_total, sum(data.num_of_auth_failures) as auth_failures_total, sum(data.num_of_requests_to_incorrect_url) as requests_to_incorrect_url_total, sum(data.total_bytes_indexed) as data_indexed, sum(data.total_bytes_received) as data_received\n          | eval data_received=data_received/pow(1024, 2) \n          | eval data_indexed=data_indexed/pow(1024, 2) \n          | eval valid_requests_total = requests_total\n          | fields _time, $data_type$\n          | rename data_received as \"Data Received\", data_indexed as \"Data Indexed\"\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <option name=\"charting.chart\">line</option>\n      <option name=\"charting.axisTitleY.text\">MB</option>\n      <option name=\"charting.axisTitleX.text\">Time</option>\n      <option name=\"charting.legend.placement\">bottom</option>\n      <option name=\"charting.axisY.minimumNumber\">0</option>\n      <option name=\"charting.chart.nullValueMode\">zero</option>\n    </chart>\n    <chart depends=\"$token_selected$\" rejects=\"$show_all_data_charts$\">\n      <search>\n        <query>\n          `dmc_set_index_introspection` component=\"HttpEventCollector\" search_group=$role$ search_group=\"$group$\" data.series=\"$data_series$\" $token_clause$ \n          | timechart partial=f minspan=1m sum(data.num_of_events) as events_total, sum(data.num_of_requests) as requests_total, sum(data.num_of_parser_errors) as parser_error_total, sum(data.num_of_requests_to_disabled_token) as requests_to_disabled_token_total, sum(data.num_of_auth_failures) as auth_failures_total, sum(data.num_of_requests_to_incorrect_url) as requests_to_incorrect_url_total, sum(data.total_bytes_indexed) as data_indexed, sum(data.total_bytes_received) as data_received\n          | eval data_received=data_received/pow(1024, 2) \n          | eval data_indexed=data_indexed/pow(1024, 2) \n          | eval valid_requests_total = requests_total\n          | fields _time, $data_type$\n          | rename data_received as \"Data Received\", data_indexed as \"Data Indexed\"\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <option name=\"charting.chart\">line</option>\n      <option name=\"charting.axisTitleY.text\">MB</option>\n      <option name=\"charting.axisTitleX.text\">Time</option>\n      <option name=\"charting.legend.placement\">bottom</option>\n      <option name=\"charting.axisY.minimumNumber\">0</option>\n      <option name=\"charting.chart.nullValueMode\">zero</option>\n    </chart>\n    <chart depends=\"$allow_split_by_token$ $data_ingested_split_by_token$\" rejects=\"$show_all_data_charts$\">\n      <search>\n        <query>\n          `dmc_set_index_introspection` component=\"HttpEventCollector\" search_group=$role$ search_group=\"$group$\" data.series=\"http_event_collector_token\"\n          | bin _time minspan=1m \n          | stats sum(data.total_bytes_indexed) as data_indexed, sum(data.total_bytes_received) as data_received, values(data.token_name) as token_name by _time\n          | eval data_received=data_received/pow(1024, 2)\n          | eval data_indexed=data_indexed/pow(1024, 2)\n          | timechart partial=f minspan=1m sum($data_type$) by token_name\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <option name=\"charting.chart\">line</option>\n      <option name=\"charting.axisTitleY.text\">MB</option>\n      <option name=\"charting.axisTitleX.text\">Time</option>\n      <option name=\"charting.legend.placement\">bottom</option>\n      <option name=\"charting.axisY.minimumNumber\">0</option>\n      <option name=\"charting.chart.nullValueMode\">zero</option>\n    </chart>\n  </panel>\n</row>\n<row>\n  <panel rejects=\"$snapshot$\">\n    <title>Instances Overview</title>\n    <table>\n      <search>\n        <query>\n          `dmc_set_index_introspection` component=\"HttpEventCollector\" search_group=$role$ search_group=\"$group$\" data.series=\"$data_series$\" $token_clause$\n          | bin _time minspan=1m \n          | stats sum(data.num_of_events) as events_total, sum(data.num_of_requests) as requests_total, sum(data.num_of_requests_to_disabled_token) as disabled_token_total, sum(data.num_of_requests_to_incorrect_url) as incorrect_url_total, sum(data.num_of_auth_failures) as auth_fail_total, sum(data.num_of_errors) as error_total, sum(data.num_of_parser_errors) as parser_error_total, sum(data.total_bytes_indexed) as data_indexed, sum(data.total_bytes_received) as data_received by _time, host\n          | join host [ \n          | inputlookup dmc_assets \n          | mvcombine search_group \n          | search search_group=$role$ OR search_group=\"$group$\" ]\n          | eval incorrect_url_total=if(isnull(incorrect_url_total), 0, incorrect_url_total) \n          | eval auth_fail_total=if(isnull(auth_fail_total), 0, auth_fail_total)\n          | eval data_indexed=round(data_indexed/pow(1024, 2), 2)\n          | eval data_received=round(data_received/pow(1024, 2), 2)\n          | eval valid_requests_total = requests_total\n          | eval invalid_requests_total = disabled_token_total + incorrect_url_total + auth_fail_total\n          | stats sum(events_total) as events_total, sum(valid_requests_total) as valid_requests_total, sum(invalid_requests_total) as invalid_requests_total, sum(data_received) as data_received, sum(data_indexed) as data_indexed by host\n          | fields host, events_total, valid_requests_total, invalid_requests_total, data_received, data_indexed\n          | rename host as Instance, events_total as \"Event Count\", valid_requests_total as \"Valid Request Count\", invalid_requests_total as \"Invalid Request Count\", data_received as \"Data Received (MB)\", data_indexed as \"Data Indexed (MB)\"\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <drilldown target=\"_blank\">\n        <link>\n          /app/splunk_monitoring_console/http_event_collector_instance?form.host=$row.Instance$\n        </link>\n      </drilldown>\n    </table>\n  </panel>\n</row>\n</form>",
"eai:type": "views",
"name": "http_event_collector_deployment",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"true\" script=\"common_control.js, http_event_collector_extension.js\" stylesheet=\"http_event_collector.css\">\n  <label>HTTP Event Collector: Instance</label>\n  <row id=\"no_token_message_view\">\n    <html>\n    </html>\n  </row>\n  <search id=\"base_snapshot_search\">\n   <query>\n    `dmc_set_index_introspection` component=\"HttpEventCollector\" data.series=\"$data_series$\" host=\"$host$\" $token_clause$\n    | bin _time span=1m\n    | stats sum(data.num_of_events) as events_total, sum(data.num_of_requests) as requests_total, sum(data.num_of_requests_to_disabled_token) as disabled_token_total, sum(data.num_of_requests_to_incorrect_url) as incorrect_url_total, sum(data.num_of_auth_failures) as auth_fail_total, sum(data.num_of_parser_errors) as parser_error_total, sum(data.total_bytes_indexed) as data_indexed, sum(data.total_bytes_received) as data_received by _time\n    | eval incorrect_url_total=if(isnotnull(incorrect_url_total), incorrect_url_total, 0)\n    | eval auth_fail_total=if(isnotnull(auth_fail_total), auth_fail_total, 0)\n    | eval data_indexed=data_indexed/pow(1024, 2)\n    | eval data_received=data_received/pow(1024, 2)\n    | eval valid_requests_total = requests_total\n    | eval invalid_requests_total = auth_fail_total + disabled_token_total + incorrect_url_total\n  </query>\n  <earliest>rt-30m</earliest>\n  <latest>rt</latest>\n</search>\n<search id=\"base_host_search\">\n  <query>\n    `dmc_set_index_introspection` component=\"HttpEventCollector\" data.series=\"$data_series$\" host=\"$host$\" $token_clause$\n    | stats sum(data.num_of_events) as events_total, sum(data.num_of_requests) as requests_total, sum(data.num_of_auth_failures) as auth_failures_total, sum(data.num_of_parser_errors) as parser_errors_total, sum(data.num_of_requests_to_disabled_token) as requests_to_disabled_token_total, sum(data.num_of_requests_to_incorrect_url) as requests_to_incorrect_url_total, sum(data.total_bytes_indexed) as data_indexed, sum(data.total_bytes_received) as data_received\n    | eval requests_to_incorrect_url_total = if(isnotnull(requests_to_incorrect_url_total), requests_to_incorrect_url_total, 0)\n    | eval auth_failures_total = if(isnotnull(auth_failures_total), auth_failures_total, 0)\n    | eval data_received=data_received/pow(1024, 2) \n    | eval data_indexed=data_indexed/pow(1024, 2)\n    | appendcols [search `dmc_set_index_introspection` component=\"HttpEventCollector\" data.series=\"$data_series$\" host=\"$host$\" $token_clause$ | stats count as event_count]\n  </query>\n  <earliest>$time.earliest$</earliest>\n  <latest>$time.latest$</latest>\n</search>\n<fieldset autoRun=\"true\" submitButton=\"false\">\n  <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"host\">\n    <label>Instance</label>\n    <showClearButton>false</showClearButton>\n    <search>\n      <query>\n        | rest splunk_server=* /services/data/inputs/http \n        | dedup splunk_server \n        | fields splunk_server \n        | join type=left splunk_server [|`dmc_get_instance_roles` | rename serverName as splunk_server]\n      </query>\n    </search>\n    <selectFirstChoice>true</selectFirstChoice>\n    <fieldForLabel>host</fieldForLabel>\n    <fieldForValue>host</fieldForValue>\n    <change>\n     <set token=\"splunk_server\">$row.splunk_server$</set>\n   </change>\n </input>\n <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"token_name\">\n  <label>Token</label>\n  <showClearButton>false</showClearButton>\n  <search>\n    <query>\n      | rest splunk_server=$splunk_server$ /services/data/inputs/http \n      | eval token_name=substr('title', 8)\n    </query>\n  </search>\n  <choice value=\"*\">All Tokens</choice>\n  <default>*</default>\n  <fieldForLabel>token_name</fieldForLabel>\n  <fieldForValue>token_name</fieldForValue>\n  <change>\n    <condition label=\"All Tokens\">\n      <set token=\"data_series\">http_event_collector</set>\n      <set token=\"token_clause\"> </set>\n      <unset token=\"token_selected\" />\n      <set token=\"allow_split_by_token\">true</set>\n      <set token=\"all_tokens_selected\">true</set>\n    </condition>\n    <condition label=\"*\">\n      <set token=\"data_series\">http_event_collector_token</set>\n      <set token=\"token_clause\" prefix=\"data.token_name=&quot;\" suffix=\"&quot;\">$row.token_name$</set>\n      <set token=\"token_selected\">true</set>\n      <unset token=\"allow_split_by_token\" />\n      <unset token=\"all_tokens_selected\" />\n    </condition>\n  </change>\n</input>\n</fieldset>\n<row>\n  <panel>\n    <html>\n      <h2>\n        <span>Select views: </span>\n        <span id=\"link-switcher-view\">\n          <a href=\"#\" class=\"btn-pill active\" data-item=\"all\">All</a>\n          <a href=\"#\" class=\"btn-pill\" data-item=\"snapshot\">Snapshot</a>\n          <a href=\"#\" class=\"btn-pill\" data-item=\"historical\">Historical</a>\n        </span>\n      </h2>\n    </html>\n  </panel>\n</row>\n<row>\n  <panel rejects=\"$historical$\">\n    <title>Snapshots</title>\n  </panel>\n</row>\n<row>\n  <panel rejects=\"$historical$\">\n    <title>Current Throughput</title>\n    <html>\n      <h3>Requests</h3>\n    </html>\n    <single id=\"events_per_second_single_view\">\n      <search base=\"base_snapshot_search\">\n        <query>\n          stats latest(events_total) as event_latest\n          | eval event_throughput = event_latest/60\n          | fields event_throughput\n        </query>\n      </search>\n      <option name=\"underLabel\">Events Per Second</option>\n      <option name=\"height\">80px</option>                  \n    </single>\n    <single id=\"valid_requests_per_second_single_view\">\n      <search base=\"base_snapshot_search\">\n        <query>\n          stats latest(valid_requests_total) as valid_request_latest\n          | eval valid_requests_throughput=valid_request_latest/60\n          | fields valid_requests_throughput\n        </query>\n      </search>\n      <option name=\"underLabel\">Valid Requests Per Second</option>\n      <option name=\"height\">80px</option>                  \n    </single>\n    <single id=\"invalid_requests_per_second_single_view\">\n      <search base=\"base_snapshot_search\">\n        <query>\n          stats latest(invalid_requests_total) as invalid_request_latest\n          | eval invalid_requests_throughput=invalid_request_latest/60\n          | fields invalid_requests_throughput\n        </query>\n      </search>\n      <option name=\"underLabel\">Invalid Requests Per Second</option>\n      <option name=\"height\">80px</option>                  \n    </single>\n    <html>\n      <h3>Data</h3>\n    </html>\n    <single id=\"data_received_per_second_single_view\">\n      <search base=\"base_snapshot_search\">\n        <query>\n          stats latest(data_received) as data_received_latest\n          | eval data_received_throughput = round(data_received_latest/60, 3)\n          | fields data_received_throughput\n        </query>\n      </search>\n      <option name=\"underLabel\">Data Received (MB) Per Second</option>\n      <option name=\"numberPrecision\">0.000</option>\n      <option name=\"height\">80px</option>                  \n    </single>\n    <single id=\"data_indexed_per_second_single_view\">\n      <search base=\"base_snapshot_search\">\n        <query>\n          stats latest(data_indexed) as data_indexed_latest\n          | eval data_indexed_throughput = round('data_indexed_latest'/60, 3)\n          | fields data_indexed_throughput\n        </query>\n      </search>\n      <option name=\"underLabel\">Data Indexed (MB) Per Second</option>\n      <option name=\"numberPrecision\">0.000</option>\n      <option name=\"height\">80px</option>                  \n    </single>\n    <html>\n      <p>Invalid requests consist of authentication failures, requests to a disabled token, and requests to an incorrect URL.</p>\n    </html>\n  </panel>\n</row>\n<row rejects=\"$historical$\">\n  <panel>\n    <title>Past 30 Minutes</title>\n    <chart>\n      <search base=\"base_snapshot_search\">\n        <query>\n          timechart minspan=\"1m\" sum(valid_requests_total) as valid_requests_total, sum(invalid_requests_total) as invalid_requests_total, sum(data_received) as data_received\n          | rename valid_requests_total as \"Valid Requests\", invalid_requests_total as \"Invalid Requests\", data_received as \"Data Received\"\n        </query>\n      </search>\n      <option name=\"charting.chart\">column</option>\n      <option name=\"charting.chart.overlayFields\">\"Data Received\"</option>\n      <option name=\"charting.axisTitleY2.text\">Data Received (MB)</option>\n      <option name=\"charting.axisY2.enabled\">true</option>\n      <option name=\"charting.axisY2.fields\">\"Data Received\"</option>\n      <option name=\"charting.axisY2.scale\">linear</option>\n      <option name=\"charting.lineDashStyle\">solid</option>\n      <option name=\"charting.chart.stackMode\">stacked</option>\n      <option name=\"charting.axisTitleY.text\">Count of Requests</option>\n      <option name=\"charting.axisTitleX.text\">Time</option>\n      <option name=\"charting.legend.placement\">bottom</option>\n    </chart>\n  </panel>\n</row>\n<row>\n  <panel rejects=\"$snapshot$\">\n    <title>Historical Charts</title>\n    <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n      <label>Time Range:</label>\n      <default>\n        <earliestTime>-4h@m</earliestTime>\n        <latestTime>now</latestTime>\n      </default>\n    </input>\n  </panel>\n</row>  \n<row>\n  <panel rejects=\"$snapshot$\">\n    <title>Request Overview</title>\n    <single>\n      <search base=\"base_host_search\">\n        <query>\n          eval events_total = if(event_count==0, 0, events_total)\n          | fields events_total\n        </query>\n      </search>\n      <option name=\"underLabel\">Event Count</option>\n      <option name=\"height\">80px</option>                  \n    </single>\n    <single>\n      <search base=\"base_host_search\">\n        <query>\n          eval valid_request_count_total = if(event_count==0, 0, requests_total)\n          | fields valid_request_count_total \n        </query>\n      </search>\n      <option name=\"underLabel\">Valid Request Count</option>\n      <option name=\"height\">80px</option>                  \n    </single>\n    <single>\n      <search base=\"base_host_search\">\n        <query>\n          eval invalid_request_count_total = if(event_count==0, 0, auth_failures_total + requests_to_disabled_token_total + requests_to_incorrect_url_total)\n          | fields invalid_request_count_total\n        </query>\n      </search>\n      <option name=\"underLabel\">Invalid Request Count</option>\n      <option name=\"height\">80px</option>\n    </single>\n    <html depends=\"$token_selected$\">\n      <p>\n        The invalid request count for this token does not include invalid requests due to authentication failures or requests to an incorrect URL because those errors are not associated with any specific token.\n      </p>\n    </html>\n  </panel>\n</row>\n<row>\n  <panel rejects=\"$snapshot$\">\n    <title>Data Overview</title>\n    <single>\n      <search base=\"base_host_search\">\n        <query>\n          eval data_received = if(event_count==0, 0, data_received)\n          | fields data_received\n        </query>\n      </search>\n      <option name=\"underLabel\">MB Received</option>\n      <option name=\"height\">80px</option>\n    </single>\n    <single>\n      <search base=\"base_host_search\">\n        <query>\n          eval data_indexed = if(event_count==0, 0, data_indexed)\n          | fields data_indexed\n        </query>\n      </search>\n      <option name=\"underLabel\">MB Indexed</option>\n      <option name=\"height\">80px</option>                  \n    </single>\n  </panel>\n</row>\n<row>\n  <panel rejects=\"$snapshot$\">\n    <title>$activity_chart_label$ Count</title>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"event_type\">\n      <label>Activity Type</label>\n      <choice value=\"events_total, valid_requests_total\">Events and Valid Requests</choice>\n      <choice value=\"events_total\">Events</choice>\n      <choice value=\"valid_requests_total\">Valid Requests</choice>\n      <change>\n        <condition value=\"events_total, valid_requests_total\">\n          <set token=\"activity_chart_label\">$label$</set>\n          <set token=\"show_all_activity_chart\">true</set>\n          <unset token=\"show_activity_chart_split_by_token\" />\n        </condition>\n        <condition value=\"*\">\n          <set token=\"activity_chart_label\">$label$</set>\n          <set token=\"show_activity_chart_split_by_token\">true</set>\n          <unset token=\"show_all_activity_chart\" />\n        </condition>\n      </change>\n      <selectFirstChoice>true</selectFirstChoice>\n      <showClearButton>false</showClearButton>\n    </input>\n    <input depends=\"$allow_split_by_token$ $show_activity_chart_split_by_token$\" searchWhenChanged=\"true\" type=\"checkbox\" token=\"activity_chart_split_by_token\">\n      <label></label>\n      <choice>Split by Token</choice>\n    </input>\n    <chart depends=\"$show_all_activity_chart$\">\n      <search>\n        <query>\n          `dmc_set_index_introspection` component=\"HttpEventCollector\" host=$host$ data.series=\"$data_series$\" $token_clause$ \n          | timechart partial=f minspan=1m sum(data.num_of_events) as events_total, sum(data.num_of_requests) as requests_total, sum(data.num_of_parser_errors) as parser_error_total, sum(data.num_of_requests_to_disabled_token) as requests_to_disabled_token_total, sum(data.num_of_auth_failures) as auth_failures_total, sum(data.num_of_requests_to_incorrect_url) as requests_to_incorrect_url_total, sum(data.total_bytes_indexed) as data_indexed, sum(data.total_bytes_received) as data_received\n          | eval data_received=data_received/pow(1024, 2) \n          | eval data_indexed=data_indexed/pow(1024, 2) \n          | eval valid_requests_total = requests_total\n          | fields _time, $event_type$\n          | rename events_total as \"Events\", valid_requests_total as \"Valid Requests\"\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <option name=\"charting.chart\">line</option>\n      <option name=\"charting.axisTitleY.text\">Count</option>\n      <option name=\"charting.axisTitleX.text\">Time</option>\n      <option name=\"charting.legend.placement\">bottom</option>\n      <option name=\"charting.axisY.minimumNumber\">0</option>\n      <option name=\"charting.chart.nullValueMode\">zero</option>\n    </chart>\n    <chart rejects=\"$activity_chart_split_by_token$ $token_selected$ $show_all_activity_chart$\">\n      <search>\n        <query>\n          `dmc_set_index_introspection` component=\"HttpEventCollector\" host=$host$ data.series=\"$data_series$\" $token_clause$ \n          | timechart partial=f minspan=1m sum(data.num_of_events) as events_total, sum(data.num_of_requests) as requests_total, sum(data.num_of_parser_errors) as parser_error_total, sum(data.num_of_requests_to_disabled_token) as requests_to_disabled_token_total, sum(data.num_of_auth_failures) as auth_failures_total, sum(data.num_of_requests_to_incorrect_url) as requests_to_incorrect_url_total, sum(data.total_bytes_indexed) as data_indexed, sum(data.total_bytes_received) as data_received\n          | eval data_received=data_received/pow(1024, 2) \n          | eval data_indexed=data_indexed/pow(1024, 2) \n          | eval valid_requests_total = requests_total\n          | fields _time, $event_type$\n          | rename events_total as \"Events\", valid_requests_total as \"Valid Requests\"\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <option name=\"charting.chart\">line</option>\n      <option name=\"charting.axisTitleY.text\">Count</option>\n      <option name=\"charting.axisTitleX.text\">Time</option>\n      <option name=\"charting.legend.placement\">bottom</option>\n      <option name=\"charting.axisY.minimumNumber\">0</option>\n      <option name=\"charting.chart.nullValueMode\">zero</option>\n    </chart>\n    <chart depends=\"$token_selected$\" rejects=\"$show_all_activity_chart$\">\n      <search>\n        <query>\n          `dmc_set_index_introspection` component=\"HttpEventCollector\" host=$host$ data.series=\"$data_series$\" $token_clause$ \n          | timechart partial=f minspan=1m sum(data.num_of_events) as events_total, sum(data.num_of_requests) as requests_total, sum(data.num_of_parser_errors) as parser_error_total, sum(data.num_of_requests_to_disabled_token) as requests_to_disabled_token_total, sum(data.num_of_auth_failures) as auth_failures_total, sum(data.num_of_requests_to_incorrect_url) as requests_to_incorrect_url_total, sum(data.total_bytes_indexed) as data_indexed, sum(data.total_bytes_received) as data_received\n          | eval data_received=data_received/pow(1024, 2) \n          | eval data_indexed=data_indexed/pow(1024, 2) \n          | eval valid_requests_total = requests_total\n          | fields _time, $event_type$\n          | rename events_total as \"Events\", valid_requests_total as \"Valid Requests\"\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <option name=\"charting.chart\">line</option>\n      <option name=\"charting.axisTitleY.text\">Count</option>\n      <option name=\"charting.axisTitleX.text\">Time</option>\n      <option name=\"charting.legend.placement\">bottom</option>\n      <option name=\"charting.axisY.minimumNumber\">0</option>\n      <option name=\"charting.chart.nullValueMode\">zero</option>\n    </chart>\n    <chart depends=\"$allow_split_by_token$ $activity_chart_split_by_token$\" rejects=\"$show_all_activity_chart$\">\n      <search>\n        <query>\n          `dmc_set_index_introspection` component=\"HttpEventCollector\" host=$host$ data.series=\"http_event_collector_token\" $token_clause$      \n          | bin _time minspan=1m                     \n          | stats sum(data.num_of_events) as events_total, sum(data.num_of_requests) as requests_total, sum(data.num_of_parser_errors) as parser_error_total, values(data.token_name) as token_name by _time\n          | eval valid_requests_total = requests_total\n          | timechart partial=f minspan=1m sum($event_type$) as $event_type$ by token_name\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <option name=\"charting.chart\">line</option>\n      <option name=\"charting.axisTitleY.text\">Count</option>\n      <option name=\"charting.axisTitleX.text\">Time</option>\n      <option name=\"charting.legend.placement\">bottom</option>\n      <option name=\"charting.axisY.minimumNumber\">0</option>\n      <option name=\"charting.chart.nullValueMode\">zero</option>\n    </chart>\n  </panel>\n</row>\n<row>\n  <panel rejects=\"$snapshot$\">\n    <title>Errors</title>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"invalid_request_reason\">\n      <label>Reason</label>\n      <choice value=\"all_errors\">All Errors</choice>\n      <choice value=\"num_of_auth_failures\">Authentication Failures</choice>\n      <choice value=\"num_of_requests_to_disabled_token\">Requests to Disabled Token</choice>\n      <choice value=\"num_of_requests_to_incorrect_url\">Requests to Incorrect URL</choice>\n      <choice value=\"num_of_parser_errors\">Parser Errors</choice>\n      <change>\n        <condition value=\"all_errors\">\n          <set token=\"all_errors_selected\">true</set>\n          <unset token=\"show_invalid_request_chart_split_by_token\" />\n          <unset token=\"incorrect_url_selected\" />\n          <unset token=\"authentication_failure_selected\" />\n        </condition>\n        <condition value=\"num_of_auth_failures\">\n          <set token=\"show_invalid_request_chart_split_by_token\">true</set>\n          <set token=\"authentication_failure_selected\">true</set>\n          <unset token=\"incorrect_url_selected\" />\n          <unset token=\"all_errors_selected\" />\n        </condition>\n        <condition value=\"num_of_requests_to_incorrect_url\">\n          <set token=\"show_invalid_request_chart_split_by_token\">true</set>\n          <set token=\"incorrect_url_selected\">true</set>\n          <unset token=\"authentication_failure_selected\" />\n          <unset token=\"all_errors_selected\" />\n        </condition>\n        <condition value=\"*\">\n          <set token=\"show_invalid_request_chart_split_by_token\">true</set>\n          <unset token=\"incorrect_url_selected\" />\n          <unset token=\"authentication_failure_selected\" />\n          <unset token=\"all_errors_selected\" />\n        </condition>\n      </change>\n      <selectFirstChoice>true</selectFirstChoice>\n      <showClearButton>false</showClearButton>\n    </input>\n    <input depends=\"$allow_split_by_token$ $show_invalid_request_chart_split_by_token$\" searchWhenChanged=\"true\" type=\"checkbox\" token=\"invalid_request_split_by_token\">\n      <label></label>\n      <choice>Split by Token</choice>\n    </input>\n\n    <!-- chart for when \"All Tokens\" is selected -->\n    <chart depends=\"$all_errors_selected$\" rejects=\"$token_selected$\">\n      <search>\n        <query>\n          `dmc_set_index_introspection` component=\"HttpEventCollector\" host=$host$ data.series=\"$data_series$\" $token_clause$ \n          | timechart partial=f minspan=1m sum(data.num_of_auth_failures) as num_of_auth_failures, sum(data.num_of_requests_to_disabled_token) as num_of_requests_to_disabled_token, sum(data.num_of_requests_to_incorrect_url) as num_of_requests_to_incorrect_url, sum(data.num_of_parser_errors) as num_of_parser_errors\n          | fields _time, num_of_auth_failures, num_of_requests_to_disabled_token, num_of_requests_to_incorrect_url, num_of_parser_errors\n          | rename num_of_auth_failures as \"Authentication Failures\", num_of_requests_to_disabled_token as \"Requests to Disabled Token\", num_of_requests_to_incorrect_url as \"Requests to Incorrect URL\", num_of_parser_errors as \"Parser Errors\"\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <option name=\"charting.chart\">line</option>\n      <option name=\"charting.axisTitleY.text\">Count</option>\n      <option name=\"charting.axisTitleX.text\">Time</option>\n      <option name=\"charting.legend.placement\">bottom</option>\n      <option name=\"charting.axisY.minimumNumber\">0</option>\n      <option name=\"charting.chart.nullValueMode\">zero</option>\n    </chart>\n\n    <!-- chart for when \"All Tokens\" is selected and a \"All Errors\" is selected -->\n    <!-- exclude errors related to authentication failure or requests to incorrect url -->\n    <chart depends=\"$all_errors_selected$ $token_selected$\" >\n      <search>\n        <query>\n          `dmc_set_index_introspection` component=\"HttpEventCollector\" host=$host$ data.series=\"$data_series$\" $token_clause$ \n          | timechart partial=f minspan=1m sum(data.num_of_auth_failures) as num_of_auth_failures, sum(data.num_of_requests_to_disabled_token) as num_of_requests_to_disabled_token, sum(data.num_of_requests_to_incorrect_url) as num_of_requests_to_incorrect_url, sum(data.num_of_parser_errors) as num_of_parser_errors\n          | fields _time, num_of_requests_to_disabled_token, num_of_parser_errors\n          | rename num_of_auth_failures as \"Authentication Failures\", num_of_requests_to_disabled_token as \"Requests to Disabled Token\", num_of_requests_to_incorrect_url as \"Requests to Incorrect URL\", num_of_parser_errors as \"Parser Errors\"\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <option name=\"charting.chart\">line</option>\n      <option name=\"charting.axisTitleY.text\">Count</option>\n      <option name=\"charting.axisTitleX.text\">Time</option>\n      <option name=\"charting.legend.placement\">bottom</option>\n      <option name=\"charting.axisY.minimumNumber\">0</option>\n      <option name=\"charting.chart.nullValueMode\">zero</option>\n    </chart>\n\n    <!-- chart for when every error reason other than \"All Error\" is selected and token is not selected -->    \n    <chart rejects=\"$invalid_request_split_by_token$ $all_errors_selected$ $token_selected$\">\n      <search>\n        <query>\n          `dmc_set_index_introspection` component=\"HttpEventCollector\" host=$host$ data.series=\"$data_series$\" $token_clause$ \n          | timechart partial=f minspan=1m sum(data.num_of_auth_failures) as num_of_auth_failures, sum(data.num_of_requests_to_disabled_token) as num_of_requests_to_disabled_token, sum(data.num_of_requests_to_incorrect_url) as num_of_requests_to_incorrect_url, sum(data.num_of_parser_errors) as num_of_parser_errors\n          | fields _time, $invalid_request_reason$\n          | rename num_of_auth_failures as \"Authentication Failures\", num_of_requests_to_disabled_token as \"Requests to Disabled Token\", num_of_requests_to_incorrect_url as \"Requests to Incorrect URL\", num_of_parser_errors as \"Parser Errors\"\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <option name=\"charting.chart\">line</option>\n      <option name=\"charting.axisTitleY.text\">Count</option>\n      <option name=\"charting.axisTitleX.text\">Time</option>\n      <option name=\"charting.legend.placement\">bottom</option>\n      <option name=\"charting.axisY.minimumNumber\">0</option>\n      <option name=\"charting.chart.nullValueMode\">zero</option>\n    </chart>\n\n    <!-- chart for when a token is selected and the invalid_request_split_by_token is still set -->\n    <!-- this chart graphs the results of an error or errors for a specified token -->\n    <chart depends=\"$invalid_request_split_by_token$ $token_selected$\" rejects=\"$all_errors_selected$ $authentication_failure_selected$ $incorrect_url_selected$\">\n      <search>\n        <query>\n          `dmc_set_index_introspection` component=\"HttpEventCollector\" host=$host$ data.series=\"$data_series$\" $token_clause$ \n          | timechart partial=f minspan=1m sum(data.num_of_auth_failures) as num_of_auth_failures, sum(data.num_of_requests_to_disabled_token) as num_of_requests_to_disabled_token, sum(data.num_of_requests_to_incorrect_url) as num_of_requests_to_incorrect_url, sum(data.num_of_parser_errors) as num_of_parser_errors\n          | fields _time, $invalid_request_reason$\n          | rename num_of_auth_failures as \"Authentication Failures\", num_of_requests_to_disabled_token as \"Requests to Disabled Token\", num_of_requests_to_incorrect_url as \"Requests to Incorrect URL\", num_of_parser_errors as \"Parser Errors\"\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <option name=\"charting.chart\">line</option>\n      <option name=\"charting.axisTitleY.text\">Count</option>\n      <option name=\"charting.axisTitleX.text\">Time</option>\n      <option name=\"charting.legend.placement\">bottom</option>\n      <option name=\"charting.axisY.minimumNumber\">0</option>\n      <option name=\"charting.chart.nullValueMode\">zero</option>\n    </chart>\n\n    <!-- chart for when a token is selected and the invalid_request_split_by_token is not set -->\n    <!-- this chart graphs the results of an error or errors for a specified token -->\n    <chart depends=\"$token_selected$\" rejects=\"$authentication_failure_selected$ $all_errors_selected$ $incorrect_url_selected$ $invalid_request_split_by_token$\">\n      <search>\n        <query>\n          `dmc_set_index_introspection` component=\"HttpEventCollector\" host=$host$ data.series=\"$data_series$\" $token_clause$ \n          | timechart partial=f minspan=1m sum(data.num_of_auth_failures) as num_of_auth_failures, sum(data.num_of_requests_to_disabled_token) as num_of_requests_to_disabled_token, sum(data.num_of_requests_to_incorrect_url) as num_of_requests_to_incorrect_url, sum(data.num_of_parser_errors) as num_of_parser_errors\n          | fields _time, $invalid_request_reason$\n          | rename num_of_auth_failures as \"Authentication Failures\", num_of_requests_to_disabled_token as \"Requests to Disabled Token\", num_of_requests_to_incorrect_url as \"Requests to Incorrect URL\", num_of_parser_errors as \"Parser Errors\"\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <option name=\"charting.chart\">line</option>\n      <option name=\"charting.axisTitleY.text\">Count</option>\n      <option name=\"charting.axisTitleX.text\">Time</option>\n      <option name=\"charting.legend.placement\">bottom</option>\n      <option name=\"charting.axisY.minimumNumber\">0</option>\n      <option name=\"charting.chart.nullValueMode\">zero</option>\n    </chart>\n\n    <!-- chart for when the split by token box is selected and \"All tokens\" us selected -->\n    <chart depends=\"$invalid_request_split_by_token$\" rejects=\"$token_selected$ $authentication_failure_selected$ $incorrect_url_selected$ $all_errors_selected$\">\n      <search>\n        <query>\n          `dmc_set_index_introspection` component=\"HttpEventCollector\" host=$host$ data.series=\"http_event_collector_token\" $token_clause$ \n          | bin _time minspan=1m\n          | timechart partial=f minspan=1m sum(data.$invalid_request_reason$) as $invalid_request_reason$ by data.token_name\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <option name=\"charting.chart\">line</option>\n      <option name=\"charting.axisTitleY.text\">Count</option>\n      <option name=\"charting.axisTitleX.text\">Time</option>\n      <option name=\"charting.legend.placement\">bottom</option>\n      <option name=\"charting.axisY.minimumNumber\">0</option>\n      <option name=\"charting.chart.nullValueMode\">zero</option>\n    </chart>\n\n    <!-- Error message for when a token is selected and \"All Errors\" is selected. -->\n    <html depends=\"$all_errors_selected$ $token_selected$\">\n      <p>Errors due to authentication failure or requests to an incorrect URL are excluded from this chart because they are not associated with any specific token.</p>\n    </html>\n\n    <!-- Error message for when a token is selected and the authentication failure or requests to an incorrect url error reason is selected -->\n    <html depends=\"$token_selected$ $authentication_failure_selected$\">\n      <p>There are no results for the selected reason because authentication failures are not associated with any specific token.</p>\n    </html>\n    <html depends=\"$token_selected$ $incorrect_url_selected$\">\n      <p>There are no results for the selected reason because requests to an incorrect url are not associated with any specific token.</p>\n    </html>\n\n    <!-- Error message for when the split-by-token option is selected and the authentication failure or request to incorrect url error reason is selected -->\n    <html depends=\"$authentication_failure_selected$ $invalid_request_split_by_token$\" rejects=\"$token_selected$\">\n      <p>The split by token option for this reason is disabled because authentication failures are not associated with any specific token.</p>\n    </html>\n    <html depends=\"$incorrect_url_selected$ $invalid_request_split_by_token$\" rejects=\"$token_selected$\">\n      <p>The split by token option for this reason is disabled because requests to an incorrect url are not associated with any specific token.</p>\n    </html>\n  </panel>\n</row>\n<row>\n  <panel rejects=\"$snapshot$\">\n    <title>Data $data_ingested_label$</title>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"data_type\">\n      <label>Data Type</label>\n      <choice value=\"data_received, data_indexed\">Received and Indexed</choice>\n      <choice value=\"data_received\">Received</choice>\n      <choice value=\"data_indexed\">Indexed</choice>\n      <change>\n        <condition value=\"data_received, data_indexed\">\n          <set token=\"show_all_data_charts\">true</set>\n          <set token=\"data_ingested_label\">$label$</set>\n          <unset token=\"show_data_ingested_split_by_token\" />\n        </condition>\n        <condition value=\"data_received\">\n          <unset token=\"show_all_data_charts\" />\n          <set token=\"data_ingested_label\">$label$</set>\n          <set token=\"show_data_ingested_split_by_token\">true</set>\n        </condition>\n        <condition value=\"data_indexed\">\n          <unset token=\"show_all_data_charts\" />\n          <set token=\"data_ingested_label\">$label$</set>\n          <set token=\"show_data_ingested_split_by_token\">true</set>\n        </condition>\n      </change>\n      <selectFirstChoice>true</selectFirstChoice>\n      <showClearButton>false</showClearButton>\n    </input>\n    <input depends=\"$show_data_ingested_split_by_token$ $allow_split_by_token$\" searchWhenChanged=\"true\" type=\"checkbox\" token=\"data_ingested_split_by_token\">\n      <label></label>\n      <choice>Split by Token</choice>\n    </input>\n    <chart depends=\"$show_all_data_charts$\">\n      <search>\n        <query>\n          `dmc_set_index_introspection` component=\"HttpEventCollector\" host=$host$ data.series=\"$data_series$\" $token_clause$ \n          | timechart partial=f minspan=1m sum(data.num_of_events) as events_total, sum(data.num_of_requests) as requests_total, sum(data.num_of_parser_errors) as parser_error_total, sum(data.num_of_requests_to_disabled_token) as requests_to_disabled_token_total, sum(data.num_of_auth_failures) as auth_failures_total, sum(data.num_of_requests_to_incorrect_url) as requests_to_incorrect_url_total, sum(data.total_bytes_indexed) as data_indexed, sum(data.total_bytes_received) as data_received\n          | eval data_received=data_received/pow(1024, 2) \n          | eval data_indexed=data_indexed/pow(1024, 2) \n          | eval valid_requests_total = requests_total\n          | fields _time, $data_type$\n          | rename data_received as \"Data Received\", data_indexed as \"Data Indexed\"\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <option name=\"charting.chart\">line</option>\n      <option name=\"charting.axisTitleY.text\">MB</option>\n      <option name=\"charting.axisTitleX.text\">Time</option>\n      <option name=\"charting.legend.placement\">bottom</option>\n      <option name=\"charting.axisY.minimumNumber\">0</option>\n      <option name=\"charting.chart.nullValueMode\">zero</option>\n    </chart>\n    <chart rejects=\"$data_ingested_split_by_token$ $token_selected$ $show_all_data_charts$\">\n      <search>\n        <query>\n          `dmc_set_index_introspection` component=\"HttpEventCollector\" host=$host$ data.series=\"$data_series$\" $token_clause$ \n          | timechart partial=f minspan=1m sum(data.num_of_events) as events_total, sum(data.num_of_requests) as requests_total, sum(data.num_of_parser_errors) as parser_error_total, sum(data.num_of_requests_to_disabled_token) as requests_to_disabled_token_total, sum(data.num_of_auth_failures) as auth_failures_total, sum(data.num_of_requests_to_incorrect_url) as requests_to_incorrect_url_total, sum(data.total_bytes_indexed) as data_indexed, sum(data.total_bytes_received) as data_received\n          | eval data_received=data_received/pow(1024, 2) \n          | eval data_indexed=data_indexed/pow(1024, 2) \n          | eval valid_requests_total = requests_total\n          | fields _time, $data_type$\n          | rename data_received as \"Data Received\", data_indexed as \"Data Indexed\"\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <option name=\"charting.chart\">line</option>\n      <option name=\"charting.axisTitleY.text\">MB</option>\n      <option name=\"charting.axisTitleX.text\">Time</option>\n      <option name=\"charting.legend.placement\">bottom</option>\n      <option name=\"charting.axisY.minimumNumber\">0</option>\n      <option name=\"charting.chart.nullValueMode\">zero</option>\n    </chart>\n    <chart depends=\"$token_selected$\" rejects=\"$show_all_data_charts$\">\n      <search>\n        <query>\n          `dmc_set_index_introspection` component=\"HttpEventCollector\" host=$host$ data.series=\"$data_series$\" $token_clause$ \n          | timechart partial=f minspan=1m sum(data.num_of_events) as events_total, sum(data.num_of_requests) as requests_total, sum(data.num_of_parser_errors) as parser_error_total, sum(data.num_of_requests_to_disabled_token) as requests_to_disabled_token_total, sum(data.num_of_auth_failures) as auth_failures_total, sum(data.num_of_requests_to_incorrect_url) as requests_to_incorrect_url_total, sum(data.total_bytes_indexed) as data_indexed, sum(data.total_bytes_received) as data_received\n          | eval data_received=data_received/pow(1024, 2) \n          | eval data_indexed=data_indexed/pow(1024, 2) \n          | eval valid_requests_total = requests_total\n          | fields _time, $data_type$\n          | rename data_received as \"Data Received\", data_indexed as \"Data Indexed\"\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <option name=\"charting.chart\">line</option>\n      <option name=\"charting.axisTitleY.text\">MB</option>\n      <option name=\"charting.axisTitleX.text\">Time</option>\n      <option name=\"charting.legend.placement\">bottom</option>\n      <option name=\"charting.axisY.minimumNumber\">0</option>\n      <option name=\"charting.chart.nullValueMode\">zero</option>\n    </chart>\n    <chart depends=\"$allow_split_by_token$ $data_ingested_split_by_token$\" rejects=\"$show_all_data_charts$\">\n      <search>\n        <query>\n          `dmc_set_index_introspection` component=\"HttpEventCollector\" host=$host$ data.series=\"http_event_collector_token\"\n          | bin _time minspan=1m \n          | stats sum(data.total_bytes_indexed) as data_indexed, sum(data.total_bytes_received) as data_received, values(data.token_name) as token_name by _time\n          | eval data_received=data_received/pow(1024, 2)\n          | eval data_indexed=data_indexed/pow(1024, 2)\n          | timechart partial=f minspan=1m sum($data_type$) by token_name\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <option name=\"charting.chart\">line</option>\n      <option name=\"charting.axisTitleY.text\">MB</option>\n      <option name=\"charting.axisTitleX.text\">Time</option>\n      <option name=\"charting.legend.placement\">bottom</option>\n      <option name=\"charting.axisY.minimumNumber\">0</option>\n      <option name=\"charting.chart.nullValueMode\">zero</option>\n    </chart>\n  </panel>\n</row>\n<row>\n  <panel depends=\"$all_tokens_selected$\" rejects=\"$snapshot$\">\n    <title>Tokens ($token_count$)</title>\n    <table>\n      <search>\n        <query>\n          | rest splunk_server=$splunk_server$ /services/data/inputs/http\n          | eval enabled = if(disabled == 1, \"No\", \"Yes\")\n          | eval Token=substr(title, 8)\n          | fields Token, enabled\n          | join type=\"left\" Token [search http_event_collector_token `dmc_set_index_introspection` host=$host$\n          | stats sum(data.num_of_events) as events_total, sum(data.num_of_requests) as requests_total, sum(data.num_of_parser_errors) as parser_errors_total, sum(data.num_of_requests_to_disabled_token) as requests_to_disabled_token_total, sum(data.num_of_auth_failures) as requests_with_auth_failures, sum(data.num_of_requests_to_incorrect_url) as requests_to_incorrect_url, sum(data.total_bytes_indexed) as data_indexed, sum(data.total_bytes_received) as data_received by data.token_name\n          | eval data_indexed=data_indexed/pow(1024, 2)\n          | eval data_received=data_received/pow(1024, 2)\n          | rename \"Data Indexed\" as \"Data Indexed (MB)\" \"Data Received\" as \"Data Received (MB)\"\n          | eval valid_requests_total = requests_total\n          | eval invalid_request_count_total = requests_to_disabled_token_total + requests_with_auth_failures + requests_to_incorrect_url\n          | fields data.token_name, events_total, valid_requests_total, invalid_request_count_total, data_received, data_indexed\n          | rename data.token_name as \"Token\"]\n          | eval events_total=if(isnull(events_total), 0, events_total)\n          | eval invalid_request_count_total=if(isnull(invalid_request_count_total), 0, invalid_request_count_total)\n          | eval valid_requests_total=if(isnull(valid_requests_total), 0, valid_requests_total)\n          | eval data_received=if(isnull(data_received), 0, data_received)\n          | eval data_indexed=if(isnull(data_indexed), 0, data_indexed)\n          | fields Token, enabled, data_indexed, data_received, events_total, invalid_request_count_total, valid_requests_total\n          | rename enabled as \"Enabled\", data_indexed as \"Data Indexed (MB)\", data_received as \"Data Received (MB)\", events_total as \"Event Count\", invalid_request_count_total as \"Invalid Request Count\", valid_requests_total as \"Valid Request Count\"\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n        <preview>\n          <set token=\"token_count\">$job.resultCount$</set>\n        </preview>\n        <finalized>\n          <set token=\"token_count\">$job.resultCount$</set>\n        </finalized>\n      </search>\n      <option name=\"drilldown\">none</option>\n    </table>\n  </panel>\n</row>\n</form>",
"eai:type": "views",
"name": "http_event_collector_instance",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" script=\"common_control.js, cell_fill_gauge.js, index_detail_deployment_extension.js\" stylesheet=\"index_type.css\">\n    <label>Index Detail: Deployment</label>\n    <search id=\"index_base_search\">\n        <query>\n            | rest splunk_server_group=dmc_group_indexer splunk_server_group=\"$group$\" /services/data/indexes/$index$\n            | join title splunk_server type=outer [| rest splunk_server_group=dmc_group_indexer splunk_server_group=\"$group$\" /services/data/indexes-extended/$index$]\n            | eval bucketCount = coalesce(total_bucket_count, 0)\n            | eval eventCount = coalesce(totalEventCount, 0)\n            | eval coldBucketSize = coalesce('bucket_dirs.cold.bucket_size', 'bucket_dirs.cold.size', 0)\n            | eval coldBucketSizeGB = round(coldBucketSize/ 1024, 2)\n            | eval coldBucketMaxSizeGB = if(isnull('coldPath.maxDataSizeMB') OR 'coldPath.maxDataSizeMB' = 0, \"unlimited\", round('coldPath.maxDataSizeMB' / 1024, 2))\n            | eval coldBucketUsageGB = coldBucketSizeGB.\" / \".coldBucketMaxSizeGB\n            | eval homeBucketSizeGB = coalesce(round((total_size - coldBucketSize) / 1024, 2), 0.00)\n            | eval homeBucketMaxSizeGB = round('homePath.maxDataSizeMB' / 1024, 2)\n            | eval homeBucketMaxSizeGB = if(homeBucketMaxSizeGB > 0, homeBucketMaxSizeGB, \"unlimited\")\n            | eval homeBucketUsageGB = homeBucketSizeGB.\" / \".homeBucketMaxSizeGB\n            | eval dataAgeDays = coalesce(round((now() - strptime(minTime,\"%Y-%m-%dT%H:%M:%S%z\")) / 86400, 0), 0)\n            | eval frozenTimePeriodDays = round(frozenTimePeriodInSecs / 86400, 0)\n            | eval frozenTimePeriodDays = if(frozenTimePeriodDays > 0, frozenTimePeriodDays, \"unlimited\")\n            | eval freezeRatioDays = dataAgeDays.\" / \".frozenTimePeriodDays\n            | eval indexSizeGB = if(currentDBSizeMB >= 1 AND totalEventCount >=1, round(currentDBSizeMB/1024, 2), 0.00)\n            | eval maxTotalDataSizeGB = round(maxTotalDataSizeMB / 1024, 2)\n            | eval indexMaxSizeGB = if(maxTotalDataSizeGB > 0, maxTotalDataSizeGB, \"unlimited\")\n            | eval indexSizeUsageGB = indexSizeGB.\" / \".indexMaxSizeGB\n            | eval indexSizeUsagePerc = if(isNum(indexMaxSizeGB) AND (indexMaxSizeGB > 0), round(indexSizeGB / indexMaxSizeGB * 100, 2).\"%\", \"N/A\")\n            | eval total_raw_size = coalesce(total_raw_size, 0)\n        </query>\n        <done>\n            <set token=\"indexdatatype\">$result.datatype$</set>\n        </done>\n    </search>\n    <fieldset autoRun=\"true\" submitButton=\"false\">\n        <input type=\"radio\" searchWhenChanged=\"true\" token=\"datatype\">\n            <label>Index Type</label>\n            <choice value=\"\">Event Indexes Only</choice>\n            <choice value=\"datatype=all\">All Index Types *</choice>\n            <default></default>\n        </input>\n        <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"group\">\n            <label>Group</label>\n            <showClearButton>false</showClearButton>\n            <search>\n                <query>\n                    | `dmc_get_groups_containing_role(dmc_group_indexer)`\n                    | where search_group!=\"dmc_group_indexer\"\n                </query>\n            </search>\n            <fieldForLabel>label</fieldForLabel>\n            <fieldForValue>search_group</fieldForValue>\n            <choice value=\"*\">All Indexers</choice>\n            <default>*</default>\n        </input>\n        <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"index\">\n            <label>Index</label>\n            <showClearButton>false</showClearButton>\n            <selectFirstChoice>true</selectFirstChoice>\n            <fieldForLabel>title</fieldForLabel>\n            <fieldForValue>title</fieldForValue>\n            <search>\n                <query>\n                    | rest splunk_server_group=dmc_group_indexer splunk_server_group=\"$group$\" /services/data/indexes $datatype$\n                    | `dmc_exclude_indexes`\n                    | stats count by title\n                    | fields - count\n                </query>\n            </search>\n        </input>\n        <html id=\"index_type_disclaimer\">\n            <p>The \"All Index Types\" option is not compatible with indexers running Splunk Enterprise 6.6 or earlier, where only event indexes exist.</p>\n        </html>\n    </fieldset>\n    <row>\n        <panel>\n            <html>\n                <h2>\n                    <span>Select views: </span>\n                    <span id=\"link-switcher-view\">\n                        <a href=\"#\" class=\"btn-pill active\" data-item=\"all\">All</a>\n                        <a href=\"#\" class=\"btn-pill\" data-item=\"snapshot\">Snapshot</a>\n                        <a href=\"#\" class=\"btn-pill\" data-item=\"historical\">Historical</a>\n                    </span>\n                </h2>\n            </html>\n        </panel>\n    </row>\n    <row>\n        <panel rejects=\"$historical$\">\n            <title>Snapshots</title>\n        </panel>\n    </row>\n    <row>\n        <panel rejects=\"$historical$\">\n            <title>Index Structure Overview</title>\n            <single>\n                <option name=\"underLabel\">Indexers</option>\n                <option name=\"height\">80px</option>                   \n                <search base=\"index_base_search\">\n                    <query>\n                        stats dc(splunk_server) as instances\n                    </query>\n                </search>\n            </single>\n            <single>\n                <option name=\"underLabel\">Total Index Size</option>\n                <option name=\"height\">80px</option>                   \n                <search base=\"index_base_search\">\n                    <query>\n                        stats sum(indexSizeGB) as totalIndexSizeGB\n                        | eval totalIndexSizeGB = totalIndexSizeGB.\" GB\"\n                    </query>\n                </search>\n            </single>\n            <single>\n                <option name=\"underLabel\">Total Raw Data Size (Uncompressed)</option>\n                <option name=\"height\">80px</option>                   \n                <search base=\"index_base_search\">\n                    <query>\n                        search title=$index$\n                        | stats sum(eval(total_raw_size / 1024)) as totalRawSizeGB\n                        | eval totalRawSizeGB = round(totalRawSizeGB, 2).\" GB\"\n                    </query>\n                </search>\n            </single>\n            <single>\n                <option name=\"underLabel\">Raw to Index Size Ratio*</option>\n                <option name=\"height\">80px</option>                   \n                <search base=\"index_base_search\">\n                    <query>\n                        stats sum(indexSizeGB) as totalIndexSizeGB\n                        sum(eval(total_raw_size / 1024)) as totalRawSizeGB\n                        | eval compressionRatio = round(totalRawSizeGB / totalIndexSizeGB, 2).\":1\"\n                        | fields compressionRatio\n                        | eval compressionRatio = if(isnotnull(compressionRatio), compressionRatio, \"N/A\")\n                    </query>\n                </search>\n            </single>\n            <html>\n                <p>* This is the ratio of uncompressed raw data size to index size.</p>\n            </html>\n        </panel>\n    </row>\n    <row>\n        <panel rejects=\"$historical$\">\n            <title>Events Overview</title>\n            <single>\n                <option name=\"underLabel\">Total Events</option>\n                <option name=\"height\">80px</option>                   \n                <search base=\"index_base_search\">\n                    <query>\n                        stats sum(eventCount) as totalEventCount\n                        | eval totalEventCount = toString(totalEventCount, \"commas\")\n                    </query>\n                </search>\n            </single>\n            <single>\n                <option name=\"underLabel\">Earliest Event</option>\n                <option name=\"height\">80px</option>                   \n                <search base=\"index_base_search\">\n                    <query>\n                        stats min(minTime) as oldestEvent\n                        | eval oldestEvent = replace(oldestEvent, \"T\", \" \")\n                    </query>\n                </search>\n            </single>\n            <single>\n                <option name=\"underLabel\">Latest Event</option>\n                <option name=\"height\">80px</option>                   \n                <search base=\"index_base_search\">\n                    <query>\n                        stats max(maxTime) as newestEvent\n                        | eval newestEvent = replace(newestEvent, \"T\", \" \")\n                    </query>\n                </search>\n            </single>\n        </panel>\n    </row>\n    <row>\n        <panel rejects=\"$historical$\">\n            <title>Indexer Averages</title>\n            <single>\n                <option name=\"underLabel\">Average Index Size</option>\n                <option name=\"height\">80px</option>                   \n                <search base=\"index_base_search\">\n                    <query>\n                        stats avg(indexSizeGB) as avgIndexSizeGB\n                        | eval avgIndexSizeGB = round(avgIndexSizeGB, 2).\" GB\"\n                    </query>\n                </search>\n            </single>\n            <single>\n                <option name=\"underLabel\">Average Event Count</option>\n                <option name=\"height\">80px</option>                   \n                <search base=\"index_base_search\">\n                    <query>\n                        stats avg(eventCount) as avgEventCount\n                        | eval avgEventCount = toString(floor(avgEventCount), \"commas\")\n                    </query>\n                </search>\n            </single>\n            <single>\n                <option name=\"underLabel\">Median Data Age</option>\n                <option name=\"height\">80px</option>                   \n                <search base=\"index_base_search\">\n                    <query>\n                        eval dataAgeDays = if(isnotnull(dataAgeDays), dataAgeDays, 0)\n                        | stats median(dataAgeDays) as medianDataAge\n                        | eval medianDataAge = medianDataAge.\" days\"\n                    </query>\n                </search>\n            </single>\n            <single>\n                <option name=\"underLabel\">Average Bucket Count</option>\n                <option name=\"height\">80px</option>                   \n                <search base=\"index_base_search\">\n                    <query>\n                        stats avg(bucketCount) as avgBucketCount\n                        | eval avgBucketCount = floor(avgBucketCount)\n                    </query>\n                </search>\n            </single>\n        </panel>\n    </row>\n    <row>\n        <panel rejects=\"$historical$\">\n            <title>Instances ($indexCount$)</title>\n            <table id=\"table1\">\n                <search base=\"index_base_search\">\n                    <query>\n                        eval avgBucketSize = round(indexSizeGB / bucketCount, 2)\n                        | fields splunk_server, freezeRatioDays, indexSizeUsageGB, homeBucketUsageGB, coldBucketUsageGB, eventCount, bucketCount, avgBucketSize\n                        | rename splunk_server as \"Indexer\"\n                        freezeRatioDays as \"Data Age vs Frozen Age (days)\"\n                        indexSizeUsageGB as \"Index Usage (GB)\"\n                        homeBucketUsageGB as \"Home Path Usage (GB)\"\n                        coldBucketUsageGB as \"Cold Path Usage (GB)\"\n                        eventCount as \"Total Event Count\"\n                        bucketCount as \"Total Bucket Count\"\n                        avgBucketSize as \"Average Bucket Size (GB)\"\n                    </query>\n                    <done>\n                        <set token=\"indexCount\">$job.resultCount$</set>\n                    </done>\n                </search>\n                <drilldown target=\"_blank\">\n                    <link>\n                        /app/splunk_monitoring_console/index_detail_instance?form.datatype=$datatype$&amp;form.single_index_name=$index$:$indexdatatype$&amp;form.splunk_server=$row.Indexer$\n                    </link>\n                </drilldown>\n            </table>\n            <html>\n                <p>The columns use attributes specified in <a href=\"/help?location=learnmore.index.settings\" class=\"external\" target=\"_blank\">indexes.conf</a>:</p>\n                <ul>\n                    <li><b>Data Age vs Frozen Age:</b> The first value is based on the age of the oldest event in the index. The second value is derived from the attribute frozenTimePeriodInSecs.</li>\n                    <li><b>Index Usage:</b> The first value is the current size of the index. The second value is the index capacity, as specified  in maxTotalDataSizeMB.</li>\n                    <li><b>Home Path Usage:</b> The first value is the current size of the home path portion of the index. The second value is the home path capacity, as specified in homePath.maxDataSizeMB.</li>\n                    <li><b>Cold Path Usage:</b> The first value is the current size of the cold path portion of the index. The second value is the cold path capacity, as specified in coldPath.maxDataSizeMB.</li>\n                </ul>\n            </html>\n        </panel>\n    </row>\n    <row>\n        <panel rejects=\"$historical$\">\n            <title>Event Count by Hosts ($hostCount$)</title>\n            <table>\n                <search>\n                    <query>\n                        | metadata type=hosts index=$index$ splunk_server_group=dmc_group_indexer splunk_server_group=\"$group$\"\n                        | fields host, totalCount\n                        | sort - totalCount\n                        | rename host as Host, totalCount as \"Event Count\"\n                    </query>\n                    <done>\n                        <set token=\"hostCount\">$job.resultCount$</set>\n                    </done>\n                </search>\n                <option name=\"dataOverlayMode\">heatmap</option>\n                <option name=\"drilldown\">none</option>\n            </table>\n        </panel>\n        <panel rejects=\"$historical$\">\n            <title>Event Count by Sources ($sourceCount$)</title>\n            <table>\n                <search>\n                    <query>\n                        | metadata type=sources index=$index$ splunk_server_group=dmc_group_indexer splunk_server_group=\"$group$\"\n                        | fields source, totalCount\n                        | sort - totalCount\n                        | rename source as Source, totalCount as \"Event Count\"\n                    </query>\n                    <done>\n                        <set token=\"sourceCount\">$job.resultCount$</set>\n                    </done>\n                </search>\n                <option name=\"dataOverlayMode\">heatmap</option>\n                <option name=\"drilldown\">none</option>\n            </table>\n        </panel>\n        <panel rejects=\"$historical$\">\n            <title>Event Count by Sourcetypes ($sourcetypeCount$)</title>\n            <table>\n\u2248                <search>\n                    <query>\n                        | metadata type=sourcetypes index=$index$ splunk_server_group=dmc_group_indexer splunk_server_group=\"$group$\"\n                        | fields sourcetype, totalCount\n                        | sort - totalCount\n                        | rename sourcetype as Sourcetype, totalCount as \"Event Count\"\n                    </query>\n                    <done>\n                        <set token=\"sourcetypeCount\">$job.resultCount$</set>\n                    </done>\n                </search>\n                <option name=\"dataOverlayMode\">heatmap</option>\n                <option name=\"drilldown\">none</option>\n            </table>\n        </panel>\n    </row>\n    <row>\n        <panel rejects=\"$snapshot$\">\n            <title>Historical Charts</title>\n            <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n                <label>Time Range:</label>\n                <default>\n                    <earliestTime>-15d@d</earliestTime>\n                    <latestTime>now</latestTime>\n                </default>\n            </input>\n        </panel>\n    </row>\n    <row>\n        <panel rejects=\"$snapshot$\">\n            <title>$IndexUsageChartTitle$ Index Size (GB)</title>\n            <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"funcDiskSizeUsage\">\n                <label>Aggregation</label>\n                <showClearButton>false</showClearButton>\n                <default>Max</default>\n                <choice value=\"Avg\">Average</choice>\n                <choice value=\"Median\">Median</choice>\n                <choice value=\"Min\">Minimum</choice>\n                <choice value=\"Max\">Maximum</choice>\n                <choice value=\"Perc90\">90th Percentile</choice>\n                <choice value=\"First\">Sampled</choice>\n                <change>\n                    <set token=\"IndexUsageChartTitle\">$label$</set>\n                </change>\n            </input>\n            <chart>\n                <search>\n                    <query>\n                        index=_introspection sourcetype=splunk_disk_objects component=Indexes data.name=$index$ search_group=dmc_group_indexer search_group=\"$group$\"\n                        | `dmc_set_bin_for_disk_usage`\n                        | stats latest(data.total_size) as totalSize by host _time\n                        | `dmc_timechart_for_disk_usage` $funcDiskSizeUsage$(eval(totalSize /1024)) as \"Index Size\"\n                    </query>\n                    <earliest>$time.earliest$</earliest>\n                    <latest>$time.latest$</latest>\n                </search>\n                <option name=\"charting.chart\">area</option>\n                <option name=\"charting.axisTitleX.text\">Time</option>\n                <option name=\"charting.axisTitleY.text\">GB</option>\n                <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n            </chart>\n        </panel>\n    </row>\n    <row>\n        <panel rejects=\"$snapshot$\" id=\"instances_by_index_usage\">\n            <title>Instances by $PercentIndexUsageChartTitle$ Index Usage (%)</title>\n            <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"funcDiskPercUsage\">\n                <label>Aggregation</label>\n                <showClearButton>false</showClearButton>\n                <default>Avg</default>\n                <choice value=\"Avg\">Average</choice>\n                <choice value=\"Median\">Median</choice>\n                <choice value=\"Min\">Minimum</choice>\n                <choice value=\"Max\">Maximum</choice>\n                <choice value=\"Perc90\">90th Percentile</choice>\n                <choice value=\"First\">Sampled</choice>\n                <change>\n                    <set token=\"PercentIndexUsageChartTitle\">$label$</set>\n                </change>\n            </input>\n            <html>\n                <div class=\"heatmap_toggle\"></div>\n            </html>\n            <viz type=\"splunk_monitoring_console.heatmap\">\n                <search>\n                    <query>\n                        index=_introspection sourcetype=splunk_disk_objects component=Indexes data.name=$index$ search_group=dmc_group_indexer search_group=\"$group$\"\n                        | eval pctDiskUsage = 'data.total_size' / 'data.total_capacity'\n                        | bin _time minspan=10min\n                        | stats $funcDiskPercUsage$(pctDiskUsage) as pctDiskUsage by host _time\n                        | rangemap field=pctDiskUsage \"0-25%\"=0-0.25 \"25-50%\"=0.2501-0.5 \"50-75%\"=0.5001-0.75 \"75-100%\"=0.7501-1 default=abnormal\n                        | `dmc_timechart_for_disk_usage` partial=f dc(host) as host by range\n                        | fields _time, \"0-25%\", \"25-50%\", \"50-75%\", \"75-100%\"\n                    </query>\n                    <earliest>$time.earliest$</earliest>\n                    <latest>$time.latest$</latest>\n                </search>\n            </viz>\n            <chart>\n                <search>\n                    <query>\n                        index=_introspection sourcetype=splunk_disk_objects component=Indexes data.name=$index$ search_group=dmc_group_indexer search_group=\"$group$\"\n                        | eval pctDiskUsage = 'data.total_size' / 'data.total_capacity'\n                        | bin _time minspan=10min\n                        | stats $funcDiskPercUsage$(pctDiskUsage) as pctDiskUsage by host _time\n                        | rangemap field=pctDiskUsage \"0-25%\"=0-0.25 \"25-50%\"=0.2501-0.5 \"50-75%\"=0.5001-0.75 \"75-100%\"=0.7501-1 default=abnormal\n                        | `dmc_timechart_for_disk_usage` partial=f dc(host) as host by range\n                        | fields _time, \"0-25%\", \"25-50%\", \"50-75%\", \"75-100%\"\n                    </query>\n                    <earliest>$time.earliest$</earliest>\n                    <latest>$time.latest$</latest>\n                </search>\n                <option name=\"charting.chart\">column</option>\n                <option name=\"charting.chart.stackMode\">stacked</option>\n                <option name=\"charting.axisTitleX.text\">Time</option>\n                <option name=\"charting.axisTitleY.text\">Instance Count</option>\n                <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n            </chart>\n            <html>\n                <p>Note: An indexer on which the maximum data size of the index is infinite will not be represented here.</p>\n            </html>\n        </panel>\n    </row>\n    <row>\n        <panel rejects=\"$snapshot$\">\n            <title>$DataAgeChartTitle$ Data Age</title>\n            <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"funcDataAge\">\n                <label>Aggregation</label>\n                <showClearButton>false</showClearButton>\n                <default>Median</default>\n                <choice value=\"Avg\">Average</choice>\n                <choice value=\"Median\">Median</choice>\n                <choice value=\"Min\">Minimum</choice>\n                <choice value=\"Max\">Maximum</choice>\n                <choice value=\"Perc90\">90th Percentile</choice>\n                <choice value=\"First\">Sampled</choice>\n                <change>\n                    <set token=\"DataAgeChartTitle\">$label$</set>\n                </change>\n            </input>\n            <chart>\n                <search>\n                    <query>\n                        index=_introspection sourcetype=splunk_disk_objects component=Indexes data.name=$index$ search_group=dmc_group_indexer search_group=\"$group$\"\n                        | eval data_birth_date = if(isnotnull('data.bucket_dirs.cold.event_min_time'), 'data.bucket_dirs.cold.event_min_time', 'data.bucket_dirs.home.event_min_time')\n                        | eval data_age_days = round((_time - data_birth_date) / 86400, 0)\n                        | `dmc_timechart_for_disk_usage` $funcDataAge$(data_age_days) as \"Data Age\"\n                    </query>\n                    <earliest>$time.earliest$</earliest>\n                    <latest>$time.latest$</latest>\n                </search>\n                <option name=\"charting.chart\">line</option>\n                <option name=\"charting.axisTitleX.text\">Time</option>\n                <option name=\"charting.axisTitleY.text\">Data Age (days)</option>\n                <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n            </chart>\n        </panel>\n    </row>\n</form>",
"eai:type": "views",
"name": "index_detail_deployment",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" script=\"cell_fill_gauge.js, common_control.js\" stylesheet=\"index_type.css\">\n  <label>Index Detail: Instance</label>\n  <search id=\"indexes_base_search\">\n    <query>\n| rest splunk_server=$splunk_server$ /services/data/indexes $datatype$\n  | join type=outer title [\n    | rest splunk_server=$splunk_server$ /services/data/indexes-extended $datatype$\n  ]\n| `dmc_exclude_indexes`\n| eval warm_bucket_size = coalesce('bucket_dirs.home.warm_bucket_size', 'bucket_dirs.home.size')\n| eval cold_bucket_size = coalesce('bucket_dirs.cold.bucket_size', 'bucket_dirs.cold.size')\n| eval hot_bucket_size = if(isnotnull(cold_bucket_size), total_size - cold_bucket_size - warm_bucket_size, total_size - warm_bucket_size)\n| eval thawed_bucket_size = coalesce('bucket_dirs.thawed.bucket_size', 'bucket_dirs.thawed.size')\n| eval warm_bucket_size_gb = coalesce(round(warm_bucket_size / 1024, 2), 0.00)\n| eval hot_bucket_size_gb = coalesce(round(hot_bucket_size / 1024, 2), 0.00)\n| eval cold_bucket_size_gb = coalesce(round(cold_bucket_size / 1024, 2), 0.00)\n| eval thawed_bucket_size_gb = coalesce(round(thawed_bucket_size / 1024, 2), 0.00)\n\n| eval warm_bucket_count = coalesce('bucket_dirs.home.warm_bucket_count', 0)\n| eval hot_bucket_count = coalesce('bucket_dirs.home.hot_bucket_count', 0)\n| eval cold_bucket_count = coalesce('bucket_dirs.cold.bucket_count', 0)\n| eval thawed_bucket_count = coalesce('bucket_dirs.thawed.bucket_count', 0)\n| eval home_event_count = coalesce('bucket_dirs.home.event_count', 0)\n| eval cold_event_count = coalesce('bucket_dirs.cold.event_count', 0)\n| eval thawed_event_count = coalesce('bucket_dirs.thawed.event_count', 0)\n\n| eval home_bucket_size_gb = coalesce(round((warm_bucket_size + hot_bucket_size) / 1024, 2), 0.00)\n| eval homeBucketMaxSizeGB = coalesce(round('homePath.maxDataSizeMB' / 1024, 2), 0.00)\n| eval home_bucket_capacity_gb = if(homeBucketMaxSizeGB > 0, homeBucketMaxSizeGB, \"unlimited\")\n| eval home_bucket_usage_gb = home_bucket_size_gb.\" / \".home_bucket_capacity_gb\n| eval cold_bucket_capacity_gb = coalesce(round('coldPath.maxDataSizeMB' / 1024, 2), 0.00)\n| eval cold_bucket_capacity_gb = if(cold_bucket_capacity_gb > 0, cold_bucket_capacity_gb, \"unlimited\")\n| eval cold_bucket_usage_gb = cold_bucket_size_gb.\" / \".cold_bucket_capacity_gb\n\n| eval currentDBSizeGB = round(currentDBSizeMB / 1024, 2)\n| eval maxTotalDataSizeGB = if((maxTotalDataSizeMB > 0) AND isNull(remotePath), round(maxTotalDataSizeMB / 1024, 2), \"unlimited\")\n| eval disk_usage_gb = currentDBSizeGB.\" / \".maxTotalDataSizeGB\n\n| eval currentTimePeriodDay = coalesce(round((now() - strptime(minTime,\"%Y-%m-%dT%H:%M:%S%z\")) / 86400, 0), 0)\n| eval frozenTimePeriodDay = coalesce(round(frozenTimePeriodInSecs / 86400, 0), 0)\n| eval frozenTimePeriodDay = if(frozenTimePeriodDay > 0, frozenTimePeriodDay, \"unlimited\")\n| eval freeze_period_viz_day = currentTimePeriodDay.\" / \".frozenTimePeriodDay\n\n| eval total_bucket_count = toString(coalesce(total_bucket_count, 0), \"commas\")\n| eval totalEventCount = toString(coalesce(totalEventCount, 0), \"commas\")\n| eval total_raw_size_gb = round(total_raw_size / 1024, 2)\n| eval avg_bucket_size_gb = round(currentDBSizeGB / total_bucket_count, 2)\n| eval compress_ratio = round(total_raw_size_gb / currentDBSizeGB, 2).\" : 1\"\n\n| fields title, datatype\n    currentDBSizeGB, totalEventCount, total_bucket_count,  avg_bucket_size_gb,\n    total_raw_size_gb, compress_ratio, minTime, maxTime\n    freeze_period_viz_day, disk_usage_gb, home_bucket_usage_gb, cold_bucket_usage_gb,\n    hot_bucket_size_gb, warm_bucket_size_gb, cold_bucket_size_gb, thawed_bucket_size_gb,\n    hot_bucket_count,   warm_bucket_count,   cold_bucket_count,   thawed_bucket_count,\n    home_event_count,   cold_event_count,    thawed_event_count,\n    homePath, homePath_expanded, coldPath, coldPath_expanded, thawedPath, thawedPath_expanded, summaryHomePath_expanded, tstatsHomePath, tstatsHomePath_expanded,\n    maxTotalDataSizeMB, frozenTimePeriodInSecs, homePath.maxDataSizeMB, coldPath.maxDataSizeMB,\n    maxDataSize, maxHotBuckets, maxWarmDBCount\n    </query>\n  </search>\n  <search id=\"index_historical_base_search\">\n    <query>\n      index=_introspection host=$host$ sourcetype=splunk_disk_objects component=Indexes data.name=$single_index_name$\n      | eval data_birth_date = if(isnotnull('data.bucket_dirs.cold.event_min_time'), 'data.bucket_dirs.cold.event_min_time', 'data.bucket_dirs.home.event_min_time')\n      | eval data_age_days = round((_time - data_birth_date) / 86400, 0)\n      | eval data.total_capacity = if(isnotnull('data.total_capacity'), 'data.total_capacity', 500000)\n      | eval disk_usage = round('data.total_size' / 1024, 2)\n      | eval disk_capacity = round('data.total_capacity' / 1024, 2)\n      | `dmc_timechart_for_disk_usage` $funcDataAge$(data_age_days) as data_age_days, $funcDiskUsage$(disk_usage) as disk_usage, $funcDiskUsage$(disk_capacity) as disk_capacity\n    </query>\n    <earliest>$time.earliest$</earliest>\n    <latest>$time.latest$</latest>\n  </search>\n  <fieldset autoRun=\"true\" submitButton=\"false\">\n    <input type=\"radio\" searchWhenChanged=\"true\" token=\"datatype\">\n      <label>Index Type</label>\n      <choice value=\"\">Event Indexes Only</choice>\n      <choice value=\"datatype=all\">All Index Types *</choice>\n      <default></default>\n    </input>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"dmc_group\">\n      <label>Group</label>\n      <showClearButton>false</showClearButton>\n      <search>\n        <query>\n          | `dmc_get_groups_containing_role(dmc_group_indexer)`\n          | search search_group!=\"dmc_group_*\"\n        </query>\n      </search>\n      <fieldForLabel>label</fieldForLabel>\n      <fieldForValue>search_group</fieldForValue>\n      <choice value=\"dmc_group_indexer\">All Indexers</choice>\n      <default>dmc_group_indexer</default>\n    </input>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"splunk_server\">\n      <label>Instance</label>\n      <showClearButton>false</showClearButton>\n      <populatingSearch fieldForLabel=\"serverName\" fieldForValue=\"serverName\">\n        | `dmc_get_instance_info($dmc_group$)`\n        | where search_group=\"dmc_group_indexer\"\n      </populatingSearch>\n      <selectFirstChoice>true</selectFirstChoice>\n      <change>\n        <condition value=\"*\">\n          <set token=\"host\">$row.host$</set>\n        </condition>\n      </change>\n    </input>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"single_index_name\">\n      <label>Index</label>\n      <showClearButton>false</showClearButton>\n      <fieldForValue>index_data_type_combined</fieldForValue>\n      <fieldForLabel>title</fieldForLabel>\n      <search base=\"indexes_base_search\">\n        <query>| eval index_data_type_combined = title.\":\".datatype | stats count by title index_data_type_combined\n        </query>\n      </search>\n      <selectFirstChoice>true</selectFirstChoice>\n      <change>\n        <set token=\"single_index_name\">$label$</set>\n        <eval token=\"index_type_value\">mvindex(split($value$, \":\"),1)</eval>\n      </change>\n    </input>\n    <html id=\"index_type_disclaimer\">\n      <p>The \"All Index Types\" option is not compatible with indexers running Splunk Enterprise 6.6 or earlier, where only event indexes exist.</p>\n    </html>\n  </fieldset>\n  <row>\n    <panel>\n      <html>\n        <h2>\n          <span>Select views: </span>\n          <span id=\"link-switcher-view\">\n            <a href=\"#\" class=\"btn-pill active\" data-item=\"all\">All</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"snapshot\">Snapshot</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"historical\">Historical</a>\n          </span>\n        </h2>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Snapshots</title>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Overview</title>\n      <single>\n        <option name=\"height\">80px</option>\n        <search base=\"indexes_base_search\">\n          <query>search title=$single_index_name$ | fields currentDBSizeGB | eval currentDBSizeGB = currentDBSizeGB.\" GB\"</query>\n        </search>\n        <done>\n          <set token=\"currentDBSizeGB\">$result.currentDBSizeGB$</set>\n        </done>\n        <option name=\"underLabel\">Index Size</option>\n        <option name=\"refresh.time.visible\">false</option>\n      </single>\n      <single>\n        <option name=\"height\">80px</option>\n        <search base=\"indexes_base_search\">\n          <query>search title=$single_index_name$ | fields total_raw_size_gb | eval total_raw_size_gb = total_raw_size_gb.\" GB\"</query>\n        </search>\n        <option name=\"underLabel\">Uncompressed Raw Data Size</option>\n        <option name=\"refresh.time.visible\">false</option>\n      </single>\n      <single>\n        <option name=\"height\">80px</option>\n        <search base=\"indexes_base_search\">\n          <query>search title=$single_index_name$ | fields compress_ratio</query>\n        </search>\n        <option name=\"underLabel\">Raw to Index Size Ratio*</option>\n        <option name=\"refresh.time.visible\">false</option>\n      </single>\n      <html>\n        <p>* This is the ratio of uncompressed raw data size to index size.</p>\n      </html>\n      <single>\n        <option name=\"height\">80px</option>\n        <search base=\"indexes_base_search\">\n          <query>search title=$single_index_name$ | fields total_bucket_count</query>\n        </search>\n        <done>\n          <set token=\"total_bucket_count\">$result.total_bucket_count$</set>\n        </done>\n        <option name=\"underLabel\">Total Bucket Count</option>\n        <option name=\"refresh.time.visible\">false</option>\n      </single>\n      <single>\n        <option name=\"height\">80px</option>\n        <search base=\"indexes_base_search\">\n          <query>search title=$single_index_name$ | fields avg_bucket_size_gb | eval avg_bucket_size_gb = avg_bucket_size_gb.\" GB\"</query>\n        </search>\n        <option name=\"underLabel\">Average Bucket Size</option>\n        <option name=\"refresh.time.visible\">false</option>\n      </single>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Events</title>\n      <single>\n        <option name=\"height\">80px</option>\n        <search base=\"indexes_base_search\">\n          <query>search title=$single_index_name$ | fields totalEventCount</query>\n        </search>\n        <option name=\"underLabel\">Total Event Count</option>\n        <option name=\"refresh.time.visible\">false</option>\n      </single>\n      <single>\n        <option name=\"height\">80px</option>\n        <search base=\"indexes_base_search\">\n          <query>search title=$single_index_name$ | fields minTime | eval minTime = replace(minTime, \"T\", \" \")</query>\n        </search>\n        <option name=\"underLabel\">Earliest Event</option>\n        <option name=\"refresh.time.visible\">false</option>\n      </single>\n      <single>\n        <option name=\"height\">80px</option>\n        <search base=\"indexes_base_search\">\n          <query>search title=$single_index_name$ | fields maxTime | eval maxTime = replace(maxTime, \"T\", \" \")</query>\n        </search>\n        <option name=\"underLabel\">Latest Event</option>\n        <option name=\"refresh.time.visible\">false</option>\n      </single>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Status</title>\n      <table id=\"table1\">\n        <search base=\"indexes_base_search\">\n          <query>\nsearch title=$single_index_name$\n| fields freeze_period_viz_day, disk_usage_gb, home_bucket_usage_gb, cold_bucket_usage_gb\n| rename freeze_period_viz_day as \"Data Age vs Frozen Age (days)\", disk_usage_gb as \"Index Usage (GB)\", home_bucket_usage_gb as \"Home Path Usage (GB)\", cold_bucket_usage_gb as \"Cold Path Usage (GB)\"\n          </query>\n        </search>\n        <option name=\"drilldown\">none</option>\n        <option name=\"refresh.time.visible\">false</option>\n      </table>\n      <html>\n        <p>The columns use attributes specified in <a href=\"/help?location=learnmore.index.settings\" class=\"external\" target=\"_blank\">indexes.conf</a>:</p>\n        <ul>\n          <li><b>Data Age vs Frozen Age:</b> The first value is based on the age of the oldest event in the index. The second value is derived from the attribute frozenTimePeriodInSecs.</li>\n          <li><b>Index Usage:</b> The first value is the current size of the index. The second value is the index capacity, as specified  in maxTotalDataSizeMB.</li>\n          <li><b>Home Path Usage:</b> The first value is the current size of the home path portion of the index. The second value is the home path capacity, as specified in homePath.maxDataSizeMB.</li>\n          <li><b>Cold Path Usage:</b> The first value is the current size of the cold path portion of the index. The second value is the cold path capacity, as specified in coldPath.maxDataSizeMB.</li>\n        </ul>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Volumes</title>\n      <table id=\"index_volumes\">\n        <search>\n          <query>\n            <![CDATA[\n            | rest splunk_server=$splunk_server$ /services/data/indexes/$single_index_name$\n            | `dmc_exclude_indexes`\n            | rex field=homePath \"volume:(?<home_vol_name>[^/\\\\\\]*)(?:/|\\\\\\)\"\n            | rex field=coldPath \"volume:(?<cold_vol_name>[^/\\\\\\]*)(?:/|\\\\\\)\"\n            | fields home_vol_name cold_vol_name\n            | eval home_vol_name = if(isnull(home_vol_name), \"N/A\", home_vol_name)\n            | eval cold_vol_name = if(isnull(cold_vol_name), \"N/A\", cold_vol_name)\n            | rename home_vol_name as \"home\" cold_vol_name as \"cold\"\n            | transpose | rename column as \"Index Directory\" \"row 1\" as title\n\n            | join type=outer title [\n              | rest splunk_server=$splunk_server$ /services/data/index-volumes\n              | fields title, total_size, max_size, volume_path\n              | `dmc_exclude_volumes`\n              | eval total_size_gb = if(isnull(total_size), \"-\", round(total_size / 1024, 2))\n              | eval max_size_gb = if(isnull(max_size) OR max_size = \"infinite\", \"unlimited\", round(max_size / 1024, 2))\n              | eval disk_usage_gb = total_size_gb.\" / \".max_size_gb\n              | eval remaining_capacity_pct = (max_size_gb - total_size_gb) / max_size_gb\n              | fields title, disk_usage_gb, remaining_capacity_pct\n            ]\n\n            | eval disk_usage_gb = if(isnull(disk_usage_gb), \"N/A\", disk_usage_gb)\n            | eval \"Volume Freezing Due to Size\" = if(isnull(remaining_capacity_pct), \"N/A\", if(remaining_capacity_pct < 0.05, \"Yes\", \"No\"))\n            | rename title as \"Volume Name\" disk_usage_gb as \"Volume Usage / Capacity (GB)\"\n            | fields - remaining_capacity_pct\n            ]]>\n          </query>\n        </search>\n        <option name=\"drilldown\">none</option>\n        <option name=\"refresh.time.visible\">false</option>\n      </table>\n      <html>\n        <p>A volume is considered to be freezing or about to freeze data at 95% or more of configured disk usage capacity.</p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <chart>\n        <title>Bucket Size (GB)</title>\n        <search base=\"indexes_base_search\">\n          <query>\nsearch title=$single_index_name$\n| fields hot_bucket_size_gb, warm_bucket_size_gb, cold_bucket_size_gb, thawed_bucket_size_gb\n| rename hot_bucket_size_gb as Hot, warm_bucket_size_gb as Warm, cold_bucket_size_gb as Cold, thawed_bucket_size_gb as Thawed\n| eval bucket_dir = \"\"\n| fields bucket_dir, Hot, Warm, Cold, Thawed\n          </query>\n        </search>\n        <option name=\"drilldown\">none</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"refresh.time.visible\">false</option>\n        <option name=\"charting.axisTitleX.text\">Bucket Directory</option>\n        <option name=\"charting.fieldColors\">\n          {\"Hot\": 0xd85d3c, \"Warm\": 0xf7902b, \"Cold\":0x6ab7c7, \"Thawed\":0x5379af, \"Home\": 0xfac51c}\n        </option>\n      </chart>\n    </panel>\n    <panel rejects=\"$historical$\">\n      <chart>\n        <title>Bucket Event Count</title>\n        <search base=\"indexes_base_search\">\n          <query>\n            search title=$single_index_name$\n            | fields home_event_count, cold_event_count, thawed_event_count\n            | rename home_event_count as Home, cold_event_count as Cold, thawed_event_count as Thawed\n            | eval bucket_dir = \"\"\n            | fields bucket_dir, Home, Cold, Thawed\n          </query>\n        </search>\n        <option name=\"drilldown\">none</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"refresh.time.visible\">false</option>\n        <option name=\"charting.axisTitleX.text\">Bucket Directory</option>\n        <option name=\"charting.fieldColors\">\n          {\"Hot\": 0xd85d3c, \"Warm\": 0xf7902b, \"Cold\":0x6ab7c7, \"Thawed\":0x5379af, \"Home\": 0xfac51c}\n        </option>\n      </chart>\n    </panel>\n    <panel rejects=\"$historical$\">\n      <chart>\n        <title>Bucket Count</title>\n        <search base=\"indexes_base_search\">\n          <query>\n            search title=$single_index_name$\n            | fields hot_bucket_count, warm_bucket_count, cold_bucket_count, thawed_bucket_count\n            | rename hot_bucket_count as Hot, warm_bucket_count as Warm, cold_bucket_count as Cold, thawed_bucket_count as Thawed\n            | eval bucket_dir = \"\"\n            | fields bucket_dir, Hot, Warm, Cold, Thawed\n          </query>\n        </search>\n        <option name=\"drilldown\">none</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"refresh.time.visible\">false</option>\n        <option name=\"charting.axisTitleX.text\">Bucket Directory</option>\n        <option name=\"charting.fieldColors\">\n          {\"Hot\": 0xd85d3c, \"Warm\": 0xf7902b, \"Cold\":0x6ab7c7, \"Thawed\":0x5379af, \"Home\": 0xfac51c}\n        </option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <table>\n        <title>Event Count by Hosts ($hostCount$)</title>\n        <search>\n          <query>\n| metadata type=hosts index=$single_index_name$ splunk_server=$splunk_server$ datatype=$index_type_value$\n| fields host, totalCount\n| sort - totalCount\n| rename host as Host, totalCount as \"Event Count\"\n          </query>\n          <done>\n            <set token=\"hostCount\">$job.resultCount$</set>\n          </done>\n        </search>\n        <option name=\"drilldown\">none</option>\n        <option name=\"dataOverlayMode\">heatmap</option>\n        <option name=\"refresh.time.visible\">false</option>\n      </table>\n    </panel>\n    <panel rejects=\"$historical$\">\n      <table>\n        <title>Event Count by Sources ($sourceCount$)</title>\n        <search>\n          <query>\n| metadata type=sources index=$single_index_name$ splunk_server=$splunk_server$ datatype=$index_type_value$\n| fields source, totalCount\n| sort - totalCount\n| rename source as Source, totalCount as \"Event Count\"\n          </query>\n          <done>\n            <set token=\"sourceCount\">$job.resultCount$</set>\n          </done>\n        </search>\n        <option name=\"drilldown\">none</option>\n        <option name=\"dataOverlayMode\">heatmap</option>\n        <option name=\"refresh.time.visible\">false</option>\n      </table>\n    </panel>\n    <panel rejects=\"$historical$\">\n      <table>\n        <title>Event Count by Sourcetypes ($sourcetypeCount$)</title>\n        <search>\n          <query>\n| metadata type=sourcetypes index=$single_index_name$ splunk_server=$splunk_server$ datatype=$index_type_value$\n| fields sourcetype, totalCount\n| sort - totalCount\n| rename sourcetype as Sourcetype, totalCount as \"Event Count\"\n          </query>\n          <done>\n            <set token=\"sourcetypeCount\">$job.resultCount$</set>\n          </done>\n        </search>\n        <option name=\"drilldown\">none</option>\n        <option name=\"dataOverlayMode\">heatmap</option>\n        <option name=\"refresh.time.visible\">false</option>\n      </table>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Settings</title>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <table>\n        <title>Paths</title>\n        <search base=\"indexes_base_search\">\n          <query>\n            search title=$single_index_name$\n            | fields homePath, homePath_expanded, coldPath, coldPath_expanded, thawedPath, thawedPath_expanded, summaryHomePath_expanded, tstatsHomePath, tstatsHomePath_expanded\n            | transpose\n            | where column != \"_timediff\" AND column != \"_dmc_title\"\n            | rename column as Setting, \"row 1\" as Value\n          </query>\n        </search>\n        <option name=\"drilldown\">none</option>\n        <option name=\"refresh.time.visible\">false</option>\n      </table>\n    </panel>\n    <panel rejects=\"$historical$\">\n      <table>\n        <title>Retention policies</title>\n        <search base=\"indexes_base_search\">\n          <query>\n            search title=$single_index_name$\n            | fields maxTotalDataSizeMB, frozenTimePeriodInSecs, homePath.maxDataSizeMB, coldPath.maxDataSizeMB\n            | transpose\n            | where column != \"_timediff\" AND column != \"_dmc_title\"\n            | rename column as Setting, \"row 1\" as Value\n          </query>\n        </search>\n        <option name=\"drilldown\">none</option>\n        <option name=\"refresh.time.visible\">false</option>\n      </table>\n    </panel>\n    <panel rejects=\"$historical$\">\n      <table>\n        <title>Index Structure &amp; Bucket Configuration</title>\n        <search base=\"indexes_base_search\">\n          <query>\n            search title=$single_index_name$\n            | fields maxDataSize, maxHotBuckets, maxWarmDBCount\n            | transpose\n            | where column != \"_timediff\" AND column != \"_dmc_title\"\n            | rename column as Setting, \"row 1\" as Value\n          </query>\n        </search>\n        <option name=\"drilldown\">none</option>\n        <option name=\"refresh.time.visible\">false</option>\n      </table>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <html>\n        <p>Refer to <a href=\"/help?location=learnmore.index.settings\" class=\"external\" target=\"_blank\">indexes.conf</a> for more details about configuring indexes.</p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Historical Charts</title>\n      <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n        <label>Time Range:</label>\n        <default>\n          <earliestTime>-15d@d</earliestTime>\n          <latestTime>now</latestTime>\n        </default>\n      </input>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Index Size Over Time</title>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"funcDiskUsage\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>latest</default>\n        <choice value=\"latest\">Latest</choice>\n        <choice value=\"avg\">Average</choice>        \n        <choice value=\"min\">Minimum</choice>\n        <choice value=\"max\">Maximum</choice>\n      </input>\n      <input type=\"radio\" searchWhenChanged=\"true\" token=\"capacityOverlay\">\n        <label>Index Capacity Overlay</label>\n        <choice value=\"disk_capacity\">show</choice>\n        <choice value=\" \">hide</choice>\n        <default>disk_capacity</default>\n      </input>\n      <chart>\n        <search base=\"index_historical_base_search\">\n          <query>fields _time, disk_usage $capacityOverlay$</query>\n        </search>\n        <option name=\"charting.chart\">area</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Index Size (GB)</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.legend.placement\">none</option>\n        <option name=\"charting.chart.overlayFields\">disk_capacity</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Data Age Over Time</title>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"funcDataAge\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>avg</default>\n        <choice value=\"latest\">Latest</choice>\n        <choice value=\"avg\">Average</choice>        \n        <choice value=\"min\">Minimum</choice>\n        <choice value=\"max\">Maximum</choice>\n      </input>\n      <chart>\n        <search base=\"index_historical_base_search\">\n          <query>fields _time, data_age_days</query>\n        </search>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Data Age (days)</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.legend.placement\">none</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Bucket Properties Over Time</title>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"single_index_metric\">\n        <label>Metric</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"bucket_total_size_gb\">Total Bucket Size</choice>\n        <choice value=\"bucket_avg_size_gb\">Average Bucket Size</choice>\n        <choice value=\"bucket_count\">Bucket Count</choice>\n        <choice value=\"event_count\">Event Count</choice>\n        <default>bucket_total_size_gb</default>\n        <change>\n          <condition value=\"bucket_total_size_gb\">\n            <set token=\"single_index_y_label\">Total Bucket Size (GB)</set>\n          </condition>\n          <condition value=\"bucket_avg_size_gb\">\n            <set token=\"single_index_y_label\">Average Bucket Size (GB)</set>\n          </condition>\n          <condition value=\"bucket_count\">\n            <set token=\"single_index_y_label\">Bucket Count</set>\n          </condition>\n          <condition value=\"event_count\">\n            <set token=\"single_index_y_label\">Event Count</set>\n          </condition>\n        </change>\n      </input>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"funcBucket\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>latest</default>\n        <choice value=\"latest\">Latest</choice>\n        <choice value=\"avg\">Average</choice>        \n        <choice value=\"min\">Minimum</choice>\n        <choice value=\"max\">Maximum</choice>\n      </input>\n      <chart>\n        <search>\n          <query>\n            index=_introspection host=$host$ sourcetype=splunk_disk_objects component=Indexes data.name=$single_index_name$\n\n            | eval warm_bucket_total_size       = if(isnotnull('data.bucket_dirs.home.warm_bucket_size'), 'data.bucket_dirs.home.warm_bucket_size', 'data.bucket_dirs.home.size')\n            | eval cold_bucket_total_size       = if(isnotnull('data.bucket_dirs.cold.bucket_size'), 'data.bucket_dirs.cold.bucket_size', 'data.bucket_dirs.cold.size')\n            | eval thawed_bucket_total_size     = if(isnotnull('data.bucket_dirs.thawed.bucket_size'), 'data.bucket_dirs.thawed.bucket_size', 'data.bucket_dirs.thawed.size')\n            | eval hot_bucket_total_size        = if(isnotnull(cold_bucket_total_size), 'data.total_size' - cold_bucket_total_size - warm_bucket_total_size, 'data.total_size' - warm_bucket_total_size)\n\n            | eval warm_bucket_total_size_gb    = round(warm_bucket_total_size / 1024, 2)\n            | eval cold_bucket_total_size_gb    = round(cold_bucket_total_size / 1024, 2)\n            | eval thawed_bucket_total_size_gb  = round(thawed_bucket_total_size / 1024, 2)\n            | eval hot_bucket_total_size_gb     = round(hot_bucket_total_size / 1024, 2)\n\n            | eval warm_bucket_count            = 'data.bucket_dirs.home.warm_bucket_count'\n            | eval hot_bucket_count             = 'data.bucket_dirs.home.hot_bucket_count'\n            | eval cold_bucket_count            = 'data.bucket_dirs.cold.bucket_count'\n            | eval thawed_bucket_count          = 'data.bucket_dirs.thawed.bucket_count'\n\n            | eval home_event_count             = 'data.bucket_dirs.home.event_count'\n            | eval cold_event_count             = 'data.bucket_dirs.cold.event_count'\n            | eval thawed_event_count           = 'data.bucket_dirs.thawed.event_count'\n\n            | eval hot_bucket_avg_size_gb       = round(hot_bucket_total_size_gb / hot_bucket_count, 2)\n            | eval warm_bucket_avg_size_gb      = round(warm_bucket_total_size_gb / warm_bucket_count, 2)\n            | eval cold_bucket_avg_size_gb      = round(cold_bucket_total_size_gb / cold_bucket_count, 2)\n            | eval thawed_bucket_avg_size_gb    = round(thawed_bucket_total_size_gb / thawed_bucket_count, 2)\n\n            | fields\n            hot_bucket_total_size_gb, warm_bucket_total_size_gb, cold_bucket_total_size_gb, thawed_bucket_total_size_gb,\n            hot_bucket_count, warm_bucket_count, cold_bucket_count, thawed_bucket_count,\n            home_event_count, cold_event_count, thawed_event_count,\n            hot_bucket_avg_size_gb, warm_bucket_avg_size_gb, cold_bucket_avg_size_gb, thawed_bucket_avg_size_gb\n\n            | `dmc_timechart_for_disk_usage` $funcBucket$(*_$single_index_metric$) as \"* bucket\"\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">$single_index_y_label$</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.fieldColors\">\n          {\"hot bucket\": 0xd85d3c, \"warm bucket\": 0xf7902b, \"cold bucket\":0x6ab7c7, \"thawed bucket\":0x5379af, \"home bucket\": 0xfac51c}\n        </option>\n      </chart>\n    </panel>\n  </row>\n</form>",
"eai:type": "views",
"name": "index_detail_instance",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" script=\"common_control.js\" stylesheet=\"shared.css\">\n  <label>Indexer Clustering: Service Activity</label>\n    <fieldset autoRun=\"true\" submitButton=\"false\">\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"group\">\n        <label>Indexer Cluster</label>\n        <showClearButton>false</showClearButton>\n        <search>\n          <query>| `dmc_get_indexer_cluster_groups`</query>\n        </search>\n        <fieldForLabel>label</fieldForLabel>\n        <fieldForValue>search_group</fieldForValue>\n        <selectFirstChoice>true</selectFirstChoice>\n      </input>\n    </fieldset>\n  <row>\n    <panel>\n      <title>Warning and Error Patterns</title>\n      <input type=\"time\" searchWhenChanged=\"true\" token=\"warningErrorTime\">\n        <label>Time Range:</label>\n        <default>\n          <earliestTime>-24h</earliestTime>\n          <latestTime>now</latestTime>\n        </default>\n      </input>\n      <table>\n        <search>\n          <query>\n`dmc_get_warnings_and_errors(dmc_group_indexer, Cluster*)` search_group=\"$group$\"\n| cluster showcount=t\n| table cluster_count, _time, log_level, component, event_message, punct\n| sort - cluster_count\n| `dmc_time_format(_time)`\n| rename cluster_count AS Count, _time AS \"Latest Time\", log_level as \"Log Level\", component as Component, event_message as \"Latest Message\"\n          </query>\n          <earliest>$warningErrorTime.earliest$</earliest>\n          <latest>$warningErrorTime.latest$</latest>\n        </search>\n        <fields>Count, \"Latest Time\", \"Log Level\", Component, \"Latest Message\"</fields>\n        <option name=\"drilldown\">row</option>\n        <drilldown>\n          <set token=\"warningErrorPunct\">$row.punct$</set>\n        </drilldown>\n      </table>\n      <html>\n        <p>Click on a row to see event details.</p>\n      </html>\n    </panel>\n    <panel depends=\"$warningErrorPunct$\">\n      <title>Event Details</title>\n      <event>\n        <search>\n          <query>\n`dmc_get_warnings_and_errors(dmc_group_indexer, Cluster*)` punct=\"$warningErrorPunct$\" search_group=\"$group$\"\n          </query>\n          <earliest>$warningErrorTime.earliest$</earliest>\n          <latest>$warningErrorTime.latest$</latest>\n        </search>\n        <option name=\"rowNumbers\">true</option>\n      </event>\n      <html>\n        <a data-unset-token=\"warningErrorPunct\">Close this panel</a>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel>\n      <html>\n        <h2>\n          <span>Select views: </span>\n          <span id=\"link-switcher-view\">\n            <a href=\"#\" class=\"btn-pill active\" data-item=\"all\">All</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"snapshot\">Snapshot</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"historical\">Historical</a>\n          </span>\n        </h2>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Snapshots</title>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Fixup Tasks - In Progress ($taskInProgressCount$)</title>\n      <search id=\"fixupInProgressBaseSearch\">\n        <query>\n          | rest splunk_server_group=dmc_group_cluster_master splunk_server_group=\"$group$\" \"/services/cluster/master/buckets?filter=search_state=PendingSearchable\"\n          | fields title, index, peers*server_name\n          | eval peers = \"\"\n          | foreach peers.*.server_name [eval peers = mvappend(peers, \"\", '&lt;&lt;FIELD&gt;&gt;')]\n          | fields title, index, peers\n        </query>\n        <done>\n          <set token=\"taskInProgressCount\">$job.resultCount$</set>\n        </done>\n      </search>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"fixupProgressIndexFilter\">\n        <label>Index</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"*\">All</choice>\n        <selectFirstChoice>true</selectFirstChoice>\n        <fieldForLabel>index</fieldForLabel>\n        <fieldForValue>index</fieldForValue>\n        <search base=\"fixupInProgressBaseSearch\">\n          <query>stats count by index</query>\n        </search>\n        <prefix>search index=\"</prefix>\n        <suffix>\"</suffix>\n      </input>\n      <table>\n        <search base=\"fixupInProgressBaseSearch\">\n          <query>\n            $fixupProgressIndexFilter$\n            | rename title as Bucket, index as Index, peers as Peers\n          </query>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Fixup Tasks - Pending</title>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"fixupPendingIndexFilter\">\n        <label>Index</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"*\">All</choice>\n        <fieldForLabel>index</fieldForLabel>\n        <fieldForValue>index</fieldForValue>\n        <search>\n          <query>\n            | rest splunk_server_group=dmc_group_cluster_master splunk_server_group=\"$group$\" /services/cluster/master/indexes\n            | fields title\n            | rename title as index\n          </query>\n        </search>\n        <prefix>search index=\"</prefix>\n        <suffix>\"</suffix>\n      </input>\n      <html>\n        <span><i class=\"icon-alert icon-large\"></i>In a large deployment (with millions of buckets) the following searches might cause out-of-memory issues. Exercise caution running them.</span>\n      </html>\n      <table>\n        <title>Tasks to Meet Search Factor ($taskSFCount$)</title>\n        <search>\n          <query>\n            | rest splunk_server_group=dmc_group_cluster_master splunk_server_group=\"$group$\" \"/services/cluster/master/fixup?level=search_factor\"\n            | fields title, index, initial.reason, initial.timestamp, latest.reason\n            | $fixupPendingIndexFilter$\n            | `dmc_time_format(initial.timestamp)`\n            | rename title as Bucket, index as Index, initial.reason as \"Trigger Condition\", initial.timestamp as \"Trigger Time\", latest.reason as \"Current State\"\n          </query>\n          <done>\n            <set token=\"taskSFCount\">$job.resultCount$</set>\n          </done>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <table>\n        <title>Tasks to Meet Replication Factor ($taskRFCount$)</title>\n        <search>\n          <query>\n            | rest splunk_server_group=dmc_group_cluster_master splunk_server_group=\"$group$\" \"/services/cluster/master/fixup?level=replication_factor\"\n            | fields title, index, initial.reason, initial.timestamp, latest.reason\n            | $fixupPendingIndexFilter$\n            | `dmc_time_format(initial.timestamp)`\n            | rename title as Bucket, index as Index, initial.reason as \"Trigger Condition\", initial.timestamp as \"Trigger Time\", latest.reason as \"Current State\"\n          </query>\n          <done>\n            <set token=\"taskRFCount\">$job.resultCount$</set>\n          </done>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <table>\n        <title>Tasks to Meet Generation ($taskGenerationCount$)</title>\n        <search>\n          <query>\n            | rest splunk_server_group=dmc_group_cluster_master splunk_server_group=\"$group$\" \"/services/cluster/master/fixup?level=generation\"\n            | fields title, index, initial.reason, initial.timestamp, latest.reason\n            | $fixupPendingIndexFilter$\n            | `dmc_time_format(initial.timestamp)`\n            | rename title as Bucket, index as Index, initial.reason as \"Trigger Condition\", initial.timestamp as \"Trigger Time\", latest.reason as \"Current State\"\n          </query>\n          <done>\n            <set token=\"taskGenerationCount\">$job.resultCount$</set>\n          </done>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Indexes With Excess Buckets ($indexWithExcessBucketsCount$)</title>\n      <table>\n        <search>\n          <query>\n            | rest splunk_server_group=dmc_group_cluster_master splunk_server_group=\"$group$\" /services/cluster/master/indexes\n            | fields title, buckets_with_excess_copies, buckets_with_excess_searchable_copies, total_excess_bucket_copies, total_excess_searchable_copies\n            | search (buckets_with_excess_copies > 0) OR (buckets_with_excess_searchable_copies > 0) OR (total_excess_bucket_copies > 0) OR (total_excess_searchable_copies > 0)\n            | rename title as Index, buckets_with_excess_copies as \"Buckets with Excess Copies\", buckets_with_excess_searchable_copies as \"Buckets with Excess Searchable Copies\", total_excess_bucket_copies as \"Total Excess Copies\", total_excess_searchable_copies as \"Total Excess Searchable Copies\"\n          </query>\n          <done>\n            <set token=\"indexWithExcessBucketsCount\">$job.resultCount$</set>\n          </done>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Historical Charts</title>\n      <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n        <label>Time Range:</label>\n        <default>\n          <earliestTime>-4h@m</earliestTime>\n          <latestTime>now</latestTime>\n        </default>\n      </input>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Bucket Fixup Tasks</title>\n      <chart>\n        <search>\n          <query>\n`dmc_set_index_internal` sourcetype=splunkd group=subtask_counts name=cmmaster_service search_group=dmc_group_cluster_master search_group=\"$group$\"\n| fields - to_fix_total to_fix_added to_fix_removed\n| `dmc_timechart_for_metrics_log` median(to_fix_*) as to_fix_*\n| rename to_fix_sync AS Sync to_fix_data_safety AS \"Data safety\" to_fix_gen AS Generation to_fix_rep_factor AS \"Replication factor\" to_fix_search_factor AS \"Search factor\" to_fix_streaming AS Streaming\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">0</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n        <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n        <option name=\"charting.chart.bubbleSizeBy\">area</option>\n        <option name=\"charting.chart.nullValueMode\">gaps</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.chart.showLabels\">auto</option>\n        <option name=\"charting.axisTitleY.text\">Task Count</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Service Jobs</title>\n      <chart>\n        <title>Service Job Activity</title>\n        <search>\n          <query>\n`dmc_set_index_internal` sourcetype=splunkd group=executor name=cmmaster_executor search_group=dmc_group_cluster_master search_group=\"$group$\"\n| eval backlog_change = jobs_added - jobs_finished\n| `dmc_timechart_for_metrics_log` sum(jobs_added) AS \"Jobs added\" sum(jobs_finished) AS \"Jobs finished\" sum(backlog_change) AS \"Backlog change\"\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">0</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n        <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n        <option name=\"charting.chart.bubbleSizeBy\">area</option>\n        <option name=\"charting.chart.nullValueMode\">gaps</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.chart.showLabels\">auto</option>\n        <option name=\"charting.axisTitleY.text\">Job Count</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n      </chart>\n      <chart>\n        <title>Service Jobs Executed</title>\n        <search>\n          <query>\n`dmc_set_index_internal` sourcetype=splunkd group=jobs name=cmmaster search_group=dmc_group_cluster_master search_group=\"$group$\"\n| `dmc_timechart_for_metrics_log` sum(CMRepJob) AS \"Bucket replication\" sum(CMChangeBucketJob_build) AS \"Make bucket searchable\" sum(CMChangeBucketJob_makePrimary) AS \"Make bucket primary\" sum(CMChangeBucketJob_removePrimary) AS \"Removing primary bucket site\" sum(CMTruncJob) AS \"Truncating size of bucket\" sum(CMSyncM2PJob) AS \"Syncing buckets for peers and master\" sum(CMSyncP2PJob) AS \"Syncing bucket between peers\" sum(CMBucketFrozenJob) AS \"Notifying peer that bucket is frozen\"\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">0</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n        <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n        <option name=\"charting.chart.bubbleSizeBy\">area</option>\n        <option name=\"charting.chart.nullValueMode\">gaps</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.chart.showLabels\">auto</option>\n        <option name=\"charting.axisTitleY.text\">Job Count</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>REST Endpoint Activity</title>\n      <chart>\n        <title>Time Spent on Hitting REST Endpoints</title>\n        <search>\n          <query>\n`dmc_set_index_internal` sourcetype=splunkd group=subtask_seconds name=cmmaster_endpoints search_group=dmc_group_cluster_master search_group=\"$group$\"\n| `dmc_timechart_for_metrics_log` sum(cluster*) as cluster*\n| rename clustermaster*_* AS \"/services/cluster/master/*:*\" clusterconfig_* AS \"/services/cluster/config:*\"\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">0</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n        <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n        <option name=\"charting.chart.bubbleSizeBy\">area</option>\n        <option name=\"charting.chart.nullValueMode\">gaps</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.chart.showLabels\">auto</option>\n        <option name=\"charting.axisTitleY.text\">Time Spent (seconds)</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n      </chart>\n      <chart>\n        <title>Count of Hits on REST Endpoints</title>\n        <search>\n          <query>\n`dmc_set_index_internal` sourcetype=splunkd group=subtask_counts name=cmmaster_endpoints search_group=dmc_group_cluster_master search_group=\"$group$\"\n| `dmc_timechart_for_metrics_log` sum(clustermaster*) as clustermaster*\n| rename clustermaster*_* AS \"/services/cluster/master/*:*\" clusterconfig_* AS \"/services/cluster/config:*\"\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">0</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n        <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n        <option name=\"charting.chart.bubbleSizeBy\">area</option>\n        <option name=\"charting.chart.nullValueMode\">gaps</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.chart.showLabels\">auto</option>\n        <option name=\"charting.axisTitleY.text\">Count</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n      </chart>\n    </panel>\n  </row>\n</form>",
"eai:type": "views",
"name": "indexer_clustering_service_activity",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" onUnloadCancelJobs=\"true\" script=\"common_control.js, indexer_clustering_status_extension.js\" stylesheet=\"indexer_clustering_status_extension.css, shared.css\">\n  <label>Indexer Clustering: Status</label>\n  <fieldset autoRun=\"true\" submitButton=\"false\">\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"group\">\n      <label>Indexer Cluster</label>\n      <showClearButton>false</showClearButton>\n      <search>\n        <query>| `dmc_get_indexer_cluster_groups`</query>\n      </search>\n      <fieldForLabel>label</fieldForLabel>\n      <fieldForValue>search_group</fieldForValue>\n      <selectFirstChoice>true</selectFirstChoice>\n    </input>\n  </fieldset>\n  <search id=\"peers_base_search\">\n    <query>| rest splunk_server_group=dmc_group_cluster_master splunk_server_group=\"$group$\" /services/cluster/master/peers</query>\n  </search>\n  <search id=\"indexes_base_search\">\n    <query>| rest splunk_server_group=dmc_group_cluster_master splunk_server_group=\"$group$\" /services/cluster/master/indexes</query>\n  </search>\n  <search id=\"statusSummaryBaseSearch\">\n    <query>\n      | rest splunk_server_group=dmc_group_cluster_master splunk_server_group=\"$group$\" /services/cluster/master/generation/master\n      | fields pending_last_reason, search_factor_met, replication_factor_met\n      | eval all_data_searchable_icon = if(isnull(pending_last_reason) or pending_last_reason==\"\", \"icon-check\", \"icon-alert\")\n      | eval all_data_searchable = if (isnull(pending_last_reason) or pending_last_reason==\"\", \"All Data Searchable\", \"Some Data Not Searchable\")\n      | eval search_factor_met_icon = if(search_factor_met == 1 or search_factor_met == \"1\", \"icon-check\", \"icon-alert\")\n      | eval search_factor_met = if (search_factor_met == 1 or search_factor_met == \"1\", \"Search Factor Met\", \"Search Factor Not Met\")\n      | eval replication_factor_met_icon = if(replication_factor_met == 1 or replication_factor_met == \"1\", \"icon-check\", \"icon-alert\")\n      | eval replication_factor_met = if (replication_factor_met == 1 or replication_factor_met == \"1\", \"Replication Factor Met\", \"Replication Factor Not Met\")\n    </query>\n    <finalized>\n      <set token=\"searchable_icon\">$result.all_data_searchable_icon$</set>\n      <set token=\"searchable_indicator\">$result.all_data_searchable$</set>\n      <set token=\"search_factor_icon\">$result.search_factor_met_icon$</set>\n      <set token=\"search_factor_indicator\">$result.search_factor_met$</set>\n      <set token=\"replication_factor_icon\">$result.replication_factor_met_icon$</set>\n      <set token=\"replication_factor_indicator\">$result.replication_factor_met$</set>\n    </finalized>\n  </search>\n  <search id=\"cluster_master_base_search\">\n    <query>\n      | rest splunk_server_group=dmc_group_cluster_master splunk_server_group=\"$group$\" /services/server/info\n      | stats count\n      | eval cluster_master_icon = if(count==1, \"icon-check\", \"icon-alert\")\n      | eval cluster_master_indicator = if(count==1, \"Cluster Manager Reachable\", \"Cluster Manager Not Reachable\")\n    </query>\n    <finalized>\n      <set token=\"cluster_master_icon\">$result.cluster_master_icon$</set>\n      <set token=\"cluster_master_indicator\">$result.cluster_master_indicator$</set>\n    </finalized>\n  </search>\n  <row>\n    <panel rejects=\"$historical$\">\n      <search base=\"peers_base_search\">\n        <query>\n          where is_searchable == 1 or is_searchable == \"1\"\n          | stats count\n        </query>\n        <finalized>\n          <set token=\"searchable_peer_count\">$result.count$</set>\n        </finalized>\n      </search>\n      <search base=\"peers_base_search\">\n        <query>\n          where is_searchable == 0 or is_searchable == \"0\"\n          | stats count\n        </query>\n        <finalized>\n          <set token=\"not_searchable_peer_count\">$result.count$</set>\n        </finalized>\n      </search>\n      <search base=\"indexes_base_search\">\n        <query>\n          where is_searchable == 1 or is_searchable == \"1\"\n          | stats count\n        </query>\n        <finalized>\n          <set token=\"searchable_index_count\">$result.count$</set>\n        </finalized>\n      </search>\n      <search base=\"indexes_base_search\">\n        <query>\n          where is_searchable == 0 or is_searchable == \"0\"\n          | stats count\n        </query>\n        <finalized>\n          <set token=\"not_searchable_index_count\">$result.count$</set>\n        </finalized>\n      </search>\n      <html depends=\"$searchable_indicator$\">\n        <div class=\"indexer-cluster-summary\">\n          <div class=\"indexer-cluster-summary-single-value\"><i class=\"$cluster_master_icon$\"></i>$cluster_master_indicator$</div>\n          <div class=\"indexer-cluster-summary-single-value\"><i class=\"$searchable_icon$\"></i>$searchable_indicator$</div>\n          <div class=\"indexer-cluster-summary-single-value\"><i class=\"$search_factor_icon$\"></i>$search_factor_indicator$</div>\n          <div class=\"indexer-cluster-summary-single-value\"><i class=\"$replication_factor_icon$\"></i>$replication_factor_indicator$</div>\n        </div>\n        <div class=\"indexer-cluster-count clearfix\">\n          <div class=\"indexer-cluster-count-value\">\n            <span class=\"indexer-cluster-count-value-searchable-peer\">$searchable_peer_count$</span> searchable <span  class=\"indexer-cluster-count-value-not-searchable-peer\">$not_searchable_peer_count$</span> not searchable</div>\n          <div class=\"indexer-cluster-count-value\">\n            <span class=\"indexer-cluster-count-value-searchable-index\">$searchable_index_count$</span> searchable <span class=\"indexer-cluster-count-value-not-searchable-index\">$not_searchable_index_count$</span> not searchable</div>\n        </div>\n        <div class=\"index-cluster-count-under-label clearfix\">\n          <div class=\"index-cluster-count-under-label-value-peer\">Peers</div>\n          <div class=\"index-cluster-count-under-label-value-index\">Indexes</div>\n        </div>\n      </html>\n    </panel>\n  </row>\n  <row rejects=\"$historical$\">\n    <panel>\n      <title>Peers ($peerCount$)</title>\n      <input type=\"text\" searchWhenChanged=\"true\" token=\"peerNameFilter\">\n        <label>Peer</label>\n        <default>*</default>\n        <prefix>search label=\"*</prefix>\n        <suffix>*\"</suffix>\n      </input>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"peerSearchableFilter\">\n        <label>Fully Searchable</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"*\">All</choice>\n        <selectFirstChoice>true</selectFirstChoice>\n        <fieldForLabel>is_searchable</fieldForLabel>\n        <fieldForValue>is_searchable</fieldForValue>\n        <search base=\"peers_base_search\">\n          <query>\n            stats count by is_searchable\n            | eval is_searchable = if(is_searchable == 1 or is_searchable == \"1\", \"Yes\", \"No\")\n          </query>\n        </search>\n        <prefix>search is_searchable=\"</prefix>\n        <suffix>\"</suffix>\n      </input>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"peerStatusFilter\">\n        <label>Status</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"*\">All</choice>\n        <selectFirstChoice>true</selectFirstChoice>\n        <fieldForLabel>status</fieldForLabel>\n        <fieldForValue>status</fieldForValue>\n        <search base=\"peers_base_search\">\n          <query>stats count by status</query>\n        </search>\n        <prefix>search status=\"</prefix>\n        <suffix>\"</suffix>\n      </input>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"peerSiteFilter\">\n        <label>Site</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"*\">All</choice>\n        <selectFirstChoice>true</selectFirstChoice>\n        <fieldForLabel>site</fieldForLabel>\n        <fieldForValue>site</fieldForValue>\n        <search base=\"peers_base_search\">\n          <query>stats count by site</query>\n        </search>\n        <prefix>search site=\"</prefix>\n        <suffix>\"</suffix>\n      </input>\n      <table id=\"peersTable\">\n        <search base=\"peers_base_search\">\n          <query>\n            fields label, is_searchable, status, site, bucket_count, host_port_pair, last_heartbeat, replication_port, base_generation_id, title, bucket_count_by_index.*\n            | eval is_searchable = if(is_searchable == 1 or is_searchable == \"1\", \"Yes\", \"No\")\n            | `dmc_time_format(last_heartbeat)`\n            | sort - last_heartbeat\n            | $peerNameFilter$\n            | $peerSearchableFilter$\n            | $peerStatusFilter$\n            | $peerSiteFilter$\n            | fields label, is_searchable, status, site, bucket_count\n            | rename label as Peer, is_searchable as \"Fully Searchable\", status as Status, site as Site, bucket_count as Buckets\n          </query>\n          <done>\n            <set token=\"peerCount\">$job.resultCount$</set>\n          </done>\n        </search>\n        <option name=\"drilldown\">row</option>\n        <drilldown>\n          <set token=\"peerDrilldown\">$row.Peer$</set>\n        </drilldown>\n      </table>\n      <html>\n        <p>Click on each peer to see more details. </p>\n      </html>\n    </panel>\n    <panel depends=\"$peerDrilldown$\">\n      <title>$peerDrilldown$</title>\n      <table>\n        <search base=\"peers_base_search\">\n          <query>\n            search label = $peerDrilldown$\n            | `dmc_time_format(last_heartbeat)`\n            | fields host_port_pair, last_heartbeat, replication_port, base_generation_id, title\n            | rename host_port_pair as Location, last_heartbeat as \"Last Heartbeat\", replication_port as \"Replication Port\", base_generation_id as \"Base Generation ID\", title as GUID\n            | transpose\n            | rename column as Property, \"row 1\" as Value\n          </query>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <table>\n        <search base=\"peers_base_search\">\n          <query>\n            search label = $peerDrilldown$\n            | fields bucket_count_by_index.*\n            | transpose\n            | rename column as Index, \"row 1\" as Buckets\n            | eval Index=replace(Index, \"bucket_count_by_index.\", \"\")\n            | where isnotnull(Buckets) AND isnotnull(Index)\n          </query>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <html>\n        <a data-unset-token=\"peerDrilldown\">Close this panel</a>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Indexes ($indexCount$)</title>\n      <input type=\"text\" searchWhenChanged=\"true\" token=\"indexNameFilter\">\n        <label>Index</label>\n        <default>*</default>\n        <prefix>search title=\"*</prefix>\n        <suffix>*\"</suffix>\n      </input>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"indexSearchableFilter\">\n        <label>Fully Searchable</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"*\">All</choice>\n        <selectFirstChoice>true</selectFirstChoice>\n        <fieldForLabel>is_searchable</fieldForLabel>\n        <fieldForValue>is_searchable</fieldForValue>\n        <search base=\"indexes_base_search\">\n          <query>\n            stats count by is_searchable\n            | eval is_searchable = if((is_searchable == 1) or (is_searchable == \"1\"), \"Yes\", \"No\")\n          </query>\n        </search>\n        <prefix>search is_searchable=\"</prefix>\n        <suffix>\"</suffix>\n      </input>\n      <table id=\"indexesTable\">\n        <search base=\"indexes_base_search\">\n          <query>\n            fields title, is_searchable, replicated_copies_tracker*, searchable_copies_tracker*, num_buckets, index_size\n            | rename replicated_copies_tracker.*.* as rp**, searchable_copies_tracker.*.* as sb**\n            | eval replicated_data_copies = \"\"\n            | foreach rp*actual_copies_per_slot [eval replicated_data_copies = replicated_data_copies.\" \".rp&lt;&lt;MATCHSTR&gt;&gt;actual_copies_per_slot.\"/\".rp&lt;&lt;MATCHSTR&gt;&gt;expected_total_per_slot]\n            | makemv replicated_data_copies\n            | eval searchable_data_copies = \"\"\n            | foreach sb*actual_copies_per_slot [eval searchable_data_copies = searchable_data_copies.\" \".sb&lt;&lt;MATCHSTR&gt;&gt;actual_copies_per_slot.\"/\".sb&lt;&lt;MATCHSTR&gt;&gt;expected_total_per_slot]\n            | makemv searchable_data_copies\n            | eval is_searchable = if((is_searchable == 1) or (is_searchable == \"1\"), \"Yes\", \"No\")\n            | eval index_size = round(index_size / 1024 / 1024 / 1024, 2).\" GB\"\n            | fields title, is_searchable, searchable_data_copies, replicated_data_copies, num_buckets, index_size\n            | $indexNameFilter$\n            | $indexSearchableFilter$\n            | rename title as \"Index Name\", is_searchable as \"Fully Searchable\", searchable_data_copies as \"Searchable Data Copies\", replicated_data_copies as \"Replicated Data Copies\", num_buckets as Buckets, index_size as \"Cumulative Raw Data Size\"\n          </query>\n          <done>\n            <set token=\"indexCount\">$job.resultCount$</set>\n          </done>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <html>\n        <a class=\"btn\" href=\"indexer_clustering_service_activity?form.group=$group$\">Bucket Status</a>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Search Heads ($searchHeadCount$)</title>\n      <search id=\"searchHeadBaseSearch\">\n        <query>\n          | rest splunk_server_group=dmc_group_cluster_master splunk_server_group=\"$group$\" /services/cluster/master/searchheads\n          | fields label, status, site, host_port_pair, title\n          </query>\n        <done>\n          <set token=\"searchHeadCount\">$job.resultCount$</set>\n        </done>\n      </search>\n      <input type=\"text\" searchWhenChanged=\"true\" token=\"searchHeadNameFilter\">\n        <label>Search Head</label>\n        <default>*</default>\n        <prefix>search label=\"*</prefix>\n        <suffix>*\"</suffix>\n      </input>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"searchHeadStatusFilter\">\n        <label>Status</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"*\">All</choice>\n        <selectFirstChoice>true</selectFirstChoice>\n        <fieldForLabel>status</fieldForLabel>\n        <fieldForValue>status</fieldForValue>\n        <search base=\"searchHeadBaseSearch\">\n          <query>stats count by status</query>\n        </search>\n        <prefix>search status=\"</prefix>\n        <suffix>\"</suffix>\n      </input>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"searchHeadSiteFilter\">\n        <label>Site</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"*\">All</choice>\n        <selectFirstChoice>true</selectFirstChoice>\n        <fieldForLabel>site</fieldForLabel>\n        <fieldForValue>site</fieldForValue>\n        <search base=\"searchHeadBaseSearch\">\n          <query>stats count by site</query>\n        </search>\n        <prefix>search site=\"</prefix>\n        <suffix>\"</suffix>\n      </input>\n      <table id=\"searchHeadsTable\">\n        <search base=\"searchHeadBaseSearch\">\n          <query>\n            $searchHeadNameFilter$\n            | $searchHeadStatusFilter$\n            | $searchHeadSiteFilter$\n            | rename label as \"Search Head\", status as Status, site as Site, host_port_pair as URI, title as GUID\n          </query>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n    </panel>\n  </row>\n</form>",
"eai:type": "views",
"name": "indexer_clustering_status",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" script=\"cell_fill_gauge.js, common_control.js\" stylesheet=\"index_type.css\">\n    <fieldset autoRun=\"true\" submitButton=\"false\">\n        <input type=\"radio\" searchWhenChanged=\"true\" token=\"datatype\">\n              <label>Index Type</label>\n              <choice value=\"\">Event Indexes Only</choice>\n              <choice value=\"datatype=all\">All Index Types *</choice>\n              <default></default>\n        </input>\n        <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"group\">\n            <label>Group</label>\n            <showClearButton>false</showClearButton>\n            <search>\n                <query>\n                    | `dmc_get_groups_containing_role(dmc_group_indexer)`\n                    | where search_group!=\"dmc_group_indexer\"\n                </query>\n            </search>\n            <fieldForLabel>label</fieldForLabel>\n            <fieldForValue>search_group</fieldForValue>\n            <choice value=\"*\">All Indexers</choice>\n            <default>*</default>\n        </input>\n        <html id=\"index_type_disclaimer\">\n            <p>The \"All Index Types\" option is not compatible with indexers running Splunk Enterprise 6.6 or earlier, where only event indexes exist.</p>\n        </html>\n    </fieldset>\n    <label>Indexes and Volumes: Deployment</label>\n    <search id=\"indexes_base_search\">\n        <query>\n            | rest splunk_server_group=dmc_group_indexer splunk_server_group=\"$group$\" /services/data/indexes $datatype$\n            | join title splunk_server type=outer [rest splunk_server_group=dmc_group_indexer splunk_server_group=\"$group$\" /services/data/indexes-extended $datatype$]\n            | `dmc_exclude_indexes`\n            | eval elapsedTime = now() - strptime(minTime,\"%Y-%m-%dT%H:%M:%S%z\")\n            | eval dataAge = ceiling(elapsedTime / 86400)\n            | eval indexSizeGB = if(currentDBSizeMB >= 1 AND totalEventCount >=1, currentDBSizeMB/1024, null())\n            | eval maxSizeGB = maxTotalDataSizeMB / 1024\n            | eval sizeUsagePerc = indexSizeGB / maxSizeGB * 100\n        </query>\n    </search>\n    <row>\n        <panel>\n            <title>Overview</title>\n            <single>\n                <option name=\"underLabel\">Total Indexes</option>\n                <option name=\"height\">80px</option>\n                <search base=\"indexes_base_search\">\n                    <query>\n                        stats dc(title) as numIndexes\n                    </query>\n                </search>\n            </single>\n            <single>\n                <option name=\"underLabel\">Non-Empty Indexes</option>\n                <option name=\"height\">80px</option>\n                <search base=\"indexes_base_search\">\n                    <query>\n                        stats dc(eval(if(isnotnull(indexSizeGB), title, null()))) as nonEmptyIndexes\n                    </query>\n                </search>\n            </single>\n            <single>\n                <option name=\"underLabel\">Instances</option>\n                <option name=\"height\">80px</option>\n                <search base=\"indexes_base_search\">\n                    <query>\n                        stats dc(splunk_server) AS instances\n                    </query>\n                </search>\n            </single>\n        </panel>\n    </row>\n    <row>\n        <panel>\n            <title>Index Size</title>\n            <single>\n                <option name=\"underLabel\">Total Across Deployment</option>\n                <option name=\"height\">80px</option>\n                <search base=\"indexes_base_search\">\n                    <query>\n                        stats sum(indexSizeGB) as totalSize\n                        | eval totalSize = if(isNum(totalSize), round(totalSize, 2).\" GB\", \"N/A\")\n                    </query>\n                </search>\n            </single>\n            <single>\n                <option name=\"underLabel\">Averaged Across All Indexers</option>\n                <option name=\"height\">80px</option>\n                <search base=\"indexes_base_search\">\n                    <query>\n                        stats sum(indexSizeGB) as totalSize\n                        dc(splunk_server) as instances\n                        | eval averageAggregateIndexesSizePerInstance = round(totalSize / instances, 2).\" GB\"\n                        | fields averageAggregateIndexesSizePerInstance\n                    </query>\n                </search>\n            </single>\n        </panel>\n        <panel>\n            <title>Data Age</title>\n            <single>\n                <option name=\"underLabel\">Median</option>\n                <option name=\"height\">80px</option>                \n                <search base=\"indexes_base_search\">\n                    <query>\n                        stats median(dataAge) AS medianDataAge\n                        | eval medianDataAge = if(isNum(medianDataAge), medianDataAge.\" days\", \"N/A\")\n                    </query>\n                </search>\n            </single>\n            <single>\n                <option name=\"underLabel\">Oldest</option>\n                <option name=\"height\">80px</option>                \n                <search base=\"indexes_base_search\">\n                    <query>\n                        stats max(dataAge) AS oldestDataAge\n                        | eval oldestDataAge = if(isNum(oldestDataAge), oldestDataAge.\" days\", \"N/A\")\n                    </query>\n                </search>\n            </single>\n        </panel>\n    </row>\n    <row>\n        <panel>\n            <title>Indexes ($indexCount$)</title>\n            <search base=\"indexes_base_search\">\n                <query>stats dc(title) as count</query>\n                <finalized>\n                    <set token=\"indexCount\">$result.count$</set>\n                </finalized>\n            </search>\n            <table>\n                <search base=\"indexes_base_search\">\n                    <query>\n                        stats dc(splunk_server) AS Instances\n                        count(indexSizeGB) as \"Non-Empty Instances\"\n                        sum(indexSizeGB) AS totalSize\n                        avg(indexSizeGB) as averageSize\n                        avg(sizeUsagePerc) as averageSizePerc\n                        perc90(sizeUsagePerc) as ninetyPercentileSizePerc\n                        count(eval(sizeUsagePerc > 95)) as instancesFreezingDueToSize\n                        median(dataAge) as medianDataAge\n                        max(dataAge) as oldestDataAge\n                        count(eval(elapsedTime > frozenTimePeriodInSecs)) as instancesFreezingDueToAge\n                        sum(frozenTimePeriodInSecs) as infiniteFreezingFlag\n                        by title, datatype\n                        | eval totalSize = if(isnotnull(totalSize), round(totalSize, 2), 0)\n                        | eval averageSize = if(isnotnull(averageSize), round(averageSize, 2), 0)\n                        | eval averageSizePerc = if(isnotnull(averageSizePerc), round(averageSizePerc, 2).\"%\", \"N/A\")\n                        | eval ninetyPercentileSizePerc = if(isnotnull(ninetyPercentileSizePerc), round(ninetyPercentileSizePerc, 2).\"%\", \"N/A\")\n                        | eval instancesFreezingDueToSize = if(averageSizePerc != \"N/A\", instancesFreezingDueToSize, \"N/A\")\n                        | eval medianDataAge = if(isNum(medianDataAge), medianDataAge, \"N/A\")\n                        | eval oldestDataAge = if(isNum(oldestDataAge), oldestDataAge, \"N/A\")\n                        | eval instancesFreezingDueToAge = if(infiniteFreezingFlag > 0, instancesFreezingDueToAge, \"N/A\")\n                        | rename title as \"Index\"\n                        datatype as \"Data Type\"\n                        totalSize as \"Total Size (GB)\"\n                        averageSize as \"Average Size (GB)\"\n                        averageSizePerc as \"Average Usage (%)\"\n                        ninetyPercentileSizePerc as \"90th Percentile Usage (%)\"\n                        instancesFreezingDueToSize as \"Instances Freezing Due To Size*\"\n                        medianDataAge as \"Median Data Age (days)\"\n                        oldestDataAge as \"Oldest Data Age (days)\"\n                        instancesFreezingDueToAge as \"Instances Freezing Due to Age\"\n                        | fields - infiniteFreezingFlag\n                    </query>\n                </search>\n                <drilldown target=\"_blank\">\n                    <link>\n                        /app/splunk_monitoring_console/index_detail_deployment?form.datatype=$datatype$&amp;form.group=$group$&amp;form.index=$row.Index$\n                    </link>\n                </drilldown>\n            </table>\n            <html>\n                <p>Click on instance name for more details.</p>\n                <p>*Number of instances freezing or about to freeze data at 95% or more of configured disk usage capacity.</p>\n            </html>\n        </panel>\n    </row>\n    <row>\n        <panel>\n            <title>Volumes ($volumeCount$)</title>\n            <table>\n                <search>\n                    <query>\n                        | rest splunk_server_group=dmc_group_indexer splunk_server_group=\"$group$\" services/data/index-volumes\n                        | `dmc_exclude_volumes`\n                        | eval volumeSizeGB = if(total_size > 1, round(total_size / 1024, 2), null())\n                        | eval sizeUsagePerc = total_size / max_size * 100\n                        | stats dc(splunk_server) as Instances\n                        count(eval(total_size > 1)) as \"Non-Empty Instances\"\n                        sum(volumeSizeGB) as totalSize\n                        avg(volumeSizeGB) as avgSize\n                        avg(sizeUsagePerc) as avgSizePerc\n                        perc90(sizeUsagePerc) as ninetyPercentileSizePerc\n                        count(eval(total_size > max_size)) as volumesFreezingDueToSize\n                        by title\n                        | eval totalSize = if(isnotnull(totalSize), totalSize, 0)\n                        | eval avgSize = if(isnotnull(avgSize), round(avgSize, 2), 0)\n                        | eval avgSizePerc = if(isnotnull(avgSizePerc), round(avgSizePerc, 2).\"%\", \"N/A\")\n                        | eval ninetyPercentileSizePerc = if(isnotnull(ninetyPercentileSizePerc), round(ninetyPercentileSizePerc, 2).\"%\", \"N/A\")\n                        | eval volumesFreezingDueToSize = if(avgSizePerc != \"N/A\", volumesFreezingDueToSize, \"N/A\")\n                        | rename title as \"Volume\"\n                        totalSize as \"Total Size (GB)\"\n                        avgSize as \"Average Size (GB)\"\n                        avgSizePerc as \"Average Usage (%)\"\n                        ninetyPercentileSizePerc as \"90th Percentile Usage (%)\"\n                        volumesFreezingDueToSize as \"Volumes Freezing Due To Size\"\n                    </query>\n                    <done>\n                        <set token=\"volumeCount\">$job.resultCount$</set>\n                    </done>\n                </search>\n                <drilldown target=\"_blank\">\n                    <link>\n                        /app/splunk_monitoring_console/volume_detail_deployment?form.datatype=$datatype$&amp;form.group=$group$&amp;form.volume=$row.Volume$\n                    </link>\n                </drilldown>\n            </table>\n            <html>\n                <p>Click on volume name for more details.</p>\n            </html>\n        </panel>\n    </row>\n</form>",
"eai:type": "views",
"name": "indexes_and_volumes_deployment",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" script=\"cell_fill_gauge.js, common_control.js\" stylesheet=\"index_type.css\">\n  <label>Indexes and Volumes: Instance</label>\n  <fieldset autoRun=\"true\" submitButton=\"false\">\n    <input type=\"radio\" searchWhenChanged=\"true\" token=\"datatype\">\n      <label>Index Type</label>\n      <choice value=\"\">Event Indexes Only</choice>\n      <choice value=\"datatype=all\">All Index Types *</choice>\n      <default></default>\n    </input>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"dmc_group\">\n      <label>Group</label>\n      <showClearButton>false</showClearButton>\n      <search>\n        <query>\n          | `dmc_get_groups_containing_role(dmc_group_indexer)`\n          | search search_group!=\"dmc_group_*\"\n        </query>\n      </search>\n      <fieldForLabel>label</fieldForLabel>\n      <fieldForValue>search_group</fieldForValue>\n      <choice value=\"dmc_group_indexer\">All Indexers</choice>\n      <default>dmc_group_indexer</default>\n    </input>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"splunk_server\">\n      <label>Instance</label>\n      <showClearButton>false</showClearButton>\n      <populatingSearch fieldForLabel=\"serverName\" fieldForValue=\"serverName\">\n        | `dmc_get_instance_info($dmc_group$)`\n        | where search_group=\"dmc_group_indexer\"\n      </populatingSearch>\n      <selectFirstChoice>true</selectFirstChoice>\n      <change>\n        <condition value=\"*\">\n          <set token=\"host\">$row.host$</set>\n        </condition>\n      </change>\n    </input>\n    <html id=\"index_type_disclaimer\">\n      <p>The \"All Index Types\" option is not compatible with indexers running Splunk Enterprise 6.6 or earlier, where only event indexes exist.</p>\n    </html>\n  </fieldset>\n  <search id=\"indexes_base_search\">\n    <query>\n| rest splunk_server=$splunk_server$ /services/data/indexes $datatype$\n  | join title type=outer [\n  | rest splunk_server=$splunk_server$ /services/data/indexes-extended $datatype$\n  | eval cold_bucket_size = if(isnotnull('bucket_dirs.cold.bucket_size'), 'bucket_dirs.cold.bucket_size', 'bucket_dirs.cold.size')\n  | fields title, cold_bucket_size, total_size, total_bucket_count]\n| `dmc_exclude_indexes`\n| fields title datatype maxTotalDataSizeMB currentDBSizeMB frozenTimePeriodInSecs minTime coldPath.maxDataSizeMB homePath.maxDataSizeMB, homePath, coldPath, cold_bucket_size, total_size, total_bucket_count, totalEventCount\n| eval currentDBSizeGB = if(isnotnull(currentDBSizeMB), round(currentDBSizeMB / 1024, 2), 0)\n| eval maxTotalDataSizeGB = if((maxTotalDataSizeMB == 0) OR isnull(maxTotalDataSizeMB), \"unlimited\", round(maxTotalDataSizeMB / 1024, 2))\n| eval disk_usage_gb = currentDBSizeGB.\" / \".maxTotalDataSizeGB\n| eval currentTimePeriodDay = round((now() - strptime(minTime,\"%Y-%m-%dT%H:%M:%S%z\")) / 86400, 0)\n| eval currentTimePeriodDay = if(isnull(currentTimePeriodDay), 0, currentTimePeriodDay)\n| eval frozenTimePeriodDay = round(frozenTimePeriodInSecs / 86400, 0)\n| eval frozenTimePeriodDay = if(isnull(frozenTimePeriodDay) OR frozenTimePeriodDay == 0, \"unlimited\", frozenTimePeriodDay)\n| eval freeze_period_viz = currentTimePeriodDay.\" / \".frozenTimePeriodDay\n| eval total_bucket_count = if(isnotnull(total_bucket_count), total_bucket_count, 0)\n| eval totalEventCount = if(isnotnull(totalEventCount), totalEventCount, 0)\n| eval home_bucket_size_gb = round((total_size - if(isnull(cold_bucket_size), 0, cold_bucket_size)) / 1024, 2)\n| eval home_bucket_size_gb = if(isnull(home_bucket_size_gb), 0, home_bucket_size_gb)\n| eval home_bucket_capacity_gb = if(isnull('homePath.maxDataSizeMB') OR 'homePath.maxDataSizeMB' = 0, \"unlimited\", round('homePath.maxDataSizeMB' / 1024, 2))\n| eval home_bucket_usage_gb = home_bucket_size_gb.\" / \".home_bucket_capacity_gb\n| eval cold_bucket_size_gb = if(isnull(cold_bucket_size), 0, round(cold_bucket_size / 1024, 2))\n| eval cold_bucket_capacity_gb = if(isnull('coldPath.maxDataSizeMB') OR 'coldPath.maxDataSizeMB' = 0, \"unlimited\", round('coldPath.maxDataSizeMB' / 1024, 2))\n| eval cold_bucket_usage_gb = cold_bucket_size_gb.\" / \".cold_bucket_capacity_gb\n| fields title, datatype, freeze_period_viz, disk_usage_gb, home_bucket_usage_gb, cold_bucket_usage_gb, total_bucket_count, totalEventCount, currentDBSizeGB,\n      cold_bucket_size_gb, home_bucket_size_gb, homePath, coldPath\n    </query>\n    <done>\n      <set token=\"indexCount\">$job.resultCount$</set>\n    </done>\n  </search>\n  <row>\n    <panel>\n      <html>\n        <h2>\n          <span>Select views: </span>\n          <span id=\"link-switcher-view\">\n            <a href=\"#\" class=\"btn-pill active\" data-item=\"all\">All</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"snapshot\">Snapshot</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"historical\">Historical</a>\n          </span>\n        </h2>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Snapshots</title>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <single>\n        <option name=\"height\">80px</option>\n        <search base=\"indexes_base_search\">\n          <query>\n            stats sum(currentDBSizeGB) as total_gb\n            | eval total_gb = case(\n                total_gb > 1000, round(total_gb / 1024, 2).\" TB\",\n                1 = 1, total_gb.\" GB\"\n              )\n            </query>\n        </search>\n        <option name=\"underLabel\">Total Index Size</option>\n      </single>\n      <single>\n        <option name=\"height\">80px</option>\n        <search base=\"indexes_base_search\">\n          <query>\n            stats sum(totalEventCount) as totalEventCount\n            | eval totalEventCount = tostring(totalEventCount, \"commas\")\n          </query>\n        </search>\n        <option name=\"underLabel\">Total Event Count</option>\n      </single>\n      <single>\n        <option name=\"height\">80px</option>\n        <search base=\"indexes_base_search\">\n          <query>\n            stats sum(total_bucket_count) as total_bucket_count\n            | eval total_bucket_count = tostring(total_bucket_count, \"commas\")\n          </query>\n        </search>\n        <option name=\"underLabel\">Total Bucket Count</option>\n      </single>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Indexes ($indexCount$)</title>\n      <table id=\"table1\">\n        <search base=\"indexes_base_search\">\n          <query>\n            fields title, datatype, freeze_period_viz, disk_usage_gb, home_bucket_usage_gb, cold_bucket_usage_gb, totalEventCount, total_bucket_count\n            | eval total_bucket_count=tostring(total_bucket_count, \"commas\")\n            | eval totalEventCount=tostring(totalEventCount, \"commas\")\n            | rename title as Index, datatype as \"Data Type\", disk_usage_gb as \"Index Usage (GB)\", freeze_period_viz as \"Data Age vs Frozen Age (days)\", home_bucket_usage_gb as \"Home Path Usage (GB)\", cold_bucket_usage_gb as \"Cold Path Usage (GB)\", total_bucket_count as \"Total Bucket Count\", totalEventCount as \"Total Event Count\"\n          </query>\n        </search>\n        <option name=\"drilldown\">row</option>\n        <drilldown>\n          <link target=\"_blank\">index_detail_instance?form.datatype=$datatype$&amp;form.dmc_group=$dmc_group$&amp;form.splunk_server=$splunk_server$&amp;form.single_index_name=$row.Index$:$row.Data Type$</link>\n        </drilldown>\n      </table>\n      <html>\n        <p>The columns use attributes specified in <a href=\"/help?location=learnmore.index.settings\" class=\"external\" target=\"_blank\">indexes.conf</a>:</p>\n        <ul>\n          <li><b>Data Age vs Frozen Age:</b> The first value is based on the age of the oldest event in the index. The second value is derived from the attribute frozenTimePeriodInSecs.</li>\n          <li><b>Index Usage:</b> The first value is the current size of the index. The second value is the index capacity, as specified  in maxTotalDataSizeMB.</li>\n          <li><b>Home Path Usage:</b> The first value is the current size of the home path portion of the index. The second value is the home path capacity, as specified in homePath.maxDataSizeMB.</li>\n          <li><b>Cold Path Usage:</b> The first value is the current size of the cold path portion of the index. The second value is the cold path capacity, as specified in coldPath.maxDataSizeMB.</li>\n        </ul>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Volumes ($volumeCount$)</title>\n      <table id=\"table2\">\n        <search>\n          <query>\n            | rest splunk_server=$splunk_server$ /services/data/index-volumes\n            | fields title, total_size, max_size, volume_path\n            | `dmc_exclude_volumes`\n            | eval total_size_gb = if(isnull(total_size), \"-\", round(total_size / 1024, 2))\n            | eval max_size_gb = if(isnull(max_size) OR max_size = \"infinite\", \"unlimited\", round(max_size / 1024, 2))\n            | eval disk_usage_gb = total_size_gb.\" / \".max_size_gb\n            | fields title, disk_usage_gb, max_size_gb, volume_path\n            | rename title as Volume, disk_usage_gb as \"Volume Usage (GB)\", max_size_gb as \"Volume Capacity (GB)\", volume_path as \"Volume Path\"\n          </query>\n          <done>\n            <set token=\"volumeCount\">$job.resultCount$</set>\n          </done>\n        </search>\n        <option name=\"drilldown\">row</option>\n        <drilldown>\n          <link target=\"_blank\">volume_detail_instance?form.datatype=$datatype$&amp;form.dmc_group=$dmc_group$&amp;form.splunk_server=$splunk_server$&amp;form.volume_name=$row.Volume$</link>\n        </drilldown>\n      </table>\n      <html>\n        <p><b>Volume Usage:</b> The first value is the current size of the volume. The second value is the volume capacity, as specified by the maxVolumeDataSizeMB attribute in <a href=\"/help?location=learnmore.index.settings\" class=\"external\" target=\"_blank\">indexes.conf</a>.</p>\n        <p><b>Note: </b>if the volume is \"unlimited\", it is not possible to determine the disk usage for the volume. </p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Volume Usage by Indexes and Directories</title>\n      <chart>\n        <search base=\"indexes_base_search\">\n          <query>\nfields title, cold_bucket_size_gb, home_bucket_size_gb, homePath, coldPath\n| rex field=homePath \"volume:(?&lt;home_vol_name&gt;[^/\\\\\\]*)(?:/|\\\\\\)\"\n| rex field=coldPath \"volume:(?&lt;cold_vol_name&gt;[^/\\\\\\]*)(?:/|\\\\\\)\"\n| eval dir = \"home,cold\"\n| makemv dir delim=\",\"\n| mvexpand dir\n| eval dir_size = case(dir == \"home\", home_bucket_size_gb, dir == \"cold\", cold_bucket_size_gb)\n| eval vol_name = case(dir == \"home\", home_vol_name, dir == \"cold\", cold_vol_name)\n| fields title dir dir_size vol_name\n| where isnotnull(vol_name) AND isnotnull(dir_size) AND dir_size > 0\n| eval index_dir_name = title.\":\".dir\n| chart sum(dir_size) AS dir_size over vol_name by index_dir_name\n          </query>\n        </search>\n        <option name=\"charting.chart\">bar</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.axisTitleX.text\">Volume Names</option>\n        <option name=\"charting.axisTitleY.text\">Volume Usage (GB)</option>\n        <option name=\"drilldown\">none</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Historical Charts</title>\n      <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n        <label>Time Range:</label>\n        <default>\n          <earliestTime>-15d@d</earliestTime>\n          <latestTime>now</latestTime>\n        </default>\n      </input>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>$index_metric_label$ of Indexes Over Time</title>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"index_metric\">\n        <label>Metric</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"data.total_size\">Size</choice>\n        <choice value=\"data.total_bucket_count\">Bucket Count</choice>\n        <choice value=\"data.total_event_count\">Event Count</choice>\n        <default>data.total_size</default>\n        <change>\n          <condition value=\"data.total_size\">\n            <set token=\"index_metric_label\">Size</set>\n            <set token=\"index_y_label\">Size (GB)</set>\n          </condition>\n          <condition value=\"data.total_bucket_count\">\n            <set token=\"index_metric_label\">Bucket Count</set>\n            <set token=\"index_y_label\">Bucket Count</set>\n          </condition>\n          <condition value=\"data.total_event_count\">\n            <set token=\"index_metric_label\">Event Count</set>\n            <set token=\"index_y_label\">Event Count</set>\n          </condition>\n        </change>\n      </input>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"funcIndex\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>latest</default>        \n        <choice value=\"latest\">Latest</choice>\n        <choice value=\"avg\">Average</choice>\n        <choice value=\"min\">Minimum</choice>\n        <choice value=\"max\">Maximum</choice>\n      </input>\n      <chart>\n        <search>\n          <query>\n            index=_introspection host=$host$ sourcetype=splunk_disk_objects component=Indexes\n            | `dmc_exclude_indexes`\n            | eval data.total_size = round('data.total_size' / 1024, 2)\n            | `dmc_timechart_for_disk_usage` $funcIndex$($index_metric$) as total by data.name\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">$index_y_label$</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Volume Size Over Time</title>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"funcVolume\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>latest</default>\n        <choice value=\"latest\">Latest</choice>\n        <choice value=\"avg\">Average</choice>\n        <choice value=\"min\">Minimum</choice>\n        <choice value=\"max\">Maximum</choice>\n      </input>\n      <chart>\n        <search>\n          <query>\n            index=_introspection host=$host$ sourcetype=splunk_disk_objects component=Volumes\n            | eval data.total_size = round('data.total_size' / 1024, 2)\n            | `dmc_timechart_for_disk_usage` $funcVolume$(data.total_size) as total_size by data.name\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Size (GB)</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n      </chart>\n    </panel>\n  </row>\n</form>",
"eai:type": "views",
"name": "indexes_and_volumes_instance",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" isVisible=\"true\" onUnloadCancelJobs=\"true\" stylesheet=\"indexing_performance_instance_extension.css\" script=\"common_control.js\">\n  <label>Indexing Performance: Advanced</label>\n  <fieldset autoRun=\"true\" submitButton=\"false\">\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"dmc_group\">\n      <label>Group</label>\n      <showClearButton>false</showClearButton>\n      <search>\n        <query>\n          | `dmc_get_groups_containing_role(dmc_group_indexer)`\n          | search search_group!=\"dmc_group_*\"\n        </query>\n      </search>\n      <fieldForLabel>label</fieldForLabel>\n      <fieldForValue>search_group</fieldForValue>\n      <choice value=\"dmc_group_indexer\">All Indexers</choice>\n      <default>dmc_group_indexer</default>\n    </input>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"splunk_server\">\n      <label>Instance</label>\n      <showClearButton>false</showClearButton>\n      <populatingSearch fieldForLabel=\"serverName\" fieldForValue=\"serverName\">\n        | `dmc_get_instance_info($dmc_group$)`\n        | where search_group=\"dmc_group_indexer\"\n      </populatingSearch>\n      <selectFirstChoice>true</selectFirstChoice>\n      <change>\n        <condition value=\"*\">\n          <set token=\"host\">$row.host$</set>\n        </condition>\n      </change>\n    </input>\n  </fieldset>\n  <search>\n    <query>\n      | rest splunk_server=$splunk_server$ /services/properties/server/general/parallelIngestionPipelines\n    </query>\n    <finalized>\n      <condition match=\"'result.value'>1\">\n        <set token=\"parallel_pipeline_enabled\">$result.value$</set>\n      </condition>\n      <condition>\n        <unset token=\"parallel_pipeline_enabled\" />\n      </condition>\n    </finalized>\n  </search>\n  <search id=\"pipeline_queue_api_base\">\n    <query>\n      | rest splunk_server=$splunk_server$ /services/server/introspection/queues\n      | eval current_fill_perc = round(current_size_bytes / max_size_bytes * 100, 0)\n      | fields title, current_fill_perc\n    </query>\n  </search>\n  <search base=\"pipeline_queue_api_base\">\n    <!-- NOTE: need to filter the result before | chart command, otherwise chart could potentially put some result into \"OTHER\" field. -->\n    <query>\n      eval a = \"to transpose table\"\n      | where title==\"parsingQueue\" OR title==\"aggQueue\" OR title==\"typingQueue\" OR title==\"indexQueue\"\n      | chart values(current_fill_perc) over a by title\n      | fields parsingQueue, aggQueue, typingQueue, indexQueue\n      | eval parsingQueue = if(isnotnull(parsingQueue), parsingQueue, \"N/A\")\n      | eval aggQueue = if(isnotnull(aggQueue), aggQueue, \"N/A\")\n      | eval typingQueue = if(isnotnull(typingQueue), typingQueue, \"N/A\")\n      | eval indexQueue = if(isnotnull(indexQueue), indexQueue, \"N/A\")\n    </query>\n    <preview>\n      <set token=\"parsing_queue_value\">$result.parsingQueue$</set>\n      <set token=\"agg_queue_value\">$result.aggQueue$</set>\n      <set token=\"typing_queue_value\">$result.typingQueue$</set>\n      <set token=\"index_queue_value\">$result.indexQueue$</set>\n    </preview>\n  </search>\n  <row>\n    <panel>\n      <html>\n        <h2>\n          <span>Select views: </span>\n          <span id=\"link-switcher-view\">\n            <a href=\"#\" class=\"btn-pill active\" data-item=\"all\">All</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"snapshot\">Snapshot</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"historical\">Historical</a>\n          </span>\n        </h2>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Snapshots</title>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Indexing Overview</title>\n      <table>\n        <search>\n          <query>\n            | rest splunk_server=$splunk_server$ /services/server/introspection/indexer\n            | eval status = if((reason == \".\") OR (reason == \"\") OR isnull(reason), status, status.\": \".reason)\n            | fields splunk_server, average_KBps, status\n            | eval average_KBps = round(average_KBps, 0)\n            | join type=outer [\n              | rest splunk_server=$splunk_server$ /services/properties/server/general/pipelineSetSelectionPolicy\n              | fields value\n              | rename value as pipeline_set_selection_policy]\n            | join type=outer [\n              | rest splunk_server=$splunk_server$ /services/properties/server/general/parallelIngestionPipelines]\n            | fields splunk_server, value, pipeline_set_selection_policy, average_KBps, status\n            | rename splunk_server as Instance, value as \"Pipeline Set Count\", pipeline_set_selection_policy as \"Pipeline Set Selection Policy\", average_KBps as \"Indexing Rate (KB/s)\", status as Status, reason as Reason\n          </query>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <html>\n        <p>Indexing rate measured over 30 seconds every 30 seconds (available with Splunk Enterprise 6.2 or later indexers).</p>\n        <p>You can configure pipeline set selection policies in server.conf. <a href=\"/help?location=learnmore.dmc.pipelinesets\" target=\"_blank\" class=\"external\">Learn more</a></p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Historical Charts</title>\n      <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n        <label>Time Range:</label>\n        <default>\n          <earliestTime>-4h@m</earliestTime>\n          <latestTime>now</latestTime>\n        </default>\n      </input>\n      <input depends=\"$parallel_pipeline_enabled$\" type=\"dropdown\" searchWhenChanged=\"true\" token=\"log_pipe_scope\">\n        <label>Pipeline Set</label>\n        <showClearButton>false</showClearButton>\n        <default>*</default>\n        <search>\n          <query>\n            `dmc_set_index_internal` host=$host$ source=\"*metrics.log\" sourcetype=splunkd group=pipeline\n            | stats count by ingest_pipe\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <fieldForLabel>ingest_pipe</fieldForLabel>\n        <fieldForValue>ingest_pipe</fieldForValue>\n        <choice value=\"*\">All</choice>\n      </input>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Splunkd Thread Activity</title>\n      <chart>\n        <search>\n          <query>\n            `dmc_set_index_internal` host=$host$ source=\"*metrics.log\" group=dutycycle\n            | eval dutycycle_ratio_perc=ratio*100\n            | `dmc_timechart_for_metrics_log` avg(dutycycle_ratio_perc) by thread limit=30\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.axisY.maximumNumber\">100</option>\n        <option name=\"charting.axisY.minimumNumber\">0</option>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.drilldown\">none</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Thread Activity (%)</option>\n      </chart>\n      <html>\n        <p>This graph shows the average thread activity of all Splunkd threads.</p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Ingestion Pipeline Activity By Pipeline Set</title>\n      <chart>\n        <search>\n          <query>\n            `dmc_set_index_internal` host=$host$ source=\"*metrics.log\" group=dutycycle name=ingest\n            | fillnull value=0 ingest_pipe\n            | search ingest_pipe=$log_pipe_scope$\n            | eval dutycycle_ratio_perc=ratio*100\n            | chart limit=30 avg(dutycycle_ratio_perc) over ingest_pipe by thread\n            | rename ingest_pipe as \"Pipeline Set\"\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">bar</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.drilldown\">none</option>\n        <option name=\"charting.axisTitleY.text\">Thread Activity</option>\n      </chart>\n      <html>\n        <p>This chart shows the average activity of ingestion pipelines grouped by pipeline set.</p>\n      </html>\n    </panel>\n    <panel rejects=\"$snapshot$\">\n      <title>Busiest Ingestion Pipeline By Pipeline Set (Incidents)</title>\n      <chart>\n        <search>\n          <query>\n            `dmc_set_index_internal` host=$host$ ingest_pipe=$log_pipe_scope$ source=\"*metrics.log\" group=pipelineset name=load_metrics\n            | chart limit=30 count(busiest_thread_name) over ingest_pipe by busiest_thread_name\n            | rename ingest_pipe as \"Pipeline Set\"\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n          <sampleRatio>1</sampleRatio>\n        </search>\n        <option name=\"charting.chart\">bar</option>\n        <option name=\"charting.chart.stackMode\">stacked100</option>\n        <option name=\"charting.drilldown\">none</option>\n        <option name=\"charting.axisTitleY.text\">Incidents</option>\n      </chart>\n      <html>\n        <p>\n          This chart shows the count of busiest ingestion pipeline incidents grouped by pipeline set.\n          The busiest ingestion pipeline corresponds to the ingestion pipeline with the highest\n          thread activity during the measurement period.\n        </p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Busiest Ingestion Pipeline By Pipeline Set (Thread Activity)</title>\n      <chart>\n        <search>\n          <query>\n            `dmc_set_index_internal` host=$host$ ingest_pipe=$log_pipe_scope$ source=\"*metrics.log\" group=pipelineset name=load_metrics\n            | eval dutycycle_ratio_perc=dutycycle_ratio*100\n            | `dmc_timechart_for_metrics_log` max(dutycycle_ratio_perc) by ingest_pipe\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.axisY.maximumNumber\">100</option>\n        <option name=\"charting.axisY.minimumNumber\">0</option>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.drilldown\">none</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Thread Activity (%)</option>\n      </chart>\n      <html>\n        <p>\n          This graph shows the maximum thread activity of the busiest ingestion pipeline grouped by pipeline set.\n          The busiest ingestion pipeline corresponds to the ingestion pipeline with the highest\n          thread activity during the measurement period.\n        </p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Ingestion Assignment Probability Per Pipeline Set</title>\n      <chart>\n        <search>\n          <query>\n            `dmc_set_index_internal` host=$host$ ingest_pipe=$log_pipe_scope$ source=\"*metrics.log\" group=pipelineset name=load_metrics\n            | eval pipeline_set_selection_perc=share*100\n            | `dmc_timechart_for_metrics_log` max(pipeline_set_selection_perc) by ingest_pipe\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.axisY.maximumNumber\">100</option>\n        <option name=\"charting.axisY.minimumNumber\">0</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.stackMode\">stacked100</option>\n        <option name=\"charting.drilldown\">none</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Pipeline Set Selection Probability</option>\n      </chart>\n      <html>\n        <p>\n          This chart shows the relative pipeline set selection probability for new ingestion assignment requests.\n          This probability is a factor of the pipeline set selection policy shown in the Indexing Overview chart above.\n        </p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Ingestion Assignments Per Pipeline Set</title>\n      <chart>\n        <search>\n          <query>\n            `dmc_set_index_internal` host=$host$ ingest_pipe=$log_pipe_scope$ source=\"*metrics.log\" group=pipelineset name=load_metrics\n            | `dmc_timechart_for_metrics_log` max(requests_last_period) by ingest_pipe\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.drilldown\">none</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Ingestion Assignments</option>\n      </chart>\n      <html>\n        <p>\n          This graph shows the number of ingestion assignments grouped by pipeline set.\n          The ingestion assignments correspond to each new ingestion connection request to the indexer.\n        </p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Estimated CPU Usage per Splunk Processor</title>\n      <chart>\n        <search>\n          <query>\n            `dmc_set_index_internal` host=$host$ source=*metrics.log sourcetype=splunkd group=pipeline NOT processor=sendout\n            | eval ingest_pipe = if(isnotnull(ingest_pipe), ingest_pipe, \"none\")\n            | search ingest_pipe=$log_pipe_scope$\n            | `dmc_timechart_for_metrics_log` per_second(eval(cpu_seconds*100)) AS pctCPU by processor useother=false limit=15\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">CPU Usage (%)</option>\n        <option name=\"charting.chart\">column</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Aggregate CPU Seconds Spent per Indexer Processor Activity</title>\n      <input type=\"radio\" token=\"searchStringIndexer\" searchWhenChanged=\"true\">\n        <label/>\n        <choice value=\"all\">All</choice>\n        <choice value=\"subtask\">Split index service by subtask</choice>\n        <default>all</default>\n        <change>\n          <condition value=\"all\">\n            <unset token=\"show_cpu_by_subtask\" />\n          </condition>\n          <condition value=\"subtask\">\n            <set token=\"show_cpu_by_subtask\">true</set>\n          </condition>\n        </change>\n      </input>\n      <chart rejects=\"$show_cpu_by_subtask$\">\n        <search>\n          <query>\n            `dmc_set_index_internal` host=$host$ source=*metrics.log sourcetype=splunkd group=pipeline name=indexerpipe processor=indexer\n            | eval ingest_pipe = if(isnotnull(ingest_pipe), ingest_pipe, \"none\")\n            | search ingest_pipe=$log_pipe_scope$\n            | `dmc_timechart_for_metrics_log` sum(write_cpu_seconds) AS \"raw data write\" sum(service_cpu_seconds) AS \"index service\"\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">CPU seconds</option>\n      </chart>\n      <chart depends=\"$show_cpu_by_subtask$\">\n        <search>\n          <query>\n            `dmc_set_index_internal` host=$host$ source=*metrics.log sourcetype=splunkd group=subtask_seconds\n            | eval ingest_pipe = if(isnotnull(ingest_pipe), ingest_pipe, \"none\")\n            | search ingest_pipe=$log_pipe_scope$\n            | fields replicate_semislice, sync_hotBkt, throttle_optimize, flushBlockSig, retryMove_1hotBkt, size_hotBkt, roll_hotBkt, chillOrFreeze, update_checksums, fork_recovermetadata, rebuild_metadata, update_bktManifest, service_volumes, service_maxSizes, service_externProc\n            | `dmc_timechart_for_metrics_log` sum(*) AS *\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">CPU seconds</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>$processorTypeCpuProfLabel$ Processor CPU Profiling per $groupTypeCpuProfLabel$</title>\n      <html>\n          <p>Index-time transformation detail available with Splunk Enterprise 6.6.0 or later indexers. <a href=\"/help?location=learnmore.MC.indexingperf.regex\" target=\"_blank\" title=\"Splunk help\">Learn More</a></p>\n      </html>\n      <search id=\"internal_metrics_log_base\">\n        <query>\n          `dmc_set_index_internal` host=$host$ source=*metrics.log* group=per_$groupTypeCpuProfValue$_$processorTypeCpuProfValue$_cpu*\n          | eval cpu_time_ms = if(isnotnull(cpu_time_ms), cpu_time_ms, cpu)\n          | eval avg_cpu_time_per_event_ms = if(isnotnull(avg_cpu_time_per_event_ms), avg_cpu_time_per_event_ms, cpupe)\n          | eval event_count = if(isnotnull(event_count), event_count, ev)\n          | bin _time minspan=30s\n          | stats $functionQueueCpuProf$(cpu_time_ms) AS cpu_time_ms $functionQueueCpuProf$(avg_cpu_time_per_event_ms) AS avg_cpu_time_per_event_ms $functionQueueCpuProf$(bytes) AS bytes $functionQueueCpuProf$(event_count) AS event_count by series, _time\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <input type=\"radio\" token=\"show_cpu_prof\">\n        <label>Show panels: </label>\n        <choice value=\"yes\">Yes</choice>\n        <choice value=\"no\">No</choice>\n        <default>No</default>\n        <change>\n          <condition value=\"yes\">\n            <set token=\"source\">*metrics.log</set>\n          </condition>\n          <condition value=\"no\">\n            <unset token=\"source\"></unset>\n          </condition>\n        </change>\n      </input>\n      <input type=\"dropdown\" depends=\"$source$\" searchWhenChanged=\"true\" token=\"processorTypeCpuProf\">\n        <label>Splunk processor</label>\n        <showClearButton>false</showClearButton>\n        <default>lb</default>\n        <choice value=\"lb\">Line Breaking</choice>\n        <choice value=\"agg\">Aggregator</choice>\n        <choice value=\"regex\">Regex</choice>\n        <choice value=\"mp\">Metrics</choice>\n        <choice value=\"msp\">Metric Schema</choice>\n        <change>\n          <set token=\"processorTypeCpuProfLabel\">$label$</set>\n          <set token=\"processorTypeCpuProfValue\">$value$</set>\n        </change>\n      </input>\n      <input type=\"dropdown\" depends=\"$source$\" searchWhenChanged=\"true\" token=\"groupTypeCpuProf\">\n        <label>Split by</label>\n        <showClearButton>false</showClearButton>\n        <default>Sourcetype</default>\n        <choice value=\"sourcetype\">Sourcetype</choice>\n        <choice value=\"index\">Index</choice>\n        <choice value=\"host\">Host</choice>\n        <choice value=\"source\">Source</choice>\n        <change>\n          <set token=\"groupTypeCpuProfLabel\">$label$</set>\n          <set token=\"groupTypeCpuProfValue\">$value$</set>\n        </change>\n      </input>\n      <input type=\"dropdown\" depends=\"$source$\" searchWhenChanged=\"true\" token=\"functionQueueCpuProf\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>Median</default>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <change>\n          <set token=\"functionQueueCpuProfLabel\">$label$</set>\n        </change>\n      </input>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\" depends=\"$source$\">\n      <title>Total CPU time</title>\n      <chart>\n        <search base=\"internal_metrics_log_base\">\n          <query>\n            `dmc_timechart_for_metrics_log` $functionQueueCpuProf$(cpu_time_ms) by series\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.axisTitleY.text\">CPU milliseconds</option>\n      </chart>\n      <html>\n        <p>Total time (in milliseconds) spent by the $processorTypeCpuProfLabel$ processor, split per $groupTypeCpuProfLabel$.</p>\n      </html>\n    </panel>\n    <panel rejects=\"$snapshot$\" depends=\"$source$\">\n      <title>CPU time per event</title>\n      <chart>\n        <search base=\"internal_metrics_log_base\">\n          <query>\n            `dmc_timechart_for_metrics_log` $functionQueueCpuProf$(avg_cpu_time_per_event_ms) by series\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.axisTitleY.text\">Milliseconds spent per event</option>\n      </chart>\n      <html>\n        <p>Average time (in milliseconds) spent by the $processorTypeCpuProfLabel$ processor, split per $groupTypeCpuProfLabel$.</p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\" depends=\"$source$\">\n      <title>Bytes</title>\n      <chart>\n        <search base=\"internal_metrics_log_base\">\n          <query>\n            `dmc_timechart_for_metrics_log` $functionQueueCpuProf$(bytes) by series\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.axisTitleY.text\">Total number of bytes</option>\n      </chart>\n      <html>\n        <p>Total number of bytes processed by the $processorTypeCpuProfLabel$ processor, split by $groupTypeCpuProfLabel$.</p>\n      </html>\n    </panel>\n    <panel rejects=\"$snapshot$\" depends=\"$source$\">\n      <title>Event count</title>\n      <chart>\n        <search base=\"internal_metrics_log_base\">\n          <query>\n            `dmc_timechart_for_metrics_log` $functionQueueCpuProf$(event_count) by series\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.axisTitleY.text\">Total number of events</option>\n      </chart>\n      <html>\n        <p>Total number of events processed by the $processorTypeCpuProfLabel$ processor, split by $groupTypeCpuProfLabel$.</p>\n      </html>\n    </panel>\n  </row>\n</form>",
"eai:type": "views",
"name": "indexing_performance_advanced",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" script=\"common_control.js, drilldown_action_extension.js, indexing_performance_deployment_extension.js\">\n  <label>Indexing Performance: Deployment</label>\n  <fieldset autoRun=\"true\" submitButton=\"false\">\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"group\">\n      <label>Group</label>\n      <showClearButton>false</showClearButton>\n      <search>\n        <query>\n          | `dmc_get_groups_containing_role(dmc_group_indexer)`\n          | where search_group!=\"dmc_group_indexer\"\n        </query>\n      </search>\n      <fieldForLabel>label</fieldForLabel>\n      <fieldForValue>search_group</fieldForValue>\n      <choice value=\"*\">All Indexers</choice>\n      <default>*</default>\n    </input>\n  </fieldset>\n  <search id=\"parallel_pipe_api_base\">\n    <query>\n      <![CDATA[\n        | rest splunk_server_group=dmc_group_indexer splunk_server_group=\"$group$\" /services/server/introspection/queues\n        | search title=parsingQueue* OR title=aggQueue* OR title=typingQueue* OR title=indexQueue*\n        | eval fill_perc=round(current_size_bytes / max_size_bytes * 100,2)\n        | fields splunk_server, title, fill_perc\n        | rex field=title \"(?<queue_name>^\\w+)(?:\\.(?<pipeline_number>\\d+))?\"\n        | eval fill_perc = if(isnotnull(pipeline_number), \"pset\".pipeline_number.\": \".fill_perc, fill_perc)\n        | chart values(fill_perc) over splunk_server by queue_name\n        | eval pset_count = mvcount(parsingQueue)\n        | join type=outer splunk_server [\n          | rest splunk_server_group=dmc_group_indexer splunk_server_group=\"$group$\" /services/server/introspection/indexer\n          | eval average_KBps = round(average_KBps, 0)\n          | eval status = if((reason == \".\") OR (reason == \"\") OR isnull(reason), status, status.\": \".reason)\n          | fields splunk_server, average_KBps, status]\n        | fields splunk_server pset_count average_KBps status parsingQueue aggQueue typingQueue indexQueue\n        | sort -average_KBps\n      ]]>\n    </query>\n  </search>\n  <row>\n    <panel>\n      <html>\n        <h2>\n          <span>Select views: </span>\n          <span id=\"link-switcher-view\">\n            <a href=\"#\" class=\"btn-pill active\" data-item=\"all\">All</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"snapshot\">Snapshot</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"historical\">Historical</a>\n          </span>\n        </h2>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Snapshots</title>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <!-- this panel is only about indexer count and indexing rate, which is not affected by parallel pipeline, so no need to handle that -->\n      <title>Overview of Indexing Performance</title>\n      <single>\n        <search base=\"parallel_pipe_api_base\">\n          <query>stats count</query>\n        </search>\n        <option name=\"underLabel\">Indexers</option>\n        <option name=\"height\">80px</option>\n      </single>\n      <single>\n        <search base=\"parallel_pipe_api_base\">\n          <query>stats sum(average_KBps)</query>\n        </search>\n        <option name=\"underLabel\">Total Indexing Rate</option>\n        <option name=\"afterLabel\">KB/s</option>\n        <option name=\"height\">80px</option>\n      </single>\n      <single>\n        <search base=\"parallel_pipe_api_base\">\n          <query>\nstats avg(average_KBps) as avg_indexing_rate\n| eval avg_indexing_rate = round(avg_indexing_rate, 0)\n          </query>\n        </search>\n        <option name=\"underLabel\">Average Indexing Rate</option>\n        <option name=\"afterLabel\">KB/s</option>\n        <option name=\"height\">80px</option>\n      </single>\n      <single>\n        <search base=\"parallel_pipe_api_base\">\n          <query>stats median(average_KBps)</query>\n        </search>\n        <option name=\"underLabel\">Median Indexing Rate</option>\n        <option name=\"afterLabel\">KB/s</option>\n        <option name=\"height\">80px</option>\n      </single>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Indexing Performance by Instance</title>\n      <table>\n        <title>$totalCountOfInstances$ instances</title>\n        <search base=\"parallel_pipe_api_base\">\n          <query>\n            rename splunk_server as Instance, pset_count as \"Pipeline Set Count\", average_KBps as \"Indexing Rate (KB/s)\", status as \"Status\", parsingQueue as \"Parsing Queue Fill Ratio (%)\", aggQueue as \"Aggregation Queue Fill Ratio (%)\", \"typingQueue\" as \"Typing Queue Fill Ratio (%)\", indexQueue as \"Indexing Queue Fill Ratio (%)\"\n          </query>\n          <done>\n            <set token=\"totalCountOfInstances\">$job.resultCount$</set>\n          </done>\n        </search>\n        <option name=\"drilldown\">row</option>\n        <drilldown>\n          <link target=\"_blank\">\n            <![CDATA[indexing_performance_instance?form.splunk_server=$row.Instance$]]>\n          </link>\n        </drilldown>\n      </table>\n      <html>\n        <p>Click instance name for more details. </p>\n        <p>Indexing rate measured over 30 seconds every 30 seconds (available with Splunk Enterprise 6.2 or later indexers).</p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Historical Charts</title>\n      <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n        <label>Time Range:</label>\n        <default>\n          <earliestTime>-4h@m</earliestTime>\n          <latestTime>now</latestTime>\n        </default>\n      </input>\n    <input type=\"checkbox\" searchWhenChanged=\"true\" token=\"split_by_host\">\n      <label></label>\n      <choice>Split by host</choice>\n    </input>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$, $split_by_host$\" id=\"instances_by_indexing_rate\">\n      <title>Instances By Indexing Rate</title>\n        <html>\n            <div class=\"heatmap_toggle\"></div>\n        </html>\n        <viz type=\"splunk_monitoring_console.heatmap\">\n            <search id=\"instances_by_estimated_indexing_rate\">\n                <query>\n                    `dmc_set_index_internal` source=*metrics.log* sourcetype=splunkd search_group=dmc_group_indexer search_group=\"$group$\" group=thruput name=index_thruput\n                    | `dmc_timechart_for_metrics_log` partial=f limit=0 per_second(kb) AS kbps by host\n                    | untable _time host kbps\n                    | eval kbps = round(kbps,0)\n                    | `dmc_indexing_rate_rangemap_and_timechart`\n                </query>\n                <earliest>$time.earliest$</earliest>\n                <latest>$time.latest$</latest>\n            </search>\n            <option name=\"height\">300</option>\n            <drilldown>\n                <condition match=\"isnotnull('row._span')\">\n                    <set token=\"drilldown_indexing_rate\">true</set>\n                    <set token=\"drilldown_indexing_rate_span\">$row._span$</set>\n                    <set token=\"drilldown_indexing_rate_earliest\">$row.earliest$</set>\n                    <set token=\"drilldown_indexing_rate_earliest_label\">$row.earliest_label$</set>\n                    <set token=\"drilldown_indexing_rate_latest\">$row.latest$</set>\n                    <set token=\"drilldown_indexing_rate_latest_label\">$row.latest_label$</set>\n                    <set token=\"drilldown_indexing_rate_metric\">$row.drilldown_indexing_rate_metric$</set>\n                    <set token=\"drilldown_indexing_rate_count\">$row.numInstances$</set>\n                </condition>\n                <condition />\n            </drilldown>\n        </viz>\n      <chart>\n        <search>\n          <query>\n`dmc_set_index_internal` source=*metrics.log* sourcetype=splunkd search_group=dmc_group_indexer search_group=\"$group$\" group=thruput name=index_thruput\n| `dmc_timechart_for_metrics_log` partial=f limit=0 per_second(kb) AS kbps by host\n| untable _time host kbps\n| eval kbps = round(kbps,0)\n| `dmc_indexing_rate_rangemap_and_timechart`\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Instance count</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.fieldColors\">\n          {\"0-50 KB/s\": 0xe6ecf3,\n           \"50-100 KB/s\": 0xcdd8e7,\n           \"100-500 KB/s\": 0xb4c5db,\n           \"500 KB/s - 1 MB/s\": 0x9cb1d0,\n           \"1-2.5 MB/s\": 0x839ec4,\n           \"2.5-5 MB/s\": 0x6a8ab8,\n           \"5-10 MB/s\": 0x5177ac,\n           \"10+ MB/s\": 0x3863a0\n          }\n        </option>\n        <drilldown>\n          <condition match=\"isnotnull('row._span')\">\n            <set token=\"drilldown_indexing_rate\">true</set>\n            <set token=\"drilldown_indexing_rate_span\">$row._span$</set>\n            <set token=\"drilldown_indexing_rate_earliest\">$earliest$</set>\n            <eval token=\"drilldown_indexing_rate_earliest_label\">strftime(earliest, \"%m/%d/%Y %H:%M:%S\")</eval>\n            <set token=\"drilldown_indexing_rate_latest\">$latest$</set>\n            <eval token=\"drilldown_indexing_rate_latest_label\">strftime(latest, \"%m/%d/%Y %H:%M:%S\")</eval>\n            <set token=\"drilldown_indexing_rate_metric\">$click.name2$</set>\n            <set token=\"drilldown_indexing_rate_count\">$click.value2$</set>\n          </condition>\n          <condition />\n        </drilldown>\n      </chart>\n      <table depends=\"$drilldown_indexing_rate$\" id=\"drilldown_indexing_rate\">\n        <title>Time range: $drilldown_indexing_rate_earliest_label$ ~ $drilldown_indexing_rate_latest_label$. Metric: indexing rate range: $drilldown_indexing_rate_metric$. ($drilldown_indexing_rate_count$ instances)</title>\n        <search>\n          <query>`dmc_drilldown_indexing_performance_deployment_indexing_rate(\"$group$\", $drilldown_indexing_rate_metric$)`</query>\n          <earliest>$drilldown_indexing_rate_earliest$</earliest>\n          <latest>$drilldown_indexing_rate_latest$</latest>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <html depends=\"$drilldown_indexing_rate$\">\n        <a data-unset-token=\"drilldown_indexing_rate\">Close this drilldown table</a>\n      </html>\n    </panel>\n    </row>\n    <row>\n    <panel rejects=\"$snapshot$\" depends=\"$split_by_host$\">\n      <title>Indexing Rate By Instance</title>\n      <chart>\n        <search>\n          <query>\n`dmc_set_index_internal` source=*metrics.log* sourcetype=splunkd search_group=dmc_group_indexer search_group=\"$group$\" group=thruput name=index_thruput\n| `dmc_timechart_for_metrics_log` partial=f per_second(kb) AS kbps by host\n| eval kbps = round(kbps, 0)\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">KB/s</option>\n      </chart>\n    </panel>\n    <panel rejects=\"$snapshot$\">\n      <title>Deployment-Wide $aggrIdxRateLabel$ Indexing Rate</title>\n      <input type=\"dropdown\" token=\"aggrIdxRateDivider\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>1</default>\n        <choice value=\"1\">Total</choice>\n        <choice value=\"num_hosts\">Average Per Instance</choice>\n        <change>\n          <set token=\"aggrIdxRateLabel\">$label$</set>\n        </change>\n      </input>\n     <chart>\n        <search>\n          <query>\n`dmc_set_index_internal` source=*metrics.log* sourcetype=splunkd search_group=dmc_group_indexer search_group=\"$group$\" group=thruput name=index_thruput \n| `dmc_timechart_for_metrics_log` partial=f per_second(kb) AS kbps dc(host) AS num_hosts \n| eval kbps = kbps / $aggrIdxRateDivider$ \n| eval kbps = round(kbps, 0)\n| rename kbps as \"KB/s\"\n| fields - num_hosts\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">area</option>\n        <option name=\"charting.legend.placement\">none</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">KB/s</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel>\n      <html rejects=\"$split_by_host$\">\n        <p>Count of instances grouped by indexing rate over time.</p>\n      </html>\n      <html depends=\"$split_by_host$\">\n        <p>Indexing rate over time by instance.</p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$, $split_by_host$\" id=\"instances_by_queue_fill_ratio\">\n      <title>Instances By $instanceWideFillRatioAggrLabel$ Queue Fill Ratio</title>\n      <input type=\"dropdown\" token=\"instanceWideFillRatioQueueType\" searchWhenChanged=\"true\">\n        <label>Queue</label>\n        <choice value=\"splunktcpin\">Splunk Tcpin Queue</choice>\n        <choice value=\"parsingqueue\">Parsing Queue</choice>\n        <choice value=\"aggqueue\">Aggregation Queue</choice>\n        <choice value=\"typingqueue\">Typing Queue</choice>\n        <choice value=\"indexqueue\">Indexing Queue</choice>\n        <choice value=\"tcpout* | eval name=if(like(name,&quot;tcpout_%&quot;),&quot;tcpout&quot;,name)\">Tcpout Queue(s) - Consolidated</choice>\n        <default>indexqueue</default>\n        <showClearButton>false</showClearButton>\n      </input>\n      <input type=\"dropdown\" token=\"instanceWideFillRatioAggrFunc\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <default>Median</default>\n        <change>\n          <set token=\"instanceWideFillRatioAggrLabel\">$label$</set>\n        </change>\n      </input>\n        <html>\n            <div class=\"heatmap_toggle\"></div>\n        </html>\n        <viz type=\"splunk_monitoring_console.heatmap\">\n            <search>\n                <query>\n                    `dmc_set_index_internal` sourcetype=splunkd source=*metrics.log search_group=dmc_group_indexer search_group=\"$group$\" group=queue name=$instanceWideFillRatioQueueType$\n                    | eval max=if(isnotnull(max_size_kb),max_size_kb,max_size)\n                    | eval curr=if(isnotnull(current_size_kb),current_size_kb,current_size)\n                    | eval fill_perc=round((curr/max)*100,2)\n                    | bin _time minspan=30s\n                    | stats $instanceWideFillRatioAggrFunc$(fill_perc) AS \"fill_percentage\" by host, _time\n                    | `dmc_queue_fill_ratio_rangemap_and_timechart`\n                </query>\n                <earliest>$time.earliest$</earliest>\n                <latest>$time.latest$</latest>\n            </search>\n            <drilldown>\n                <condition match=\"isnotnull('row._span')\">\n                    <set token=\"drilldown_queue_fill_ratio\">true</set>\n                    <set token=\"drilldown_queue_fill_ratio_span\">$row._span$</set>\n                    <set token=\"drilldown_queue_fill_ratio_earliest\">$row.earliest$</set>\n                    <eval token=\"drilldown_queue_fill_ratio_earliest_label\">$row.earliest_label$</eval>\n                    <set token=\"drilldown_queue_fill_ratio_latest\">$row.latest$</set>\n                    <eval token=\"drilldown_queue_fill_ratio_latest_label\">$row.latest_label$</eval>\n                    <set token=\"drilldown_queue_fill_ratio_metric\">$row.drilldown_indexing_rate_metric$</set>\n                    <set token=\"drilldown_queue_fill_ratio_count\">$row.numInstances$</set>\n                </condition>\n                <condition/>\n            </drilldown>\n        </viz>\n      <chart>\n        <search>\n          <query>\n`dmc_set_index_internal` sourcetype=splunkd source=*metrics.log search_group=dmc_group_indexer search_group=\"$group$\" group=queue name=$instanceWideFillRatioQueueType$\n| eval max=if(isnotnull(max_size_kb),max_size_kb,max_size)\n| eval curr=if(isnotnull(current_size_kb),current_size_kb,current_size)\n| eval fill_perc=round((curr/max)*100,2)\n| bin _time minspan=30s\n| stats $instanceWideFillRatioAggrFunc$(fill_perc) AS \"fill_percentage\" by host, _time\n| `dmc_queue_fill_ratio_rangemap_and_timechart`\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Instance count</option>\n        <option name=\"charting.fieldColors\">{\"80-100%\": 0xD85D3C, \"60-80%\": 0xF7902B, \"0-60%\":0x9AC23C, \"abnormal\":0xC4C4C0}</option>\n        <drilldown>\n          <condition match=\"isnotnull('row._span')\">\n            <set token=\"drilldown_queue_fill_ratio\">true</set>\n            <set token=\"drilldown_queue_fill_ratio_span\">$row._span$</set>\n            <set token=\"drilldown_queue_fill_ratio_earliest\">$earliest$</set>\n            <eval token=\"drilldown_queue_fill_ratio_earliest_label\">strftime(earliest, \"%m/%d/%Y %H:%M:%S\")</eval>\n            <set token=\"drilldown_queue_fill_ratio_latest\">$latest$</set>\n            <eval token=\"drilldown_queue_fill_ratio_latest_label\">strftime(latest, \"%m/%d/%Y %H:%M:%S\")</eval>\n            <set token=\"drilldown_queue_fill_ratio_metric\">$click.name2$</set>\n            <set token=\"drilldown_queue_fill_ratio_count\">$click.value2$</set>\n          </condition>\n          <condition/>\n        </drilldown>\n      </chart>\n      <table depends=\"$drilldown_queue_fill_ratio$\" id=\"drilldown_queue_fill_ratio\">\n        <title>Time range: $drilldown_queue_fill_ratio_earliest_label$ ~ $drilldown_queue_fill_ratio_latest_label$. Metric: $instanceWideFillRatioAggrFunc$ $instanceWideFillRatioQueueType$ fill ratio range: $drilldown_queue_fill_ratio_metric$. ($drilldown_queue_fill_ratio_count$ instances)</title>\n        <search>\n          <query>`dmc_drilldown_indexing_performance_deployment_queue_fill_ratio(\"$group$\", $instanceWideFillRatioQueueType$, $instanceWideFillRatioAggrFunc$, $drilldown_queue_fill_ratio_metric$)`</query>\n          <earliest>$drilldown_queue_fill_ratio_earliest$</earliest>\n          <latest>$drilldown_queue_fill_ratio_latest$</latest>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <html depends=\"$drilldown_queue_fill_ratio$\">\n        <a data-unset-token=\"drilldown_queue_fill_ratio\">Close this drilldown table</a>\n      </html>\n    </panel>\n    <panel rejects=\"$snapshot$\" depends=\"$split_by_host$\">\n      <title>$instanceWideFillRatioAggrLabel$ Queue Fill Ratio By Instance</title>\n      <input type=\"dropdown\" token=\"instanceWideFillRatioQueueType\" searchWhenChanged=\"true\">\n        <label>Queue</label>\n        <choice value=\"splunktcpin\">Splunk Tcpin Queue</choice>\n        <choice value=\"parsingqueue\">Parsing Queue</choice>\n        <choice value=\"aggqueue\">Aggregation Queue</choice>\n        <choice value=\"typingqueue\">Typing Queue</choice>\n        <choice value=\"indexqueue\">Indexing Queue</choice>\n        <choice value=\"tcpout* | eval name=if(like(name,&quot;tcpout_%&quot;),&quot;tcpout&quot;,name)\">Tcpout Queue(s) - Consolidated</choice>\n        <default>indexqueue</default>\n        <showClearButton>false</showClearButton>\n      </input>\n      <input type=\"dropdown\" token=\"instanceWideFillRatioAggrFunc\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <default>Median</default>\n        <change>\n          <set token=\"instanceWideAggrLabel\">$label$</set>\n        </change>\n      </input>\n      <chart>\n        <search>\n          <query>\n`dmc_set_index_internal` sourcetype=splunkd source=*metrics.log search_group=dmc_group_indexer search_group=\"$group$\" group=queue name=$instanceWideFillRatioQueueType$\n| eval max=if(isnotnull(max_size_kb),max_size_kb,max_size)\n| eval curr=if(isnotnull(current_size_kb),current_size_kb,current_size)\n| eval fill_perc=round((curr/max)*100,2)\n| `dmc_timechart_for_metrics_log` partial=f limit=25 $instanceWideFillRatioAggrFunc$(fill_perc) AS fill_percentage by host\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Queue % filled</option>\n        <option name=\"charting.axisY.minimumNumber\">0</option>\n        <option name=\"charting.axisY.maximumNumber\">100</option>\n      </chart>\n    </panel>\n    </row>\n    <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Deployment-Wide $deploymentWideFillRatioAggrLabel$ Queue Fill Ratio</title>\n      <input type=\"dropdown\" token=\"deploymentWideFillRatioQueueType\" searchWhenChanged=\"true\">\n        <label>Queue</label>\n        <choice value=\"splunktcpin\">Splunk Tcpin Queue</choice>\n        <choice value=\"parsingqueue\">Parsing Queue</choice>\n        <choice value=\"aggqueue\">Aggregation Queue</choice>\n        <choice value=\"typingqueue\">Typing Queue</choice>\n        <choice value=\"indexqueue\">Indexing Queue</choice>\n        <choice value=\"tcpout* | eval name=if(like(name,&quot;tcpout_%&quot;),&quot;tcpout&quot;,name)\">Tcpout Queue(s) - Consolidated</choice>\n        <default>indexqueue</default>\n        <showClearButton>false</showClearButton>\n      </input>\n      <input type=\"dropdown\" token=\"deploymentWideFillRatioAggrFunc\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <default>Median</default>\n        <change>\n          <set token=\"deploymentWideFillRatioAggrLabel\">$label$</set>\n        </change>\n      </input>\n      <chart>\n        <search>\n          <query>\n`dmc_set_index_internal` sourcetype=splunkd source=*metrics.log search_group=dmc_group_indexer search_group=\"$group$\" group=queue name=$deploymentWideFillRatioQueueType$\n| eval max=if(isnotnull(max_size_kb),max_size_kb,max_size)\n| eval curr=if(isnotnull(current_size_kb),current_size_kb,current_size)\n| eval fill_perc=round((curr/max)*100,2)\n| `dmc_timechart_for_metrics_log` partial=f $deploymentWideFillRatioAggrFunc$(fill_perc) AS fill_percentage\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">area</option>\n        <option name=\"charting.legend.placement\">none</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Queue % filled</option>\n        <option name=\"charting.axisY.minimumNumber\">0</option>\n        <option name=\"charting.axisY.maximumNumber\">100</option>\n      </chart>\n     </panel>\n  </row>\n  <row>\n    <panel>\n      <html rejects=\"$split_by_host$\">\n        <p>Count of instances grouped by $instanceWideFillRatioAggrLabel$ fill ratio of the selected queue over time.</p>\n        <p>If parallel pipeline sets are defined, queue fill ratios are aggregated across all pipeline sets.</p>\n      </html>\n      <html depends=\"$split_by_host$\">\n        <p>$instanceWideFillRatioAggrLabel$ fill ratio of the selected queue over time by instance.</p>\n        <p>If parallel pipeline sets are defined, queue fill ratios are aggregated across all pipeline sets.</p>\n      </html>\n    </panel>\n  </row>\n</form>",
"eai:type": "views",
"name": "indexing_performance_deployment",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" isVisible=\"true\" onUnloadCancelJobs=\"true\" stylesheet=\"indexing_performance_instance_extension.css\" script=\"common_control.js\">\n  <label>Indexing Performance: Instance</label>\n  <fieldset autoRun=\"true\" submitButton=\"false\">\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"dmc_group\">\n      <label>Group</label>\n      <showClearButton>false</showClearButton>\n      <search>\n        <query>\n          | `dmc_get_groups_containing_role(dmc_group_indexer)`\n          | search search_group!=\"dmc_group_*\"\n        </query>\n      </search>\n      <fieldForLabel>label</fieldForLabel>\n      <fieldForValue>search_group</fieldForValue>\n      <choice value=\"dmc_group_indexer\">All Indexers</choice>\n      <default>dmc_group_indexer</default>\n    </input>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"splunk_server\">\n      <label>Instance</label>\n      <showClearButton>false</showClearButton>\n      <populatingSearch fieldForLabel=\"serverName\" fieldForValue=\"serverName\">\n        | `dmc_get_instance_info($dmc_group$)`\n        | where search_group=\"dmc_group_indexer\"\n      </populatingSearch>\n      <selectFirstChoice>true</selectFirstChoice>\n      <change>\n        <condition value=\"*\">\n          <set token=\"host\">$row.host$</set>\n        </condition>\n      </change>\n    </input>\n  </fieldset>\n  <search>\n    <query>\n      | rest splunk_server=$splunk_server$ /services/properties/server/general/parallelIngestionPipelines\n    </query>\n    <finalized>\n      <condition match=\"'result.value'>1\">\n        <set token=\"parallel_pipeline_enabled\">$result.value$</set>\n      </condition>\n      <condition>\n        <unset token=\"parallel_pipeline_enabled\" />\n      </condition>\n    </finalized>\n  </search>\n  <search id=\"pipeline_queue_api_base\">\n    <query>\n      | rest splunk_server=$splunk_server$ /services/server/introspection/queues\n      | eval current_fill_perc = round(current_size_bytes / max_size_bytes * 100, 0)\n      | fields title, current_fill_perc\n    </query>\n  </search>\n  <search base=\"pipeline_queue_api_base\">\n    <!-- NOTE: need to filter the result before | chart command, otherwise chart could potentially put some result into \"OTHER\" field. -->\n    <query>\n      eval a = \"to transpose table\"\n      | where title==\"parsingQueue\" OR title==\"aggQueue\" OR title==\"typingQueue\" OR title==\"indexQueue\"\n      | chart values(current_fill_perc) over a by title\n      | fields parsingQueue, aggQueue, typingQueue, indexQueue\n      | eval parsingQueue = if(isnotnull(parsingQueue), parsingQueue, \"N/A\")\n      | eval aggQueue = if(isnotnull(aggQueue), aggQueue, \"N/A\")\n      | eval typingQueue = if(isnotnull(typingQueue), typingQueue, \"N/A\")\n      | eval indexQueue = if(isnotnull(indexQueue), indexQueue, \"N/A\")\n    </query>\n    <!-- Need to keep eval in the above search as its not certain that a result with null values is not returned -->\n    <done>\n      <!-- Search does not return any result when a server is down. Hence setting N/A if there is no result -->\n      <condition match=\"$job.resultCount$ = 0\">\n        <set token=\"parsing_queue_value\">N/A</set>\n        <set token=\"agg_queue_value\">N/A</set>\n        <set token=\"typing_queue_value\">N/A</set>\n        <set token=\"index_queue_value\">N/A</set>\n      </condition>\n      <!-- Search does return result when a server is up. Hence setting field values as token -->\n      <condition match=\"$job.resultCount$ > 0\">\n        <set token=\"parsing_queue_value\">$result.parsingQueue$</set>\n        <set token=\"agg_queue_value\">$result.aggQueue$</set>\n        <set token=\"typing_queue_value\">$result.typingQueue$</set>\n        <set token=\"index_queue_value\">$result.indexQueue$</set>\n      </condition>\n    </done>\n  </search>\n  <row>\n    <panel>\n      <html>\n        <h2>\n          <span>Select views: </span>\n          <span id=\"link-switcher-view\">\n            <a href=\"#\" class=\"btn-pill active\" data-item=\"all\">All</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"snapshot\">Snapshot</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"historical\">Historical</a>\n          </span>\n        </h2>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Snapshots</title>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Indexing Overview</title>\n      <table>\n        <search>\n          <query>\n            | rest splunk_server=$splunk_server$ /services/server/introspection/indexer\n            | eval status = if((reason == \".\") OR (reason == \"\") OR isnull(reason), status, status.\": \".reason)\n            | fields splunk_server, average_KBps, status\n            | eval average_KBps = round(average_KBps, 0)\n            | join type=outer [\n              | rest splunk_server=$splunk_server$ /services/properties/server/general/pipelineSetSelectionPolicy\n              | fields value\n              | rename value as pipeline_set_selection_policy]\n            | join type=outer [\n              | rest splunk_server=$splunk_server$ /services/properties/server/general/parallelIngestionPipelines]\n            | fields splunk_server, value, pipeline_set_selection_policy, average_KBps, status\n            | rename splunk_server as Instance, value as \"Pipeline Set Count\", pipeline_set_selection_policy as \"Pipeline Set Selection Policy\", average_KBps as \"Indexing Rate (KB/s)\", status as Status, reason as Reason\n          </query>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <html>\n        <p>Indexing rate measured over 30 seconds every 30 seconds (available with Splunk Enterprise 6.2 or later indexers).</p>\n        <p>The Pipeline Set selection policies can be set in server.conf. <a href=\"/help?location=learnmore.dmc.pipelinesets\" target=\"_blank\" class=\"external\">Learn more</a></p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$, $parallel_pipeline_enabled$\">\n      <title>Splunk Enterprise Data Pipeline</title>\n      <html depends=\"$parsing_queue_value$\">\n        <div class=\"pipeline-queues\">\n          <div class=\"pipeline-queue-value\">$parsing_queue_value$</div>\n          <div class=\"pipeline-queue-value\">$agg_queue_value$</div>\n          <div class=\"pipeline-queue-value\">$typing_queue_value$</div>\n          <div class=\"pipeline-queue-value\">$index_queue_value$</div>\n        </div>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\" depends=\"$parallel_pipeline_enabled$\">\n      <title>Splunk Enterprise Parallel Data Pipelines</title>\n      <table>\n        <search base=\"pipeline_queue_api_base\">\n          <query>\n            <![CDATA[\n            search title=\"parsingQueue.*\" OR title=\"aggQueue.*\" OR title=\"typingQueue.*\" OR title=\"indexQueue.*\"\n            | rex field=title \"(?<queue_name>^\\w+)\\.(?<pipeline_number>\\d+)\"\n            | chart values(current_fill_perc) over pipeline_number by queue_name\n            | fields pipeline_number, parsingQueue, aggQueue, typingQueue, indexQueue\n            | rename pipeline_number as \"Pipeline Number\", parsingQueue as \"Parsing Queue Fill Ratio (%)\", aggQueue as \"Aggregator Queue Fill Ratio (%)\", typingQueue as \"Typing Queue Fill Ratio (%)\", indexQueue as \"Index Queue Fill Ratio (%)\"\n            ]]>\n          </query>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Historical Charts</title>\n      <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n        <label>Time Range:</label>\n        <default>\n          <earliestTime>-4h@m</earliestTime>\n          <latestTime>now</latestTime>\n        </default>\n      </input>\n      <input depends=\"$parallel_pipeline_enabled$\" type=\"dropdown\" searchWhenChanged=\"true\" token=\"log_pipe_scope\">\n        <label>Pipeline Set</label>\n        <showClearButton>false</showClearButton>\n        <default>*</default>\n        <search>\n          <query>\n            `dmc_set_index_internal` host=$host$ source=\"*metrics.log\" sourcetype=splunkd group=pipeline\n            | stats count by ingest_pipe\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <fieldForLabel>ingest_pipe</fieldForLabel>\n        <fieldForValue>ingest_pipe</fieldForValue>\n        <choice value=\"*\">All</choice>\n      </input>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Estimated Indexing Rate Per $groupTypeIdxPerfLabel$</title>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"groupTypeIdxPerf\">\n        <label>Split by</label>\n        <showClearButton>false</showClearButton>\n        <default>Sourcetype</default>\n        <choice value=\"Sourcetype\">Sourcetype</choice>\n        <choice value=\"Index\">Index</choice>\n        <choice value=\"Host\">Host</choice>\n        <choice value=\"Source\">Source</choice>\n        <change>\n          <set token=\"groupTypeIdxPerfLabel\">$label$</set>\n        </change>\n      </input>\n      <chart>\n        <search>\n          <query>\n            `dmc_set_index_internal` host=$host$ source=\"*metrics.log\" sourcetype=splunkd group=per_$groupTypeIdxPerf$_thruput\n            | eval ingest_pipe = if(isnotnull(ingest_pipe), ingest_pipe, \"none\")\n            | search ingest_pipe=$log_pipe_scope$\n            | `dmc_timechart_for_metrics_log` per_second(kb) by series useother=false limit=15\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Indexing Rate (KB/s)</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>$funcQueueLabel$ Fill Ratio of Data Processing Queues</title>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"queues\">\n        <label>Queues to Measure:</label>\n        <showClearButton>false</showClearButton>\n        <default>(name=parsingqueue OR name=aggqueue OR name=typingqueue OR name=indexqueue OR name=splunktcpin) | eval name=case(name==\"splunktcpin\",\"5 - Splunktcpin Queue\",name==\"aggqueue\",\"2 - Aggregation Queue\",name==\"indexqueue\",\"4 - Indexing Queue\",name==\"parsingqueue\",\"1 - Parsing Queue\",name==\"typingqueue\",\"3 - Typing Queue\")</default>\n        <choice value=\"(name=parsingqueue OR name=aggqueue OR name=typingqueue OR name=indexqueue OR name=splunktcpin) | eval name=case(name==&quot;splunktcpin&quot;,&quot;5 - Splunktcpin Queue&quot;,name==&quot;aggqueue&quot;,&quot;2 - Aggregation Queue&quot;,name==&quot;indexqueue&quot;,&quot;4 - Indexing Queue&quot;,name==&quot;parsingqueue&quot;,&quot;1 - Parsing Queue&quot;,name==&quot;typingqueue&quot;,&quot;3 - Typing Queue&quot;)\">Event-Processing Queues</choice>\n        <choice value=\"name=*\">All Queues</choice>\n      </input>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"functionQueue\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>Median</default>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <change>\n          <set token=\"funcQueueLabel\">$label$</set>\n        </change>\n      </input>\n      <chart>\n        <search>\n          <query>\n`dmc_set_index_internal` host=$host$ source=*metrics.log sourcetype=splunkd group=queue $queues$\n| eval ingest_pipe = if(isnotnull(ingest_pipe), ingest_pipe, \"none\")\n| search ingest_pipe=$log_pipe_scope$\n| eval max=if(isnotnull(max_size_kb),max_size_kb,max_size)\n| eval curr=if(isnotnull(current_size_kb),current_size_kb,current_size)\n| eval fill_perc=round((curr/max)*100,2)\n| `dmc_timechart_for_metrics_log` $functionQueue$(fill_perc) by name useother=false limit=15\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">area</option>\n        <option name=\"height\">500px</option>\n        <option name=\"charting.layout.splitSeries\">1</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Fill Ratio (%)</option>\n        <option name=\"charting.axisY.minimumNumber\">0</option>\n        <option name=\"charting.axisY.maximumNumber\">100</option>\n      </chart>\n    </panel>\n  </row>\n</form>",
"eai:type": "views",
"name": "indexing_performance_instance",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" script=\"common_control.js, drilldown_action_extension.js, kv_store_deployment_extension.js\">\n  <label>KV Store: Deployment</label>\n  <fieldset autoRun=\"true\" submitButton=\"false\">\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"group\">\n      <label>Group</label>\n      <showClearButton>false</showClearButton>\n      <search>\n        <query>\n          | `dmc_get_groups_containing_role(dmc_group_kv_store)`\n          | where search_group!=\"dmc_group_kv_store\"\n        </query>\n      </search>\n      <fieldForLabel>label</fieldForLabel>\n      <fieldForValue>search_group</fieldForValue>\n      <choice value=\"*\">All KV Stores</choice>\n      <default>*</default>\n    </input>\n  </fieldset>\n  <row>\n    <panel>\n      <title>Warning and Error Patterns</title>\n      <input type=\"time\" searchWhenChanged=\"true\" token=\"warningErrorTime\">\n        <label>Time Range:</label>\n        <default>\n          <earliestTime>-24h</earliestTime>\n          <latestTime>now</latestTime>\n        </default>\n      </input>\n      <table>\n        <search>\n          <query>\n`dmc_get_warnings_and_errors(dmc_group_kv_store, KVStore*)` search_group=\"$group$\"\n| cluster showcount=t\n| table cluster_count, _time, log_level, component, event_message, punct\n| sort - cluster_count\n| `dmc_time_format(_time)`\n| rename cluster_count AS Count, _time AS \"Latest Time\", log_level as \"Log Level\", component as Component, event_message as \"Latest Message\"\n          </query>\n          <earliest>$warningErrorTime.earliest$</earliest>\n          <latest>$warningErrorTime.latest$</latest>\n        </search>\n        <fields>Count, \"Latest Time\", \"Log Level\", Component, \"Latest Message\"</fields>\n        <option name=\"drilldown\">row</option>\n        <drilldown>\n          <set token=\"warningErrorPunct\">$row.punct$</set>\n        </drilldown>\n      </table>\n      <html>\n        <p>Click on a row to see event details.</p>\n      </html>\n    </panel>\n    <panel depends=\"$warningErrorPunct$\">\n      <title>Event Details</title>\n      <event>\n        <search>\n          <query>\n`dmc_get_warnings_and_errors(dmc_group_kv_store, KVStore*)` punct=\"$warningErrorPunct$\" search_group=\"$group$\"\n          </query>\n          <earliest>$warningErrorTime.earliest$</earliest>\n          <latest>$warningErrorTime.latest$</latest>\n        </search>\n        <option name=\"rowNumbers\">true</option>\n      </event>\n      <html>\n        <a data-unset-token=\"warningErrorPunct\">Close this panel</a>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel>\n      <html>\n        <h2>\n          <span>Select views: </span>\n          <span id=\"link-switcher-view\">\n            <a href=\"#\" class=\"btn-pill active\" data-item=\"all\">All</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"snapshot\">Snapshot</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"historical\">Historical</a>\n          </span>\n        </h2>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Snapshots</title>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>KV Store Status</title>\n      <table>\n        <searchString>\n| rest splunk_server_group=dmc_group_kv_store splunk_server_group=\"$group$\" /services/server/introspection/kvstore/serverstatus\n| eval Instance=splunk_server\n| spath input=data\n| eval network=round(abs(('network.bytesIn'+'network.bytesOut')/1024/1024), 2)\n| rename globalLock.lockTime AS globalLock, globalLock.totalTime AS total\n| eval lock=round(abs(globalLock*100/total), 2)\n| rename opcounters.command as c, opcounters.update as u, opcounters.queries as q, opcountes.deletes as d, opcounters.getmore as g, opcounters.inserts as i\n| eval totalops=if(isNotNull('c'), 'c',0)+if(isNotNull('u'), 'u', 0)+if(isNotNull('q'), 'q', 0)+if(isNotNull('d'), 'd', 0)+if(isNotNull('g'), 'g', 0)+if(isNotNull('i'), 'i', 0)\n| eval pf=round(abs('extra_info.page_faults'/totalops), 2)\n| eval flush='backgroundFlushing.last_ms'\n| eval hours=toString(round(uptime/3600, 2))\n| rename repl.ismaster as rstate\n| rename repl.secondary as secondary\n| eval replstate=if(rstate==\"true\", \"Primary\", if(secondary==\"true\", \"Secondary\", \"N/A\"))\n| stats first(mem.resident) AS \"Physical Memory Usage (MB)\" first(mem.mappedWithJournal) AS \"Mapped Memory Usage (MB)\" first(pf) AS \"Page Faults per Operation\" first(globalLock.currentQueue.total) AS \"Total Queued\" first(connections.current) AS \"Active Connections\" first(lock) AS \"Lock (%)\" first(flush) AS \"Last Flush (ms)\" first(network) AS \"Network Traffic (MB)\" first(hours) AS \"Uptime (hours)\"  first(replstate) AS \"Replication Role\" by Instance\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"refresh.auto.interval\">60</option>\n        <option name=\"refresh.time.visible\">false</option>\n        <drilldown>\n          <condition field=\"Instance\">\n            <link target=\"_blank\">\n              <![CDATA[kv_store_instance?form.splunk_server=$click.value2$]]>\n            </link>\n          </condition>\n          <condition field=\"*\"></condition>\n        </drilldown>\n      </table>\n      <html>\n        <p>Click instance name for more details. Total queued is operations (readers and writers) waiting for a read or write lock to be cleared.</p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Historical Charts</title>\n      <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n        <label>Time Range:</label>\n        <default>\n          <earliestTime>-4h@m</earliestTime>\n          <latestTime>now</latestTime>\n        </default>\n      </input>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\" id=\"instances_by_page_faults_per_operation\">\n      <title>Instances by $countPageFaultsFuncLabel$ Page Faults per Operation</title>\n      <input type=\"dropdown\" token=\"countPageFaultsFunc\" searchWhenChanged=\"true\">\n          <label>Aggregation</label>\n          <showClearButton>false</showClearButton>\n          <default>Median</default>\n          <choice value=\"Avg\">Average</choice>\n          <choice value=\"Median\">Median</choice>\n          <choice value=\"Min\">Minimum</choice>\n          <choice value=\"Max\">Maximum</choice>\n          <choice value=\"Perc90\">90th Percentile</choice>\n          <choice value=\"First\">Sampled</choice>\n          <change>\n            <set token=\"countPageFaultsFuncLabel\">$label$</set>\n          </change>\n      </input>\n        <html>\n            <div class=\"heatmap_toggle\"></div>\n        </html>\n        <viz type=\"splunk_monitoring_console.heatmap\">\n            <search>\n                <query>\n                    `dmc_set_index_introspection` search_group=dmc_group_kv_store search_group=\"$group$\" component=kvstoreserverstats\n                    | eval server = host\n                    | rename data.opcounters.command as c, data.opcounters.update as u, data.opcounters.queries as q, data.opcountes.deletes as d, data.opcounters.getmore as g, data.opcounters.inserts as i | eval commands=if(isNotNull('c'), 'c',0)\n                    | eval totalops=if(isNotNull('c'), 'c',0)+if(isNotNull('u'), 'u', 0)+if(isNotNull('q'), 'q', 0)+if(isNotNull('d'), 'd', 0)+if(isNotNull('g'), 'g', 0)+if(isNotNull('i'), 'i', 0)\n                    | bin _time minspan=30s\n                    | stats latest(totalops) AS ops latest(data.extra_info.page_faults) AS pf by server _time\n                    | eval  percent=if(ops==0, 0, round(abs(pf/ops), 2))\n                    | bin _time minspan=30s\n                    | stats $countPageFaultsFunc$(percent) as percent by server _time\n                    | rangemap field=percent \"0-0.7\"=0-0.7 \"0.7-1.3\"=0.7001-1.3 \"1.3+\"=1.3001-999999 default=abnormal\n                    | timechart minspan=30s partial=f dc(server) as server_count by range\n                    | fields _time, \"1.3+\", \"0.7-1.3\", \"0-0.7\"\n                </query>\n                <earliest>$time.earliest$</earliest>\n                <latest>$time.latest$</latest>\n            </search>\n            <drilldown>\n                <condition match=\"isnotnull('row._span')\">\n                    <set token=\"drilldown_page_fault\">true</set>\n                    <set token=\"drilldown_page_fault_span\">$row._span$</set>\n                    <set token=\"drilldown_page_fault_earliest\">$row.earliest$</set>\n                    <eval token=\"drilldown_page_fault_earliest_label\">$row.earliest_label$</eval>\n                    <set token=\"drilldown_page_fault_latest\">$row.latest$</set>\n                    <eval token=\"drilldown_page_fault_latest_label\">$row.latest_label$</eval>\n                    <set token=\"drilldown_page_fault_metric\">$row.drilldown_indexing_rate_metric$</set>\n                    <set token=\"drilldown_page_fault_count\">$row.numInstances$</set>\n                </condition>\n                <condition />\n            </drilldown>\n        </viz>\n      <chart>\n          <searchString>\n              `dmc_set_index_introspection` search_group=dmc_group_kv_store search_group=\"$group$\" component=kvstoreserverstats\n              | eval server = host\n              | rename data.opcounters.command as c, data.opcounters.update as u, data.opcounters.queries as q, data.opcountes.deletes as d, data.opcounters.getmore as g, data.opcounters.inserts as i | eval commands=if(isNotNull('c'), 'c',0)\n              | eval totalops=if(isNotNull('c'), 'c',0)+if(isNotNull('u'), 'u', 0)+if(isNotNull('q'), 'q', 0)+if(isNotNull('d'), 'd', 0)+if(isNotNull('g'), 'g', 0)+if(isNotNull('i'), 'i', 0)\n              | bin _time minspan=30s\n              | stats latest(totalops) AS ops latest(data.extra_info.page_faults) AS pf by server _time\n              | eval  percent=if(ops==0, 0, round(abs(pf/ops), 2))\n              | bin _time minspan=30s\n              | stats $countPageFaultsFunc$(percent) as percent by server _time\n              | rangemap field=percent \"0-0.7\"=0-0.7 \"0.7-1.3\"=0.7001-1.3 \"1.3+\"=1.3001-999999 default=abnormal\n              | timechart minspan=30s partial=f dc(server) as server_count by range\n              | fields _time, \"1.3+\", \"0.7-1.3\", \"0-0.7\"\n          </searchString>\n          <earliestTime>$time.earliest$</earliestTime>\n          <latestTime>$time.latest$</latestTime>\n          <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n          <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n          <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n          <option name=\"charting.axisTitleX.text\">Time</option>\n          <option name=\"charting.axisTitleX.visibility\">visible</option>\n          <option name=\"charting.axisTitleY.text\">Instance count</option>\n          <option name=\"charting.axisTitleY.visibility\">visible</option>\n          <option name=\"charting.axisTitleY2.visibility\">visible</option>\n          <option name=\"charting.axisX.scale\">linear</option>\n          <option name=\"charting.axisY.minimumNumber\">0</option>\n          <option name=\"charting.axisY.scale\">linear</option>\n          <option name=\"charting.axisY2.enabled\">0</option>\n          <option name=\"charting.axisY2.scale\">inherit</option>\n          <option name=\"charting.chart\">column</option>\n          <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n          <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n          <option name=\"charting.chart.bubbleSizeBy\">area</option>\n          <option name=\"charting.chart.nullValueMode\">gaps</option>\n          <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n          <option name=\"charting.chart.stackMode\">stacked</option>\n          <option name=\"charting.chart.style\">shiny</option>\n          <option name=\"charting.drilldown\">all</option>\n          <option name=\"charting.layout.splitSeries\">0</option>\n          <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n          <option name=\"charting.legend.placement\">right</option>\n          <option name=\"charting.fieldColors\">{\"1.3+\": 0xF7902B, \"0.7-1.3\": 0xFAC51C, \"0-0.7\":0x9AC23C, \"abnormal\":0xC4C4C0}</option>\n          <drilldown>\n          <condition match=\"isnotnull('row._span')\">\n            <set token=\"drilldown_page_fault\">true</set>\n            <set token=\"drilldown_page_fault_span\">$row._span$</set>\n            <set token=\"drilldown_page_fault_earliest\">$earliest$</set>\n            <eval token=\"drilldown_page_fault_earliest_label\">strftime(earliest, \"%m/%d/%Y %H:%M:%S\")</eval>\n            <set token=\"drilldown_page_fault_latest\">$latest$</set>\n            <eval token=\"drilldown_page_fault_latest_label\">strftime(latest, \"%m/%d/%Y %H:%M:%S\")</eval>\n            <set token=\"drilldown_page_fault_metric\">$click.name2$</set>\n            <set token=\"drilldown_page_fault_count\">$click.value2$</set>\n          </condition>\n          <condition />\n        </drilldown>\n      </chart>\n      <table depends=\"$drilldown_page_fault$\" rejects=\"$split_by_host$\" id=\"drilldown_page_fault\">\n        <title>Time range: $drilldown_page_fault_earliest_label$ ~ $drilldown_page_fault_latest_label$. Metric: $countPageFaultsFunc$ page fault range: $drilldown_page_fault_metric$. ($drilldown_page_fault_count$ instances)</title>\n        <search>\n          <query>`dmc_drilldown_kv_store_deployment_page_faults(\"$group$\", $countPageFaultsFunc$, $drilldown_page_fault_metric$)`</query>\n          <earliest>$drilldown_page_fault_earliest$</earliest>\n          <latest>$drilldown_page_fault_latest$</latest>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <html depends=\"$drilldown_page_fault$\" rejects=\"$split_by_host$\">\n        <a data-unset-token=\"drilldown_page_fault\">Close this drilldown table</a>\n      </html>\n      <html>\n          <p>Count of Splunk Enterprise instances grouped by $countPageFaultsFuncLabel$ page faults per operation over time.</p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Deployment-wide KV Store Network Traffic</title>\n      <chart>\n        <searchString>\n`dmc_set_index_introspection` search_group=dmc_group_kv_store search_group=\"$group$\" component=kvstoreserverstats\n| eval source=host\n| bin _time minspan=30s  \n| stats range(data.network.bytesIn) as indiff range(data.network.bytesOut) as outdiff by source _time\n| eval t=abs((indiff+outdiff)/1024/1024)\n| bin _time minspan=30s \n| stats sum(t) AS Traffic by _time  \n| timechart minspan=30s avg(Traffic) AS Traffic\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.text\">Total traffic (MB)</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.minimumNumber\">0</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">0</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n        <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n        <option name=\"charting.chart.bubbleSizeBy\">area</option>\n        <option name=\"charting.chart.nullValueMode\">gaps</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <drilldown>\n          <condition match=\"isnotnull('row._span')\">\n            <set token=\"drilldown_network_traffic\">true</set>\n            <set token=\"drilldown_network_traffic_span\">$row._span$</set>\n            <set token=\"drilldown_network_traffic_earliest\">$earliest$</set>\n            <eval token=\"drilldown_network_traffic_earliest_label\">strftime(earliest, \"%m/%d/%Y %H:%M:%S\")</eval>\n            <set token=\"drilldown_network_traffic_latest\">$latest$</set>\n            <eval token=\"drilldown_network_traffic_latest_label\">strftime(latest, \"%m/%d/%Y %H:%M:%S\")</eval>\n            <set token=\"drilldown_network_traffic_metric\">$click.name2$</set>\n            <set token=\"drilldown_network_traffic_count\">$click.value2$</set>\n          </condition>\n          <condition />\n        </drilldown>\n      </chart>\n      <table depends=\"$drilldown_network_traffic$\" rejects=\"$split_by_host$\" id=\"drilldown_network_traffic\">\n        <title>Time range: $drilldown_network_traffic_earliest_label$ ~ $drilldown_network_traffic_latest_label$. Metric: Network traffic: $drilldown_network_traffic_metric$. ($drilldown_network_traffic_count$ instances)</title>\n        <search>\n          <query>`dmc_drilldown_kv_store_deployment_network(\"$group$\")`</query>\n          <earliest>$drilldown_network_traffic_earliest$</earliest>\n          <latest>$drilldown_network_traffic_latest$</latest>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <html depends=\"$drilldown_network_traffic$\" rejects=\"$split_by_host$\">\n        <a data-unset-token=\"drilldown_network_traffic\">Close this drilldown table</a>\n      </html>\n      <html>\n        <p>Total inbound and outbound network traffic attributed to the use of KV stores across all instances in the deployment.</p>\n      </html>\n    </panel>\n   </row>\n   <row>\n    <panel rejects=\"$snapshot$\" id=\"instances_by_virtual_to_mapped_memory_ratio\">\n      <title>Instances by Virtual to Mapped Memory Ratio</title>\n        <html>\n            <div class=\"heatmap_toggle\"></div>\n        </html>\n        <viz type=\"splunk_monitoring_console.heatmap\">\n            <search>\n                <query>\n                    `dmc_set_index_introspection` search_group=dmc_group_kv_store search_group=\"$group$\" component=kvstoreserverstats\n                    | eval source=host\n                    | eval ratio='data.mem.virtual'/'data.mem.mappedWithJournal'\n                    | bin _time minspan=30s\n                    | stats avg(ratio) AS myratio by source _time\n                    | eval myratio = round(myratio, 2)\n                    | rangemap field=myratio \"0-2x\"=0-2 \"2-3x\"=2.001-3 \">3x\"=3.001-10000 default=abnormal\n                    | timechart minspan=30s partial=f dc(source) as server_count by range\n                    | fields _time \">3x\", \"2-3x\", \"0-2x\"\n                </query>\n                <earliest>$time.earliest$</earliest>\n                <latest>$time.latest$</latest>\n            </search>\n            <drilldown>\n                <condition match=\"isnotnull('row._span')\">\n                    <set token=\"drilldown_mapped_memory_ratio\">true</set>\n                    <set token=\"drilldown_mapped_memory_ratio_span\">$row._span$</set>\n                    <set token=\"drilldown_mapped_memory_ratio_earliest\">$row.earliest$</set>\n                    <eval token=\"drilldown_mapped_memory_ratio_earliest_label\">$row.earliest_label$</eval>\n                    <set token=\"drilldown_mapped_memory_ratio_latest\">$row.latest$</set>\n                    <eval token=\"drilldown_mapped_memory_ratio_latest_label\">$row.latest_label$</eval>\n                    <set token=\"drilldown_mapped_memory_ratio_metric\">$row.drilldown_indexing_rate_metric$</set>\n                    <set token=\"drilldown_mapped_memory_ratio_count\">$row.numInstances$</set>\n                </condition>\n                <condition />\n            </drilldown>\n        </viz>\n      <chart>\n        <searchString>\n`dmc_set_index_introspection` search_group=dmc_group_kv_store search_group=\"$group$\" component=kvstoreserverstats\n| eval source=host \n| eval ratio='data.mem.virtual'/'data.mem.mappedWithJournal' \n| bin _time minspan=30s \n| stats avg(ratio) AS myratio by source _time\n| eval myratio = round(myratio, 2)\n| rangemap field=myratio \"0-2x\"=0-2 \"2-3x\"=2.001-3 \">3x\"=3.001-10000 default=abnormal\n| timechart minspan=30s partial=f dc(source) as server_count by range\n| fields _time \">3x\", \"2-3x\", \"0-2x\"\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.text\">Instance count</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.minimumNumber\">0</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">0</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n        <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n        <option name=\"charting.chart.bubbleSizeBy\">area</option>\n        <option name=\"charting.chart.nullValueMode\">gaps</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.fieldColors\">{\">3x\": 0xD85D3C, \"2-3x\": 0xF7902B, \"0-2x\":0x9AC23C, \"abnormal\":0xC4C4C0}</option>\n        <drilldown>\n          <condition match=\"isnotnull('row._span')\">\n            <set token=\"drilldown_mapped_memory_ratio\">true</set>\n            <set token=\"drilldown_mapped_memory_ratio_span\">$row._span$</set>\n            <set token=\"drilldown_mapped_memory_ratio_earliest\">$earliest$</set>\n            <eval token=\"drilldown_mapped_memory_ratio_earliest_label\">strftime(earliest, \"%m/%d/%Y %H:%M:%S\")</eval>\n            <set token=\"drilldown_mapped_memory_ratio_latest\">$latest$</set>\n            <eval token=\"drilldown_mapped_memory_ratio_latest_label\">strftime(latest, \"%m/%d/%Y %H:%M:%S\")</eval>\n            <set token=\"drilldown_mapped_memory_ratio_metric\">$click.name2$</set>\n            <set token=\"drilldown_mapped_memory_ratio_count\">$click.value2$</set>\n          </condition>\n          <condition />\n        </drilldown>\n      </chart>\n      <table depends=\"$drilldown_mapped_memory_ratio$\" rejects=\"$split_by_host$\" id=\"drilldown_mapped_memory_ratio\">\n        <title>Time range: $drilldown_mapped_memory_ratio_earliest_label$ ~ $drilldown_mapped_memory_ratio_latest_label$. Metric: Virtual to mapped memory ratio: $drilldown_mapped_memory_ratio_metric$. ($drilldown_mapped_memory_ratio_count$ instances)</title>\n        <search>\n          <query>`dmc_drilldown_kv_store_deployment_memory_ratio(\"$group$\", $drilldown_mapped_memory_ratio_metric$)`</query>\n          <earliest>$drilldown_mapped_memory_ratio_earliest$</earliest>\n          <latest>$drilldown_mapped_memory_ratio_latest$</latest>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <html depends=\"$drilldown_mapped_memory_ratio$\" rejects=\"$split_by_host$\">\n        <a data-unset-token=\"drilldown_mapped_memory_ratio\">Close this drilldown table</a>\n      </html>\n      <html>\n        <p>Count of Splunk Enterprise instances grouped by ratio of virtual memory to mapped memory.</p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\" id=\"instances_by_average_replication_latency\">\n      <title>Instances by Average Replication Latency</title>\n        <html>\n            <div class=\"heatmap_toggle\"></div>\n        </html>\n        <viz type=\"splunk_monitoring_console.heatmap\">\n            <search>\n                <query>\n                    `dmc_set_index_introspection` search_group=dmc_group_kv_store search_group=\"$group$\" component=kvstorereplicasetstats data.replSetStats.myState=1\n                    | spath data.replSetStats.members{}.name output=name\n                    | spath data.replSetStats.members{}.optimeDate output=optimeDate\n                    | spath data.replSetStats.members{}.stateStr output=stateStr\n                    | eval prop_key_val=mvzip(mvzip(name, optimeDate, \"---\"), stateStr, \"---\")\n                    | fields _time, prop_key_val\n                    | mvexpand prop_key_val\n                    | eval name=mvindex(split(prop_key_val, \"---\"), 0)\n                    | eval optimeDate=mvindex(split(prop_key_val, \"---\"), 1)\n                    | eval stateStr=mvindex(split(prop_key_val, \"---\"), 2)\n                    | where stateStr=\"SECONDARY\"\n                    | join _time\n                    [ search `dmc_set_index_introspection` search_group=dmc_group_kv_store search_group=\"$group$\" component=kvstorereplicasetstats data.replSetStats.myState=1\n                       | spath data.replSetStats.members{}.name output=name\n                       | spath data.replSetStats.members{}.optimeDate output=optimeDate\n                       | spath data.replSetStats.members{}.stateStr output=stateStr\n                       | eval prop_key_val=mvzip(mvzip(name, optimeDate, \"---\"), stateStr, \"---\")\n                       | fields _time, prop_key_val\n                       | mvexpand prop_key_val\n                       | eval name=mvindex(split(prop_key_val, \"---\"), 0)\n                       | eval optimeDate=mvindex(split(prop_key_val, \"---\"), 1)\n                       | eval stateStr=mvindex(split(prop_key_val, \"---\"), 2)\n                       | where stateStr=\"PRIMARY\"\n                       | stats max(optimeDate) as primary by _time]\n                    | eval difference=(primary-optimeDate)/1000\n                    | bin _time minspan=1m\n                    | stats avg(difference) AS lag by _time name\n                    | eval lag = round(lag, 2)\n                    | `dmc_replication_lag_rangemap`\n                    | timechart minspan=1m partial=f dc(name) as server_count by range\n                    | fields _time \">30s\", \"10-30s\", \"0-10s\"\n                </query>\n                <earliest>$time.earliest$</earliest>\n                <latest>$time.latest$</latest>\n            </search>\n            <drilldown>\n                <condition match=\"isnotnull('row._span')\">\n                    <set token=\"drilldown_rep_latency\">true</set>\n                    <set token=\"drilldown_rep_latency_span\">$row._span$</set>\n                    <set token=\"drilldown_rep_latency_earliest\">$row.earliest$</set>\n                    <eval token=\"drilldown_rep_latency_earliest_label\">$row.earliest_label$</eval>\n                    <set token=\"drilldown_rep_latency_latest\">$row.latest$</set>\n                    <eval token=\"drilldown_rep_latency_latest_label\">$row.latest_label$</eval>\n                    <set token=\"drilldown_rep_latency_metric\">$row.drilldown_indexing_rate_metric$</set>\n                    <set token=\"drilldown_rep_latency_count\">$row.numInstances$</set>\n                </condition>\n                <condition/>\n            </drilldown>\n        </viz>\n      <chart>\n        <searchString>\n            `dmc_set_index_introspection` search_group=dmc_group_kv_store search_group=\"$group$\" component=kvstorereplicasetstats data.replSetStats.myState=1\n            | spath data.replSetStats.members{}.name output=name\n            | spath data.replSetStats.members{}.optimeDate output=optimeDate\n            | spath data.replSetStats.members{}.stateStr output=stateStr\n            | eval prop_key_val=mvzip(mvzip(name, optimeDate, \"---\"), stateStr, \"---\")\n            | fields _time, prop_key_val\n            | mvexpand prop_key_val\n            | eval name=mvindex(split(prop_key_val, \"---\"), 0)\n            | eval optimeDate=mvindex(split(prop_key_val, \"---\"), 1)\n            | eval stateStr=mvindex(split(prop_key_val, \"---\"), 2)\n            | where stateStr=\"SECONDARY\"\n            | join _time\n            [ search `dmc_set_index_introspection` search_group=dmc_group_kv_store search_group=\"$group$\" component=kvstorereplicasetstats data.replSetStats.myState=1\n                | spath data.replSetStats.members{}.name output=name\n                | spath data.replSetStats.members{}.optimeDate output=optimeDate\n                | spath data.replSetStats.members{}.stateStr output=stateStr\n                | eval prop_key_val=mvzip(mvzip(name, optimeDate, \"---\"), stateStr, \"---\")\n                | fields _time, prop_key_val\n                | mvexpand prop_key_val\n                | eval name=mvindex(split(prop_key_val, \"---\"), 0)\n                | eval optimeDate=mvindex(split(prop_key_val, \"---\"), 1)\n                | eval stateStr=mvindex(split(prop_key_val, \"---\"), 2)\n                | where stateStr=\"PRIMARY\"\n                | stats max(optimeDate) as primary by _time]\n            | eval difference=(primary-optimeDate)/1000\n            | bin _time minspan=1m\n            | stats avg(difference) AS lag by _time name\n            | eval lag = round(lag, 2)\n            | `dmc_replication_lag_rangemap`\n            | timechart minspan=1m partial=f dc(name) as server_count by range\n            | fields _time \">30s\", \"10-30s\", \"0-10s\"\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.text\">Instance count</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.minimumNumber\">0</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">0</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n        <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n        <option name=\"charting.chart.bubbleSizeBy\">area</option>\n        <option name=\"charting.chart.nullValueMode\">gaps</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.fieldColors\">{\">30s\": 0xD85D3C, \"10-30s\": 0xF7902B, \"0-10s\":0x9AC23C, \"abnormal\":0xC4C4C0}</option>\n        <drilldown>\n          <condition match=\"isnotnull('row._span')\">\n            <set token=\"drilldown_rep_latency\">true</set>\n            <set token=\"drilldown_rep_latency_span\">$row._span$</set>\n            <set token=\"drilldown_rep_latency_earliest\">$earliest$</set>\n            <eval token=\"drilldown_rep_latency_earliest_label\">strftime(earliest, \"%m/%d/%Y %H:%M:%S\")</eval>\n            <set token=\"drilldown_rep_latency_latest\">$latest$</set>\n            <eval token=\"drilldown_rep_latency_latest_label\">strftime(latest, \"%m/%d/%Y %H:%M:%S\")</eval>\n            <set token=\"drilldown_rep_latency_metric\">$click.name2$</set>\n            <set token=\"drilldown_rep_latency_count\">$click.value2$</set>\n          </condition>\n          <condition />\n        </drilldown>\n      </chart>\n      <table depends=\"$drilldown_rep_latency$\" rejects=\"$split_by_host$\" id=\"drilldown_rep_latency\">\n        <title>Time range: $drilldown_rep_latency_earliest_label$ ~ $drilldown_rep_latency_latest_label$. Metric: Replication lag range: $drilldown_rep_latency_metric$ seconds. ($drilldown_rep_latency_count$ instances)</title>\n        <search>\n          <query>`dmc_drilldown_kv_store_deployment_replication_lag(\"$group$\", $drilldown_rep_latency_metric$)`</query>\n          <earliest>$drilldown_rep_latency_earliest$</earliest>\n          <latest>$drilldown_rep_latency_latest$</latest>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <html depends=\"$drilldown_rep_latency$\" rejects=\"$split_by_host$\">\n        <a data-unset-token=\"drilldown_rep_latency\">Close this drilldown table</a>\n      </html>\n      <html>\n        <p>Count of Splunk Enterprise instances grouped by average latency of data replication between KV stores.</p>\n      </html>\n    </panel>\n   </row>\n   <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Operations Log Window of KV Store Captain</title>\n      <chart>\n        <searchString>\n`dmc_set_index_introspection` search_group=dmc_group_kv_store search_group=\"$group$\" component=kvstorereplicasetstats data.replSetStats.myState=1\n| eval source=host \n| bin _time minspan=1m  \n| rename data.oplogInfo.start as start, data.oplogInfo.end as end\n| eval diff=(end-start)/3600000\n| timechart minspan=1m avg(diff) AS hours\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.text\">Window (hours)</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.minimumNumber\">0</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">0</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n        <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n        <option name=\"charting.chart.bubbleSizeBy\">area</option>\n        <option name=\"charting.chart.nullValueMode\">gaps</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <drilldown>\n          <condition match=\"isnotnull('row._span')\">\n            <set token=\"drilldown_primary_oplog_window\">true</set>\n            <set token=\"drilldown_primary_oplog_window_span\">$row._span$</set>\n            <set token=\"drilldown_primary_oplog_window_earliest\">$earliest$</set>\n            <eval token=\"drilldown_primary_oplog_window_earliest_label\">strftime(earliest, \"%m/%d/%Y %H:%M:%S\")</eval>\n            <set token=\"drilldown_primary_oplog_window_latest\">$latest$</set>\n            <eval token=\"drilldown_primary_oplog_window_latest_label\">strftime(latest, \"%m/%d/%Y %H:%M:%S\")</eval>\n            <set token=\"drilldown_primary_oplog_window_metric\">$click.name2$</set>\n            <set token=\"drilldown_primary_oplog_window_count\">$click.value2$</set>\n          </condition>\n          <condition />\n        </drilldown>\n      </chart>\n      <table depends=\"$drilldown_primary_oplog_window$\" rejects=\"$split_by_host$\" id=\"drilldown_primary_oplog_window\">\n        <title>Time range: $drilldown_primary_oplog_window_earliest_label$ ~ $drilldown_primary_oplog_window_latest_label$. Metric: Primary Oplog Window. ($drilldown_primary_oplog_window_count$ instances)</title>\n        <search>\n          <query>`dmc_drilldown_kv_store_primary_oplog_window(\"$group$\")`</query>\n          <earliest>$drilldown_primary_oplog_window_earliest$</earliest>\n          <latest>$drilldown_primary_oplog_window_latest$</latest>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <html depends=\"$drilldown_primary_oplog_window$\" rejects=\"$split_by_host$\">\n        <a data-unset-token=\"drilldown_primary_oplog_window\">Close this drilldown table</a>\n      </html>     \n      <html>\n        <p>Operations log window size is the length of time between the first and last operations in the oplog.</p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\" id=\"instances_by_background_flush\">\n      <title>Instances by Percent of Each Minute Spent Flushing to Disk</title>\n        <html>\n            <div class=\"heatmap_toggle\"></div>\n        </html>\n        <viz type=\"splunk_monitoring_console.heatmap\">\n            <search>\n                <query>\n                    `dmc_set_index_introspection` search_group=dmc_group_kv_store search_group=\"$group$\" component=kvstoreserverstats\n                    | bin _time minspan=30s\n                    | stats range(data.backgroundFlushing.total_ms)  AS diff by _time host\n                    | timechart minspan=30s per_minute(diff) as ms_per_min by host\n                    | untable _time host ms_per_min\n                    | eval percent = round(ms_per_min / (60 * 1000) * 100, 2)\n                    | `dmc_background_flush_rangemap`\n                    | timechart minspan=30s partial=f dc(host) as server_count by range\n                    | fields _time, \"50-100%\", \"10-50%\", \"0-10%\"\n                </query>\n                <earliest>$time.earliest$</earliest>\n                <latest>$time.latest$</latest>\n            </search>\n            <drilldown>\n                <condition match=\"isnotnull('row._span')\">\n                    <set token=\"drilldown_background_flush\">true</set>\n                    <set token=\"drilldown_background_flush_span\">$row._span$</set>\n                    <set token=\"drilldown_background_flush_earliest\">$row.earliest$</set>\n                    <eval token=\"drilldown_background_flush_earliest_label\">$row.earliest_label$</eval>\n                    <set token=\"drilldown_background_flush_latest\">$row.latest$</set>\n                    <eval token=\"drilldown_background_flush_latest_label\">$row.latest_label$</eval>\n                    <set token=\"drilldown_background_flush_metric\">$row.drilldown_indexing_rate_metric$</set>\n                    <set token=\"drilldown_background_flush_count\">$row.numInstances$</set>\n                </condition>\n                <condition />\n            </drilldown>\n        </viz>\n      <chart>\n        <searchString>\n`dmc_set_index_introspection` search_group=dmc_group_kv_store search_group=\"$group$\" component=kvstoreserverstats\n| bin _time minspan=30s\n| stats range(data.backgroundFlushing.total_ms)  AS diff by _time host\n| timechart minspan=30s per_minute(diff) as ms_per_min by host\n| untable _time host ms_per_min\n| eval percent = round(ms_per_min / (60 * 1000) * 100, 2)\n| `dmc_background_flush_rangemap`\n| timechart minspan=30s partial=f dc(host) as server_count by range\n| fields _time, \"50-100%\", \"10-50%\", \"0-10%\"\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.text\">Count</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.minimumNumber\">0</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">0</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n        <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n        <option name=\"charting.chart.bubbleSizeBy\">area</option>\n        <option name=\"charting.chart.nullValueMode\">gaps</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.fieldColors\">{\"50-100%\": 0xD85D3C, \"10-50%\": 0xF7902B, \"0-10%\":0x9AC23C, \"abnormal\":0xC4C4C0}</option>\n        <drilldown>\n          <condition match=\"isnotnull('row._span')\">\n            <set token=\"drilldown_background_flush\">true</set>\n            <set token=\"drilldown_background_flush_span\">$row._span$</set>\n            <set token=\"drilldown_background_flush_earliest\">$earliest$</set>\n            <eval token=\"drilldown_background_flush_earliest_label\">strftime(earliest, \"%m/%d/%Y %H:%M:%S\")</eval>\n            <set token=\"drilldown_background_flush_latest\">$latest$</set>\n            <eval token=\"drilldown_background_flush_latest_label\">strftime(latest, \"%m/%d/%Y %H:%M:%S\")</eval>\n            <set token=\"drilldown_background_flush_metric\">$click.name2$</set>\n            <set token=\"drilldown_background_flush_count\">$click.value2$</set>\n          </condition>\n          <condition />\n        </drilldown>\n      </chart>\n      <table depends=\"$drilldown_background_flush$\" rejects=\"$split_by_host$\" id=\"drilldown_background_flush\">\n        <title>Time range: $drilldown_background_flush_earliest_label$ ~ $drilldown_background_flush_latest_label$. Metric: Flushing rate range: $drilldown_background_flush_metric$. ($drilldown_background_flush_count$ instances)</title>\n        <search>\n          <query>`dmc_drilldown_kv_store_deployment_background_flush(\"$group$\", $drilldown_background_flush_metric$)`</query>\n          <earliest>$drilldown_background_flush_earliest$</earliest>\n          <latest>$drilldown_background_flush_latest$</latest>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <html depends=\"$drilldown_background_flush$\" rejects=\"$split_by_host$\">\n        <a data-unset-token=\"drilldown_background_flush\">Close this drilldown table</a>\n      </html>\n      <html>\n        <p>Percent is the percentage of 60 seconds KV Store takes to flush writes to disk.</p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Slowest Operations</title>\n      <table>\n        <searchString>\n`dmc_set_index_internal` search_group=dmc_group_kv_store search_group=\"$group$\" source=\"*mongod.log\" conn* *ms\n| rex field=_raw \"[^\\[]* (?&lt;Operation&gt;.*)\\s(?&lt;ms&gt;\\d+)ms\"\n| sort ms desc\n| head 10 \n| rename ms AS \"Duration (ms)\" \n<!--| eval Timestamp=strftime(_time, \"%Y-%m-%d %H:%M:%S\")-->\n| eval Instance=host\n| table \"Duration (ms)\" Instance _time Operation\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n         <drilldown>\n          <condition field=\"Instance\">\n            <link target=\"_blank\">\n              <![CDATA[kv_store_instance?form.splunk_server=$click.value2$]]>\n            </link>\n          </condition>\n          <condition field=\"*\"></condition>\n        </drilldown>\n      </table>\n    </panel>\n  </row>\n</form>",
"eai:type": "views",
"name": "kv_store_deployment",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" script=\"common_control.js, kv_store_instance_extension.js\">\n  <label>KV Store: Instance</label>\n  <description/>\n    <row id=\"kv_store_instance_extension\">\n      <html>\n      </html>\n    </row>\n    <fieldset autoRun=\"true\" submitButton=\"false\">\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"dmc_group\">\n        <label>Group</label>\n        <showClearButton>false</showClearButton>\n        <search>\n          <query>\n            | `dmc_get_groups_containing_role(dmc_group_kv_store)`\n            | search search_group!=\"dmc_group_*\"\n          </query>\n        </search>\n        <fieldForLabel>label</fieldForLabel>\n        <fieldForValue>search_group</fieldForValue>\n        <choice value=\"dmc_group_kv_store\">All KV Stores</choice>\n        <default>dmc_group_kv_store</default>\n      </input>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"splunk_server\">\n        <label>Instance</label>\n        <showClearButton>false</showClearButton>\n        <populatingSearch fieldForLabel=\"serverName\" fieldForValue=\"serverName\">\n          | `dmc_get_instance_info($dmc_group$)`\n          | where search_group=\"dmc_group_kv_store\"\n        </populatingSearch>\n        <selectFirstChoice>true</selectFirstChoice>\n        <change>\n          <condition value=\"*\">\n            <set token=\"host\">$row.host$</set>\n          </condition>\n        </change>\n      </input>\n  </fieldset>\n  <row>\n    <panel>\n      <title>Collection Metrics</title>\n      <table>\n        <searchString>\n| rest splunk_server=$splunk_server$ /services/server/introspection/kvstore/collectionstats\n| mvexpand data\n| spath input=data\n| rex field=ns \"(?&lt;App&gt;.*)\\.(?&lt;Collection&gt;.*)\"\n| eval dbsize=round(size/1024/1024, 2)\n| eval indexsize=round(totalIndexSize/1024/1024, 2)\n| stats first(count) AS \"Number of Objects\" first(nindexes) AS Accelerations first(indexsize) AS \"Acceleration Size (MB)\" first(dbsize) AS \"Collection Size (MB)\" by App, Collection\n        </searchString>\n        <earliestTime>-60m</earliestTime>\n        <latestTime>now</latestTime>\n        <option name=\"refresh.auto.interval\">60</option>\n        <option name=\"refresh.time.visible\">false</option>\n      </table>\n    </panel>\n  </row>\n  <row>\n    <panel>\n      <html>\n        <h2>\n          <span>Select views: </span>\n          <span id=\"link-switcher-view\">\n            <a href=\"#\" class=\"btn-pill active\" data-item=\"all\">All</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"snapshot\">Snapshot</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"historical\">Historical</a>\n          </span>\n        </h2>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Snapshots</title>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Memory Usage</title>\n      <chart>\n        <searchString>\n| rest splunk_server=$splunk_server$ /services/server/introspection/kvstore/serverstatus\n| spath input=data\n| stats max(mem.virtual) AS Virtual max(mem.mappedWithJournal) AS Mapped max(mem.resident) AS Resident by host\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"refresh.auto.interval\">60</option>\n        <option name=\"refresh.time.visible\">false</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleX.visibility\">collapsed</option>\n        <option name=\"charting.axisTitleY.text\">Memory Usage (MB)</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.minimumNumber\">0</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">0</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n        <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n        <option name=\"charting.chart.bubbleSizeBy\">area</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"refresh.auto.interval\">60</option>\n        <option name=\"refresh.time.visible\">false</option>\n      </chart>\n    </panel>\n    <panel rejects=\"$historical$\">\n      <title>Network Traffic</title>\n      <chart>\n        <searchString>\n| rest splunk_server=$splunk_server$ /services/server/introspection/kvstore/serverstatus\n| spath input=data\n| eval mbin='network.bytesIn'/1024/1024\n| eval mbout='network.bytesOut'/1024/1024\n| rename mbin AS \"MB In\", mbout AS \"MB Out\"\n| table  host \"MB In\" \"MB Out\"\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"refresh.auto.interval\">60</option>\n        <option name=\"refresh.time.visible\">false</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleX.visibility\">collapsed</option>\n        <option name=\"charting.axisTitleY.text\">MB</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.minimumNumber\">0</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">1</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n        <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n        <option name=\"charting.chart.bubbleSizeBy\">area</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"refresh.auto.interval\">60</option>\n        <option name=\"refresh.time.visible\">false</option>\n      </chart>\n      <html>\n        <p>Network traffic since restart.</p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Flush Time</title>\n      <!--<single>-->\n        <!--<searchString>-->\n<!--| rest splunk_server=$splunk_server$ /services/server/introspection/kvstore/serverstatus-->\n<!--| spath input=data-->\n<!--| eval average=round('backgroundFlushing.average_ms'/1000, 3)-->\n<!--| fields average-->\n        <!--</searchString>-->\n        <!--<option name=\"underLabel\">Average</option>-->\n        <!--<option name=\"refresh.auto.interval\">60</option>-->\n        <!--<option name=\"refresh.time.visible\">false</option>-->\n        <!--<option name=\"height\">80px</option>-->\n      <!--</single>-->\n      <chart>\n        <searchString>\n| rest splunk_server=$splunk_server$ /services/server/introspection/kvstore/serverstatus\n| spath input=data\n| eval average=round('backgroundFlushing.average_ms'/1000, 3)\n| eval last=round('backgroundFlushing.last_ms'/1000, 3)\n| stats first(average) as average first(last) as last by splunk_server\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.visibility\">collapsed</option>\n        <option name=\"charting.axisTitleX.visibility\">collapsed</option>\n        <option name=\"charting.axisTitleY.text\">Seconds</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.minimumNumber\">0</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">0</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n        <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n        <option name=\"charting.chart.bubbleSizeBy\">area</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">default</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"refresh.auto.interval\">60</option>\n        <option name=\"refresh.time.visible\">false</option>\n      </chart>\n    </panel>\n    <panel rejects=\"$historical$\">\n      <title>Page Fault per Operation</title>\n      <chart>\n        <searchString>\n| rest splunk_server=$splunk_server$ /services/server/introspection/kvstore/serverstatus\n| spath input=data\n| rename opcounters.command as c, opcounters.update as u, opcounters.query as q, opcounters.delete as d, opcounters.getmore as g, opcounters.insert as i\n| eval totalops=if(isNotNull('c'), 'c',0)+if(isNotNull('u'), 'u', 0)+if(isNotNull('q'), 'q', 0)+if(isNotNull('d'), 'd', 0)+if(isNotNull('g'), 'g', 0)+if(isNotNull('i'), 'i', 0)\n| rename extra_info.page_faults as pf\n| eval percent=round(pf/totalops, 2)\n| stats first(percent)\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"refresh.auto.interval\">60</option>\n        <option name=\"refresh.time.visible\">false</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.text\">Percentage of Total Operations</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.maximumNumber\">100</option>\n        <option name=\"charting.axisY.minimumNumber\">0</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">0</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">radialGauge</option>\n        <option name=\"charting.gaugeColors\">[0x9AC23C,0xFAC51C,0xF7902B]</option>\n        <option name=\"charting.chart.rangeValues\">[\"0\",\"0.7\",\"1.3\",\"2\"]</option>\n        <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n        <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n        <option name=\"charting.chart.bubbleSizeBy\">area</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked100</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">none</option>\n        <option name=\"refresh.auto.interval\">60</option>\n        <option name=\"refresh.time.visible\">false</option>\n      </chart>\n    </panel>\n    <panel rejects=\"$historical$\">\n      <title>Operations</title>\n      <chart>\n        <searchString>\n| rest splunk_server=$splunk_server$ /services/server/introspection/kvstore/serverstatus\n| spath input=data\n| rename opcounters.command as command, opcounters.update as update, opcounters.query as query, opcounters.delete as delete, opcounters.getmore as getmore, opcounters.insert as insert\n| table host command update query delete getmore insert\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"refresh.auto.interval\">60</option>\n        <option name=\"refresh.time.visible\">false</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleX.visibility\">collapsed</option>\n        <option name=\"charting.axisTitleY.text\">Count</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.minimumNumber\">0</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">1</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n        <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n        <option name=\"charting.chart.bubbleSizeBy\">area</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"refresh.auto.interval\">60</option>\n        <option name=\"refresh.time.visible\">false</option>\n      </chart>\n      <html>\n        <p>KV store operations since last restart.</p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>KV Store Status</title>\n      <single>\n        <title></title>\n        <searchString>\n| rest splunk_server=$splunk_server$ /services/server/introspection/kvstore/serverstatus\n| spath input=data\n| stats values(connections.current)\n        </searchString>\n        <earliestTime/>\n        <latestTime/>\n        <option name=\"underLabel\">Active connections</option>\n        <option name=\"refresh.auto.interval\">60</option>\n        <option name=\"refresh.time.visible\">false</option>\n        <option name=\"height\">80px</option>\n      </single>\n      <single>\n        <title></title>\n        <searchString>\n| rest splunk_server=$splunk_server$ /services/server/introspection/kvstore/serverstatus\n| spath input=data\n| stats values(globalLock.currentQueue.total)\n        </searchString>\n        <earliestTime/>\n        <latestTime/>\n        <option name=\"refresh.auto.interval\">60</option>\n        <option name=\"refresh.time.visible\">false</option>\n        <option name=\"underLabel\">Total Queues</option>\n        <option name=\"height\">80px</option>\n      </single>\n      <single>\n        <title></title>\n        <searchString>\n| rest splunk_server=$splunk_server$ /services/server/introspection/kvstore/serverstatus\n| spath input=data\n| eval asserts='asserts.msg' +'asserts.regular' +'asserts.rollovers' +'asserts.user' +'asserts.warning'\n| stats first(asserts)\n        </searchString>\n        <earliestTime/>\n        <latestTime/>\n        <option name=\"refresh.auto.interval\">60</option>\n        <option name=\"refresh.time.visible\">false</option>\n        <option name=\"underLabel\">Total Asserts</option>\n        <option name=\"height\">80px</option>\n      </single>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Historical Charts</title>\n      <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n        <label>Time Range:</label>\n        <default>\n          <earliestTime>-4h@m</earliestTime>\n          <latestTime>now</latestTime>\n        </default>\n      </input>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Memory Usage</title>\n      <chart>\n        <searchString>\n`dmc_set_index_introspection` host=$host$ component=kvstoreserverstats\n| timechart minspan=30s avg(data.mem.virtual) AS Virtual avg(data.mem.mappedWithJournal) AS Mapped avg(data.mem.resident) AS Resident\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.text\">Memory Usage (MB)</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">0</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n        <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n        <option name=\"charting.chart.bubbleSizeBy\">area</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">default</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n      </chart>\n    </panel>\n\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Operations per Minute</title>\n      <input type=\"dropdown\" token=\"operationToChart\" searchWhenChanged=\"true\">\n        <label>Operations</label>\n        <showClearButton>false</showClearButton>\n        <default>All</default>\n        <choice value=\"command update query delete getmore insert\">All</choice>\n        <choice value=\"command\">command</choice>\n        <choice value=\"update\">update</choice>\n        <choice value=\"query\">query</choice>\n        <choice value=\"delete\">delete</choice>\n        <choice value=\"getmore\">getmore</choice>\n        <choice value=\"insert\">insert</choice>\n      </input>\n      <chart>\n        <searchString>\n          `dmc_set_index_introspection` host=$host$ component=kvstoreserverstats\n          | bin _time minspan=30s\n          | stats first(data.opcounters.command) AS command first(data.opcounters.update) as update first(data.opcounters.query) as query first(data.opcounters.delete) as delete first(data.opcounters.getmore) as getmore first(data.opcounters.insert) as insert by _time\n          | streamstats window=2 range(*) as r_*\n          | timechart minspan=30s per_minute(r_*) AS original_*\n          | rename original_* as *\n          | fields _time $operationToChart$\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.text\">Count</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.minimumNumber\">0</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">0</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n        <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n        <option name=\"charting.chart.bubbleSizeBy\">area</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">default</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n      </chart>\n    </panel>\n    <panel rejects=\"$snapshot$\">\n      <title>Asserts</title>\n      <input type=\"dropdown\" token=\"assertType\" searchWhenChanged=\"true\">\n        <label>Assert Type</label>\n        <showClearButton>false</showClearButton>\n        <default>All</default>\n        <choice value=\"msg regular rollovers user warning\">All</choice>\n        <choice value=\"msg\">msg</choice>\n        <choice value=\"regular\">regular</choice>\n        <choice value=\"rollovers\">rollovers</choice>\n        <choice value=\"user\">user</choice>\n        <choice value=\"warning\">warning</choice>\n      </input>\n      <chart>\n        <searchString>\n          `dmc_set_index_introspection` host=$host$ component=kvstoreserverstats\n          | bin _time minspan=30s\n          | stats first(data.asserts.msg) AS msg first(data.asserts.regular) as regular first(data.asserts.rollovers) as rollovers first(data.asserts.user) as user first(data.asserts.warning) as warning by _time\n          | streamstats window=2 range(*) as r_*\n          | timechart minspan=30s per_minute(r_*) AS original_*\n          | rename original_* as *\n          | fields _time $assertType$\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.text\">Count</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.minimumNumber\">0</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">0</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n        <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n        <option name=\"charting.chart.bubbleSizeBy\">area</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">default</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Page Faults per Operation</title>\n      <chart>\n        <searchString>\n`dmc_set_index_introspection` host=$host$ component=kvstoreserverstats\n| rename data.opcounters.command as c, data.opcounters.update as u, data.opcounters.queries as q, data.opcountes.deletes as d, data.opcounters.getmore as g, data.opcounters.inserts as i\n| eval totalops=if(isNotNull('c'), 'c',0)+if(isNotNull('u'), 'u', 0)+if(isNotNull('q'), 'q', 0)+if(isNotNull('d'), 'd', 0)+if(isNotNull('g'), 'g', 0)+if(isNotNull('i'), 'i', 0)\n| bin minspan=30s _time\n| stats first(totalops) as total first(data.extra_info.page_faults) as faults by _time\n| eval percent=round(faults/total, 2)\n| timechart minspan=30s avg(percent) AS \"Page Faults per Operation\"\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.text\">Ratio</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.minimumNumber\">0</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">0</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n        <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n        <option name=\"charting.chart.bubbleSizeBy\">area</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked100</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n      </chart>\n    </panel>\n    <panel rejects=\"$snapshot$\">\n      <title>Network Traffic</title>\n      <chart>\n        <searchString>\n`dmc_set_index_introspection` host=$host$ component=kvstoreserverstats\n| bin minspan=30s _time\n| stats first(data.network.bytesIn) as bytesIn first(data.network.bytesOut) as bytesOut by _time\n| streamstats window=2 range(*) as *\n| eval in=abs(bytesIn/1024/1024)\n| eval out=abs(bytesOut/1024/1024)\n| timechart minspan=30s per_minute(in) AS \"MB/min In\" per_minute(out) AS \"MB/min Out\"\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.text\">MB</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.minimumNumber\">0</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">0</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n        <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n        <option name=\"charting.chart.bubbleSizeBy\">area</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked100</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Size of Queues</title>\n      <chart>\n        <searchString>\n`dmc_set_index_introspection` host=$host$ component=kvstoreserverstats\n| bin _time minspan=30s\n| timechart median(data.globalLock.currentQueue.total) AS Total median(data.globalLock.currentQueue.readers) AS Readers median(data.globalLock.currentQueue.writers) AS Writers\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.text\">Count</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.minimumNumber\">0</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">0</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n        <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n        <option name=\"charting.chart.bubbleSizeBy\">area</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked100</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n      </chart>\n    </panel>\n    <panel rejects=\"$snapshot$\">\n      <title>Connections over Time</title>\n      <chart>\n        <searchString>\n`dmc_set_index_introspection` host=$host$ component=kvstoreserverstats\n| bin _time minspan=30s\n| timechart median(data.connections.current) as Connections\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.text\">Count</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.minimumNumber\">0</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">0</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n        <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n        <option name=\"charting.chart.bubbleSizeBy\">area</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked100</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">none</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n     <panel rejects=\"$snapshot$\">\n      <title>Percent of Each Minute Spent Flushing to Disk</title>\n      <chart>\n        <searchString>\n`dmc_set_index_introspection` host=$host$ component=kvstoreserverstats\n| bin minspan=30s _time\n| stats first(data.backgroundFlushing.total_ms) as flush by _time\n| streamstats window=2 range(flush) as flush\n| eval seconds=flush/1000\n| timechart minspan=30s per_minute(seconds) AS percent\n| eval Percent = round(percent / 60 * 100, 2)\n| fields - percent\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.text\">Percent</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.minimumNumber\">0</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">0</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n        <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n        <option name=\"charting.chart.bubbleSizeBy\">area</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked100</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">none</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Slowest Operations</title>\n      <table>\n        <searchString>\n          <![CDATA[\n`dmc_set_index_internal` host=$host$ sourcetype=\"mongod\" \"[conn*\"\n| rex field=_raw \"\\[conn\\d+\\]\\s+(?<Operation_type>\\w+)\\s+(?<Operation>.*)\\s+(?<duration>\\d+)ms$\"\n| where isnotnull(Operation) AND (duration > 0)\n| sort 100 - duration\n| rename duration AS \"Duration (ms)\"\n| table _time Operation \"Duration (ms)\"\n          ]]>\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n      </table>\n    </panel>\n  </row>\n</form>",
"eai:type": "views",
"name": "kv_store_instance",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"true\">\n  <label>Historic License Usage</label>\n  <search>\n    <query>\n      |rest splunk_server=local /servicesNS/nobody/splunk_monitoring_console/saved/searches/DMC%20License%20Usage%20Data%20Cube | fields auto_summarize | eval no_acceleration=if(auto_summarize == 1, NULL, \"yes\")\n    </query>\n    <finalized>\n      <eval token=\"no_acceleration\">'result.no_acceleration'</eval>  \n    </finalized>\n  </search>\n\t<fieldset autoRun=\"true\" submitButton=\"false\">\n\t\t<input type=\"dropdown\" searchWhenChanged=\"true\" token=\"splunk_server\">\n\t\t\t<label>License Managers</label>\n\t\t\t<showClearButton>false</showClearButton>\n\t\t\t<fieldForLabel>serverName</fieldForLabel>\n\t\t\t<fieldForValue>serverName</fieldForValue>\n\t\t\t<search>\n\t\t\t\t<query>\n\t\t\t\t\t|  `dmc_get_instance_info(\"dmc_group_license_master\")`\n\t\t\t\t\t| fields host, serverName\n\t\t\t\t</query>\n\t\t\t</search>\n      <selectFirstChoice>true</selectFirstChoice>\n      <change>\n      \t<set token=\"host\">$row.host$</set>\n      </change>\n    </input>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"pool\">\n      <label>Pool</label>\n      <showClearButton>false</showClearButton>\n      <fieldForLabel>name</fieldForLabel>\n      <fieldForValue>value</fieldForValue>\n      <search>\n        <query>\n          | rest splunk_server=$splunk_server$ /services/licenser/pools | rename title AS pool | search [rest splunk_server=$splunk_server$ /services/licenser/groups | search is_active=1 | eval stack_id=stack_ids | fields stack_id] | eval name=pool | eval value=\"\\\"\". pool . \"\\\"\" | table name value\n        </query>\n      </search>\n      <choice value=\"*\">All Pools</choice>\n      <default>All Pools</default>\n      <change>\n        <condition value=\"\">\n          <set token=\"size_search\">dmc_licensing_stack_size_srch</set>\n          <set token=\"sz_clause\">stacksz</set>\n        </condition>\n        <condition value=\"*\">\n          <set token=\"size_search\">dmc_licensing_pool_size_srch</set>\n          <set token=\"sz_clause\">poolsz</set>\n        </condition>\n      </change>\n    </input>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"split_by\">\n      <label>Split By</label>\n      <showClearButton>false</showClearButton>\n      <choice value=\"No Split\">No split</choice>\n      <choice value=\"Pool\">By pool</choice>\n      <choice value=\"Indexer\">By indexer</choice>\n      <choice value=\"Source Type\">By source type</choice>\n      <choice value=\"Host\">By host</choice>\n      <choice value=\"Source\">By source</choice>\n      <choice value=\"Index\">By index</choice>\n      <default>No Split</default>\n      <change>\n        <condition value=\"No Split\">\n          <set token=\"base_search\">dmc_licensing_base_summary</set>\n          <set token=\"max_avg_search\">dmc_licensing_summary_maxavg_no_split</set>\n          <set token=\"daily_usage_search\">dmc_licensing_summery_no_split</set>\n          <set token=\"daily_usage_pct_search\">dmc_licensing_summery_pct_no_split</set>\n          <set token=\"split_by_field_name\"> </set>\n          <unset token=\"split_by_hs_info_msg\"></unset>\n          <unset token=\"split_by_index_info_msg\"></unset>\n          <unset token=\"display_accelerated_msg\"></unset>\n        </condition>\n        <condition value=\"Pool\">\n          <set token=\"base_search\">dmc_licensing_base_summary</set>\n          <set token=\"max_avg_search\">dmc_licensing_summary_maxavg_pool</set>\n          <set token=\"daily_usage_search\">dmc_licensing_summery_pool</set>\n          <set token=\"daily_usage_pct_search\">dmc_licensing_summery_pct_pool</set>\n          <set token=\"split_by_field_name\"> </set>\n          <unset token=\"split_by_hs_info_msg\"></unset>\n          <unset token=\"split_by_index_info_msg\"></unset>\n          <unset token=\"display_accelerated_msg\"></unset>\n        </condition>\n        <condition value=\"Indexer\">\n          <set token=\"base_search\">dmc_licensing_base_summary</set>\n          <set token=\"max_avg_search\">dmc_licensing_summary_maxavg_indxr</set>\n          <set token=\"daily_usage_search\">dmc_licensing_summery_indxr</set>\n          <set token=\"daily_usage_pct_search\">dmc_licensing_summery_pct_indxr</set>\n          <set token=\"split_by_field_name\"> </set>\n          <unset token=\"split_by_hs_info_msg\"></unset>\n          <unset token=\"split_by_index_info_msg\"></unset>\n          <unset token=\"display_accelerated_msg\"></unset>\n        </condition>\n        <condition value=\"Source Type\">\n          <set token=\"base_search\">dmc_licensing_base_usage</set>\n          <set token=\"max_avg_search\">dmc_licensing_usage_maxavg_all</set>\n          <set token=\"daily_usage_search\">dmc_licensing_usage_all</set>\n          <set token=\"daily_usage_pct_search\">dmc_licensing_usage_pct_all</set>\n          <set token=\"split_by_field_name\">st</set>\n          <unset token=\"split_by_hs_info_msg\"></unset>\n          <unset token=\"split_by_index_info_msg\"></unset>\n          <set token=\"display_accelerated_msg\">true</set>\n          <set token=\"earliest\">-30d@d</set>\n          <set token=\"latest\">-0d@d</set>\n        </condition>\n        <condition value=\"Host\">\n          <set token=\"base_search\">dmc_licensing_base_usage</set>\n          <set token=\"max_avg_search\">dmc_licensing_usage_maxavg_all</set>\n          <set token=\"daily_usage_search\">dmc_licensing_usage_all</set>\n          <set token=\"daily_usage_pct_search\">dmc_licensing_usage_pct_all</set>\n          <set token=\"split_by_field_name\">h</set>\n          <set token=\"split_by_hs_info_msg\">true</set>\n          <unset token=\"split_by_index_info_msg\"></unset>\n          <set token=\"display_accelerated_msg\">true</set>\n          <set token=\"earliest\">-30d@d</set>\n          <set token=\"latest\">-0d@d</set>\n        </condition>\n        <condition value=\"Source\">\n          <set token=\"base_search\">dmc_licensing_base_usage</set>\n          <set token=\"max_avg_search\">dmc_licensing_usage_maxavg_all</set>\n          <set token=\"daily_usage_search\">dmc_licensing_usage_all</set>\n          <set token=\"daily_usage_pct_search\">dmc_licensing_usage_pct_all</set>\n          <set token=\"split_by_field_name\">s</set>\n          <set token=\"split_by_hs_info_msg\">true</set>\n          <unset token=\"split_by_index_info_msg\"></unset>\n          <set token=\"display_accelerated_msg\">true</set>\n          <set token=\"earliest\">-30d@d</set>\n          <set token=\"latest\">-0d@d</set>\n        </condition>\n        <condition value=\"Index\">\n          <set token=\"base_search\">dmc_licensing_base_usage</set>\n          <set token=\"max_avg_search\">dmc_licensing_usage_maxavg_all</set>\n          <set token=\"daily_usage_search\">dmc_licensing_usage_all</set>\n          <set token=\"daily_usage_pct_search\">dmc_licensing_usage_pct_all</set>\n          <set token=\"split_by_field_name\">idx</set>\n          <unset token=\"split_by_hs_info_msg\"></unset>\n          <set token=\"split_by_index_info_msg\">true</set>\n          <set token=\"display_accelerated_msg\">true</set>\n          <set token=\"earliest\">-30d@d</set>\n          <set token=\"latest\">-0d@d</set>\n        </condition>\n      </change>\n    </input>\n    <html depends=\"$display_accelerated_msg$, $no_acceleration$\">\n      <span class=\"info-message alert alert-warning\"><i class=\"icon-alert\"></i> The report that powers these panels is not accelerated.  For faster performance, turn on acceleration for this report. <a href=\"/help?location=learnmore.DMC.LURV.acceleration\" target=\"_blank\" title=\"Splunk help\">Learn more <i class=\"icon-external\"></i></a></span>\n      <br/><br/>\n    </html>\n    <html depends=\"$split_by_hs_info_msg$\">\n      <span class=\"info-message alert alert-info\"><i class=\"icon-alert\"></i>You have selected \"host\" or \"source\" from the \"Split By\" menu. You might see usage reported for a \"SQUASHED\" series. This is expected behavior if you have many unique hosts or sources. <a href=\"/help?location=learnmore.license.usage_squashing\" target=\"_blank\" title=\"Splunk help\">Learn More <i class=\"icon-external\"></i></a></span>\n    </html>\n    <html depends=\"$split_by_index_info_msg$\">\n      <span class=\"info-message alert alert-info\"><i class=\"icon-alert\"></i>You have selected \"index\" from the \"Split By\" menu. If your license peers are running a version of Splunk lower than 6.0, they will not report per index usage and you will see their usage labeled as \"UNKNOWN\".</span>\n    </html>\n  </fieldset>\n  <row>\n    <panel>\n      <title>Daily License Usage</title>\n      <input type=\"radio\" token=\"overlay_toggle\" searchWhenChanged=\"true\">\n        <showClearButton>false</showClearButton>\n        <label>Show stack/pool size overlay?</label>\n        <choice value=\"yes\">Yes</choice>\n        <choice value=\"no\">No</choice>\n        <change>\n          <condition value=\"no\">\n            <set token=\"overlay_remove\">| fields - \"stack size\" | fields - \"pool size\"</set>\n          </condition>\n          <condition value=\"yes\">\n            <set token=\"overlay_remove\"> </set>\n          </condition>\n        </change>\n        <selectFirstChoice>true</selectFirstChoice>\n      </input>\n      <chart>\n        <search>\n          <query>`$base_search$($host$,\"$pool$\")` | `$daily_usage_search$($splunk_server$, $size_search$, $host$, \"$pool$\", \"$split_by_field_name$\")` $overlay_remove$</query>\n        </search>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"refresh.time.visible\">true</option>\n        <option name=\"charting.axisTitleY.text\">GB</option>\n        <option name=\"charting.axisTitleX.text\">Date</option>\n        <option name=\"charting.chart.overlayFields\">\"stack size\",\"pool size\"</option>\n        <option name=\"charting.lineDashStyle\">ShortDash</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.fieldColors\">{\"stack size\": 0xff0000, \"pool size\": 0xff0000}</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel>\n      <title>Percentage of Daily License Quota Used</title>\n      <chart>\n        <search>\n          <query>`$base_search$($host$,\"$pool$\")` | `$daily_usage_pct_search$($splunk_server$, $sz_clause$, $host$, \"$split_by_field_name$\")`</query>\n        </search>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"refresh.time.visible\">true</option>\n        <option name=\"charting.axisTitleY.text\">%</option>\n        <option name=\"charting.axisTitleX.text\">Date</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel>\n      <title>Average and Peak Daily Volume</title>\n      <chart>\n        <search>\n          <query>`$base_search$($host$,\"$pool$\")` | `$max_avg_search$($splunk_server$, \"$split_by_field_name$\", \"$split_by$\")`</query>\n        </search>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"refresh.time.visible\">true</option>\n        <option name=\"charting.axisTitleY.text\">GB</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisEnd</option>\n      </chart>\n    </panel>\n  </row>\n</form>",
"eai:type": "views",
"name": "license_usage_historic",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"true\">\n\t<label>License Usage - Today</label>\n\t<fieldset autoRun=\"true\" submitButton=\"false\">\n\t\t<input type=\"dropdown\" searchWhenChanged=\"true\" token=\"splunk_server\">\n\t\t\t<label>License Managers</label>\n\t\t\t<showClearButton>false</showClearButton>\n\t\t\t<fieldForLabel>serverName</fieldForLabel>\n\t\t\t<fieldForValue>serverName</fieldForValue>\n\t\t\t<search>\n\t\t\t\t<query>\n\t\t\t\t\t|  `dmc_get_instance_info(\"dmc_group_license_master\")`\n\t\t\t\t\t| fields host, serverName\n\t\t\t\t</query>\n\t\t\t</search>\n      <selectFirstChoice>true</selectFirstChoice>\n      <change>\n      \t<set token=\"host\">$row.host$</set>\n      </change>\n    </input>\n  </fieldset>\n  <row>\n    <panel>\n      <title>Today's License Usage (GB)</title>\n      <chart>\n        <search>\n          <query>\n            | rest splunk_server=$splunk_server$ /services/licenser/pools | rename title AS Pool | search [rest splunk_server=$splunk_server$ /services/licenser/groups | search is_active=1 | eval stack_id=stack_ids | fields stack_id] | join type=outer stack_id [rest splunk_server=$splunk_server$ /services/licenser/stacks | eval stack_id=title | eval stack_quota=quota | fields stack_id stack_quota] | stats sum(used_bytes) as used max(stack_quota) as total | eval usedGB=round(used/1024/1024/1024,3) | eval totalGB=round(total/1024/1024/1024,3) | eval gauge_base=0 | eval gauge_danger=totalGB*0.8 | eval gauge_top=totalGB+0.001 | gauge usedGB gauge_base gauge_danger totalGB gauge_top\n          </query>\n        </search>\n        <option name=\"charting.chart\">fillerGauge</option>\n        <option name=\"refresh.time.visible\">true</option>\n      </chart>\n    </panel>\n    <panel>\n      <title>Today's License Usage per Pool</title>\n      <chart>\n        <search>\n          <query>\n            | rest splunk_server=$splunk_server$ /services/licenser/pools | rename title AS Pool | search [rest splunk_server=$splunk_server$ /services/licenser/groups | search is_active=1 | eval stack_id=stack_ids | fields stack_id] | eval quota=if(isnull(effective_quota),quota,effective_quota) | eval \"Used\"=round(used_bytes/1024/1024/1024, 3) | eval \"Quota\"=round(quota/1024/1024/1024, 3) | fields Pool \"Used\" \"Quota\"\n          </query>\n        </search>\n        <option name=\"charting.chart\">bar</option>\n        <option name=\"refresh.time.visible\">true</option>\n        <option name=\"charting.axisTitleX.text\">Pool</option>\n        <option name=\"charting.axisTitleY.text\">GB</option>\n      </chart>\n    </panel>\n    <panel>\n      <title>Today's Percentage of Daily License Quota Used per Pool</title>\n      <chart>\n        <search>\n          <query>\n            | rest splunk_server=$splunk_server$ /services/licenser/pools | rename title AS Pool | search [rest splunk_server=$splunk_server$ /services/licenser/groups | search is_active=1 | eval stack_id=stack_ids | fields stack_id] | eval quota=if(isnull(effective_quota),quota,effective_quota) | eval \"% used\"=round(used_bytes/quota*100,2) | fields Pool \"% used\"\n          </query>\n        </search>\n        <option name=\"charting.chart\">bar</option>\n        <option name=\"refresh.time.visible\">true</option>\n        <option name=\"charting.axisTitleX.text\">Pool</option>\n        <option name=\"charting.axisTitleY.text\">%</option>\n        <option name=\"charting.legend.placement\">none</option>\n        <option name=\"charting.axisY.scale\">log</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel>\n      <title>Pool Usage Warnings</title>\n      <table>\n        <search>\n          <query>\n            | rest splunk_server=$splunk_server$ /services/licenser/messages | where (category==\"license_window\" OR category==\"pool_over_quota\") AND create_time >= now() - (30 * 86400) | rename pool_id AS pool | eval warning_day=if(category==\"pool_over_quota\",\"(\".strftime(create_time,\"%B %e, %Y\").\")\",strftime(create_time-43200,\"%B %e, %Y\")) | fields pool warning_day | join outer pool [rest splunk_server=$splunk_server$ /services/licenser/slaves | mvexpand active_pool_ids | eval slave_name=label | eval pool=active_pool_ids | fields pool slave_name | stats values(slave_name) as \"members\" by pool] | join outer pool [rest splunk_server=$splunk_server$ /services/licenser/pools | eval pool=title | eval quota=if(isnull(effective_quota),quota,effective_quota) | eval quotaGB=round(quota/1024/1024/1024,3) | fields pool stack_id, quotaGB] | stats first(pool) as \"Pool\" first(stack_id) as \"Stack ID\" first(members) as \"Current Members\" first(quotaGB) as \"Curent Quota (GB)\" values(warning_day) AS \"Warning Days - (Soft)/Hard\" by pool | fields - pool\n          </query>\n        </search>\n      </table>\n    </panel>\n    <panel>\n      <title>Slave Usage Warnings</title>\n      <table>\n        <search>\n          <query>\n            | rest splunk_server=$splunk_server$ /services/licenser/slaves | mvexpand active_pool_ids | where warning_count>0 | eval pool=active_pool_ids | join type=outer pool [rest splunk_server=$splunk_server$ /services/licenser/pools | eval pool=title | fields pool stack_id] | eval in_violation=if(warning_count>4 OR (warning_count>2 AND stack_id==\"free\"),\"yes\",\"no\") | fields label, title, pool, warning_count, in_violation | fields - _timediff | rename label as \"Slave\" title as \"GUID\" pool as \"Pool\" warning_count as \"Hard Warnings\" in_violation AS \"In Violation?\"\n          </query>\n        </search>\n      </table>\n    </panel>\n  </row>\n</form>",
"eai:type": "views",
"name": "license_usage_today",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<?xml version=\"1.0\"?>\n<view template=\"/splunk_monitoring_console:/template/mc_app.html\" type=\"html\">\n    <label>Alerts Setup</label>\n</view>",
"eai:type": "views",
"name": "monitoringconsole_alerts_setup",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<?xml version=\"1.0\"?>\n<view template=\"/splunk_monitoring_console:/template/mc_app.html\" type=\"html\">\n    <label>Health Check</label>\n</view>",
"eai:type": "views",
"name": "monitoringconsole_check",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<?xml version=\"1.0\"?>\n<view template=\"/splunk_monitoring_console:/template/mc_app.html\" type=\"html\">\n    <label>Health Check Items</label>\n</view>",
"eai:type": "views",
"name": "monitoringconsole_check_list",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<?xml version=\"1.0\"?>\n<view template=\"/splunk_monitoring_console:/template/mc_app.html\" type=\"html\" isDashboard=\"False\">\n\t<label>General Setup</label>\n</view>",
"eai:type": "views",
"name": "monitoringconsole_configure",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<?xml version=\"1.0\"?>\n<view template=\"/splunk_monitoring_console:/template/mc_app.html\" type=\"html\">\n    <label>Forwarder Monitoring Setup</label>\n</view>",
"eai:type": "views",
"name": "monitoringconsole_forwarder_setup",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<?xml version=\"1.0\"?>\n<view template=\"/splunk_monitoring_console:/template/mc_app.html\" type=\"html\" isDashboard=\"False\">\n    <label>Instances</label>\n</view>",
"eai:type": "views",
"name": "monitoringconsole_instances",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<?xml version=\"1.0\"?>\n<view template=\"/splunk_monitoring_console:/template/mc_app.html\" type=\"html\">\n    <label>Summary</label>\n</view>",
"eai:type": "views",
"name": "monitoringconsole_landing",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<?xml version=\"1.0\"?>\n<view template=\"/splunk_monitoring_console:/template/mc_app.html\" type=\"html\">\n    <label>Overview</label>\n</view>",
"eai:type": "views",
"name": "monitoringconsole_overview",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<?xml version=\"1.0\"?>\n<view template=\"/splunk_monitoring_console:/template/mc_app.html\" type=\"html\">\n    <label>Overview Preferences</label>\n</view>",
"eai:type": "views",
"name": "monitoringconsole_overview_preferences",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<?xml version=\"1.0\"?>\n<view template=\"pages/app.html\" type=\"html\" isDashboard=\"False\">\n    <label>Reports</label>\n</view>",
"eai:type": "views",
"name": "reports",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" script=\"common_control.js\">\n  <label>CPU Usage: Deployment</label>\n  <description>\n    This dashboard consolidates panels from other Monitoring Console dashboards to help you assess the CPU usage of your Splunk deployment.\n  </description>\n  <fieldset autoRun=\"true\" submitButton=\"false\">\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"role_token\">\n      <label>Role</label>\n      <populatingSearch fieldForLabel=\"label\" fieldForValue=\"search_group\">\n        | `dmc_get_groups`\n        | search search_group=\"dmc_group_*\"\n      </populatingSearch>\n      <choice value=\"sh_and_idx\">Search-heads and Indexers</choice>\n      <choice value=\"*\">All</choice>\n      <selectFirstChoice>true</selectFirstChoice>\n      <showClearButton>false</showClearButton>\n      <change>\n        <condition label=\"Search-heads and Indexers\">\n          <set token=\"role\">*</set>\n          <set token=\"role_post_filter\">(search_group=\"dmc_group_indexer\" OR search_group=\"dmc_group_search_head\")</set>\n          <set token=\"metric_search_group\"></set>\n        </condition>\n        <condition label=\"All\">\n          <set token=\"role\">$role_token$</set>\n          <set token=\"role_post_filter\"></set>\n          <set token=\"metric_search_group\"></set>\n        </condition>\n        <condition value=\"*\">\n          <set token=\"role\">$role_token$</set>\n          <set token=\"role_post_filter\"></set>\n          <set token=\"metric_search_group\">search_group=\"$role_token$\"</set>\n        </condition>\n      </change>\n    </input>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"group\">\n      <label>Group</label>\n      <showClearButton>false</showClearButton>\n      <search fieldForValue=\"search_group\">\n        <query>\n          | `dmc_get_groups_containing_role($role$)`\n          | search search_group!=\"dmc_group_*\"\n        </query>\n      </search>\n      <fieldForLabel>label</fieldForLabel>\n      <fieldForValue>search_group</fieldForValue>\n      <choice value=\"*\">All</choice>\n      <selectFirstChoice>true</selectFirstChoice>\n    </input>\n  </fieldset>\n  <search id=\"instance_cpu_usage\">\n    <query>\n      | rest splunk_server_group=$role$ splunk_server_group=\"$group$\" /services/server/status/resource-usage/hostwide\n      | lookup dmc_assets serverName AS splunk_server OUTPUT search_group\n      | where $role_post_filter$\n      | join type=outer splunk_server [\n          | `dmc_get_instance_roles` \n          | fields role serverName\n          | rename serverName as splunk_server]\n      | eval normalized_load_avg_1min = if(isnull(normalized_load_avg_1min), \"N/A\", normalized_load_avg_1min)\n      | eval core_info = if(isnull(cpu_count), \"N/A\", cpu_count).\" / \".if(isnull(virtual_cpu_count), \"N/A\", virtual_cpu_count)\n      | eval cpu_usage = 'cpu_system_pct' + 'cpu_user_pct'\n      | fields splunk_server, role, normalized_load_avg_1min, core_info, cpu_usage, cpu_count, virtual_cpu_count, cpu_system_pct, cpu_user_pct\n      | eval role = replace(role, \" $\", \"\")\n      | eval role = split(role, \" \")\n    </query>\n    <earliest>$time.earliest$</earliest>\n    <latest>$time.latest$</latest>\n  </search>\n  <search id=\"system_cpu_usage\">\n    <query>\n      <![CDATA[\n      | rest splunk_server_group=$role$ splunk_server_group=\"$group$\" /services/server/status/resource-usage/splunk-processes\n      | lookup dmc_assets serverName AS splunk_server OUTPUT search_group\n      | where $role_post_filter$\n      | fields normalized_pct_cpu pct_cpu process process_type search_props.mode search_props.type search_props.provenance splunk_server\n      | join type=outer splunk_server [\n          | `dmc_get_instance_roles`\n          | fields role serverName\n          | `dmc_get_primary_role`\n          | rename serverName AS splunk_server]\n      | fillnull normalized_pct_cpu pct_cpu\n      | eval process_type_l2 = if(match(process_type, \"^search$\"), 'process_type'.\":\".'search_props.type', 'process_type')\n      | `dmc_pretty_print_role(primary_role)`\n      | stats sum(normalized_pct_cpu) AS normalized_pct_cpu by process_type_l2, splunk_server, primary_role\n      | chart avg(normalized_pct_cpu) AS normalized_pct_cpu over primary_role by process_type_l2\n      | foreach * [eval <<FIELD>> = if(isnum('<<FIELD>>'), round('<<FIELD>>', 2), '<<FIELD>>')]\n      ]]>\n    </query>\n  </search>\n  <search id=\"base_cpu_usage\">\n    <query>\n      `dmc_set_index_introspection` search_group=$role$ search_group=\"$group$\" $role_post_filter$ sourcetype=splunk_resource_usage component=Hostwide\n      | eval total_cpu_usage = 'data.cpu_system_pct' + 'data.cpu_user_pct'\n    </query>\n    <earliest>$time.earliest$</earliest>\n    <latest>$time.latest$</latest>\n  </search>\n   <search id=\"cpu_by_process_class\">\n    <query>\n      `dmc_set_index_introspection` search_group=$role$ search_group=\"$group$\" $role_post_filter$ sourcetype=splunk_resource_usage component=PerProcess\n      | `dmc_rename_introspection_fields`\n      | `dmc_classify_processes`\n      | `dmc_resource_usage_by_processes_timechart(normalized_pct_cpu, $funcPerpCPU$)`\n    </query>\n    <earliest>$time.earliest$</earliest>\n    <latest>$time.latest$</latest>\n  </search>\n  <row>\n    <panel>\n      <html>\n        <h2>\n          <span>Select views: </span>\n          <span id=\"link-switcher-view\">\n            <a href=\"#\" class=\"btn-pill active\" data-item=\"all\">All</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"snapshot\">Snapshot</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"historical\">Historical</a>\n          </span>\n        </h2>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Snapshots</title>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Effective CPU</title>\n      <single>\n        <search base=\"instance_cpu_usage\">\n          <query>\n            | stats avg(cpu_usage) AS cpu_usage\n            | eval cpu_usage = round(cpu_usage, 2).\"%\"\n          </query>\n        </search>\n        <option name=\"underLabel\">Average CPU usage across all instances</option>\n      </single>\n      <single>\n        <search base=\"instance_cpu_usage\">\n          <query>\n            | stats sum(virtual_cpu_count)\n          </query>\n        </search>\n        <option name=\"underLabel\">Total allocated vCPU</option>\n      </single>\n    </panel>\n    <panel rejects=\"$historical$\">\n      <title>CPU per Primary Server Role</title>\n      <chart>\n        <search base=\"instance_cpu_usage\">\n          <query>\n            | `dmc_get_primary_role`\n            | stats sum(virtual_cpu_count) by primary_role\n          </query>\n        </search>\n        <option name=\"charting.chart\">pie</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Search Heads</title>\n      <single>\n        <search base=\"instance_cpu_usage\">\n          <query>\n            | where role = \"search_head\"\n            | stats avg(cpu_usage) AS cpu_usage\n            | eval cpu_usage = round(cpu_usage, 2).\"%\"\n          </query>\n        </search>\n        <option name=\"underLabel\">CPU Usage Avg</option>\n      </single>\n      <single>\n        <search base=\"instance_cpu_usage\">\n          <query>\n            | where role = \"search_head\"\n            | stats median(virtual_cpu_count)\n          </query>\n        </search>\n        <option name=\"underLabel\">Median vCPU count per instance</option>\n      </single>\n      <single>\n        <search base=\"instance_cpu_usage\">\n          <query>\n            | stats dc(splunk_server) AS instance_count by role\n            | where role = \"search_head\"\n            | fields instance_count\n          </query>\n        </search>\n        <option name=\"underLabel\">Instance count</option>\n      </single>\n    </panel>\n    <panel rejects=\"$historical$\">\n      <title>Indexers</title>\n      <single>\n        <search base=\"instance_cpu_usage\">\n          <query>\n            | where role = \"indexer\"\n            | stats avg(cpu_usage) AS cpu_usage\n            | eval cpu_usage = round(cpu_usage, 2).\"%\"\n          </query>\n        </search>\n        <option name=\"underLabel\">CPU Usage Avg</option>\n      </single>\n      <single>\n        <search base=\"instance_cpu_usage\">\n          <query>\n            | where role = \"indexer\"\n            | stats median(virtual_cpu_count)\n          </query>\n        </search>\n        <option name=\"underLabel\">Median vCPU count per instance</option>\n      </single>\n      <single>\n        <search base=\"instance_cpu_usage\">\n          <query>\n            | stats dc(splunk_server) AS instance_count by role\n            | where role = \"indexer\"\n            | fields instance_count\n          </query>\n        </search>\n        <option name=\"underLabel\">Instance count</option>\n      </single>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>CPU Usage by Instance</title>\n      <table>\n        <search base=\"instance_cpu_usage\">\n          <query>\n            | fields splunk_server, role, core_info, cpu_usage, normalized_load_avg_1min\n            | `dmc_pretty_print_role(role)`\n            | sort - cpu_usage\n            | rename splunk_server AS Instance, role as Role, normalized_load_avg_1min AS \"Load Average\", core_info AS \"CPU Cores (Physical / Virtual)\", cpu_usage AS \"CPU Usage (%)\"\n          </query>\n        </search>\n        <format type=\"color\" field=\"CPU Usage (%)\">\n          <colorPalette type=\"minMidMax\" maxColor=\"#D85D3C\" midColor=\"#F7902B\" minColor=\"#9AC23C\"></colorPalette>\n          <scale type=\"minMidMax\" midType=\"number\" midValue=\"70\"></scale>\n        </format>\n        <format type=\"color\" field=\"Load Average\">\n          <colorPalette type=\"minMidMax\" maxColor=\"#D85D3C\" midColor=\"#F7902B\" minColor=\"#9AC23C\"></colorPalette>\n          <scale type=\"minMidMax\" midType=\"number\" midValue=\"1.5\"></scale>\n        </format>\n        <drilldown>\n          <condition field=\"*\">\n            <link target=\"_blank\">\n              <![CDATA[resource_usage_cpu_instance?form.splunk_server=$row.Instance$]]>\n            </link>\n          </condition>\n        </drilldown>\n      </table>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>CPU Usage by Primary Server Role over Splunk Process Type</title>\n      <input type=\"checkbox\" searchWhenChanged=\"true\" token=\"x_axis_100\">\n        <label></label>\n        <choice>Scale x-axis view to actual size</choice>\n      </input>\n      <chart depends=\"$x_axis_100$\">\n        <search base=\"system_cpu_usage\"></search>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">collapsed</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">false</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">bar</option>\n        <option name=\"charting.chart.nullValueMode\">gaps</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.axisTitleY.text\">CPU Usage (%)</option>\n        <option name=\"charting.axisLabelsX.majorLabelVisibility\">show</option>\n        <option name=\"charting.axisLabelsX2.axisVisibility\">show</option>\n        <option name=\"charting.axisY.minimumNumber\">0</option>\n        <option name=\"refresh.auto.interval\">60</option>\n        <option name=\"refresh.time.visible\">false</option>\n        <drilldown target=\"_blank\">\n          <condition series=\"*\">\n          <link target=\"_blank\"><![CDATA[search?q=`dmc_resource_usage_instance_drilldown($host$)`&earliest=$earliest$&latest=$latest$]]></link>\n          </condition>\n        </drilldown>\n      </chart>\n      <chart rejects=\"$x_axis_100$\">\n        <search base=\"system_cpu_usage\"></search>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">collapsed</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">false</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">bar</option>\n        <option name=\"charting.chart.nullValueMode\">gaps</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.axisTitleY.text\">CPU Usage (%)</option>\n        <option name=\"charting.axisLabelsX.majorLabelVisibility\">show</option>\n        <option name=\"charting.axisLabelsX2.axisVisibility\">show</option>\n        <option name=\"charting.axisY.maximumNumber\">100</option>\n        <option name=\"charting.axisY.minimumNumber\">0</option>\n        <option name=\"refresh.auto.interval\">60</option>\n        <option name=\"refresh.time.visible\">false</option>\n        <drilldown target=\"_blank\">\n          <condition series=\"*\">\n          <link target=\"_blank\"><![CDATA[search?q=`dmc_resource_usage_instance_drilldown($host$)`&earliest=$earliest$&latest=$latest$]]></link>\n          </condition>\n        </drilldown>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Historical Charts</title>\n      <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n        <label>Time Range:</label>\n        <default>\n          <earliestTime>-4h@m</earliestTime>\n          <latestTime>now</latestTime>\n        </default>\n      </input>\n      <input type=\"checkbox\" searchWhenChanged=\"true\" token=\"split_by_host\">\n        <label></label>\n        <choice>Split by instance</choice>\n      </input>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$, $split_by_host$\">\n      <title>Deployment-Wide $avgCPUFuncLabel$ CPU Usage</title>\n      <input type=\"dropdown\" token=\"avgCPUFunc\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>Median</default>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <change>\n          <set token=\"avgCPUFuncLabel\">$label$</set>\n        </change>\n      </input>\n      <chart>\n        <search base=\"base_cpu_usage\">\n          <query>\n            | `dmc_set_bin`\n            | stats latest(total_cpu_usage) as dedup_total_cpu_usage by host _time\n            | `dmc_timechart` $avgCPUFunc$(dedup_total_cpu_usage) as cpu_usage\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">area</option>\n        <option name=\"charting.legend.placement\">none</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">CPU Usage (%)</option>\n        <option name=\"charting.axisY.majorUnit\">20</option>\n        <option name=\"charting.axisY.minimumNumber\">0</option>\n        <option name=\"charting.axisY.maximumNumber\">100</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\" id=\"cpu_usage\">\n      <title>$countCPUFuncLabel$ CPU Usage</title>\n      <input type=\"dropdown\" token=\"countCPUFunc\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>Median</default>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <change>\n          <set token=\"countCPUFuncLabel\">$label$</set>\n        </change>\n      </input>\n      <chart depends=\"$split_by_host$\">\n        <search base=\"base_cpu_usage\">\n          <query>\n            | timechart minspan=10s bins=200 partial=f $countCPUFunc$(total_cpu_usage) as cpu_usage by host\n          </query>\n        </search>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">CPU Usage (%)</option>\n        <option name=\"charting.axisY.maximumNumber\">100</option>\n        <option name=\"charting.axisY.minimumNumber\">0</option>\n        <option name=\"charting.fieldColors\">{\"80-100%\": 0xD85D3C, \"60-80%\": 0xF7902B, \"0-60%\":0x9AC23C, \"100%+\": 0x956D95, \"abnormal\":0xC4C4C0}</option>\n      </chart>\n      <chart rejects=\"$split_by_host$\">\n        <search base=\"base_cpu_usage\">\n          <query>\n            | eval server = host\n            | `dmc_set_bin_for_timechart`\n            | stats $countCPUFunc$(total_cpu_usage) as cpu_usage by server _time\n            | `dmc_cpu_usage_rangemap_and_timechart`\n          </query>\n        </search>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Instance count</option>\n        <option name=\"charting.fieldColors\">{\"80-100%\": 0xD85D3C, \"60-80%\": 0xF7902B, \"0-60%\":0x9AC23C, \"100%+\": 0x956D95, \"abnormal\":0xC4C4C0}</option>\n        <drilldown>\n          <condition match=\"isnotnull('row._span')\">\n            <set token=\"drilldown_cpu_usage\">true</set>\n            <set token=\"drilldown_cpu_usage_earliest\">$earliest$</set>\n            <eval token=\"drilldown_cpu_usage_earliest_label\">strftime(earliest, \"%m/%d/%Y %H:%M:%S\")</eval>\n            <set token=\"drilldown_cpu_usage_latest\">$latest$</set>\n            <eval token=\"drilldown_cpu_usage_latest_label\">strftime(latest, \"%m/%d/%Y %H:%M:%S\")</eval>\n            <set token=\"drilldown_cpu_usage_metric\">$click.name2$</set>\n            <set token=\"drilldown_cpu_usage_count\">$click.value2$</set>\n          </condition>\n        </drilldown>\n      </chart>\n      <table depends=\"$drilldown_cpu_usage$\" rejects=\"$split_by_host$\" id=\"drilldown_cpu_usage\">\n        <title>Time range: $drilldown_cpu_usage_earliest_label$ ~ $drilldown_cpu_usage_latest_label$. Metric: $countCPUFunc$ CPU usage range: $drilldown_cpu_usage_metric$. ($drilldown_cpu_usage_count$ instances)</title>\n        <search>\n          <query>\n            `dmc_drilldown_resource_usage_cpu_deployment_usage(\"$role$\", \"$group$\", $role_post_filter$, $countCPUFunc$, $drilldown_cpu_usage_metric$)`\n          </query>\n          <earliest>$drilldown_cpu_usage_earliest$</earliest>\n          <latest>$drilldown_cpu_usage_latest$</latest>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <html depends=\"$drilldown_cpu_usage$\" rejects=\"$split_by_host$\">\n        <a data-unset-token=\"drilldown_cpu_usage\">Close this drilldown table</a>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$, $split_by_host$\">\n      <title>$funcPerpCPULabel$ CPU Usage by Process Class</title>\n      <input type=\"dropdown\" token=\"funcPerpCPU\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <default>Median</default>\n        <change>\n          <set token=\"funcPerpCPULabel\">$label$</set>\n        </change>\n      </input>\n      <input type=\"checkbox\" searchWhenChanged=\"true\" token=\"stacked_bar\">\n        <label></label>\n        <choice>Show as bar chart</choice>\n      </input>\n      <chart rejects=\"$stacked_bar$\">\n        <search base=\"cpu_by_process_class\"></search>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">false</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">area</option>\n        <option name=\"charting.chart.nullValueMode\">zero</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">CPU Usage (%)</option>\n      </chart>\n      <chart depends=\"$stacked_bar$\">\n        <search base=\"cpu_by_process_class\"></search>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">false</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.nullValueMode\">zero</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked100</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Share of CPU Usage</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$, $split_by_host$\">\n      <title>$resourceFuncLabel$ CPU Usage of Searches</title>\n      <input type=\"dropdown\" token=\"resourceFunction\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>Median</default>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <change>\n          <set token=\"resourceFuncLabel\">$label$</set>\n        </change>\n      </input>\n      <input type=\"dropdown\" token=\"resourceSplitBy\" searchWhenChanged=\"true\">\n        <label>Split by</label>\n        <showClearButton>false</showClearButton>\n        <default>type</default>\n        <choice value=\"app\">App</choice>\n        <choice value=\"user\">User</choice>\n        <choice value=\"mode\">Mode</choice>\n        <choice value=\"type\">Type</choice>\n        <choice value=\"role\">Role</choice>\n        <choice value=\"search_head\">Dispatching Search Head</choice>\n        <choice value=\"label\">Search Name</choice>\n        <choice value=\"provenance\">Provenance</choice>\n        <choice value=\"workload_pool\">Workload Pool</choice>\n        <change>\n          <condition value=\"mode\">\n            <set token=\"resourceModeDoc\">true</set>\n          </condition>\n          <condition value=\"*\">\n            <unset token=\"resourceModeDoc\"></unset>\n          </condition>\n        </change>\n      </input>\n      <chart>\n        <searchString>\n        `dmc_set_index_introspection` search_group=$role$ search_group=\"$group$\" $role_post_filter$ sourcetype=splunk_resource_usage component=PerProcess data.search_props.sid::*\n        | `dmc_rename_introspection_fields`\n        | `dmc_set_bin`\n        | stats latest(normalized_pct_cpu) AS resource_usage_dedup by _time, $resourceSplitBy$, sid, pid\n        | stats sum(resource_usage_dedup) AS sum_resource_usage by _time,  $resourceSplitBy$\n        | eval sum_resource_usage = round(sum_resource_usage / 100.0, 2)\n        | `dmc_timechart` $resourceFunction$(sum_resource_usage) AS \"$resourceFunction$ of resource usage\" by $resourceSplitBy$\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">false</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"list.drilldown\">full</option>\n        <option name=\"list.wrap\">1</option>\n        <option name=\"maxLines\">5</option>\n        <option name=\"raw.drilldown\">full</option>\n        <option name=\"rowNumbers\">false</option>\n        <option name=\"table.drilldown\">all</option>\n        <option name=\"table.wrap\">1</option>\n        <option name=\"type\">list</option>\n        <option name=\"wrap\">true</option>\n        <option name=\"dataOverlayMode\">none</option>\n        <option name=\"charting.axisTitleY.text\">CPU Usage (# cores)</option>\n        <drilldown target=\"_blank\">\n          <condition series=\"*\">\n              <link target=\"_blank\"><![CDATA[search?q=`dmc_search_activity_instance_drilldown(*, $resourceSplitBy$, $click.name2$)`&earliest=$earliest$&latest=$latest$]]></link>\n          </condition>\n        </drilldown>\n      </chart>\n      <html depends=\"$resourceModeDoc$\">\n        <p>Mode can be historical, historical batch, RT, or RT indexed.</p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$, $split_by_host$\">\n      <title>$histFuncLabel$ Historical CPU Usage</title>\n      <input type=\"dropdown\" token=\"histFunc\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <default>Median</default>\n        <change>\n          <set token=\"histFuncLabel\">$label$</set>\n        </change>\n      </input>\n      <input type=\"time\" searchWhenChanged=\"true\" token=\"hist_time\">\n        <label>Time Range:</label>\n        <default>\n          <earliestTime>-30d@d</earliestTime>\n          <latestTime>now</latestTime>\n        </default>\n      </input>\n      <chart>\n        <searchString>\n          | mstats $histFunc$(\"spl.intr.resource_usage.Hostwide.data.cpu_system_pct_mrollup_avg_86400s\")  $histFunc$(\"spl.intr.resource_usage.Hostwide.data.cpu_user_pct_mrollup_avg_86400s\") prestats=true WHERE \"index\"=\"_metrics_rollup\" by extracted_host span=1h\n          | rename extracted_host as host\n          | lookup dmc_assets host OUTPUT search_group\n          | where $role_post_filter$ $metric_search_group$\n          | timechart eval($histFunc$('spl.intr.resource_usage.Hostwide.data.cpu_user_pct_mrollup_avg_86400s') + $histFunc$('spl.intr.resource_usage.Hostwide.data.cpu_system_pct_mrollup_avg_86400s')) by host\n          | fields - _span\n        </searchString>\n        <earliestTime>$hist_time.earliest$</earliestTime>\n        <latestTime>$hist_time.latest$</latestTime>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">false</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"list.drilldown\">full</option>\n        <option name=\"list.wrap\">1</option>\n        <option name=\"maxLines\">5</option>\n        <option name=\"raw.drilldown\">full</option>\n        <option name=\"rowNumbers\">false</option>\n        <option name=\"table.drilldown\">none</option>\n        <option name=\"table.wrap\">1</option>\n        <option name=\"type\">list</option>\n        <option name=\"wrap\">true</option>\n        <option name=\"dataOverlayMode\">none</option>\n        <option name=\"charting.axisTitleY.text\">CPU Usage %</option>\n      </chart>\n      <html>\n        <p>To view data in this panel you must enable the metric rollup policy specified in the [index:_metrics] stanza in metric_rollups.conf. <a href=\"/help?location=learnmore.metrics_rollup_policy\" target=\"_blank\" class=\"external\">Learn More</a></p>\n      </html>\n    </panel>\n  </row>\n</form>",
"eai:type": "views",
"name": "resource_usage_cpu_deployment",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" script=\"common_control.js\">\n  <label>CPU Usage: Instance</label>\n  <description>\n    This dashboard consolidates panels from other Monitoring Console dashboards to help you assess the CPU usage of a Splunk instance.\n  </description>\n  <fieldset autoRun=\"true\" submitButton=\"false\">\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"role\">\n      <label>Role</label>\n      <populatingSearch fieldForLabel=\"label\" fieldForValue=\"search_group\">\n        | `dmc_get_groups`\n        | search search_group=\"dmc_group_*\"\n      </populatingSearch>\n      <choice value=\"*\">All</choice>\n      <selectFirstChoice>true</selectFirstChoice>\n      <showClearButton>false</showClearButton>\n    </input>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"group\">\n      <label>Group</label>\n      <showClearButton>false</showClearButton>\n      <search fieldForValue=\"search_group\">\n        <query>\n          | `dmc_get_groups_containing_role($role$)`\n          | search search_group!=\"dmc_group_*\"\n        </query>\n      </search>\n      <fieldForLabel>label</fieldForLabel>\n      <fieldForValue>search_group</fieldForValue>\n      <choice value=\"*\">All</choice>\n      <selectFirstChoice>true</selectFirstChoice>\n    </input>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"splunk_server\">\n      <label>Instance</label>\n      <showClearButton>false</showClearButton>\n      <populatingSearch fieldForLabel=\"serverName\" fieldForValue=\"serverName\">\n        | `dmc_get_instance_info(\"$group$\")`\n        | search search_group=\"$role$\"\n      </populatingSearch>\n      <selectFirstChoice>true</selectFirstChoice>\n      <change>\n        <condition value=\"*\">\n          <set token=\"host\">$row.host$</set>\n        </condition>\n      </change>\n    </input>\n  </fieldset>\n  <search id=\"instance_cpu_usage\">\n    <query>\n      | rest splunk_server=$splunk_server$ /services/server/status/resource-usage/hostwide\n      | join type=outer splunk_server [\n          | `dmc_get_instance_roles` \n          | fields role serverName\n          | rename serverName as splunk_server]\n      | eventstats min(eval(if(isnull(normalized_load_avg_1min), \"0\", \"1\"))) as _load_avg_full_availability\n      | eval normalized_load_avg_1min = if(isnull(normalized_load_avg_1min), \"N/A\", normalized_load_avg_1min)\n      | eval core_info = if(isnull(cpu_count), \"N/A\", cpu_count).\" / \".if(isnull(virtual_cpu_count), \"N/A\", virtual_cpu_count)\n      | eval cpu_usage = 'cpu_system_pct' + 'cpu_user_pct'\n      | fields splunk_server, role, normalized_load_avg_1min, core_info, cpu_usage, cpu_count, virtual_cpu_count, cpu_system_pct, cpu_user_pct\n      | eval role = replace(role, \" $\", \"\")\n      | eval role = split(role, \" \")\n    </query>\n    <earliest>$time.earliest$</earliest>\n    <latest>$time.latest$</latest>\n  </search>\n  <search id=\"system_cpu_usage\">\n    <query>\n      <![CDATA[\n      | rest splunk_server=$splunk_server$ /services/server/status/resource-usage/splunk-processes\n      | fields normalized_pct_cpu pct_cpu process process_type search_props.mode search_props.type search_props.provenance splunk_server\n      | fillnull normalized_pct_cpu pct_cpu\n      | eval process_type_l2 = if(match(process_type, \"^search$\"), 'process_type'.\":\".'search_props.type', 'process_type')\n      | stats sum(normalized_pct_cpu) AS normalized_pct_cpu by process_type_l2, splunk_server\n      | chart avg(normalized_pct_cpu) AS normalized_pct_cpu over splunk_server by process_type_l2\n      | foreach * [eval <<FIELD>> = if(isnum('<<FIELD>>'), round('<<FIELD>>', 2), '<<FIELD>>')]\n      ]]>\n    </query>\n  </search>\n  <search id=\"cpu_by_process_class\">\n    <query>\n      `dmc_set_index_introspection` host=$host$ sourcetype=splunk_resource_usage component=PerProcess\n      | `dmc_rename_introspection_fields`\n      | `dmc_classify_processes`\n      | `dmc_resource_usage_by_processes_timechart(normalized_pct_cpu, $funcPerpCPU$)`\n    </query>\n    <earliest>$time.earliest$</earliest>\n    <latest>$time.latest$</latest>\n  </search>\n  <row>\n    <panel>\n      <html>\n        <h2>\n          <span>Select views: </span>\n          <span id=\"link-switcher-view\">\n            <a href=\"#\" class=\"btn-pill active\" data-item=\"all\">All</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"snapshot\">Snapshot</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"historical\">Historical</a>\n          </span>\n        </h2>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Snapshots</title>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>CPU Usage</title>\n      <table>\n        <search base=\"instance_cpu_usage\">\n          <query>\n            | fields splunk_server, role, core_info, cpu_usage, normalized_load_avg_1min\n            | `dmc_pretty_print_role(role)`\n            | sort - cpu_usage\n            | rename splunk_server AS Instance, role as Role, normalized_load_avg_1min AS \"Load Average\", core_info AS \"CPU Cores (Physical / Virtual)\", cpu_usage AS \"CPU Usage (%)\"\n          </query>\n        </search>\n        <format type=\"color\" field=\"CPU Usage (%)\">\n          <colorPalette type=\"minMidMax\" maxColor=\"#D85D3C\" midColor=\"#F7902B\" minColor=\"#9AC23C\"></colorPalette>\n          <scale type=\"minMidMax\" midType=\"number\" midValue=\"70\"></scale>\n        </format>\n        <format type=\"color\" field=\"Load Average\">\n          <colorPalette type=\"minMidMax\" maxColor=\"#D85D3C\" midColor=\"#F7902B\" minColor=\"#9AC23C\"></colorPalette>\n          <scale type=\"minMidMax\" midType=\"number\" midValue=\"1.5\"></scale>\n        </format>\n      </table>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>CPU Usage over Splunk Process Type</title>\n      <input type=\"checkbox\" searchWhenChanged=\"true\" token=\"x_axis_100\">\n        <label></label>\n        <choice>Scale x-axis view to actual size</choice>\n      </input>\n      <chart depends=\"$x_axis_100$\">\n        <search base=\"system_cpu_usage\"></search>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">collapsed</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">false</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">bar</option>\n        <option name=\"charting.chart.nullValueMode\">gaps</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.axisTitleY.text\">CPU Usage (%)</option>\n        <option name=\"charting.axisLabelsX.majorLabelVisibility\">show</option>\n        <option name=\"charting.axisLabelsX2.axisVisibility\">show</option>\n        <option name=\"charting.axisY.minimumNumber\">0</option>\n        <option name=\"refresh.auto.interval\">60</option>\n        <option name=\"refresh.time.visible\">false</option>\n        <drilldown target=\"_blank\">\n          <condition series=\"*\">\n          <link target=\"_blank\"><![CDATA[search?q=`dmc_resource_usage_instance_drilldown($host$)`&earliest=$earliest$&latest=$latest$]]></link>\n          </condition>\n        </drilldown>\n      </chart>\n      <chart rejects=\"$x_axis_100$\">\n        <search base=\"system_cpu_usage\"></search>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">collapsed</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">false</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">bar</option>\n        <option name=\"charting.chart.nullValueMode\">gaps</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.axisTitleY.text\">CPU Usage (%)</option>\n        <option name=\"charting.axisLabelsX.majorLabelVisibility\">show</option>\n        <option name=\"charting.axisLabelsX2.axisVisibility\">show</option>\n        <option name=\"charting.axisY.maximumNumber\">100</option>\n        <option name=\"charting.axisY.minimumNumber\">0</option>\n        <option name=\"refresh.auto.interval\">60</option>\n        <option name=\"refresh.time.visible\">false</option>\n        <drilldown target=\"_blank\">\n          <condition series=\"*\">\n          <link target=\"_blank\"><![CDATA[search?q=`dmc_resource_usage_instance_drilldown($host$)`&earliest=$earliest$&latest=$latest$]]></link>\n          </condition>\n        </drilldown>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Historical Charts</title>\n      <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n        <label>Time Range:</label>\n        <default>\n          <earliestTime>-4h@m</earliestTime>\n          <latestTime>now</latestTime>\n        </default>\n      </input>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>$funcPerpCPULabel$ CPU Usage by Process Class</title>\n      <input type=\"dropdown\" token=\"funcPerpCPU\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <default>Median</default>\n        <change>\n          <set token=\"funcPerpCPULabel\">$label$</set>\n        </change>\n      </input>\n      <input type=\"checkbox\" searchWhenChanged=\"true\" token=\"stacked_bar\">\n        <label></label>\n        <choice>Show as bar chart</choice>\n      </input>\n      <chart rejects=\"$stacked_bar$\">\n        <search base=\"cpu_by_process_class\"></search>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">false</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">area</option>\n        <option name=\"charting.chart.nullValueMode\">zero</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">CPU Usage (%)</option>\n      </chart>\n      <chart depends=\"$stacked_bar$\">\n        <search base=\"cpu_by_process_class\"></search>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">false</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.nullValueMode\">zero</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">CPU Usage (%)</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>$resourceFuncLabel$ CPU Usage of Searches</title>\n      <input type=\"dropdown\" token=\"resourceFunction\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>Median</default>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <change>\n          <set token=\"resourceFuncLabel\">$label$</set>\n        </change>\n      </input>\n      <input type=\"dropdown\" token=\"resourceSplitBy\" searchWhenChanged=\"true\">\n        <label>Split by</label>\n        <showClearButton>false</showClearButton>\n        <default>type</default>\n        <choice value=\"app\">App</choice>\n        <choice value=\"user\">User</choice>\n        <choice value=\"mode\">Mode</choice>\n        <choice value=\"type\">Type</choice>\n        <choice value=\"role\">Role</choice>\n        <choice value=\"search_head\">Dispatching Search Head</choice>\n        <choice value=\"label\">Search Name</choice>\n        <choice value=\"provenance\">Provenance</choice>\n        <choice value=\"workload_pool\">Workload Pool</choice>\n        <change>\n          <condition value=\"mode\">\n            <set token=\"resourceModeDoc\">true</set>\n          </condition>\n          <condition value=\"*\">\n            <unset token=\"resourceModeDoc\"></unset>\n          </condition>\n        </change>\n      </input>\n      <chart>\n        <searchString>\n        `dmc_set_index_introspection` host=$host$ sourcetype=splunk_resource_usage component=PerProcess data.search_props.sid::*\n        | `dmc_rename_introspection_fields`\n        | `dmc_set_bin`\n        | stats latest(normalized_pct_cpu) AS resource_usage_dedup by _time, $resourceSplitBy$, sid, pid\n        | stats sum(resource_usage_dedup) AS sum_resource_usage by _time,  $resourceSplitBy$\n        | eval sum_resource_usage = round(sum_resource_usage / 100.0, 2)\n        | `dmc_timechart` $resourceFunction$(sum_resource_usage) AS \"$resourceFunction$ of resource usage\" by $resourceSplitBy$\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">false</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"list.drilldown\">full</option>\n        <option name=\"list.wrap\">1</option>\n        <option name=\"maxLines\">5</option>\n        <option name=\"raw.drilldown\">full</option>\n        <option name=\"rowNumbers\">false</option>\n        <option name=\"table.drilldown\">all</option>\n        <option name=\"table.wrap\">1</option>\n        <option name=\"type\">list</option>\n        <option name=\"wrap\">true</option>\n        <option name=\"dataOverlayMode\">none</option>\n        <option name=\"charting.axisTitleY.text\">CPU Usage (# cores)</option>\n        <drilldown target=\"_blank\">\n          <condition series=\"*\">\n              <link target=\"_blank\"><![CDATA[search?q=`dmc_search_activity_instance_drilldown($host$, $resourceSplitBy$, $click.name2$)`&earliest=$earliest$&latest=$latest$]]></link>\n          </condition>\n        </drilldown>\n      </chart>\n      <html depends=\"$resourceModeDoc$\">\n        <p>Mode can be historical, historical batch, RT, or RT indexed.</p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>$histFuncLabel$ Historical CPU Usage</title>\n      <input type=\"dropdown\" token=\"histFunc\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <default>Median</default>\n        <change>\n          <set token=\"histFuncLabel\">$label$</set>\n        </change>\n      </input>\n      <input type=\"time\" searchWhenChanged=\"true\" token=\"hist_time\">\n        <label>Time Range:</label>\n        <default>\n          <earliestTime>-30d@d</earliestTime>\n          <latestTime>now</latestTime>\n        </default>\n      </input>\n      <chart>\n        <searchString>\n          | mstats $histFunc$(\"spl.intr.resource_usage.Hostwide.data.cpu_system_pct_mrollup_avg_86400s\")  $histFunc$(\"spl.intr.resource_usage.Hostwide.data.cpu_user_pct_mrollup_avg_86400s\") prestats=true WHERE \"index\"=\"_metrics_rollup\" by extracted_host span=1h\n          | rename extracted_host as host\n          | where host=\"$host$\"\n          | timechart eval($histFunc$('spl.intr.resource_usage.Hostwide.data.cpu_user_pct_mrollup_avg_86400s') + $histFunc$('spl.intr.resource_usage.Hostwide.data.cpu_system_pct_mrollup_avg_86400s')) by host\n          | fields - _span\n        </searchString>\n        <earliestTime>$hist_time.earliest$</earliestTime>\n        <latestTime>$hist_time.latest$</latestTime>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">false</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"list.drilldown\">full</option>\n        <option name=\"list.wrap\">1</option>\n        <option name=\"maxLines\">5</option>\n        <option name=\"raw.drilldown\">full</option>\n        <option name=\"rowNumbers\">false</option>\n        <option name=\"table.drilldown\">none</option>\n        <option name=\"table.wrap\">1</option>\n        <option name=\"type\">list</option>\n        <option name=\"wrap\">true</option>\n        <option name=\"dataOverlayMode\">none</option>\n        <option name=\"charting.axisTitleY.text\">CPU Usage %</option>\n      </chart>\n      <html>\n        <p>To view data in this panel you must enable the metric rollup policy specified in the [index:_metrics] stanza in metric_rollups.conf. <a href=\"/help?location=learnmore.metrics_rollup_policy\" target=\"_blank\" class=\"external\">Learn More</a></p>\n      </html>\n    </panel>\n  </row>\n</form>",
"eai:type": "views",
"name": "resource_usage_cpu_instance",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" script=\"common_control.js, drilldown_action_extension.js, resource_usage_deployment_extension.js\">\n  <label>Resource Usage: Deployment</label>\n  <description/>\n  <fieldset autoRun=\"true\" submitButton=\"false\">\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"role\">\n      <label>Role</label>\n      <populatingSearch fieldForLabel=\"label\" fieldForValue=\"search_group\">\n        | `dmc_get_groups`\n        | search search_group=\"dmc_group_*\"\n      </populatingSearch>\n      <choice value=\"*\">All</choice>\n      <selectFirstChoice>true</selectFirstChoice>\n      <showClearButton>false</showClearButton>\n    </input>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"group\">\n      <label>Group</label>\n      <showClearButton>false</showClearButton>\n      <search fieldForValue=\"search_group\">\n        <query>| `dmc_get_groups_containing_role($role$)` | search search_group!=\"dmc_group_*\"</query>\n      </search>\n      <fieldForLabel>label</fieldForLabel>\n      <fieldForValue>search_group</fieldForValue>\n      <choice value=\"*\">All</choice>\n      <selectFirstChoice>true</selectFirstChoice>\n    </input>\n  </fieldset>\n  <row>\n    <panel>\n      <html>\n        <h2>\n          <span>Select views: </span>\n          <span id=\"link-switcher-view\">\n            <a href=\"#\" class=\"btn-pill active\" data-item=\"all\">All</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"snapshot\">Snapshot</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"historical\">Historical</a>\n          </span>\n        </h2>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Snapshots</title>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Resource Usage by Instance</title>\n      <table>\n        <title>$countInstance$ instance(s)</title>\n        <search>\n          <query>\n| rest splunk_server_group=$role$ splunk_server_group=\"$group$\" /services/server/status/resource-usage/hostwide\n| join type=outer splunk_server [\n  | rest splunk_server_group=$role$ splunk_server_group=\"$group$\" /services/server/status/resource-usage/iostats\n  | eval iops = round(reads_ps + writes_ps)\n  | eval iops_mountpoint = iops.\" (\".mount_point.\")\"\n  | eval cpupct_mountpoint = cpu_pct.\"% (\".mount_point.\")\"\n  | stats values(iops_mountpoint) as iops_mountpoint, values(cpupct_mountpoint) as cpupct_mountpoint by splunk_server]\n| eventstats min(eval(if(isnull(normalized_load_avg_1min), \"0\", \"1\"))) as _load_avg_full_availability\n| eval normalized_load_avg_1min = if(isnull(normalized_load_avg_1min), \"N/A\", normalized_load_avg_1min)\n| eval core_info = if(isnull(cpu_count), \"N/A\", cpu_count).\" / \".if(isnull(virtual_cpu_count), \"N/A\", virtual_cpu_count)\n| eval cpu_usage = cpu_system_pct + cpu_user_pct\n| eval mem_used_pct = round(mem_used / mem * 100 , 2)\n| eval mem_used = round(mem_used, 0)\n| eval mem = round(mem, 0)\n| fields splunk_server, normalized_load_avg_1min, core_info, cpu_usage, mem, mem_used, mem_used_pct, iops_mountpoint, cpupct_mountpoint\n| sort - cpu_usage, -mem_used\n| rename splunk_server AS Instance, normalized_load_avg_1min AS \"Load Average\", core_info AS \"CPU Cores (Physical / Virtual)\", cpu_usage AS \"CPU Usage (%)\", mem AS \"Physical Memory Capacity (MB)\", mem_used AS \"Physical Memory Usage (MB)\", mem_used_pct AS \"Physical Memory Usage (%)\", iops_mountpoint as \"I/O Operations per second (Mount Point)\", cpupct_mountpoint as \"Storage I/O Saturation (Mount Point)\"\n          </query>\n          <finalized>\n            <condition match='$result._load_avg_full_availability$ == \"1\"'>\n              <set token=\"load_avg_available\">true</set>\n            </condition>\n            <condition match='$result._load_avg_full_availability$ == \"0\"'>\n              <set token=\"load_avg_unavailable\">true</set>\n            </condition>\n          </finalized>\n          <done>\n            <set token=\"countInstance\">$job.resultCount$</set>\n          </done>\n        </search>\n        <option name=\"refresh.time.visible\">false</option>\n        <drilldown>\n          <condition field=\"Instance\">\n            <link target=\"_blank\">\n              <![CDATA[resource_usage_instance?form.splunk_server=$click.value2$]]>\n            </link>\n          </condition>\n          <condition field=\"*\"></condition>\n        </drilldown>\n      </table>\n      <html>\n        <p>Click on instance name for more details.</p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Historical Charts</title>\n      <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n        <label>Time Range:</label>\n        <default>\n          <earliestTime>-4h@m</earliestTime>\n          <latestTime>now</latestTime>\n        </default>\n      </input>\n      <input type=\"checkbox\" searchWhenChanged=\"true\" token=\"split_by_host\">\n        <label></label>\n        <choice>Split by host</choice>\n      </input>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$, $split_by_host$\" id=\"load_average\">\n      <title>$countLoadAvgFuncLabel$ Load Average</title>\n      <input type=\"dropdown\" token=\"countLoadAvgFunc\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>Median</default>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <change>\n          <condition value=\"Avg\">\n            <set token=\"countLoadAvgFuncLabel\">Averaged System</set>\n          </condition>\n          <condition value=\"*\">\n            <set token=\"countLoadAvgFuncLabel\">$label$</set>\n          </condition>\n        </change>\n      </input>\n        <html>\n            <div class=\"heatmap_toggle\"></div>\n        </html>\n        <viz type=\"splunk_monitoring_console.heatmap\">\n            <search>\n                <query>\n                    `dmc_set_index_introspection` search_group=$role$ search_group=\"$group$\" sourcetype=splunk_resource_usage component=Hostwide\n                    | eval server = host\n                    | `dmc_set_bin_for_timechart`\n                    | stats $countLoadAvgFunc$(data.normalized_load_avg_1min) as load_average by server _time\n                    | `dmc_load_average_rangemap_and_timechart`\n                </query>\n                <earliest>$time.earliest$</earliest>\n                <latest>$time.latest$</latest>\n            </search>\n            <drilldown>\n                <condition match=\"isnotnull('row._span')\">\n                    <set token=\"drilldown_load_average\">true</set>\n                    <set token=\"drilldown_load_average_earliest\">$row.earliest$</set>\n                    <eval token=\"drilldown_load_average_earliest_label\">$row.earliest_label$</eval>\n                    <set token=\"drilldown_load_average_latest\">$row.latest$</set>\n                    <eval token=\"drilldown_load_average_latest_label\">$row.latest_label$</eval>\n                    <set token=\"drilldown_load_average_metric\">$row.drilldown_indexing_rate_metric$</set>\n                    <set token=\"drilldown_load_average_count\">$row.numInstances$</set>\n                </condition>\n                <condition/>\n            </drilldown>\n        </viz>\n      <chart rejects=\"$split_by_host$\">\n        <search>\n          <query>\n`dmc_set_index_introspection` search_group=$role$ search_group=\"$group$\" sourcetype=splunk_resource_usage component=Hostwide\n| eval server = host \n| `dmc_set_bin_for_timechart`\n| stats $countLoadAvgFunc$(data.normalized_load_avg_1min) as load_average by server _time\n| `dmc_load_average_rangemap_and_timechart`\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Instance count</option>\n        <option name=\"charting.fieldColors\">{\"1.5+\": 0xD85D3C, \"0.75-1.5\": 0xF7902B, \"0-0.75\":0x9AC23C, \"abnormal\":0xC4C4C0}</option>\n        <drilldown>\n          <condition match=\"isnotnull('row._span')\">\n            <set token=\"drilldown_load_average\">true</set>\n            <set token=\"drilldown_load_average_earliest\">$earliest$</set>\n            <eval token=\"drilldown_load_average_earliest_label\">strftime(earliest, \"%m/%d/%Y %H:%M:%S\")</eval>\n            <set token=\"drilldown_load_average_latest\">$latest$</set>\n            <eval token=\"drilldown_load_average_latest_label\">strftime(latest, \"%m/%d/%Y %H:%M:%S\")</eval>\n            <set token=\"drilldown_load_average_metric\">$click.name2$</set>\n            <set token=\"drilldown_load_average_count\">$click.value2$</set>\n          </condition>\n          <condition />\n        </drilldown>\n      </chart>\n      <table depends=\"$drilldown_load_average$\" rejects=\"$split_by_host$\" id=\"drilldown_load_average\">\n        <title>Time range: $drilldown_load_average_earliest_label$ ~ $drilldown_load_average_latest_label$. Metric: $countLoadAvgFunc$ Load average range: $drilldown_load_average_metric$. ($drilldown_load_average_count$ instances)</title>\n        <search>\n          <query>`dmc_drilldown_resource_usage_deployment_load_average(\"$role$\", \"$group$\", $countLoadAvgFunc$, $drilldown_load_average_metric$)`</query>\n          <earliest>$drilldown_load_average_earliest$</earliest>\n          <latest>$drilldown_load_average_latest$</latest>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <html depends=\"$drilldown_load_average$\" rejects=\"$split_by_host$\">\n        <a data-unset-token=\"drilldown_load_average\">Close this drilldown table</a>\n      </html>\n      <html rejects=\"$split_by_host$\" depends=\"$load_avg_available$\">\n        <p>Count of instances grouped by $countLoadAvgFuncLabel$ machine-wide load average over time.</p>\n      </html>\n      <html depends=\"$split_by_host$, $load_avg_available$\">\n        <p>$loadAvgFuncLabel$ machine-wide load average over time by instance.</p>\n      </html>\n      <html depends=\"$load_avg_unavailable$\">\n        <div class=\"alert alert-inline alert-info\">\n          <i class=\"icon-alert\"></i>\n          $countLoadAvgFuncLabel$ load average metric is not supported on Windows and will not be shown for instances running on that operating system.\n        </div>\n      </html>\n     </panel>\n  </row>\n  <row>\n     <panel depends=\"$split_by_host$\">\n      <title>$countLoadAvgFuncLabel$ Load Average</title>\n         <input type=\"dropdown\" token=\"countLoadAvgFunc\" searchWhenChanged=\"true\">\n             <label>Aggregation</label>\n             <showClearButton>false</showClearButton>\n             <default>Median</default>\n             <choice value=\"Avg\">Average</choice>\n             <choice value=\"Median\">Median</choice>\n             <choice value=\"Max\">Maximum</choice>\n             <choice value=\"Min\">Minimum</choice>\n             <choice value=\"Perc90\">90th Percentile</choice>\n             <choice value=\"First\">Sampled</choice>\n             <change>\n                 <condition value=\"Avg\">\n                     <set token=\"countLoadAvgFuncLabel\">Averaged System</set>\n                 </condition>\n                 <condition value=\"*\">\n                     <set token=\"countLoadAvgFuncLabel\">$label$</set>\n                 </condition>\n             </change>\n         </input>\n      <chart>\n        <search>\n          <query>\n`dmc_set_index_introspection` search_group=$role$ search_group=\"$group$\" sourcetype=splunk_resource_usage component=Hostwide\n|`dmc_timechart` partial=f limit=25 $countLoadAvgFunc$(data.normalized_load_avg_1min) AS load_average by host\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Load Average</option>\n      </chart>\n      <html rejects=\"$split_by_host$\" depends=\"$load_avg_available$\">\n        <p>Count of instances grouped by $countLoadAvgFuncLabel$ machine-wide load average over time.</p>\n      </html>\n      <html depends=\"$split_by_host$, $load_avg_available$\">\n        <p>$loadAvgFuncLabel$ machine-wide load average over time by instance.</p>\n      </html>\n       <html depends=\"$load_avg_unavailable$\">\n         <div class=\"alert alert-inline alert-info\">\n           <i class=\"icon-alert\"></i>\n           $countLoadAvgFuncLabel$ load average metric is not supported on Windows and will not be shown for instances running on that operating system.\n         </div>\n       </html>\n    </panel>\n    <panel rejects=\"$snapshot$\">\n      <title>Deployment-Wide $loadAvgFuncLabel$ Load Average</title>\n      <input type=\"dropdown\" token=\"loadAvgFunc\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>Median</default>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <change>\n          <condition value=\"Avg\">\n            <set token=\"loadAvgFuncLabel\">Averaged System</set>\n          </condition>\n          <condition value=\"*\">\n            <set token=\"loadAvgFuncLabel\">$label$</set>\n          </condition>\n        </change>\n      </input>\n      <chart>\n        <search>\n          <query>\n`dmc_set_index_introspection` search_group=$role$ search_group=\"$group$\" sourcetype=splunk_resource_usage component=Hostwide\n| eval server = host\n| `dmc_set_bin`\n| stats latest(data.normalized_load_avg_1min) as dedup_load_average by server _time\n| `dmc_timechart` $loadAvgFunc$(dedup_load_average) as load_average\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">area</option>\n        <option name=\"charting.legend.placement\">none</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Load Average</option>\n      </chart>\n      <html depends=\"$load_avg_unavailable$\">\n        <div class=\"alert alert-inline alert-info\">\n          <i class=\"icon-alert\"></i>\n          Deployment-Wide $loadAvgFuncLabel$ Load Average is not supported on Windows and will not be shown for instances running on that operating system.\n        </div>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$, $split_by_host$\" id=\"cpu_usage\">\n      <title>$countCPUFuncLabel$ CPU Usage</title>\n      <input type=\"dropdown\" token=\"countCPUFunc\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>Median</default>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <change>\n          <set token=\"countCPUFuncLabel\">$label$</set>\n        </change>\n      </input>\n        <html>\n            <div class=\"heatmap_toggle\"></div>\n        </html>\n        <viz type=\"splunk_monitoring_console.heatmap\">\n            <search>\n                <query>\n                    `dmc_set_index_introspection` search_group=$role$ search_group=\"$group$\" sourcetype=splunk_resource_usage component=Hostwide\n                    | eval total_cpu_usage = 'data.cpu_system_pct' + 'data.cpu_user_pct'\n                    | eval server = host\n                    | `dmc_set_bin_for_timechart`\n                    | stats $countCPUFunc$(total_cpu_usage) as cpu_usage by server _time\n                    | `dmc_cpu_usage_rangemap_and_timechart`\n                </query>\n                <earliest>$time.earliest$</earliest>\n                <latest>$time.latest$</latest>\n            </search>\n            <drilldown>\n                <condition match=\"isnotnull('row._span')\">\n                    <set token=\"drilldown_cpu_usage\">true</set>\n                    <set token=\"drilldown_cpu_usage_earliest\">$row.earliest$</set>\n                    <eval token=\"drilldown_cpu_usage_earliest_label\">$row.earliest_label$</eval>\n                    <set token=\"drilldown_cpu_usage_latest\">$row.latest$</set>\n                    <eval token=\"drilldown_cpu_usage_latest_label\">$row.latest_label$</eval>\n                    <set token=\"drilldown_cpu_usage_metric\">$row.drilldown_indexing_rate_metric$</set>\n                    <set token=\"drilldown_cpu_usage_count\">$row.numInstances$</set>\n                </condition>\n                <condition/>\n            </drilldown>\n        </viz>\n      <chart rejects=\"$split_by_host$\">\n        <search>\n          <query>\n`dmc_set_index_introspection` search_group=$role$ search_group=\"$group$\" sourcetype=splunk_resource_usage component=Hostwide\n| eval total_cpu_usage = 'data.cpu_system_pct' + 'data.cpu_user_pct' \n| eval server = host \n| `dmc_set_bin_for_timechart`\n| stats $countCPUFunc$(total_cpu_usage) as cpu_usage by server _time\n| `dmc_cpu_usage_rangemap_and_timechart`\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Instance count</option>\n        <option name=\"charting.fieldColors\">{\"80-100%\": 0xD85D3C, \"60-80%\": 0xF7902B, \"0-60%\":0x9AC23C, \"100%+\": 0x956D95, \"abnormal\":0xC4C4C0}</option>\n        <drilldown>\n          <condition match=\"isnotnull('row._span')\">\n            <set token=\"drilldown_cpu_usage\">true</set>\n            <set token=\"drilldown_cpu_usage_earliest\">$earliest$</set>\n            <eval token=\"drilldown_cpu_usage_earliest_label\">strftime(earliest, \"%m/%d/%Y %H:%M:%S\")</eval>\n            <set token=\"drilldown_cpu_usage_latest\">$latest$</set>\n            <eval token=\"drilldown_cpu_usage_latest_label\">strftime(latest, \"%m/%d/%Y %H:%M:%S\")</eval>\n            <set token=\"drilldown_cpu_usage_metric\">$click.name2$</set>\n            <set token=\"drilldown_cpu_usage_count\">$click.value2$</set>\n          </condition>\n          <condition />\n        </drilldown>\n      </chart>\n      <table depends=\"$drilldown_cpu_usage$\" rejects=\"$split_by_host$\" id=\"drilldown_cpu_usage\">\n        <title>Time range: $drilldown_cpu_usage_earliest_label$ ~ $drilldown_cpu_usage_latest_label$. Metric: $countCPUFunc$ CPU usage range: $drilldown_cpu_usage_metric$. ($drilldown_cpu_usage_count$ instances)</title>\n        <search>\n          <query>`dmc_drilldown_resource_usage_deployment_cpu_usage(\"$role$\", \"$group$\", $countCPUFunc$, $drilldown_cpu_usage_metric$)`</query>\n          <earliest>$drilldown_cpu_usage_earliest$</earliest>\n          <latest>$drilldown_cpu_usage_latest$</latest>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <html depends=\"$drilldown_cpu_usage$\" rejects=\"$split_by_host$\">\n        <a data-unset-token=\"drilldown_cpu_usage\">Close this drilldown table</a>\n      </html>\n     </panel>\n    </row>\n    <row>\n     <panel depends=\"$split_by_host$\">\n          <title>$countCPUFuncLabel$ CPU Usage</title>\n          <input type=\"dropdown\" token=\"countCPUFunc\" searchWhenChanged=\"true\">\n              <label>Aggregation</label>\n              <showClearButton>false</showClearButton>\n              <default>Median</default>\n              <choice value=\"Avg\">Average</choice>\n              <choice value=\"Median\">Median</choice>\n              <choice value=\"Min\">Minimum</choice>\n              <choice value=\"Max\">Maximum</choice>\n              <choice value=\"Perc90\">90th Percentile</choice>\n              <choice value=\"First\">Sampled</choice>\n              <change>\n                  <set token=\"countCPUFuncLabel\">$label$</set>\n              </change>\n          </input>\n        <chart>\n        <search>\n          <query>\n`dmc_set_index_introspection` search_group=$role$ search_group=\"$group$\" sourcetype=splunk_resource_usage component=Hostwide\n| eval total_cpu_usage = 'data.cpu_system_pct' + 'data.cpu_user_pct'\n|`dmc_timechart` partial=f limit=25 $countCPUFunc$(total_cpu_usage) AS cpu_usage by host\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">CPU Usage (%)</option>\n        <option name=\"charting.axisY.minimumNumber\">0</option>\n        <option name=\"charting.axisY.maximumNumber\">100</option>\n        <option name=\"charting.fieldColors\">{\"80-100%\": 0xD85D3C, \"60-80%\": 0xF7902B, \"0-60%\":0x9AC23C, \"100%+\": 0x956D95, \"abnormal\":0xC4C4C0}</option>\n      </chart>\n      <html rejects=\"$split_by_host$\">\n        <p>Count of instances grouped by $countCPUFuncLabel$ machine-wide CPU usage over time.</p>\n      </html>\n      <html depends=\"$split_by_host$\">\n        <p>$countCPUFuncLabel$ machine-wide CPU usage over time by instance.</p>\n      </html>\n    </panel>\n    <panel rejects=\"$snapshot$\">\n      <title>Deployment-Wide $avgCPUFuncLabel$ CPU Usage</title>\n      <input type=\"dropdown\" token=\"avgCPUFunc\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>Median</default>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <change>\n          <set token=\"avgCPUFuncLabel\">$label$</set>\n        </change>\n      </input>\n      <chart>\n        <search>\n          <query>\n`dmc_set_index_introspection` search_group=$role$ search_group=\"$group$\" sourcetype=splunk_resource_usage component=Hostwide\n| eval total_cpu_usage = ('data.cpu_system_pct' + 'data.cpu_user_pct')\n| eval server = host\n| `dmc_set_bin`\n| stats latest(total_cpu_usage) as dedup_total_cpu_usage by server _time\n| `dmc_timechart` $avgCPUFunc$(dedup_total_cpu_usage) as cpu_usage\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">area</option>\n        <option name=\"charting.legend.placement\">none</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">CPU Usage (%)</option>\n        <option name=\"charting.axisY.majorUnit\">20</option>\n        <option name=\"charting.axisY.minimumNumber\">0</option>\n        <option name=\"charting.axisY.maximumNumber\">100</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$, $split_by_host$\" id=\"physical_memory_usage\">\n      <title>$countMemFuncLabel$ Physical Memory Usage</title>\n      <input type=\"dropdown\" token=\"countMemFunc\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>Median</default>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <change>\n          <set token=\"countMemFuncLabel\">$label$</set>\n        </change>\n      </input>\n        <html>\n            <div class=\"heatmap_toggle\"></div>\n        </html>\n        <viz type=\"splunk_monitoring_console.heatmap\">\n            <search>\n                <query>\n                    `dmc_set_index_introspection` search_group=$role$ search_group=\"$group$\" sourcetype=splunk_resource_usage component=Hostwide\n                    | eval pct_mem_used = 'data.mem_used' / 'data.mem'\n                    | eval server = host\n                    | `dmc_set_bin_for_timechart`\n                    | stats $countMemFunc$(pct_mem_used) as pct_mem_used by server _time\n                    | `dmc_memory_usage_rangemap_and_timechart`\n                </query>\n                <earliest>$time.earliest$</earliest>\n                <latest>$time.latest$</latest>\n            </search>\n            <drilldown>\n                <condition match=\"isnotnull('row._span')\">\n                    <set token=\"drilldown_memory_usage\">true</set>\n                    <set token=\"drilldown_memory_usage_earliest\">$row.earliest$</set>\n                    <eval token=\"drilldown_memory_usage_earliest_label\">$row.earliest_label$</eval>\n                    <set token=\"drilldown_memory_usage_latest\">$row.latest$</set>\n                    <eval token=\"drilldown_memory_usage_latest_label\">$row.latest_label$</eval>\n                    <set token=\"drilldown_memory_usage_metric\">$row.drilldown_indexing_rate_metric$</set>\n                    <set token=\"drilldown_memory_usage_count\">$row.numInstances$</set>\n                </condition>\n                <condition />\n            </drilldown>\n        </viz>\n      <chart rejects=\"$split_by_host$\">\n        <search>\n          <query>\n`dmc_set_index_introspection` search_group=$role$ search_group=\"$group$\" sourcetype=splunk_resource_usage component=Hostwide\n| eval pct_mem_used = 'data.mem_used' / 'data.mem' \n| eval server = host \n| `dmc_set_bin_for_timechart`\n| stats $countMemFunc$(pct_mem_used) as pct_mem_used by server _time\n| `dmc_memory_usage_rangemap_and_timechart`\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Instance count</option>\n        <option name=\"charting.fieldColors\">{\"80-100%\": 0xD85D3C, \"60-80%\": 0xF7902B, \"0-60%\":0x9AC23C, \"abnormal\":0xC4C4C0}</option>\n        <drilldown>\n          <condition match=\"isnotnull('row._span')\">\n            <set token=\"drilldown_memory_usage\">true</set>\n            <set token=\"drilldown_memory_usage_earliest\">$earliest$</set>\n            <eval token=\"drilldown_memory_usage_earliest_label\">strftime(earliest, \"%m/%d/%Y %H:%M:%S\")</eval>\n            <set token=\"drilldown_memory_usage_latest\">$latest$</set>\n            <eval token=\"drilldown_memory_usage_latest_label\">strftime(latest, \"%m/%d/%Y %H:%M:%S\")</eval>\n            <set token=\"drilldown_memory_usage_metric\">$click.name2$</set>\n            <set token=\"drilldown_memory_usage_count\">$click.value2$</set>\n          </condition>\n          <condition />\n        </drilldown>\n      </chart>\n      <table depends=\"$drilldown_memory_usage$\" rejects=\"$split_by_host$\" id=\"drilldown_memory_usage\">\n        <title>Time range: $drilldown_memory_usage_earliest_label$ ~ $drilldown_memory_usage_latest_label$. Metric: $countMemFunc$ memory usage range: $drilldown_memory_usage_metric$. ($drilldown_memory_usage_count$ instances)</title>\n        <search>\n          <query>`dmc_drilldown_resource_usage_deployment_memory_usage(\"$role$\", \"$group$\", $countMemFunc$, $drilldown_memory_usage_metric$)`</query>\n          <earliest>$drilldown_memory_usage_earliest$</earliest>\n          <latest>$drilldown_memory_usage_latest$</latest>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <html depends=\"$drilldown_memory_usage$\" rejects=\"$split_by_host$\">\n        <a data-unset-token=\"drilldown_memory_usage\">Close this drilldown table</a>\n      </html>\n      </panel>\n    </row>\n    <row>\n      <panel depends=\"$split_by_host$\">\n          <title>$countMemFuncLabel$ Physical Memory Usage</title>\n          <input type=\"dropdown\" token=\"avgMemFunc\" searchWhenChanged=\"true\">\n              <label>Aggregation</label>\n              <showClearButton>false</showClearButton>\n              <default>Median</default>\n              <choice value=\"Avg\">Average</choice>\n              <choice value=\"Median\">Median</choice>\n              <choice value=\"Min\">Minimum</choice>\n              <choice value=\"Max\">Maximum</choice>\n              <choice value=\"Perc90\">90th Percentile</choice>\n              <choice value=\"First\">Sampled</choice>\n              <change>\n                  <set token=\"avgMemFuncLabel\">$label$</set>\n              </change>\n          </input>\n      <chart>\n        <search>\n          <query>\n`dmc_set_index_introspection` search_group=$role$ search_group=\"$group$\" sourcetype=splunk_resource_usage component=Hostwide\n| eval pct_mem_used = 'data.mem_used' / 'data.mem' * 100\n| eval server = host\n| `dmc_set_bin_for_timechart`\n| `dmc_timechart` partial=f limit=25 $countMemFunc$(pct_mem_used) AS pct_mem_used by server\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Memory Usage (%)</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">20</option>\n        <option name=\"charting.axisY.maximumNumber\">100</option>\n        <option name=\"charting.axisY.minimumNumber\">0</option>\n        <option name=\"charting.fieldColors\">{\"80-100%\": 0xD85D3C, \"60-80%\": 0xF7902B, \"0-60%\":0x9AC23C, \"abnormal\":0xC4C4C0}</option>\n      </chart>\n      <html rejects=\"$split_by_host$\">\n        <p>Count of instances grouped by $countMemFuncLabel$ machine-wide physical memory usage over time.</p>\n      </html>\n      <html depends=\"$split_by_host$\">\n        <p>$countMemFuncLabel$ machine-wide physical memory usage over time by instance.</p>\n      </html>\n    </panel>\n    <panel rejects=\"$snapshot$\">\n      <title>Deployment-Wide $avgMemFuncLabel$ Physical Memory Usage</title>\n      <input type=\"dropdown\" token=\"avgMemFunc\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>Median</default>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <change>\n          <set token=\"avgMemFuncLabel\">$label$</set>\n        </change>\n      </input>\n      <chart>\n        <search>\n          <query>\n`dmc_set_index_introspection` search_group=$role$ search_group=\"$group$\" sourcetype=splunk_resource_usage component=Hostwide\n| eval pct_mem_usage = 'data.mem_used' / 'data.mem' * 100 \n| eval server = host \n| `dmc_set_bin`\n| stats latest(pct_mem_usage) as dedup_pct_mem_usage by server _time \n| `dmc_timechart` $avgMemFunc$(dedup_pct_mem_usage) as pct_mem_usage\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">area</option>\n        <option name=\"charting.legend.placement\">none</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Memory Usage (%)</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">20</option>\n        <option name=\"charting.axisY.maximumNumber\">100</option>\n        <option name=\"charting.axisY.minimumNumber\">0</option>\n      </chart>\n    </panel>\n  </row>\n  <search id=\"iostats_log_base\">\n    <query>\n      `dmc_set_index_introspection` search_group=$role$ search_group=\"$group$\" sourcetype=splunk_resource_usage component=IOStats\n      | eval mount_point = 'data.mount_point'\n      | eval cpu_pct = 'data.cpu_pct'\n      | eval host_mountpoint = host.\":\".mount_point\n      | `dmc_set_bin_for_iostats`\n    </query>\n    <earliest>$time.earliest$</earliest>\n    <latest>$time.latest$</latest>\n  </search>\n  <row>\n    <panel rejects=\"$snapshot$, $split_by_host$\" id=\"io_bandwidth_utilization\">\n      <title>$countIOstatsFuncLabel$ Storage I/O Saturation</title>\n      <input type=\"dropdown\" token=\"countIOstatsFunc\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>Median</default>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <change>\n          <set token=\"countIOstatsFuncLabel\">$label$</set>\n        </change>\n      </input>\n        <html>\n            <div class=\"heatmap_toggle\"></div>\n        </html>\n        <viz type=\"splunk_monitoring_console.heatmap\">\n            <search base=\"iostats_log_base\">\n                <query>\n                    stats $countIOstatsFunc$(cpu_pct) as cpu_pct by host_mountpoint, _time\n                    | `dmc_iostats_rangemap(cpu_pct)`\n                    | `dmc_timechart_for_iostats` dc(host_mountpoint) as count by range\n                    | fields _time, \"80-100%\", \"60-80%\", \"0-60%\", \"abnormal\"\n                </query>\n                <earliest>$time.earliest$</earliest>\n                <latest>$time.latest$</latest>\n            </search>\n            <drilldown>\n                <condition match=\"isnotnull('row._span')\">\n                    <set token=\"drilldown_iostats\">true</set>\n                    <set token=\"drilldown_iostats_earliest\">$row.earliest$</set>\n                    <eval token=\"drilldown_iostats_earliest_label\">$row.earliest_label$</eval>\n                    <set token=\"drilldown_iostats_latest\">$row.latest$</set>\n                    <eval token=\"drilldown_iostats_latest_label\">$row.latest_label$</eval>\n                    <set token=\"drilldown_iostats_metric\">$row.drilldown_indexing_rate_metric$</set>\n                    <set token=\"drilldown_iostats_count\">$row.numInstances$</set>\n                </condition>\n                <condition />\n            </drilldown>\n        </viz>\n      <chart rejects=\"$split_by_host$\">\n        <search base=\"iostats_log_base\">\n          <query>\n            stats $countIOstatsFunc$(cpu_pct) as cpu_pct by host_mountpoint, _time\n            | `dmc_iostats_rangemap(cpu_pct)`\n            | `dmc_timechart_for_iostats` dc(host_mountpoint) as count by range\n            | fields _time, \"80-100%\", \"60-80%\", \"0-60%\", \"abnormal\"\n          </query>\n        </search>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.fieldColors\">{\"80-100%\": 0xD85D3C, \"60-80%\": 0xF7902B, \"0-60%\":0x9AC23C, \"abnormal\":0xC4C4C0}</option>\n        <option name=\"charting.axisTitleY.text\">Mount Point Count</option>\n        <drilldown>\n          <condition match=\"isnotnull('row._span')\">\n            <set token=\"drilldown_iostats\">true</set>\n            <set token=\"drilldown_iostats_earliest\">$earliest$</set>\n            <eval token=\"drilldown_iostats_earliest_label\">strftime(earliest, \"%m/%d/%Y %H:%M:%S\")</eval>\n            <set token=\"drilldown_iostats_latest\">$latest$</set>\n            <eval token=\"drilldown_iostats_latest_label\">strftime(latest, \"%m/%d/%Y %H:%M:%S\")</eval>\n            <set token=\"drilldown_iostats_metric\">$click.name2$</set>\n            <set token=\"drilldown_iostats_count\">$click.value2$</set>\n          </condition>\n          <condition />\n        </drilldown>\n      </chart>\n      <!-- need table id to add custom cell render of the action menu -->\n      <table depends=\"$drilldown_iostats$\" rejects=\"$split_by_host$\" id=\"drilldown_iostats\">\n        <title>Time range: $drilldown_iostats_earliest_label$ ~ $drilldown_iostats_latest_label$. Metric: $countIOstatsFunc$ I/O bandwidth utilization range: $drilldown_iostats_metric$. ($drilldown_iostats_count$ instances)</title>\n        <search base=\"iostats_log_base\">\n          <query>\n            stats $countIOstatsFunc$(cpu_pct) as cpu_pct by host_mountpoint\n            | `dmc_iostats_rangemap(cpu_pct)`\n            | where range==$drilldown_iostats_metric|s$\n            | eval host = replace(host_mountpoint, \":.*\", \"\")\n            | eval mount_point = replace(host_mountpoint, \".*:\", \"\")\n            | `dmc_drilldown_join_peers_by_peerURI`\n            | eval Action = Action.\" $role$\"\n            | fields serverName, machine, mount_point, cpu_pct, range, numberOfCores, ram, version, Action\n            | rename serverName as Instance, machine as Machine, mount_point as \"Mount Point\", cpu_pct as \"I/O Bandwidth Utilizatio (%)\", range as \"Storage I/O Saturation Range\", version as Version, numberOfCores as Cores, ram as RAM\n          </query>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <html depends=\"$drilldown_iostats$\" rejects=\"$split_by_host$\">\n        <a data-unset-token=\"drilldown_iostats\">Close this drilldown table</a>\n      </html>\n      </panel>\n    </row>\n    <row>\n      <panel depends=\"$split_by_host$\">\n          <title>$countIOstatsFuncLabel$ Storage I/O Saturation</title>\n          <input type=\"dropdown\" token=\"aggIOstatsFunc\" searchWhenChanged=\"true\">\n              <label>Aggregation</label>\n              <showClearButton>false</showClearButton>\n              <default>Median</default>\n              <choice value=\"Avg\">Average</choice>\n              <choice value=\"Median\">Median</choice>\n              <choice value=\"Min\">Minimum</choice>\n              <choice value=\"Max\">Maximum</choice>\n              <choice value=\"Perc90\">90th Percentile</choice>\n              <choice value=\"First\">Sampled</choice>\n              <change>\n                  <set token=\"aggIOstatsFuncLabel\">$label$</set>\n              </change>\n          </input>\n      <chart>\n        <search base=\"iostats_log_base\">\n          <query>\n            `dmc_timechart_for_iostats` limit=25 $countIOstatsFunc$(cpu_pct) by host_mountpoint\n          </query>\n        </search>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Storage I/O Saturation (%)</option>\n        <option name=\"charting.axisY.maximumNumber\">100</option>\n        <option name=\"charting.axisY.minimumNumber\">0</option>\n      </chart>\n      <html>\n        <p>This panel shows data for instances running Splunk Enterprise 6.4+.</p>\n        <p><b>Storage I/O Saturation: </b>Percentage of time the CPU was servicing requests. Disk saturation occurs when this value is close to 100%. </p>\n        <p><a href=\"/help?location=learnmore.dmc.ru_machine.iostats\" target=\"_blank\">Learn more</a> about the source of this data. </p>\n      </html>\n    </panel>\n    <panel rejects=\"$snapshot$\">\n      <title>Deployment-wide $aggIOstatsFuncLabel$ Storage I/O Saturation</title>\n      <input type=\"dropdown\" token=\"aggIOstatsFunc\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>Median</default>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <change>\n          <set token=\"aggIOstatsFuncLabel\">$label$</set>\n        </change>\n      </input>\n      <chart>\n        <search base=\"iostats_log_base\">\n          <query>\n            `dmc_timechart_for_iostats` $aggIOstatsFunc$(cpu_pct) as cpu_pct\n          </query>\n        </search>\n        <option name=\"drilldown\">none</option>\n        <option name=\"charting.chart\">area</option>\n        <option name=\"charting.legend.placement\">none</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Storage I/O Saturation (%)</option>\n        <option name=\"charting.axisY.maximumNumber\">100</option>\n        <option name=\"charting.axisY.minimumNumber\">0</option>\n      </chart>\n      <html>\n        <p>This panel shows data for instances running Splunk Enterprise 6.4+.</p>\n        <p><b>Storage I/O Saturation: </b>Percentage of time the CPU was servicing requests. Disk saturation occurs when this value is close to 100%. </p>\n        <p><a href=\"/help?location=learnmore.dmc.ru_machine.iostats\" target=\"_blank\">Learn more</a> about the source of this data. </p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$, $split_by_host$\" id=\"disk_usage\">\n      <title>$countDiskFuncLabel$ Disk Usage</title>\n      <input type=\"dropdown\" token=\"countDiskFunc\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>Median</default>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <change>\n          <set token=\"countDiskFuncLabel\">$label$</set>\n        </change>\n      </input>\n        <html>\n            <div class=\"heatmap_toggle\"></div>\n        </html>\n        <viz type=\"splunk_monitoring_console.heatmap\">\n            <search>\n                <query>\n                    `dmc_set_index_introspection` search_group=$role$ search_group=\"$group$\" sourcetype=splunk_disk_objects component=Partitions\n                    | eval mount_point = 'data.mount_point'\n                    | eval free = if(isnotnull('data.available'), 'data.available', 'data.free')\n                    | eval pct_disk_usage = 1 - free / 'data.capacity'\n                    | `dmc_set_bin_for_timechart_for_disk_usage`\n                    | eval server_mount_point = host.\":\".mount_point\n                    | stats $countDiskFunc$(pct_disk_usage) as pct_disk_usage by server_mount_point _time\n                    | `dmc_disk_usage_rangemap_and_timechart`\n                </query>\n                <earliest>$time.earliest$</earliest>\n                <latest>$time.latest$</latest>\n            </search>\n            <drilldown>\n                <condition match=\"isnotnull('row._span')\">\n                    <set token=\"drilldown_disk_usage\">true</set>\n                    <set token=\"drilldown_disk_usage_span\">$row._span$</set>\n                    <set token=\"drilldown_disk_usage_earliest\">$row.earliest$</set>\n                    <eval token=\"drilldown_disk_usage_earliest_label\">$row.earliest_label$</eval>\n                    <set token=\"drilldown_disk_usage_latest\">$row.latest$</set>\n                    <eval token=\"drilldown_disk_usage_latest_label\">$row.latest_label$</eval>\n                    <set token=\"drilldown_disk_usage_metric\">$row.drilldown_indexing_rate_metric$</set>\n                    <set token=\"drilldown_disk_usage_count\">$row.numInstances$</set>\n                </condition>\n                <condition />\n            </drilldown>\n        </viz>\n      <chart rejects=\"$split_by_host$\">\n        <search>\n          <query>\n            `dmc_set_index_introspection` search_group=$role$ search_group=\"$group$\" sourcetype=splunk_disk_objects component=Partitions\n            | eval mount_point = 'data.mount_point'\n            | eval free = if(isnotnull('data.available'), 'data.available', 'data.free')\n            | eval pct_disk_usage = 1 - free / 'data.capacity'\n            | `dmc_set_bin_for_timechart_for_disk_usage`\n            | eval server_mount_point = host.\":\".mount_point\n            | stats $countDiskFunc$(pct_disk_usage) as pct_disk_usage by server_mount_point _time\n            | `dmc_disk_usage_rangemap_and_timechart`\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.fieldColors\">{\"80-100%\": 0xD85D3C, \"60-80%\": 0xF7902B, \"0-60%\":0x9AC23C, \"abnormal\":0xC4C4C0}</option>\n        <option name=\"charting.axisTitleY.text\">Mount point count</option>\n        <drilldown>\n          <condition match=\"isnotnull('row._span')\">\n            <set token=\"drilldown_disk_usage\">true</set>\n            <set token=\"drilldown_disk_usage_span\">$row._span$</set>\n            <set token=\"drilldown_disk_usage_earliest\">$earliest$</set>\n            <eval token=\"drilldown_disk_usage_earliest_label\">strftime(earliest, \"%m/%d/%Y %H:%M:%S\")</eval>\n            <set token=\"drilldown_disk_usage_latest\">$latest$</set>\n            <eval token=\"drilldown_disk_usage_latest_label\">strftime(latest, \"%m/%d/%Y %H:%M:%S\")</eval>\n            <set token=\"drilldown_disk_usage_metric\">$click.name2$</set>\n            <set token=\"drilldown_disk_usage_count\">$click.value2$</set>\n          </condition>\n          <condition />\n        </drilldown>\n      </chart>\n      <table depends=\"$drilldown_disk_usage$\" rejects=\"$split_by_host$\" id=\"drilldown_disk_usage\">\n        <title>Time range: $drilldown_disk_usage_earliest_label$ ~ $drilldown_disk_usage_latest_label$. Metric: $countDiskFunc$ disk usage range: $drilldown_disk_usage_metric$. ($drilldown_disk_usage_count$ instances)</title>\n        <search>\n          <query>`dmc_drilldown_resource_usage_deployment_disk_usage(\"$role$\", \"$group$\", $countDiskFunc$, $drilldown_disk_usage_metric$)`</query>\n          <earliest>$drilldown_disk_usage_earliest$</earliest>\n          <latest>$drilldown_disk_usage_latest$</latest>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <html depends=\"$drilldown_disk_usage$\" rejects=\"$split_by_host$\">\n        <a data-unset-token=\"drilldown_disk_usage\">Close this drilldown table</a>\n      </html>\n      </panel>\n    </row>\n    <row>\n      <panel depends=\"$split_by_host$\">\n          <title>$countDiskFuncLabel$ Disk Usage</title>\n          <input type=\"dropdown\" token=\"avgDiskFunc\" searchWhenChanged=\"true\">\n              <label>Aggregation</label>\n              <showClearButton>false</showClearButton>\n              <default>Median</default>\n              <choice value=\"Avg\">Average</choice>\n              <choice value=\"Median\">Median</choice>\n              <choice value=\"Min\">Minimum</choice>\n              <choice value=\"Max\">Maximum</choice>\n              <choice value=\"Perc90\">90th Percentile</choice>\n              <choice value=\"First\">Sampled</choice>\n              <change>\n                  <set token=\"avgDiskFuncLabel\">$label$</set>\n              </change>\n          </input>\n      <chart>\n        <search>\n          <query>\n            `dmc_set_index_introspection` search_group=$role$ search_group=\"$group$\" sourcetype=splunk_disk_objects component=Partitions\n            | eval mount_point = 'data.mount_point'\n            | eval free = if(isnotnull('data.available'), 'data.available', 'data.free')\n            | eval pct_disk_usage = (1 - free / 'data.capacity') * 100\n            | `dmc_set_bin_for_timechart_for_disk_usage`\n            | eval server_mount_point = host.\":\".mount_point\n            | `dmc_timechart` partial=f limit=25 $countDiskFunc$(pct_disk_usage) AS pct_disk_usage by server_mount_point\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.fieldColors\">{\"80-100%\": 0xD85D3C, \"60-80%\": 0xF7902B, \"0-60%\":0x9AC23C, \"abnormal\":0xC4C4C0}</option>\n        <option name=\"charting.axisTitleY.text\">Disk Usage (%)</option>\n        <option name=\"charting.axisY.minimumNumber\">0</option>\n        <option name=\"charting.axisY.maximumNumber\">100</option>\n      </chart>\n      <html rejects=\"$split_by_host$\">\n        <p>Count of instances grouped by $countDiskFuncLabel$ disk usage over time. This metric takes into account all partitions in use by each instance.</p>\n      </html>\n      <html depends=\"$split_by_host$\">\n        <p>$countDiskFuncLabel$ disk usage over time by instance. This metric takes into account all partitions in use by each instance.</p>\n      </html>\n    </panel>\n    <panel rejects=\"$snapshot$\">\n      <title>Deployment-Wide $avgDiskFuncLabel$ Disk Usage</title>\n      <input type=\"dropdown\" token=\"avgDiskFunc\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>Median</default>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <change>\n          <set token=\"avgDiskFuncLabel\">$label$</set>\n        </change>\n      </input>\n      <chart>\n        <search>\n          <query>\n            `dmc_set_index_introspection` search_group=$role$ search_group=\"$group$\" sourcetype=splunk_disk_objects component=Partitions\n            | eval server = host\n            | eval mount_point = 'data.mount_point'\n            | eval free = if(isnotnull('data.available'), 'data.available', 'data.free')\n            | eval pct_disk_usage = (1 - free / 'data.capacity') * 100\n            | `dmc_set_bin_for_disk_usage`\n            | stats latest(pct_disk_usage) as dedup_pct_disk_usage by server mount_point _time\n            | `dmc_timechart_for_disk_usage` $avgDiskFunc$(dedup_pct_disk_usage) as pct_disk_usage\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">area</option>\n        <option name=\"charting.legend.placement\">none</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Disk Usage (%)</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">20</option>\n        <option name=\"charting.axisY.maximumNumber\">100</option>\n        <option name=\"charting.axisY.minimumNumber\">0</option>\n      </chart>\n      <html>\n        <p>This metric takes into account all partitions in use by each Splunk Enterprise instance.</p>\n      </html>\n    </panel>\n  </row>\n</form>",
"eai:type": "views",
"name": "resource_usage_deployment",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" script=\"cell_fill_gauge.js, common_control.js\">\n  <label>Resource Usage: Instance</label>\n  <fieldset autoRun=\"true\" submitButton=\"false\">\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"role\">\n      <label>Role</label>\n      <showClearButton>false</showClearButton>\n      <choice value=\"*\">All</choice>\n      <default>*</default>\n      <search>\n        <query>\n          | `dmc_get_groups`\n          | search search_group=\"dmc_group_*\"\n        </query>\n      </search>\n      <fieldForLabel>label</fieldForLabel>\n      <fieldForValue>search_group</fieldForValue>\n    </input>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"dmc_group\">\n      <label>Group</label>\n      <showClearButton>false</showClearButton>\n      <search>\n        <query>\n          | `dmc_get_groups_containing_role($role$)`\n          | search search_group!=\"dmc_group_*\"\n        </query>\n      </search>\n      <fieldForLabel>label</fieldForLabel>\n      <fieldForValue>search_group</fieldForValue>\n      <choice value=\"*\">All</choice>\n      <selectFirstChoice>true</selectFirstChoice>\n    </input>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"splunk_server\">\n      <label>Instance</label>\n      <showClearButton>false</showClearButton>\n      <populatingSearch fieldForLabel=\"serverName\" fieldForValue=\"serverName\">\n        | `dmc_get_instance_info($dmc_group$)`\n        | search search_group=\"$role$\"\n      </populatingSearch>\n      <selectFirstChoice>true</selectFirstChoice>\n      <change>\n        <condition value=\"*\">\n          <set token=\"host\">$row.host$</set>\n        </condition>\n      </change>\n    </input>\n  </fieldset>\n  <row>\n    <panel>\n      <title>Machine Information</title>\n      <table>\n        <searchString>\n| inputlookup dmc_assets\n| search serverName = $splunk_server$\n| stats first(serverName) as serverName, first(host) as host, first(machine) as machine\n| join type=outer serverName [\n  | rest splunk_server=$splunk_server$ /services/server/info\n  | fields serverName, numberOfCores, numberOfVirtualCores, physicalMemoryMB, os_name, cpu_arch\n]\n| `dmc_get_core_info`\n| fields machine core_info physicalMemoryMB os_name cpu_arch\n| rename machine as Machine, core_info AS \"CPU Cores (Physical / Virtual)\", physicalMemoryMB as \"Physical Memory Capacity (MB)\", os_name as \"Operating System\", cpu_arch as \"CPU Architecture\"\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"refresh.time.visible\">false</option>\n        <option name=\"drilldown\">row</option>\n        <drilldown>\n          <link target=\"_blank\">\n            <![CDATA[resource_usage_machine?form.machine=$row.Machine$]]>\n          </link>\n        </drilldown>\n      </table>\n      <html>\n        <p>Click on machine name for more details.</p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel>\n      <html>\n        <h2>\n          <span>Select views: </span>\n          <span id=\"link-switcher-view\">\n            <a href=\"#\" class=\"btn-pill active\" data-item=\"all\">All</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"snapshot\">Snapshot</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"historical\">Historical</a>\n          </span>\n        </h2>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Snapshots</title>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Physical Memory Usage by Process Class</title>\n      <chart>\n        <searchString>\n        | rest splunk_server=$splunk_server$ /services/server/status/resource-usage/splunk-processes\n        | eval sid = 'search_props.sid'\n        | `dmc_classify_processes`\n        | eval x=\"memory_usage\"\n        | chart sum(mem_used) AS \"Memory Usage\" over x by process_class\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">collapsed</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">false</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.nullValueMode\">gaps</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.axisTitleY.text\">Memory Usage (MB)</option>\n        <option name=\"charting.axisTitleX.text\"></option>\n        <option name=\"charting.axisLabelsX.majorLabelVisibility\">hide</option>\n        <option name=\"refresh.auto.interval\">60</option>\n        <option name=\"refresh.time.visible\">false</option>\n        <drilldown target=\"_blank\">\n          <condition series=\"*\">\n            <link target=\"_blank\"><![CDATA[search?q=`dmc_resource_usage_instance_drilldown($host$)`&earliest=$earliest$&latest=$latest$]]></link>\n          </condition>\n        </drilldown>\n      </chart>\n      <html>\n        <p>Process class can be splunkd server, search, Splunk Web, index service, scripted input, KVStore, or other. <a class=\"dmc_process_class_learn_more external\" target=\"_blank\">Learn more</a></p>\n      </html>\n    </panel>\n    <panel rejects=\"$historical$\">\n      <title>CPU Usage by Process Class</title>\n      <chart>\n        <searchString>\n        | rest splunk_server=$splunk_server$ /services/server/status/resource-usage/splunk-processes\n        | eval sid = 'search_props.sid'\n        | `dmc_classify_processes`\n        | eval x=\"cpu_usage\"\n        | chart sum(pct_cpu) AS \"CPU Usage\" over x by process_class\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">collapsed</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">false</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.nullValueMode\">gaps</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.axisTitleY.text\">CPU Usage (%)</option>\n        <option name=\"charting.axisTitleX.text\"></option>\n        <option name=\"charting.axisLabelsX.majorLabelVisibility\">hide</option>\n        <option name=\"charting.axisY.minimumNumber\">0</option>\n        <option name=\"refresh.auto.interval\">60</option>\n        <option name=\"refresh.time.visible\">false</option>\n        <drilldown target=\"_blank\">\n          <condition series=\"*\">\n          <link target=\"_blank\"><![CDATA[search?q=`dmc_resource_usage_instance_drilldown($host$)`&earliest=$earliest$&latest=$latest$]]></link>\n          </condition>\n        </drilldown>\n      </chart>\n      <html>\n        <p>CPU Usage - 100% is equal to 1 CPU core.</p>\n        <p>Process class can be splunkd server, search, Splunk Web, index service, scripted input, KVStore, or other. <a class=\"dmc_process_class_learn_more external\" target=\"_blank\">Learn more</a></p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Disk Usage</title>\n      <table id=\"table1\">\n        <searchString>\n        | rest splunk_server=$splunk_server$ /services/server/status/partitions-space\n        | eval free = if(isnotnull(available), available, free)\n        | eval usage = round((capacity - free) / 1024, 2)\n        | eval capacity = round(capacity / 1024, 2)\n        | eval compare_usage = usage.\" / \".capacity\n        | eval pct_usage = round(usage / capacity * 100, 2)\n        | stats first(fs_type) as fs_type first(compare_usage) AS compare_usage first(pct_usage) as pct_usage by mount_point        \n        | rename mount_point as \"Mount Point\", fs_type as \"File System Type\", compare_usage as \"Disk Usage (GB)\", pct_usage as \"Disk Usage (%)\"\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"wrap\">true</option>\n        <option name=\"rowNumbers\">false</option>\n        <option name=\"dataOverlayMode\">none</option>\n        <option name=\"drilldown\">none</option>\n        <option name=\"count\">10</option>\n        <option name=\"refresh.auto.interval\">60</option>\n        <option name=\"refresh.time.visible\">false</option>\n      </table>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Historical Charts</title>\n      <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n        <label>Time Range:</label>\n        <default>\n          <earliestTime>-4h@m</earliestTime>\n          <latestTime>now</latestTime>\n        </default>\n      </input>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>$funcPerpMemLabel$ Physical Memory Usage by Process Class</title>\n      <input type=\"dropdown\" token=\"funcPerpMem\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <default>Median</default>\n        <change>\n          <set token=\"funcPerpMemLabel\">$label$</set>\n        </change>\n      </input>\n      <chart>\n        <searchString>\n        `dmc_set_index_introspection` sourcetype=splunk_resource_usage component=PerProcess host=$host$\n        | `dmc_rename_introspection_fields`\n        | `dmc_classify_processes`\n        | `dmc_resource_usage_by_processes_timechart(mem_used, $funcPerpMem$)`\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">false</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.chart.nullValueMode\">zero</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.axisTitleY.text\">Memory Usage (MB)</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <drilldown target=\"_blank\">\n          <condition series=\"*\">\n            <link target=\"_blank\"><![CDATA[search?q=`dmc_resource_usage_instance_drilldown($host$)`&earliest=$earliest$&latest=$latest$]]></link>\n          </condition>\n        </drilldown>\n      </chart>\n      <html>\n        <p>Process class can be splunkd server, search, Splunk Web, index service, scripted input, KVStore, or other. <a class=\"dmc_process_class_learn_more external\" target=\"_blank\">Learn more</a></p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>$funcPerpCPULabel$ CPU Usage by Process Class</title>\n      <input type=\"dropdown\" token=\"funcPerpCPU\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <default>Median</default>\n        <change>\n          <set token=\"funcPerpCPULabel\">$label$</set>\n        </change>\n      </input>\n      <chart>\n        <searchString>\n        `dmc_set_index_introspection` sourcetype=splunk_resource_usage component=PerProcess host=$host$\n        | `dmc_rename_introspection_fields`\n        | `dmc_classify_processes`\n        | `dmc_resource_usage_by_processes_timechart(pct_cpu, $funcPerpCPU$)`\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">false</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.chart.nullValueMode\">zero</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">default</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">CPU Usage (%)</option>\n        <drilldown target=\"_blank\">\n          <condition series=\"*\">\n            <link target=\"_blank\"><![CDATA[search?q=`dmc_resource_usage_instance_drilldown($host$)`&earliest=$earliest$&latest=$latest$]]></link>\n          </condition>\n        </drilldown>\n      </chart>\n      <html>\n        <p>CPU Usage - 100% is equal to 1 CPU core.</p>\n        <p>Process class can be splunkd server, search, Splunk Web, index service, scripted input, KVStore, or other. <a class=\"dmc_process_class_learn_more external\" target=\"_blank\">Learn more</a></p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>$funcDiskLabel$ Disk Usage</title>\n      <input type=\"dropdown\" token=\"mount_point\" searchWhenChanged=\"true\">\n        <label>Mount Point</label>\n        <showClearButton>false</showClearButton>\n        <selectFirstChoice>true</selectFirstChoice>\n        <populatingSearch earliest=\"0\" latest=\"\" fieldForLabel=\"mount_point\" fieldForValue=\"mount_point\">\n        | rest splunk_server=$splunk_server$ /services/server/status/partitions-space\n        | stats count by mount_point\n        </populatingSearch>\n      </input>\n      <input type=\"dropdown\" token=\"funcDisk\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <default>Median</default>\n        <change>\n          <set token=\"funcDiskLabel\">$label$</set>\n        </change>\n      </input>\n      <chart>\n        <searchString>\n        `dmc_set_index_introspection` host=$host$ sourcetype=splunk_disk_objects component=Partitions data.mount_point=$mount_point|s$\n        | eval free = if(isnotnull('data.available'), 'data.available', 'data.free')\n        | eval usage = round(('data.capacity' - free) / 1024, 2)\n        | eval capacity = round('data.capacity' / 1024, 2)\n        | `dmc_timechart_for_disk_usage` latest(capacity) as Capacity $funcDisk$(usage) as Usage\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">false</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">area</option>\n        <option name=\"charting.lineDashStyle\">shortDash</option>\n        <option name=\"charting.chart.overlayFields\">Capacity</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">default</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.axisY.minimumNumber\">0</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">GB</option>\n        <drilldown target=\"_blank\">\n          <condition series=\"*\">\n            <link target=\"_blank\"><![CDATA[search?q=`dmc_resource_usage_instance_drilldown($host$)`&earliest=$earliest$&latest=$latest$]]></link>\n          </condition>\n        </drilldown>\n      </chart>\n    </panel>\n  </row>\n</form>",
"eai:type": "views",
"name": "resource_usage_instance",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" script=\"cell_fill_gauge.js, common_control.js\">\n  <label>Resource Usage: Machine</label>\n  <fieldset autoRun=\"true\" submitButton=\"false\">\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"machine\">\n      <label>Machine:</label>\n      <populatingSearch fieldForLabel=\"machine\" fieldForValue=\"machine\">\n        | `dmc_get_machine_info`\n      </populatingSearch> \n      <selectFirstChoice>true</selectFirstChoice>\n      <showClearButton>false</showClearButton>\n      <change>\n        <condition value=\"*\">\n          <set token=\"host\">$row.host$</set>\n          <set token=\"splunk_server\">$row.serverName$</set>\n          <unset token=\"form.hostDiskUsageHistorical\" />\n          <unset token=\"form.instanceDiskUsageSnapshot\" />\n        </condition>\n      </change>\n    </input>\n  </fieldset>\n  <searchTemplate>\n| rest splunk_server=$splunk_server$ /services/server/info \n| fields numberOfCores, numberOfVirtualCores, physicalMemoryMB\n| eval capacity=[rest splunk_server=$splunk_server$ /services/server/status/partitions-space | return $capacity]\n  </searchTemplate>\n  <row>\n    <panel>\n      <table>\n        <title>Machine Information</title>\n        <searchString>\n| inputlookup dmc_assets\n| search serverName = $splunk_server$\n| stats first(serverName) as serverName, first(host) as host, first(machine) as machine\n| join type=outer serverName [\n  | rest splunk_server=$splunk_server$ /services/server/info\n  | fields serverName, numberOfCores, numberOfVirtualCores, physicalMemoryMB, os_name, cpu_arch\n]\n| `dmc_get_core_info`\n| fields machine core_info physicalMemoryMB os_name cpu_arch\n| rename machine as Machine, core_info AS \"CPU Cores (Physical / Virtual)\", physicalMemoryMB AS \"Physical Memory Capacity (MB)\", cpu_arch AS \"CPU Architecture\", os_name AS \"Operating System\"\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"refresh.time.visible\">false</option>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <table>\n        <title>$countInstance$ Splunk Enterprise Instance(s) on this Machine</title>\n        <search>\n          <query>\n| inputlookup dmc_assets\n| search machine=$machine$\n| mvcombine search_group\n| join type=outer peerURI\n  [| rest splunk_server=local /services/search/distributed/peers\n   | rename title as peerURI]\n| join type=outer peerURI [|rest splunk_server=local /services/server/info\n  | eval peerURI = \"localhost\"\n  | eval status = \"Up\"\n  | fields peerURI, status, version]\n| join type=outer peerURI [|rest splunk_server=local /services/server/settings\n  | eval peerURI = \"localhost\"\n  | fields peerURI, mgmtHostPort]\n| join peerURI\n  [| `dmc_get_instance_roles` ]\n| eval status = if(status == \"Up\", status, \"Unreachable\")\n| makemv role\n| fields serverName, peerURI, role, version, status, mgmtHostPort\n| eval peerURI = if(peerURI == \"localhost\", \"localhost:\".mgmtHostPort, peerURI)\n| fields - mgmtHostPort\n| rename serverName as Instance, peerURI as URI, status as \"Status\", role as Role, version as \"Version\"\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n          <done>\n            <set token=\"countInstance\">$job.resultCount$</set>\n          </done>\n        </search>\n        <option name=\"refresh.time.visible\">false</option>\n        <option name=\"drilldown\">row</option>\n        <drilldown>\n          <link target=\"_blank\">\n            <![CDATA[resource_usage_instance?form.splunk_server=$row.Instance$]]>\n          </link>\n        </drilldown>\n      </table>\n      <html>\n        <p>Click on instance name for more details.</p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel>\n      <html>\n        <h2>\n          <span>Select views: </span>\n          <span id=\"link-switcher-view\">\n            <a href=\"#\" class=\"btn-pill active\" data-item=\"all\">All</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"snapshot\">Snapshot</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"historical\">Historical</a>\n          </span>\n        </h2>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Snapshots</title>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Load Average</title>\n      <search id=\"hostwide_metrics_api_base\">\n        <query>\n| rest splunk_server=$splunk_server$ /services/server/status/resource-usage/hostwide \n| stats first(normalized_load_avg_1min) as load_average first(cpu_system_pct) as system, first(cpu_user_pct) as user first(mem) AS mem first(mem_used) AS mem_used by splunk_server\n        </query>\n      </search>\n      <single>\n        <search base=\"hostwide_metrics_api_base\">\n          <query>fields load_average</query>\n        </search>\n        <option name=\"height\">80px</option>\n        <option name=\"useColors\">true</option>\n        <option name=\"numberPrecision\">0.00</option>\n        <option name=\"rangeValues\">[20, 50]</option>\n        <option name=\"rangeColors\">[\"0x5cc05c\", \"0xed8440\", \"0xd6563c\"]</option>\n      </single>\n    </panel>\n    <panel rejects=\"$historical$\">\n      <title>CPU Usage</title>\n      <chart>\n        <search base=\"hostwide_metrics_api_base\">\n          <query>fields splunk_server system user</query>\n        </search>\n        <option name=\"charting.axisTitleX.visibility\">collapsed</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.axisTitleY.text\">CPU Usage (%)</option>\n        <option name=\"charting.axisY.maximumNumber\">100</option>\n        <option name=\"charting.axisY.minimumNumber\">0</option>\n        <option name=\"charting.axisLabelsX.majorLabelVisibility\">hide</option>\n        <option name=\"charting.legend.placement\">right</option>\n      </chart>\n    </panel>\n    <panel rejects=\"$historical$\">\n      <title>Physical Memory Usage (MB)</title>\n      <chart>\n        <search base=\"hostwide_metrics_api_base\">\n          <query>\nfields mem mem_used\n| eval perc_80=mem*0.8 \n| eval perc_90=mem*0.9 \n| eval mem_used=round(mem_used, 0) \n| gauge mem_used 0 perc_80 perc_90, mem\n          </query>\n        </search>\n        <option name=\"charting.chart\">fillerGauge</option>\n        <option name=\"charting.legend.placement\">none</option>\n        <option name=\"charting.axisTitleY.text\">Memory (MB)</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Disk Usage</title>\n      <input type=\"dropdown\" token=\"instanceDiskUsageSnapshot\" searchWhenChanged=\"true\">\n        <showClearButton>false</showClearButton>\n        <label>Instance</label>\n        <populatingSearch fieldForLabel=\"serverName\" fieldForValue=\"serverName\">\n          | `dmc_get_instances_on_a_machine($machine$)`\n        </populatingSearch>\n        <selectFirstChoice>true</selectFirstChoice>\n      </input>\n      <table id=\"table1\">\n        <search>\n          <query>\n| rest splunk_server=$instanceDiskUsageSnapshot$ /services/server/status/partitions-space\n| join type=outer splunk_server, mount_point [\n  | rest splunk_server=$instanceDiskUsageSnapshot$ /services/server/status/resource-usage/iostats\n  | eval iops = round(reads_ps + writes_ps)\n  | fields splunk_server, mount_point, iops, cpu_pct]\n| eval free = if(isnotnull(available), available, free)\n| eval usage = round((capacity - free) / 1024, 2)\n| eval capacity = round(capacity / 1024, 2)\n| eval compare_usage = usage.\" / \".capacity\n| eval pct_usage = round(usage / capacity * 100, 2) \n| stats first(fs_type) as fs_type first(compare_usage) as compare_usage first(pct_usage) as pct_usage, first(iops) as iops, first(cpu_pct) as cpu_pct by mount_point\n| rename mount_point as \"Mount Point\", fs_type as \"File System Type\", compare_usage as \"Disk Usage (GB)\", capacity as \"Capacity (GB)\", pct_usage as \"Disk Usage (%)\", iops as \"I/O operations per second\", cpu_pct as \"Storage I/O Saturation(%)\"\n          </query>\n        </search>\n        <option name=\"wrap\">true</option>\n        <option name=\"rowNumbers\">false</option>\n        <option name=\"dataOverlayMode\">none</option>\n        <option name=\"drilldown\">none</option>\n        <option name=\"count\">10</option>\n      </table>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Historical Charts</title>\n      <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n        <label>Time Range:</label>\n        <default>\n          <earliestTime>-4h@m</earliestTime>\n          <latestTime>now</latestTime>\n        </default>\n      </input>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>$funcLoadAvgLabel$ Load Average</title>\n      <input type=\"dropdown\" token=\"funcLoadAvg\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <default>Median</default>\n        <change>\n          <set token=\"funcLoadAvgLabel\">$label$</set>\n        </change>\n      </input>\n      <chart>\n        <searchString>\n`dmc_set_index_introspection` host=$host$ sourcetype=splunk_resource_usage component=Hostwide\n| `dmc_timechart` $funcLoadAvg$(data.normalized_load_avg_1min) AS \"load average\"\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">false</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">area</option>\n        <option name=\"charting.chart.nullValueMode\">gaps</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.axisTitleY.text\">Load Average</option>\n        <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n        <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n        <option name=\"charting.chart.bubbleSizeBy\">area</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>$funcCPULabel$ CPU Usage</title>\n      <input type=\"dropdown\" token=\"funcCPU\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <default>Median</default>\n        <change>\n          <set token=\"funcCPULabel\">$label$</set>\n        </change>\n      </input>\n      <chart>\n        <searchString>\n`dmc_set_index_introspection` host=$host$ sourcetype=splunk_resource_usage component=Hostwide\n| `dmc_timechart` $funcCPU$(data.cpu_system_pct) AS \"system\" $funcCPU$(data.cpu_user_pct) AS \"user\"\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">false</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">area</option>\n        <option name=\"charting.chart.nullValueMode\">gaps</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.axisTitleY.text\">CPU Usage (%)</option>\n        <option name=\"charting.axisY.maximumNumber\">100</option>\n        <option name=\"charting.axisY.minimumNumber\">0</option>\n        <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n        <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n        <option name=\"charting.chart.bubbleSizeBy\">area</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n      </chart>\n    </panel>\n    <panel rejects=\"$snapshot$\">\n      <title>$funcMemLabel$ Physical Memory Usage</title>\n      <input type=\"dropdown\" token=\"funcMem\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <default>Median</default>\n        <change>\n          <set token=\"funcMemLabel\">$label$</set>\n        </change>\n      </input>\n      <chart>\n        <searchString>\n`dmc_set_index_introspection` host=$host$ sourcetype=splunk_resource_usage component=Hostwide\n| `dmc_timechart` latest(data.mem) AS \"capacity\" $funcMem$(data.mem_used) AS \"usage\"\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">false</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">area</option>\n        <option name=\"charting.lineDashStyle\">shortDash</option>\n        <option name=\"charting.chart.overlayFields\">capacity</option>\n        <option name=\"charting.chart.nullValueMode\">gaps</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">default</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n        <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n        <option name=\"charting.chart.bubbleSizeBy\">area</option>\n        <option name=\"charting.axisTitleY.text\">Memory Usage (MB)</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>$funcDiskLabel$ Disk Space</title>\n      <input type=\"dropdown\" token=\"hostDiskUsageHistorical\" searchWhenChanged=\"true\">\n        <label>Instance</label>\n        <showClearButton>false</showClearButton>\n        <populatingSearch fieldForLabel=\"serverName\" fieldForValue=\"host\">\n          | `dmc_get_instances_on_a_machine($machine$)`\n        </populatingSearch>\n        <selectFirstChoice>true</selectFirstChoice>\n        <change>\n          <condition value=\"*\">\n            <set token=\"splunkServerDiskUsageHistorical\">$row.serverName$</set>\n          </condition>\n        </change>\n      </input>\n      <input type=\"dropdown\" token=\"mount_point\" searchWhenChanged=\"true\">\n        <label>Mount Point</label>\n        <showClearButton>false</showClearButton>\n        <selectFirstChoice>true</selectFirstChoice>\n        <populatingSearch earliest=\"0\" latest=\"\" fieldForLabel=\"mount_point\" fieldForValue=\"mount_point\">\n          | rest splunk_server=$splunkServerDiskUsageHistorical$ /services/server/status/partitions-space\n          | stats count by mount_point\n        </populatingSearch>\n      </input>\n      <input type=\"dropdown\" token=\"funcDisk\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <default>Median</default>\n        <change>\n          <set token=\"funcDiskLabel\">$label$</set>\n        </change>\n      </input>\n      <chart>\n        <searchString>\n`dmc_set_index_introspection` host=$hostDiskUsageHistorical$ sourcetype=splunk_disk_objects component=Partitions data.mount_point=$mount_point|s$\n| eval free = if(isnotnull('data.available'), 'data.available', 'data.free')\n| eval usage = round(('data.capacity' - free) / 1024, 2)\n| eval capacity = round('data.capacity' / 1024, 2)\n| `dmc_timechart_for_disk_usage` latest(capacity) as capacity $funcDisk$(usage) as usage\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">false</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">area</option>\n        <option name=\"charting.lineDashStyle\">shortDash</option>\n        <option name=\"charting.chart.overlayFields\">capacity</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">default</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.axisY.minimumNumber\">0</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">GB</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel>\n      <search id=\"io_log_base_search\">\n        <query>\n          `dmc_set_index_introspection` sourcetype=splunk_resource_usage component=IOStats host=$host$\n          | eval mount_point = 'data.mount_point'\n          | eval reads_ps = 'data.reads_ps'\n          | eval writes_ps = 'data.writes_ps'\n          | eval interval = 'data.interval'\n          | eval op_count = (reads_ps + writes_ps) * interval\n          | eval avg_service_ms = 'data.avg_service_ms'\n          | eval avg_wait_ms = 'data.avg_total_ms'\n          | eval cpu_pct = 'data.cpu_pct'\n          | eval network_pct = 'data.network_pct'\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <title>Average I/O Usage and Performance</title>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"io_mount_point\">\n        <label>Mount Point</label>\n        <showClearButton>false</showClearButton>\n        <search base=\"io_log_base_search\">\n          <query>\n            | stats count by mount_point\n          </query>\n        </search>\n        <fieldForLabel>mount_point</fieldForLabel>\n        <fieldForValue>mount_point</fieldForValue>\n        <selectFirstChoice>true</selectFirstChoice>\n      </input>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"io_overlay\">\n        <label>Overlay</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"avg_service_ms\">Service Time</choice>\n        <choice value=\"avg_wait_ms\">Wait Time</choice>\n        <choice value=\"avg_cpu_pct\">Storage I/O Saturation</choice>\n        <choice value=\"avg_network_pct\">Storage I/O Saturation (NFS)</choice>\n        <default>avg_wait_ms</default>\n        <change>\n          <condition value=\"avg_cpu_pct\">\n            <set token=\"io_overlay_axis_label\">%</set>\n            <set token=\"io_overlay_label\">$label$</set>\n          </condition>\n          <condition value=\"avg_network_pct\">\n            <set token=\"io_overlay_axis_label\">%</set>\n            <set token=\"io_overlay_label\">$label$</set>\n          </condition>\n          <condition value=\"*\">\n            <set token=\"io_overlay_axis_label\">Time (ms)</set>\n            <set token=\"io_overlay_label\">$label$</set>\n          </condition>\n        </change>\n      </input>\n      <chart>\n        <search base=\"io_log_base_search\">\n          <query>\n            | search data.mount_point=$io_mount_point|s$\n            | `dmc_timechart_for_iostats` per_second(op_count) as iops, avg(data.cpu_pct) as avg_cpu_pct, avg(data.avg_service_ms) as avg_service_ms, avg(data.avg_total_ms) as avg_wait_ms, avg(data.network_pct) as avg_network_pct\n            | eval iops = round(iops)\n            | eval avg_cpu_pct = round(avg_cpu_pct)\n            | eval avg_service_ms = round(avg_service_ms)\n            | eval avg_wait_ms = round(avg_wait_ms)\n            | eval avg_network_pct = round(avg_network_pct)\n            | fields _time, iops $io_overlay$\n            | rename $io_overlay$ as $io_overlay_label|s$\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.chart.overlayFields\">$io_overlay_label|s$</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Count</option>\n        <option name=\"charting.axisTitleY2.text\">$io_overlay_axis_label$</option>\n        <option name=\"charting.axisY2.enabled\">true</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n      </chart>\n      <html>\n        <p>This panel shows data for instances running Splunk Enterprise 6.4+.</p>\n        <p><b>Service Time: </b>The time for the device to execute the requests.</p>\n        <p><b>Wait Time: </b>I/O queue + execution time for requests to complete. This reflects the end-to-end time spent on the requests.</p>\n        <p><b>Storage I/O Saturation: </b>Percentage of time the CPU was servicing requests. Disk saturation occurs when this value is close to 100%. </p>\n        <p><b>Storage I/O Saturation (NFS): </b>Percentage of time network resources were used to serve requests. Only applies to NFS disks. </p>\n        <p><a href=\"/help?location=learnmore.dmc.ru_machine.iostats\" target=\"_blank\">Learn more</a> about the source of this data. </p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel>\n      <title>Average I/O Usage by Mount Point</title>\n      <chart>\n        <search base=\"io_log_base_search\">\n          <query>\n            `dmc_timechart_for_iostats` per_second(op_count) as op_count by mount_point\n          </query>\n        </search>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Count</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n      </chart>\n      <html>\n        <p>This panel shows data for instances running Splunk Enterprise 6.4+.</p>\n      </html>\n    </panel>\n    <panel>\n      <title>Average I/O Performance by Mount Point</title>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"io_perf_metric\">\n        <label>Metric</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"avg_service_ms\">Service Time</choice>\n        <choice value=\"avg_wait_ms\">Wait Time</choice>\n        <choice value=\"cpu_pct\">Storage I/O Saturation</choice>\n        <choice value=\"network_pct\">Storage I/O Saturation (NFS)</choice>\n        <default>avg_wait_ms</default>\n        <change>\n          <condition value=\"cpu_pct\">\n            <set token=\"io_perf_metric_label\">%</set>\n          </condition>\n          <condition value=\"network_pct\">\n            <set token=\"io_perf_metric_label\">%</set>\n          </condition>\n          <condition value=\"*\">\n            <set token=\"io_perf_metric_label\">Time (ms)</set>\n          </condition>\n        </change>\n      </input>\n      <chart>\n        <search base=\"io_log_base_search\">\n          <query>\n            `dmc_timechart_for_iostats` avg($io_perf_metric$) by mount_point\n          </query>\n        </search>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">$io_perf_metric_label$</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n      </chart>\n      <html>\n        <p>This panel shows data for instances running Splunk Enterprise 6.4+.</p>\n      </html>\n    </panel>\n  </row>\n</form>",
"eai:type": "views",
"name": "resource_usage_machine",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" script=\"common_control.js\">\n  <label>Scheduler Activity: Deployment</label>\n  <fieldset autoRun=\"true\" submitButton=\"false\">\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"group\">\n      <label>Group</label>\n      <showClearButton>false</showClearButton>\n      <search>\n        <query>\n          | `dmc_get_groups_containing_role(dmc_group_search_head)`\n          | search search_group=\"dmc_customgroup_*\" OR search_group=\"dmc_indexerclustergroup_*\" OR search_group=\"dmc_searchheadclustergroup_*\"\n        </query>\n      </search>\n      <fieldForLabel>label</fieldForLabel>\n      <fieldForValue>search_group</fieldForValue>\n      <choice value=\"*\">All Search Heads</choice>\n      <default>*</default>\n    </input>\n  </fieldset>\n  <row>\n    <panel>\n      <html>\n        <h2>\n          <span>Select views: </span>\n          <span id=\"link-switcher-view\">\n            <a href=\"#\" class=\"btn-pill active\" data-item=\"all\">All</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"snapshot\">Snapshot</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"historical\">Historical</a>\n          </span>\n        </h2>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Snapshots</title>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Scheduler Status by Instance ($total_instance_count$)</title>\n      <table>\n        <search id=\"scheduler_status_base\">\n          <query>\n            | rest splunk_server_group=dmc_group_search_head splunk_server_group=\"$group$\" /servicesNS/-/-/saved/searches preserve_args_case=t noProxy=t search=\"is_scheduled=1\" search=\"disabled=0\"\n            | stats count by splunk_server\n            | join splunk_server type=outer [\n              | rest splunk_server_group=dmc_group_search_head splunk_server_group=\"$group$\" /services/server/status/limits/search-concurrency\n              | fields splunk_server max_hist_scheduled_searches, max_rt_scheduled_searches]\n            | join splunk_server type=outer [\n              | rest splunk_server_group=dmc_group_search_head splunk_server_group=\"$group$\" /services/server/status/resource-usage/splunk-processes\n              | search search_props.role=\"head\" `dmc_match_all_scheduled_search_types`\n              | dedup search_props.sid\n              | stats count(eval('search_props.mode'==\"historical batch\" OR 'search_props.mode'==\"historical\")) as count_hist_search, count(eval('search_props.mode'==\"RT\" OR 'search_props.mode'==\"RT indexed\")) as count_rt_search by splunk_server ]\n            | join splunk_server type=outer [\n              | rest splunk_server_group=dmc_group_search_head splunk_server_group=\"$group$\" /services/server/info\n              | fields splunk_server, numberOfCores, numberOfVirtualCores]\n            | eval count_hist_search = if(isnull(count_hist_search), 0, count_hist_search)\n            | eval count_rt_search = if(isnull(count_rt_search), 0, count_rt_search)\n            | eval hist_concur_vs_limit = count_hist_search.\" / \".max_hist_scheduled_searches\n            | eval rt_concur_vs_limit = count_rt_search.\" / \".max_rt_scheduled_searches\n            | `dmc_get_core_info`\n            | fields splunk_server, core_info, hist_concur_vs_limit, rt_concur_vs_limit, count\n            | rename splunk_server as Instance, core_info AS \"CPU Cores (Physical / Virtual)\", hist_concur_vs_limit as \"Concurrency of Historical Scheduled Report (Running/Limit)\", rt_concur_vs_limit as \"Concurrency of Real-time Scheduled Report (Running/Limit)\", count as \"Unique Scheduled Reports\"\n          </query>\n          <done>\n            <set token=\"total_instance_count\">$job.resultCount$</set>\n          </done>\n        </search>\n        <option name=\"drilldown\">row</option>\n        <drilldown>\n          <link target=\"_blank\">scheduler_activity_instance?form.splunk_server=$row.Instance$</link>\n        </drilldown>\n      </table>\n      <html>\n        <p>If your concurrency limits are being reached, you can configure the priority of scheduled reports. <a href=\"/help?location=learnmore.dmc.sched_act_depl.scheduler_status\" class=\"external\" target=\"_blank\">Learn More.</a></p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Historical Charts</title>\n      <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n        <label>Time Range:</label>\n        <default>\n          <earliestTime>-4h@m</earliestTime>\n          <latestTime>now</latestTime>\n        </default>\n      </input>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Scheduler Execution Count by $scheduler_execution_split_by_label$</title>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"scheduler_execution_split_by\">\n        <label>Group by</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"host\">Instance</choice>\n        <choice value=\"status\">Status</choice>\n        <choice value=\"user\">User</choice>\n        <choice value=\"app\">App</choice>\n        <default>host</default>\n        <change>\n          <set token=\"scheduler_execution_split_by_label\">$label$</set>\n        </change>\n      </input>\n      <chart>\n        <search>\n          <query>\n            `dmc_set_index_internal` search_group=dmc_group_search_head search_group=\"$group$\" sourcetype=scheduler (status=\"completed\" OR status=\"skipped\" OR status=\"deferred\")\n            | timechart partial=f limit=20 count by $scheduler_execution_split_by$\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.chart.nullValueMode\">zero</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Count</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.fieldColors\">{\"completed\": 0xa2cc3e, \"deferred\": 0xf2b827, \"skipped\":0xd6563c}</option>\n      </chart>\n    </panel>\n    <panel rejects=\"$snapshot$\">\n      <title>Scheduler Execution Count Across All Instances</title>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"scheduler_execution_metric\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"sum(count) as total\">Total</choice>\n        <choice value=\"min(count), as min_count, avg(count) as avg_count, median(count) as median_count, max(count) as max_count\">Min, Average, Median, Max</choice>\n        <default>sum(count) as total</default>\n      </input>\n      <chart>\n        <search>\n          <query>\n            `dmc_set_index_internal` search_group=dmc_group_search_head search_group=\"$group$\" sourcetype=scheduler (status=\"completed\" OR status=\"skipped\" OR status=\"deferred\")\n            | bin _time minspan=1min\n            | stats count by host, _time\n            | timechart partial=f $scheduler_execution_metric$\n            | rename total as Total, min_count as Minimum, avg_count as Average, median_count as Median, max_count as Maximum\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.chart.nullValueMode\">zero</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Count</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Concurrency of Scheduled Reports by Instance</title>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"agg_report_concurrency_by_instance\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <default>Median</default>\n      </input>\n      <chart>\n        <search>\n          <query>\n            `dmc_set_index_introspection` search_group=dmc_group_search_head search_group=\"$group$\" sourcetype=splunk_resource_usage component=PerProcess data.search_props.role=\"head\" data.search_props.sid::* `dmc_match_all_scheduled_search_types`\n            | `dmc_set_bin`\n            | `dmc_rename_introspection_fields`\n            | stats dc(sid) AS distinct_search_count by _time, host\n            | `dmc_timechart` partial=f limit=20 $agg_report_concurrency_by_instance$(distinct_search_count) AS agg_distinct_search_count by host\n            | eval agg_distinct_search_count = round(agg_distinct_search_count, 0)\n            | rename agg_distinct_search_count as \"Concurrent Report Count\"\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.chart.nullValueMode\">zero</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Count</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n      </chart>\n    </panel>\n    <panel rejects=\"$snapshot$\">\n      <title>Concurrency of Scheduled Reports Across All Instances</title>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"agg_report_concurrency_all_instance\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <!--<choice value=\"sum(count) as total\">Total</choice> // this is incorrect, because a search could be long running so it is counted multiple times-->\n        <choice value=\"min(count), as min_count, avg(count) as avg_count, median(count) as median_count, max(count) as max_count\">Min, Average, Median, Max</choice>\n        <default>min(count), as min_count, avg(count) as avg_count, median(count) as median_count, max(count) as max_count</default>\n      </input>\n      <chart>\n        <search>\n          <query>\n            `dmc_set_index_introspection` search_group=dmc_group_search_head search_group=\"$group$\" sourcetype=splunk_resource_usage component=PerProcess data.search_props.role=\"head\" data.search_props.sid::* `dmc_match_all_scheduled_search_types`\n            | `dmc_set_bin`\n            | `dmc_rename_introspection_fields`\n            | stats dc(sid) AS distinct_search_count by _time, host\n            | stats sum(distinct_search_count) as count by _time\n            | `dmc_timechart` partial=f $agg_report_concurrency_all_instance$\n            | rename min_count as Minimum, avg_count as Average, median_count as Median, max_count as Maximum\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.chart.nullValueMode\">zero</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Count</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Skip Ratio by Instance</title>\n      <chart>\n        <search>\n          <query>\n            `dmc_set_index_internal` search_group=dmc_group_search_head search_group=\"$group$\" sourcetype=scheduler (status=\"completed\" OR status=\"skipped\" OR status=\"deferred\")\n            | stats count(eval(status==\"completed\" OR status==\"skipped\")) AS total_exec, count(eval(status==\"skipped\")) AS skipped_exec by _time, host, app, savedsearch_name, user, savedsearch_id\n            | `dmc_timechart` partial=f limit=20 eval(round(sum(skipped_exec) / sum(total_exec) * 100, 2)) as skip_ratio by host\n            | rename skip_ratio as \"Skip Ratio\"\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.chart.nullValueMode\">zero</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Skip Ratio (%)</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n      </chart>\n    </panel>\n    <panel rejects=\"$snapshot$\">\n      <title>Skip Ratio Across All Instances</title>\n      <chart>\n        <search>\n          <query>\n            `dmc_set_index_internal` search_group=dmc_group_search_head search_group=\"$group$\" sourcetype=scheduler (status=\"completed\" OR status=\"skipped\" OR status=\"deferred\")\n            | stats count(eval(status==\"completed\" OR status==\"skipped\")) AS total_exec, count(eval(status==\"skipped\")) AS skipped_exec by _time, savedsearch_id\n            | `dmc_timechart` partial=f eval(round(sum(skipped_exec) / sum(total_exec) * 100, 2)) as skip_ratio\n            | rename skip_ratio as \"Skip Ratio\"\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">area</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Skip Ratio (%)</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Average Execution Latency by $exec_lat_split_by_label$</title>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"exec_lat_split_by\">\n        <label>Group by</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"host\">Instance</choice>\n        <choice value=\"user\">User</choice>\n        <choice value=\"app\">App</choice>\n        <default>host</default>\n        <change>\n          <set token=\"exec_lat_split_by_label\">$label$</set>\n        </change>\n      </input>\n      <chart>\n        <search>\n          <query>\n            `dmc_set_index_internal` search_group=dmc_group_search_head search_group=\"$group$\" sourcetype=scheduler status=\"completed\"\n            | eval window_time = if(isnotnull(window_time), window_time, 0)\n            | eval execution_latency = max(dispatch_time - (scheduled_time + window_time), 0)\n            | timechart partial=f limit=20 eval(round(avg(execution_latency), 0)) as latency by $exec_lat_split_by$\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.chart.nullValueMode\">zero</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Latency (seconds)</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n      </chart>\n    </panel>\n    <panel rejects=\"$snapshot$\">\n      <title>Execution Latency Across All Instances</title>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"exec_lat_agg\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"sum(execution_latency) as total_execution_latency\">Total</choice>\n        <choice value=\"min(execution_latency), as min_execution_latency, avg(execution_latency) as avg_execution_latency, median(execution_latency) as median_execution_latency, max(execution_latency) as max_execution_latency\">Min, Average, Median, Max</choice>\n        <default>sum(execution_latency) as total_execution_latency</default>\n      </input>\n      <chart>\n        <search>\n          <query>\n            `dmc_set_index_internal` search_group=dmc_group_search_head search_group=\"$group$\" sourcetype=scheduler status=\"completed\"\n            | eval window_time = if(isnotnull(window_time), window_time, 0)\n            | eval execution_latency = max(dispatch_time - (scheduled_time + window_time), 0)\n            | timechart partial=f $exec_lat_agg$\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.chart.nullValueMode\">zero</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Latency (seconds)</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel>\n      <html>\n        <p>Statistics include only instances on which one or more searches are running at any given time.</p>\n      </html>\n    </panel>\n  </row>\n</form>",
"eai:type": "views",
"name": "scheduler_activity_deployment",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" script=\"common_control.js, scheduler_activity_extension.js\">\n  <label>Scheduler Activity: Instance</label>\n  <fieldset autoRun=\"true\" submitButton=\"false\">\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"dmc_group\">\n      <label>Group</label>\n      <showClearButton>false</showClearButton>\n      <search>\n        <query>\n          | `dmc_get_groups_containing_role(dmc_group_search_head)`\n          | search search_group!=\"dmc_group_*\"\n        </query>\n      </search>\n      <fieldForLabel>label</fieldForLabel>\n      <fieldForValue>search_group</fieldForValue>\n      <choice value=\"dmc_group_search_head\">All Search Heads</choice>\n      <default>dmc_group_search_head</default>\n    </input>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"splunk_server\">\n      <label>Instance</label>\n      <showClearButton>false</showClearButton>\n      <populatingSearch fieldForLabel=\"serverName\" fieldForValue=\"serverName\">\n        | `dmc_get_instance_info($dmc_group$)`\n        | where search_group=\"dmc_group_search_head\"\n      </populatingSearch>\n      <selectFirstChoice>true</selectFirstChoice>\n      <change>\n        <condition value=\"*\">\n          <set token=\"host\">$row.host$</set>\n        </condition>\n      </change>\n    </input>\n  </fieldset>\n  <row>\n    <panel>\n      <html>\n        <h2>\n          <span>Select views: </span>\n          <span id=\"link-switcher-view\">\n            <a href=\"#\" class=\"btn-pill active\" data-token-json='{\"hide_status\": null, \"hide_activity\": null, \"hide_performance\": null, \"hide_time_range_picker\": null}'>All</a>\n            <a href=\"#\" class=\"btn-pill\" data-token-json='{\"hide_status\": null, \"hide_activity\": true, \"hide_performance\": true, \"hide_time_range_picker\": true}'>Status</a>\n            <a href=\"#\" class=\"btn-pill\" data-token-json='{\"hide_status\": true, \"hide_activity\": null, \"hide_performance\": true, \"hide_time_range_picker\": null}'>Activity</a>\n            <a href=\"#\" class=\"btn-pill\" data-token-json='{\"hide_status\": true, \"hide_activity\": true, \"hide_performance\": null, \"hide_time_range_picker\": null}'>Performance</a>\n          </span>\n        </h2>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$hide_status$\">\n      <title>Hardware Information</title>\n      <single>\n        <search>\n          <query>\n            | rest splunk_server=$splunk_server$ /services/server/info\n            | eval core_info = if(isnull(numberOfCores), \"N/A\", numberOfCores).\"/\".if(isnull(numberOfVirtualCores), \"N/A\", numberOfVirtualCores)\n            | fields core_info\n          </query>\n        </search>\n        <option name=\"underLabel\">CPU Cores (Physical / Virtual)</option>\n        <option name=\"height\">80px</option>\n      </single>\n    </panel>\n    <panel rejects=\"$hide_status$\">\n      <title>Concurrency of Scheduled Reports (Running/Limit)</title>\n      <search id=\"snapshot_search_concurreny_base\">\n        <query>\n          | rest splunk_server=$splunk_server$ /services/server/status/resource-usage/splunk-processes\n          | dedup search_props.sid\n          | search `dmc_match_all_scheduled_search_types`\n        </query>\n      </search>\n      <search base=\"snapshot_search_concurreny_base\">\n        <query>\n          stats count(eval('search_props.mode'==\"historical batch\" OR 'search_props.mode'==\"historical\")) as count_hist_scheduled_search, count(eval('search_props.mode'==\"RT\" OR 'search_props.mode'==\"RT indexed\")) as count_rt_scheduled_search by splunk_server\n        </query>\n        <finalized>\n          <eval token=\"count_hist_scheduled_search\">if(isnotnull('result.count_hist_scheduled_search'), 'result.count_hist_scheduled_search', 0)</eval>\n          <eval token=\"count_rt_scheduled_search\">if(isnotnull('result.count_rt_scheduled_search'), 'result.count_rt_scheduled_search', 0)</eval>\n        </finalized>\n      </search>\n      <search id=\"search_concurrency_limits_base\">\n        <query>\n          | rest splunk_server=$splunk_server$ /services/server/status/limits/search-concurrency\n          | fields max_hist_scheduled_searches, max_rt_scheduled_searches\n        </query>\n        <finalized>\n          <set token=\"max_hist_scheduled_searches\">$result.max_hist_scheduled_searches$</set>\n          <set token=\"max_rt_scheduled_searches\">$result.max_rt_scheduled_searches$</set>\n        </finalized>\n      </search>\n      <single>\n        <search base=\"search_concurrency_limits_base\">\n          <query>\n            eval scheduled_vs_total_hist_search_limit = \"$count_hist_scheduled_search$\".\"/\".max_hist_scheduled_searches\n            | fields scheduled_vs_total_hist_search_limit\n          </query>\n        </search>\n        <option name=\"underLabel\">Historical</option>\n        <option name=\"height\">80px</option>\n        <option name=\"drilldown\">all</option>\n        <drilldown>\n          <set token=\"show_snapshot_concurrency_detail_historical\">true</set>\n        </drilldown>\n      </single>\n      <single>\n        <search base=\"search_concurrency_limits_base\">\n          <query>\n            eval scheduled_vs_total_rt_search_limit = \"$count_rt_scheduled_search$\".\"/\".max_rt_scheduled_searches\n            | fields scheduled_vs_total_rt_search_limit\n          </query>\n        </search>\n        <option name=\"underLabel\">Real-time</option>\n        <option name=\"height\">80px</option>\n        <option name=\"drilldown\">all</option>\n        <drilldown>\n          <set token=\"show_snapshot_concurrency_detail_rt\">true</set>\n        </drilldown>\n      </single>\n    </panel>\n  </row>\n  <row>\n    <panel depends=\"$show_snapshot_concurrency_detail_historical$\" rejects=\"$hide_status$\">\n      <title>Running Historical Scheduled Reports</title>\n      <table>\n        <search base=\"snapshot_search_concurreny_base\">\n          <query>\n            where 'search_props.mode'==\"historical batch\" OR 'search_props.mode'==\"historical\"\n            | fields search_props.name, search_props.app, search_props.user, search_props.type, search_props.mode, search_props.role, mem_used, pct_cpu, elapsed, search_props.sid\n            | eval mem_used = round(mem_used, 0)\n            | eval pct_cpu = round(pct_cpu, 0)\n            | eval elapsed = round(elapsed, 0)\n            | rename search_props.name as \"Scheduled Report Name\", search_props.app as App, search_props.user as User, search_props.type as Type, search_props.mode as Mode, search_props.role as Role, mem_used as \"Memory Used (MB)\", pct_cpu as \"CPU Usage (%)\", elapsed as \"Time Spent (sec)\", search_props.sid as \"SID\"\n          </query>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <html>\n        <a data-unset-token=\"show_snapshot_concurrency_detail_historical\">Close this panel</a>\n      </html>\n    </panel>\n    <panel depends=\"$show_snapshot_concurrency_detail_rt$\" rejects=\"$hide_status$\">\n      <title>Running Real-time Scheduled Reports</title>\n      <table>\n        <search base=\"snapshot_search_concurreny_base\">\n          <query>\n            where 'search_props.mode'==\"RT\" OR 'search_props.mode'==\"RT indexed\"\n            | fields search_props.name, search_props.app, search_props.user, search_props.type, search_props.mode, search_props.role, mem_used, pct_cpu, elapsed, search_props.sid\n            | eval mem_used = round(mem_used, 0)\n            | eval pct_cpu = round(pct_cpu, 0)\n            | eval elapsed = round(elapsed, 0)\n            | rename search_props.name as \"Scheduled Report Name\", search_props.app as App, search_props.user as User, search_props.type as Type, search_props.mode as Mode, search_props.role as Role, mem_used as \"Memory Used (MB)\", pct_cpu as \"CPU Usage (%)\", elapsed as \"Time Spent (sec)\", search_props.sid as \"SID\"\n          </query>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <html>\n        <a data-unset-token=\"show_snapshot_concurrency_detail_rt\">Close this panel</a>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$hide_status$\">\n      <title>Unique Scheduled Reports</title>\n      <single>\n        <search base=\"inventory_base\">\n          <query>stats count</query>\n        </search>\n        <option name=\"underLabel\">Click to show full inventory</option>\n        <option name=\"height\">80px</option>\n        <option name=\"drilldown\">all</option>\n        <drilldown>\n          <set token=\"show_inventory\">true</set>\n        </drilldown>\n      </single>\n    </panel>\n    <panel rejects=\"$hide_status$\">\n      <title>Count of Reports Scheduled</title>\n      <single>\n        <search>\n          <query>\n            | rest splunk_server=$splunk_server$ \"/servicesNS/-/-/saved/searches/\" earliest_time=`time_modifier(-0s@s)` latest_time=`time_modifier(+8d@d)` search=\"is_scheduled=1\" search=\"disabled=0\"\n            | table scheduled_times\n            | eval scheduled_times_count = mvcount(scheduled_times)\n            | stats sum(scheduled_times_count) as count\n            | eval count = `dmc_convert_count_unit(count)`\n          </query>\n        </search>\n        <option name=\"underLabel\">in next 7 days</option>\n        <option name=\"height\">80px</option>\n      </single>\n    </panel>\n    <panel rejects=\"$hide_status$\">\n      <title>Skip Ratio (Last Hour)</title>\n      <search id=\"skip_ratio_and_exec_latency_base\">\n        <query>\n          `dmc_set_index_internal` host=$host$ sourcetype=scheduler (status=\"completed\" OR status=\"skipped\" OR status=\"deferred\")\n          | eval window_time = if(isnotnull(window_time), window_time, 0)\n          | eval execution_latency = max(dispatch_time - (scheduled_time + window_time), 0)\n          | timechart span=1h partial=f avg(execution_latency) AS avg_exec_latency, count(eval(status==\"completed\" OR status==\"skipped\")) AS total_exec, count(eval(status==\"skipped\")) AS skipped_exec\n          | eval skip_ratio = round(skipped_exec / total_exec * 100, 2)\n          | eval avg_exec_latency = round(avg_exec_latency, 2)\n        </query>\n        <earliest>-24h@m</earliest>\n        <latest>now</latest>\n      </search>\n      <single>\n        <search base=\"skip_ratio_and_exec_latency_base\">\n          <query>fields _time, skip_ratio</query>\n        </search>\n        <option name=\"afterLabel\">%</option>\n        <option name=\"colorBy\">trend</option>\n        <option name=\"numberPrecision\">0.00</option>\n        <option name=\"showSparkline\">1</option>\n        <option name=\"showTrendIndicator\">1</option>\n        <option name=\"trendColorInterpretation\">inverse</option>\n        <option name=\"trendDisplayMode\">absolute</option>\n        <option name=\"trendInterval\">-1h</option>\n        <option name=\"useColors\">1</option>\n        <option name=\"height\">80px</option>\n      </single>\n    </panel>\n    <panel rejects=\"$hide_status$\">\n      <title>Average Execution Latency (Last Hour)</title>\n      <single>\n        <search base=\"skip_ratio_and_exec_latency_base\">\n          <query>fields _time, avg_exec_latency</query>\n        </search>\n        <option name=\"afterLabel\">sec</option>\n        <option name=\"numberPrecision\">0.00</option>\n        <option name=\"showSparkline\">1</option>\n        <option name=\"showTrendIndicator\">1</option>\n        <option name=\"trendDisplayMode\">absolute</option>\n        <option name=\"trendInterval\">-1h</option>\n        <option name=\"height\">80px</option>\n      </single>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$hide_status$\">\n      <html>\n        <p><b>Skip Ratio and Execution Latency</b>: The single values show data in the past full hour. Trends compare to 1 hour before that. Sparklines show data over past 24 hours.</p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel depends=\"$show_inventory$\" rejects=\"$hide_status$\">\n      <title>Inventory of Scheduled Reports ($scheduled_search_count$)</title>\n      <search id=\"inventory_base\">\n        <query>\n          | rest splunk_server=$splunk_server$ \"/servicesNS/-/-/saved/searches/\" search=\"is_scheduled=1\" search=\"disabled=0\"\n          | fields title, eai:acl.app, eai:acl.owner, cron_schedule, dispatch.earliest_time, dispatch.latest_time,\n          schedule_window, actions\n        </query>\n        <done>\n          <set token=\"scheduled_search_count\">$job.resultCount$</set>\n        </done>\n      </search>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"inventory_app_filter\">\n        <label>App</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"*\">ALL</choice>\n        <selectFirstChoice>true</selectFirstChoice>\n        <search base=\"inventory_base\">\n          <query>stats count by eai:acl.app</query>\n        </search>\n        <fieldForLabel>eai:acl.app</fieldForLabel>\n        <fieldForValue>eai:acl.app</fieldForValue>\n        <prefix>search eai:acl.app=\"</prefix>\n        <suffix>\"</suffix>\n      </input>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"inventory_user_filter\">\n        <label>User</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"*\">ALL</choice>\n        <selectFirstChoice>true</selectFirstChoice>\n        <search base=\"inventory_base\">\n          <query>stats count by eai:acl.owner</query>\n        </search>\n        <fieldForLabel>eai:acl.owner</fieldForLabel>\n        <fieldForValue>eai:acl.owner</fieldForValue>\n        <prefix>search eai:acl.owner=\"</prefix>\n        <suffix>\"</suffix>\n      </input>\n      <table>\n        <search base=\"inventory_base\">\n          <query>\n            $inventory_app_filter$\n            | $inventory_user_filter$\n            | eval dispatch.earliest_time = if(isnull('dispatch.earliest_time') OR 'dispatch.earliest_time' == \"0\" OR\n            'dispatch.earliest_time'==\"\", \"not set\", 'dispatch.earliest_time')\n            | eval dispatch.latest_time = if(isnull('dispatch.latest_time') OR 'dispatch.latest_time' == \"\", \"not set\",\n            'dispatch.latest_time')\n            | eval actions = if(isnull(actions) OR actions == \"\", \"none\", actions)\n            | rename title as \"Report Name\", eai:acl.app as App, eai:acl.owner as User, cron_schedule as \"Cron\n            Schedule\", dispatch.earliest_time as \"Earliest Time\", dispatch.latest_time as \"Latest Time\", schedule_window as \"Schedule Window (minutes)\", actions as Actions\n          </query>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <html>\n        <a data-unset-token=\"show_inventory\">Close this panel</a>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$hide_time_range_picker$\">\n      <title>Historical Charts</title>\n      <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n        <label>Time Range:</label>\n        <default>\n          <earliestTime>-4h@m</earliestTime>\n          <latestTime>now</latestTime>\n        </default>\n      </input>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$hide_activity$\">\n      <title>Count of Scheduler Executions</title>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"scheduler_execution_split_by\">\n        <label>Group by</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"status\">Status</choice>\n        <choice value=\"app\">App</choice>\n        <choice value=\"user\">User</choice>\n        <choice value=\"savedsearch_name\">Report Name</choice>\n        <choice value=\"alert_actions\">Alert Actions</choice>\n        <default>status</default>\n      </input>\n      <!-- here we use a pattern:\n       - base search: get counts grouped by metrics\n       - post-process-1: get total count, generate a token to store total\n       - post-process-2: use the $total$ token to calculate percent\n       -->\n      <search id=\"scheduler_execution_count_base\">\n        <query>\n          `dmc_set_index_internal` host=$host$ sourcetype=scheduler (status=\"completed\" OR status=\"skipped\" OR\n          status=\"deferred\")\n          | eval alert_actions = if(isnull(alert_actions) OR alert_actions == \"\", \"none\", alert_actions)\n          | stats count by $scheduler_execution_split_by$\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <search base=\"scheduler_execution_count_base\">\n        <query>stats sum(count) as total</query>\n        <preview>\n          <eval token=\"total_scheduler_execution\">if(isnotnull('result.total'), 'result.total', 0)</eval>\n        </preview>\n        <finalized>\n          <eval token=\"total_scheduler_execution\">if(isnotnull('result.total'), 'result.total', 0)</eval>\n        </finalized>\n      </search>\n      <table>\n        <title>Total: $total_scheduler_execution$</title>\n        <search base=\"scheduler_execution_count_base\">\n          <query>\n            sort - count\n            | eventstats sum(count) AS total\n            | eval percent = round(count / total * 100, 2).\" %\"\n            | fields - total\n            | rename status as Status, app as App, user as User, savedsearch_name as \"Report Name\", alert_actions as \"Alert Actions\", count as Count, percent as \"Percent of Total\"\n          </query>\n        </search>\n        <option name=\"dataOverlayMode\">heatmap</option>\n        <option name=\"drilldown\">none</option>\n      </table>\n    </panel>\n    <panel rejects=\"$hide_activity$\">\n      <title>Count of Scheduler Executions Over Time</title>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"scheduler_execution_timechart_split_by\">\n        <label>Group by</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"status\">Status</choice>\n        <choice value=\"app\">App</choice>\n        <choice value=\"user\">User</choice>\n        <choice value=\"savedsearch_name\">Report Name</choice>\n        <choice value=\"alert_actions\">Alert Actions</choice>\n        <default>status</default>\n      </input>\n      <chart>\n        <search>\n          <query>\n            `dmc_set_index_internal` host=$host$ sourcetype=scheduler (status=\"completed\" OR status=\"skipped\" OR\n            status=\"deferred\")\n            | eval alert_actions = if(isnull(alert_actions) OR alert_actions == \"\", \"none\", alert_actions)\n            | timechart partial=f count by $scheduler_execution_timechart_split_by$\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Count</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.fieldColors\">{\"completed\": 0xa2cc3e, \"deferred\": 0xf2b827, \"skipped\":0xd6563c}</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$hide_activity$\">\n      <title>Scheduled Report Completions</title>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"scheduler_completion_runtime_aggregation\">\n        <label>Runtime aggregation</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"Sum\">Sum</choice>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <default>Sum</default>\n      </input>\n      <chart>\n        <search>\n          <query>\n            `dmc_set_index_internal` sourcetype=splunkd group=\"searchscheduler\" host=$host$\n            | `dmc_timechart_for_metrics_log` sum(completed) as completed_count,\n            $scheduler_completion_runtime_aggregation$(total_runtime) as total_runtime\n            | eval total_runtime=round(total_runtime, 0)\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.chart.overlayFields\">total_runtime</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Count</option>\n        <option name=\"charting.axisTitleY2.text\">Total Runtime (seconds)</option>\n        <option name=\"charting.axisY2.enabled\">true</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$hide_activity$\">\n      <title>$concurrencyFuncLabel$ Concurrency of Scheduled Reports</title>\n      <input type=\"dropdown\" token=\"concurrencyFunction\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>Median</default>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <change>\n          <set token=\"concurrencyFuncLabel\">$label$</set>\n        </change>\n      </input>\n      <input type=\"dropdown\" token=\"searchMode\" searchWhenChanged=\"true\">\n        <label>Search Mode</label>\n        <showClearButton>false</showClearButton>\n        <default>historical*</default>\n        <choice value=\"historical*\">Historical</choice>\n        <choice value=\"RT*\">Real-time</choice>\n        <choice value=\"*\">All</choice>\n      </input>\n      <input type=\"dropdown\" token=\"concurrencySplitBy\" searchWhenChanged=\"true\">\n        <label>Group by</label>\n        <showClearButton>false</showClearButton>\n        <default>app</default>\n        <choice value=\"app\">App</choice>\n        <choice value=\"user\">User</choice>\n        <choice value=\"role\">Role</choice>\n        <choice value=\"label\">Report Name</choice>\n        <choice value=\"type\">Type</choice>\n        <choice value=\"workload_pool\">Workload Pool</choice>\n      </input>\n      <chart>\n        <search>\n          <query>\n            `dmc_set_index_introspection` host=$host$ sourcetype=splunk_resource_usage component=PerProcess data.search_props.role=\"head\" data.search_props.mode=\"$searchMode$\" data.search_props.sid::* `dmc_match_all_scheduled_search_types`\n            | `dmc_rename_introspection_fields`\n            | `dmc_set_bin`\n            | stats dc(sid) AS distinct_search_count by _time, $concurrencySplitBy$\n            | `dmc_timechart` $concurrencyFunction$(distinct_search_count) AS \"$concurrencyFunction$ of search\n            concurrency\" by $concurrencySplitBy$\n            | eval search_mode = \"$searchMode$\"\n            | eval scheduled_search_limit = case(match(search_mode, \"historical\"), $max_hist_scheduled_searches$,\n            match(search_mode, \"RT\"), $max_rt_scheduled_searches$, true(), NULL)\n            | fields - search_mode\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Count</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.chart.overlayFields\">scheduled_search_limit</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <drilldown target=\"_blank\">\n          <condition match=\"$click.name2$!=&quot;scheduled_search_limit&quot;\">\n            <link target=\"_blank\">\n              <![CDATA[search?q=`dmc_scheduler_instance_search_concurrency_drilldown($host$, $concurrencySplitBy$, $click.name2$)`&earliest=$earliest$&latest=$latest$]]></link>\n          </condition>\n          <condition>\n            <!-- Do nothing for other cases  -->\n          </condition>\n        </drilldown>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$hide_activity$\">\n      <title>Aggregate Scheduled Search Runtime</title>\n      <input type=\"dropdown\" token=\"runtimeSplitBy\" searchWhenChanged=\"true\">\n        <label>Group by</label>\n        <showClearButton>false</showClearButton>\n        <default>app</default>\n        <choice value=\"app\">App</choice>\n        <choice value=\"user\">User</choice>\n        <choice value=\"mode\">Mode</choice>\n        <choice value=\"role\">Role</choice>\n        <choice value=\"label\">Report Name</choice>\n        <choice value=\"type\">Type</choice>\n        <choice value=\"workload_pool\">Workload Pool</choice>\n        <change>\n          <condition value=\"mode\">\n            <set token=\"runtimeModeDoc\">true</set>\n          </condition>\n          <condition value=\"*\">\n            <unset token=\"runtimeModeDoc\"></unset>\n          </condition>\n        </change>\n      </input>\n      <chart>\n        <search>\n          <query>\n            `dmc_set_index_introspection` host=$host$ sourcetype=splunk_resource_usage component=PerProcess data.search_props.sid::* data.search_props.role=\"head\" `dmc_match_all_scheduled_search_types`\n            | `dmc_set_bin`\n            | `dmc_rename_introspection_fields`\n            | stats max(elapsed) as ELAPSED by sid $runtimeSplitBy$ _time\n            | streamstats current=t global=f window=2 earliest(ELAPSED) as prev_ELAPSED latest(ELAPSED) as curr_ELAPSED by sid $runtimeSplitBy$\n            | eval `dmc_collection_interval`\n            | eval delta_ELAPSED = curr_ELAPSED - prev_ELAPSED\n            | eval runtime = if(delta_ELAPSED = 0, min(curr_ELAPSED, collection_interval), delta_ELAPSED)\n            | `dmc_timechart` sum(runtime) by $runtimeSplitBy$\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisTitleY.text\">Runtime (seconds)</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <drilldown target=\"_blank\">\n          <condition series=\"*\">\n              <link target=\"_blank\"><![CDATA[search?q=`dmc_search_activity_instance_drilldown($host$, $concurrencySplitBy$, $click.name2$)`&earliest=$earliest$&latest=$latest$]]></link>\n          </condition>\n        </drilldown>\n      </chart>\n      <html depends=\"$runtimeModeDoc$\">\n        <p>Mode can be historical, historical batch, RT, or RT indexed.</p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$hide_performance$\">\n      <title>Runtime Statistics</title>\n      <table id=\"runtime_statistics\">\n        <search>\n          <query>\n            `dmc_set_index_internal` host=$host$ sourcetype=scheduler (status=\"completed\" OR status=\"skipped\" OR\n            status=\"deferred\")\n            | eval window_time = if(isnotnull(window_time), window_time, 0)\n            | eval execution_latency = max(dispatch_time - (scheduled_time + window_time), 0)\n            | stats avg(run_time) as runtime, avg(execution_latency) AS avg_exec_latency, count(eval(status==\"completed\" OR status==\"skipped\")) AS total_exec, count(eval(status==\"skipped\")) AS skipped_exec count(eval(status==\"deferred\")) AS deferred_exec by app, savedsearch_name, user, savedsearch_id\n            | join savedsearch_id type=outer [\n            | rest splunk_server=$splunk_server$ \"/servicesNS/-/-/saved/searches/\" earliest_time=`time_modifier(-0s@s)` latest_time=`time_modifier(+8d@d)` search=\"is_scheduled=1\" search=\"disabled=0\"\n            | search NOT (dispatch.earliest_time=rt* OR dispatch.latest_time=rt*)\n            | stats dc(scheduled_times) as count max(scheduled_times) as max_t min(scheduled_times) as min_t by title, eai:acl.app, eai:acl.owner cron_schedule\n            | eval schedule_interval=round((max_t-min_t)/(count-1), 0)\n            | eval savedsearch_id = 'eai:acl.owner'.\";\".'eai:acl.app'.\";\".title\n            | fields savedsearch_id, cron_schedule, schedule_interval ]\n            | eval runtime = round(runtime, 0)\n            | eval avg_exec_latency = round(avg_exec_latency, 0)\n            | eval search_workload = round(runtime / schedule_interval * 100, 2).\" %\"\n            | eval skip_ratio = round(skipped_exec / total_exec * 100, 2).\" %\"\n            | fields savedsearch_name, app, user, cron_schedule, schedule_interval, runtime, search_workload, total_exec, skipped_exec, skip_ratio, deferred_exec, avg_exec_latency\n            | sort - search_workload\n            | rename savedsearch_name as \"Report Name\", app as App, user as User, cron_schedule as \"Cron Schedule\", runtime as \"Average Runtime (sec)\", total_exec as \"Total Executions\", skip_ratio as \"Skip Ratio\", skipped_exec as \"Skipped Executions\", deferred_exec AS \"Deferred Executions\", schedule_interval as \"Schedule Interval (sec)\", search_workload as \"Interval Load Factor\", avg_exec_latency AS \"Average Execution Latency (sec)\"\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"drilldown\">row</option>\n        <drilldown>\n          <set token=\"runtime_statistics_drilldown\">$row.Report Name$</set>\n        </drilldown>\n      </table>\n      <html>\n        <p><b>Interval Load Factor</b> = Average Runtime / Schedule Interval * 100</p>\n      </html>\n    </panel>\n    <panel depends=\"$runtime_statistics_drilldown$\">\n      <title>Runtime Statistics Drilldown: $runtime_statistics_drilldown$</title>\n      <event>\n        <search>\n          <query>\n            `dmc_set_index_internal` host=$host$ sourcetype=scheduler (status=\"completed\" OR status=\"skipped\" OR\n            status=\"deferred\") savedsearch_name=$runtime_statistics_drilldown|s$\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"rowNumbers\">true</option>\n      </event>\n      <html>\n        <a data-unset-token=\"runtime_statistics_drilldown\">Close this panel</a>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$hide_performance$\">\n      <title>Execution Latency Over Time</title>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"exe_lag_split_by\">\n        <label>Group by</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"savedsearch_name\">Report Name</choice>\n        <choice value=\"alert_actions\">Alert Actions</choice>\n        <choice value=\"app\">App</choice>\n        <choice value=\"user\">User</choice>\n        <default>app</default>\n      </input>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"exe_lag_agg\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>avg</default>\n        <choice value=\"avg\">Average</choice>\n        <choice value=\"min\">Minimum</choice>\n        <choice value=\"max\">Maximum</choice>\n      </input>\n      <chart>\n        <search>\n          <query>\n            `dmc_set_index_internal` host=$host$ sourcetype=scheduler status=\"completed\"\n            | eval alert_actions = if(isnull(alert_actions) OR alert_actions == \"\", \"none\", alert_actions)\n            | eval window_time = if(isnotnull(window_time), window_time, 0)\n            | eval execution_latency = max(dispatch_time - (scheduled_time + window_time), 0)\n            | timechart eval(round($exe_lag_agg$(execution_latency), 0)) as latency by $exe_lag_split_by$\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Latency (seconds)</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n      </chart>\n      <html>\n        <p><b>Execution Latency</b> = Dispatch Time - (Scheduled Time + Schedule Window Time)</p>\n        <p>The execution latency expresses the delay in seconds between the planned dispatch time of a search and its actual dispatch time. It takes into account a schedule window if one is configured for this search. <a href=\"/help?location=learnmore.report.scheduled\" target=\"_blank\" class=\"external\">Learn More</a></p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$hide_performance$\">\n      <title>Count of Skipped Scheduled Reports</title>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"count_skipped_split_by\">\n        <label>Group by</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"reason\">Reason</choice>\n        <choice value=\"savedsearch_name\">Report Name</choice>\n        <choice value=\"alert_actions\">Alert Actions</choice>\n        <choice value=\"app\">App</choice>\n        <choice value=\"user\">User</choice>\n        <default>reason</default>\n      </input>\n      <search id=\"count_skipped_search_base\">\n        <query>\n          `dmc_set_index_internal` host=$host$ sourcetype=scheduler status=\"skipped\"\n          | eval alert_actions = if(isnull(alert_actions) OR alert_actions == \"\", \"none\", alert_actions)\n          | eval reason = if(isnull(reason) OR reason == \"\", \"none\", reason)\n          | stats count by $count_skipped_split_by$\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <search base=\"count_skipped_search_base\">\n        <query>stats sum(count) as total</query>\n        <preview>\n          <eval token=\"total_skipped_searches\">if(isnotnull('result.total'), 'result.total', 0)</eval>\n        </preview>\n        <finalized>\n          <eval token=\"total_skipped_searches\">if(isnotnull('result.total'), 'result.total', 0)</eval>\n        </finalized>\n      </search>\n      <table>\n        <title>Total: $total_skipped_searches$</title>\n        <search base=\"count_skipped_search_base\">\n          <query>\n            sort - count\n            | eventstats sum(count) AS total\n            | eval percent = round(count / total * 100, 2).\" %\"\n            | fields - total\n            | rename reason as Reason, savedsearch_name as \"Report Name\", alert_actions as \"Alert Actions\", app as App, user as User, count as Count, percent as \"Percent of Total\"\n          </query>\n        </search>\n        <option name=\"dataOverlayMode\">heatmap</option>\n        <option name=\"drilldown\">none</option>\n      </table>\n    </panel>\n    <panel rejects=\"$hide_performance$\">\n      <title>Count of Skipped Reports Over Time</title>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"count_skipped_timechart_split_by\">\n        <label>Group by</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"reason\">Reason</choice>\n        <choice value=\"savedsearch_name\">Report Name</choice>\n        <choice value=\"alert_actions\">Alert Actions</choice>\n        <choice value=\"app\">App</choice>\n        <choice value=\"user\">User</choice>\n        <default>reason</default>\n      </input>\n      <chart>\n        <search>\n          <query>\n            `dmc_set_index_internal` host=$host$ sourcetype=scheduler status=\"skipped\"\n            | eval alert_actions = if(isnull(alert_actions) OR alert_actions == \"\", \"none\", alert_actions)\n            | eval reason = if(isnull(reason) OR reason == \"\", \"none\", reason)\n            | timechart count by $count_skipped_timechart_split_by$\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Count</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$hide_performance$\">\n      <title>Count of Skipped Reports by Name and Reason</title>\n      <table>\n        <title>Total: $total_skipped_searches$</title>\n        <search>\n          <query>\n            `dmc_set_index_internal` host=$host$ sourcetype=scheduler status=\"skipped\"\n            | eval alert_actions = if(isnull(alert_actions) OR alert_actions == \"\", \"none\", alert_actions)\n            | eval reason = if(isnull(reason) OR reason == \"\", \"none\", reason)\n            | stats count AS count values(alert_actions) AS alert_actions by savedsearch_name, reason\n            | eval reason_and_count = reason.\" (\".count.\")\"\n            | stats values(reason_and_count) AS reasons first(alert_actions) AS alert_actions by savedsearch_name\n            | rename reasons AS \"Skip Reason (Skip Count)\" alert_actions AS \"Alert Actions\" savedsearch_name AS \"Report\n            Name\"\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n    </panel>\n    <panel rejects=\"$hide_performance$\">\n      <title>Scheduler Errors and Warnings</title>\n      <search id=\"count_error_warning_base\">\n        <query>\n          `dmc_set_index_internal` host=$host$ sourcetype=scheduler (log_level=\"ERROR\" OR log_level=\"WARN*\")\n          | eval event_message=coalesce(event_message, message)\n          | cluster t=0.7 field=event_message showcount=t countfield=count\n          | table event_message, count, punct\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <search base=\"count_error_warning_base\">\n        <query>stats sum(count) as total</query>\n        <preview>\n          <eval token=\"total_error_warning\">if(isnotnull('result.total'), 'result.total', 0)</eval>\n        </preview>\n        <finalized>\n          <eval token=\"total_error_warning\">if(isnotnull('result.total'), 'result.total', 0)</eval>\n        </finalized>\n      </search>\n      <table>\n        <title>Total: $total_error_warning$</title>\n        <search base=\"count_error_warning_base\">\n          <query>\n            sort - count\n            | eventstats sum(count) AS total\n            | eval percent = round(count / total * 100, 2).\" %\"\n            | fields - total\n            | rename event_message as Message, count as Count, percent as \"Percent of Total\"\n          </query>\n        </search>\n        <fields>Message, Count, \"Percent of Total\"</fields>\n        <option name=\"dataOverlayMode\">heatmap</option>\n        <option name=\"drilldown\">row</option>\n        <drilldown>\n          <set token=\"warningErrorPunct\">$row.punct$</set>\n        </drilldown>\n      </table>\n    </panel>\n  </row>\n  <row>\n    <panel depends=\"$warningErrorPunct$\">\n      <title>Scheduler Errors and Warnings Event Details</title>\n      <event>\n        <search>\n          <query>\n            `dmc_set_index_internal` host=$host$ sourcetype=scheduler (log_level=\"ERROR\" OR log_level=\"WARN*\") punct=$warningErrorPunct|s$\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"rowNumbers\">true</option>\n      </event>\n      <html>\n        <a data-unset-token=\"warningErrorPunct\">Close this panel</a>\n      </html>\n    </panel>\n  </row>\n</form>",
"eai:type": "views",
"name": "scheduler_activity_instance",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" script=\"common_control.js, drilldown_action_extension.js, search_activity_deployment_extension.js\">\n  <label>Search Activity: Deployment</label>\n  <description/>\n  <fieldset autoRun=\"true\" submitButton=\"false\">\n    <input type=\"radio\" searchWhenChanged=\"true\" token=\"role\">\n      <label>Role</label>\n      <choice value=\"dmc_group_search_head\">Search Heads</choice>\n      <choice value=\"dmc_group_indexer\">Indexers</choice>\n      <default>dmc_group_search_head</default>\n    </input>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"group\">\n      <label>Group</label>\n      <showClearButton>false</showClearButton>\n      <search fieldForValue=\"search_group\">\n        <query>| `dmc_get_groups_containing_role($role$)` | search search_group!=\"dmc_group_*\"</query>\n      </search>\n      <fieldForLabel>label</fieldForLabel>\n      <fieldForValue>search_group</fieldForValue>\n      <choice value=\"*\">All</choice>\n      <selectFirstChoice>true</selectFirstChoice>\n    </input>\n  </fieldset>\n  <row>\n    <panel>\n      <html>\n        <h2>\n          <span>Select views: </span>\n          <span id=\"link-switcher-view\">\n            <a href=\"#\" class=\"btn-pill active\" data-item=\"all\">All</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"snapshot\">Snapshot</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"historical\">Historical</a>\n          </span>\n        </h2>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Snapshots</title>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Search Activity by Instance</title>\n      <table>\n        <title>$totalCountOfSearchHeads$ instances</title>\n        <search>\n          <query>\n| rest splunk_server_group=$role$ splunk_server_group=\"$group$\" /services/server/status/limits/search-concurrency\n| join splunk_server type=outer [\n| rest splunk_server_group=$role$ splunk_server_group=\"$group$\" /services/server/status/resource-usage/splunk-processes\n| eval search_pct_cpu  = if(isnotnull('search_props.sid'), pct_cpu, 0)\n| eval search_mem_used = if(isnotnull('search_props.sid'), mem_used, 0)\n| eventstats sum(search_pct_cpu) as search_pct_cpu, sum(search_mem_used) as search_mem_used by search_props.sid\n| dedup search_props.sid\n| stats dc(search_props.sid) as search_count, sum(search_pct_cpu) as sum_pct_cpu, sum(search_mem_used) as sum_mem_used, sum(eval(('search_props.type'==\"report acceleration\" OR 'search_props.type'==\"datamodel acceleration\"))) as sum_auto_summary_search, sum(eval('search_props.type'==\"ad-hoc\" AND ('search_props.mode'==\"RT\" OR 'search_props.mode'==\"RT indexed\"))) as sum_rt_search, sum(eval('search_props.type'==\"ad-hoc\" AND ('search_props.mode'==\"historical\" OR 'search_props.mode'==\"historical batch\"))) as sum_hist_search, sum(eval(('search_props.type'==\"scheduled\" OR 'search_props.type'==\"summary indexing\" OR 'search_props.type'==\"report acceleration\" OR 'search_props.type'==\"datamodel acceleration\") AND ('search_props.mode'==\"RT\" OR 'search_props.mode'==\"RT indexed\"))) as sum_rt_scheduled_search, sum(eval(('search_props.type'==\"scheduled\" OR 'search_props.type'==\"summary indexing\" OR 'search_props.type'==\"report acceleration\" OR 'search_props.type'==\"datamodel acceleration\") AND ('search_props.mode'==\"historical\" OR 'search_props.mode'==\"historical batch\"))) as sum_hist_scheduled_search by splunk_server]\n| eval sum_pct_cpu  = round(sum_pct_cpu, 2)\n| eval sum_mem_used = round(sum_mem_used, 2)\n| sort -search_count, -sum_pct_cpu\n| eval search_count = if(isnull(search_count) OR search_count==\"\", 0, search_count)\n| eval sum_auto_summary_search = if(isnull(sum_auto_summary_search) OR sum_auto_summary_search==\"\", 0, sum_auto_summary_search)\n| eval sum_hist_scheduled_search = if(isnull(sum_hist_scheduled_search) OR sum_hist_scheduled_search==\"\", 0, sum_hist_scheduled_search)\n| eval sum_hist_search = if(isnull(sum_hist_search) OR sum_hist_search==\"\", 0, sum_hist_search)\n| eval sum_rt_scheduled_search = if(isnull(sum_rt_scheduled_search) OR sum_rt_scheduled_search==\"\", 0, sum_rt_scheduled_search)\n| eval sum_rt_search = if(isnull(sum_rt_search) OR sum_rt_search==\"\", 0, sum_rt_search)\n| eval sum_pct_cpu = if(isnull(sum_pct_cpu) OR sum_pct_cpu==\"\", 0, sum_pct_cpu)\n| eval count_cpu = round(sum_pct_cpu / 100.0, 2)\n| eval sum_mem_used = if(isnull(sum_mem_used) OR search_count==\"\", 0, sum_mem_used)\n| eval scheduled_vs_total_auto_summary_search_limit = sum_auto_summary_search.\"/\".max_auto_summary_searches\n| eval scheduled_vs_total_hist_scheduled_search_limit = sum_hist_scheduled_search.\"/\".max_hist_scheduled_searches\n| eval scheduled_vs_total_hist_search_limit = sum_hist_search.\"/\".max_hist_searches\n| eval scheduled_vs_total_rt_scheduled_search_limit = sum_rt_scheduled_search.\"/\".max_rt_scheduled_searches\n| eval scheduled_vs_total_rt_search_limit = sum_rt_search.\"/\".max_rt_searches\n| fields splunk_server, search_count, scheduled_vs_total_auto_summary_search_limit, scheduled_vs_total_hist_scheduled_search_limit, scheduled_vs_total_hist_search_limit, scheduled_vs_total_rt_scheduled_search_limit, scheduled_vs_total_rt_search_limit, count_cpu, sum_mem_used\n| rename splunk_server as Instance, search_count as \"Count of Searches\", scheduled_vs_total_auto_summary_search_limit as \"Summarization\", scheduled_vs_total_hist_scheduled_search_limit as \"Historical Schedule Report\", scheduled_vs_total_hist_search_limit  as \"Historical Search\", scheduled_vs_total_rt_scheduled_search_limit as \"Real-time Schedule Report\",  scheduled_vs_total_rt_search_limit  as \"Real-time Search\", count_cpu as \"CPU Usage (# cores)\", sum_mem_used as \"Memory Usage (MB)\"\n          </query>\n          <done>\n            <set token=\"totalCountOfSearchHeads\">$job.resultCount$</set>\n          </done>\n        </search>\n        <option name=\"refresh.auto.interval\">60</option>\n        <option name=\"refresh.time.visible\">false</option>\n        <drilldown>\n          <condition field=\"Instance\">\n            <link target=\"_blank\">\n              <![CDATA[search_activity_instance?form.splunk_server=$click.value2$]]>\n            </link>\n          </condition>\n          <condition field=\"*\"></condition>\n        </drilldown>\n      </table>\n      <html>\n        <p>Click on instance name for more details.</p>\n\t\t<p>CPU usage is expressed in total number of CPU cores cumulatively used by search processes.</p>\n      </html>     \n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Historical Charts</title>\n      <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n        <label>Time Range:</label>\n        <default>\n          <earliestTime>-4h@m</earliestTime>\n          <latestTime>now</latestTime>\n        </default>\n      </input>\n      <input type=\"checkbox\" searchWhenChanged=\"true\" token=\"split_by_host\">\n        <label></label>\n        <choice>Split by host</choice>\n      </input>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$, $split_by_host$\" id=\"instances_by_search_concurrency\">\n      <title>Instances By $searchConcurrencyAggrLabel$ Search Concurrency</title>\n      <input type=\"dropdown\" token=\"searchConcurrencyAggrFunc\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>Median</default>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <change>\n          <set token=\"searchConcurrencyAggrLabel\">$label$</set>\n        </change>\n      </input>\n        <html>\n            <div class=\"heatmap_toggle\"></div>\n        </html>\n        <viz type=\"splunk_monitoring_console.heatmap\">\n            <search>\n                <query>\n                    `dmc_set_index_introspection` search_group=$role$ search_group=\"$group$\" sourcetype=splunk_resource_usage ((component=PerProcess data.search_props.sid::*) OR component=Hostwide)\n                    | `dmc_set_bin`\n                    | stats dc(data.search_props.sid) AS distinct_search_count by host, _time\n                    | bin _time minspan=10s\n                    | stats $searchConcurrencyAggrFunc$(distinct_search_count) as search_count by host, _time\n                    | `dmc_search_count_rangemap_and_timechart`\n                </query>\n                <earliest>$time.earliest$</earliest>\n                <latest>$time.latest$</latest>\n            </search>\n            <option name=\"height\">375</option>\n            <drilldown>\n                <condition match=\"isnotnull('row._span')\">\n                    <set token=\"drilldown_search_concurrency\">true</set>\n                    <set token=\"drilldown_search_concurrency_span\">$row._span$</set>\n                    <set token=\"drilldown_search_concurrency_earliest\">$row.earliest$</set>\n                    <eval token=\"drilldown_search_concurrency_earliest_label\">$row.earliest_label$</eval>\n                    <set token=\"drilldown_search_concurrency_latest\">$row.latest$</set>\n                    <eval token=\"drilldown_search_concurrency_latest_label\">$row.latest_label$</eval>\n                    <set token=\"drilldown_search_concurrency_metric\">$row.drilldown_indexing_rate_metric$</set>\n                    <set token=\"drilldown_search_concurrency_count\">$row.numInstances$</set>\n                </condition>\n                <condition />\n            </drilldown>\n        </viz>\n      <chart>\n        <search>\n          <query>\n          `dmc_set_index_introspection` search_group=$role$ search_group=\"$group$\" sourcetype=splunk_resource_usage ((component=PerProcess data.search_props.sid::*) OR component=Hostwide)\n          | `dmc_rename_introspection_fields`\n          | `dmc_set_bin`\n          | stats dc(sid) AS distinct_search_count by host, _time\n          | bin _time minspan=10s\n          | stats $searchConcurrencyAggrFunc$(distinct_search_count) as search_count by host, _time\n          | `dmc_search_count_rangemap_and_timechart`\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Instance count</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.fieldColors\">\n          {\"0\": 0xedf1f6, \n           \"1-5\": 0xdbe3ee, \n           \"6-10\": 0xc9d4e5,\n           \"11-15\": 0xb7c6dc,\n           \"16-20\": 0xa5b8d4,\n           \"21-30\": 0x92aacb,\n           \"31-40\": 0x809cc3,\n           \"41-50\": 0x6e8eba,\n           \"51-75\": 0x5c7fb1,\n           \"76-100\": 0x4a71a9,\n           \"101+\": 0x3863a0\n           }\n        </option>\n        <drilldown>\n          <condition match=\"isnotnull('row._span')\">\n            <set token=\"drilldown_search_concurrency\">true</set>\n            <set token=\"drilldown_search_concurrency_span\">$row._span$</set>\n            <set token=\"drilldown_search_concurrency_earliest\">$earliest$</set>\n            <eval token=\"drilldown_search_concurrency_earliest_label\">strftime(earliest, \"%m/%d/%Y %H:%M:%S\")</eval>\n            <set token=\"drilldown_search_concurrency_latest\">$latest$</set>\n            <eval token=\"drilldown_search_concurrency_latest_label\">strftime(latest, \"%m/%d/%Y %H:%M:%S\")</eval>\n            <set token=\"drilldown_search_concurrency_metric\">$click.name2$</set>\n            <set token=\"drilldown_search_concurrency_count\">$click.value2$</set>\n          </condition>\n          <condition />\n        </drilldown>\n      </chart>\n      <html rejects=\"$split_by_host$\">\n        <p>Count of instances grouped by $searchConcurrencyAggrLabel$ number of concurrent searches over time.</p>\n      </html>\n      <table depends=\"$drilldown_search_concurrency$\" id=\"drilldown_search_concurrency\">\n        <title>Time range: $drilldown_search_concurrency_earliest_label$ ~ $drilldown_search_concurrency_latest_label$. Metric: search count range: $drilldown_search_concurrency_metric$. ($drilldown_search_concurrency_count$ instances)</title>\n        <search>\n          <query>`dmc_drilldown_search_activity_deployment_search_concurrency(\"$role$\", \"$group$\", $searchConcurrencyAggrFunc$, $drilldown_search_concurrency_metric$)`</query>\n          <earliest>$drilldown_search_concurrency_earliest$</earliest>\n          <latest>$drilldown_search_concurrency_latest$</latest>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <html depends=\"$drilldown_search_concurrency$\">\n        <a data-unset-token=\"drilldown_search_concurrency\">Close this drilldown table</a>\n      </html>\n    </panel>\n    <panel rejects=\"$snapshot$\" depends=\"$split_by_host$\">\n      <title>$searchConcurrencyAggrLabel$ Search Concurrency By Instance</title>\n      <input type=\"dropdown\" token=\"searchConcurrencyAggrFunc\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>Median</default>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <change>\n          <set token=\"searchConcurrencyAggrLabel\">$label$</set>\n        </change>\n      </input>      \n      <chart>\n        <search>\n          <query>\n          `dmc_set_index_introspection` search_group=$role$ search_group=\"$group$\" sourcetype=splunk_resource_usage ((component=PerProcess data.search_props.sid::*) OR component=Hostwide)\n          | `dmc_rename_introspection_fields`\n          | `dmc_set_bin`\n          | stats dc(sid) AS distinct_search_count by host, _time\n          | `dmc_timechart` partial=f limit=25 $searchConcurrencyAggrFunc$(distinct_search_count) as search_count by host\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Search Count</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n      </chart>\n      <html depends=\"$split_by_host$\">\n        <p>$searchConcurrencyAggrLabel$ number of concurrent searches over time by instance.</p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel reject=\"$snapshot$\">\n      <title>Deployment-Wide $aggrSearchConcurLabel$ Search Concurrency Per Instance Over Time</title>\n      <input type=\"dropdown\" token=\"aggrSearchConcurFunc\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>Median</default>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <change>\n          <set token=\"aggrSearchConcurLabel\">$label$</set>\n        </change>\n      </input>\n      <chart>\n        <search>\n          <query>\n          `dmc_set_index_introspection` search_group=\"$role$\" search_group=\"$group$\" sourcetype=splunk_resource_usage ((component=PerProcess data.search_props.sid::*) OR component=Hostwide)\n          | `dmc_set_bin`\n          | stats dc(data.search_props.sid) AS distinct_search_count by host, _time\n          | timechart minspan=10s bins=200 partial=f $aggrSearchConcurFunc$(distinct_search_count) AS distinct_search_count_per_host\n          | eval distinct_search_count_per_host = round(distinct_search_count_per_host, 2)\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">area</option>\n        <option name=\"charting.legend.placement\">none</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Search Count</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$, $split_by_host$\" id=\"instances_by_search_usage\">\n      <title>Instances By $resourceAggrLabel$ Search $resourceTypeLabel$ Usage</title>\n      <input type=\"dropdown\" token=\"resourceType\" searchWhenChanged=\"true\">\n        <label>Resource Type</label>\n        <showClearButton>false</showClearButton>\n        <default>pct_cpu</default>\n        <choice value=\"pct_cpu\">CPU</choice>\n        <choice value=\"mem_used\">Memory</choice>\n        <change>\n          <condition value=\"pct_cpu\">\n            <set token=\"resourceTypeLabel\">CPU</set>\n            <set token=\"cpuDocumentationNote\">CPU usage is expressed in total number of CPU cores cumulatively used by search processes.</set>\n          </condition>\n          <condition value=\"mem_used\">\n            <set token=\"resourceTypeLabel\">Memory</set>\n            <set token=\"cpuDocumentationNote\"> </set>\n          </condition>\n        </change>\n      </input>\n      <input type=\"dropdown\" token=\"resourceAggrFunc\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>Median</default>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <change>\n          <set token=\"resourceAggrLabel\">$label$</set>\n        </change>\n      </input>\n        <html>\n            <div class=\"heatmap_toggle\"></div>\n        </html>\n        <viz type=\"splunk_monitoring_console.heatmap\">\n            <search>\n                <query>\n                    `dmc_set_index_introspection` search_group=$role$ search_group=\"$group$\" sourcetype=splunk_resource_usage ((component=PerProcess data.search_props.sid::*) OR component=Hostwide)\n                    | `dmc_set_bin`\n                    | eval data.search_props.sid = if(component==\"Hostwide\", \"n/a\", 'data.search_props.sid')\n                    | eval data.pid = if(component==\"Hostwide\", \"n/a\", 'data.pid')\n                    | eval data.$resourceType$ = if(component==\"Hostwide\", 0, 'data.$resourceType$')\n                    | stats latest(data.$resourceType$) AS resource_usage_dedup by _time, data.search_props.sid, data.pid, host\n                    | stats sum(resource_usage_dedup) AS sum_resource_usage by _time, host\n                    | eval sum_resource_usage = if(\"data.$resourceType$\" == \"data.pct_cpu\", round(sum_resource_usage / 100.0, 2), sum_resource_usage)\n                    | bin _time minspan=10s\n                    | stats $resourceAggrFunc$(sum_resource_usage) as resource_usage by _time, host\n                    | `dmc_$resourceType$_rangemap_and_timechart`\n                </query>\n                <earliest>$time.earliest$</earliest>\n                <latest>$time.latest$</latest>\n            </search>\n            <option name=\"height\">375</option>\n            <drilldown>\n                <condition match=\"isnotnull('row._span')\">\n                    <set token=\"drilldown_resource_usage\">true</set>\n                    <set token=\"drilldown_resource_usage_span\">$row._span$</set>\n                    <set token=\"drilldown_resource_usage_earliest\">$row.earliest$</set>\n                    <eval token=\"drilldown_resource_usage_earliest_label\">$row.earliest_label$</eval>\n                    <set token=\"drilldown_resource_usage_latest\">$row.latest$</set>\n                    <eval token=\"drilldown_resource_usage_latest_label\">$row.latest_label$</eval>\n                    <set token=\"drilldown_resource_usage_metric\">$row.drilldown_indexing_rate_metric$</set>\n                    <set token=\"drilldown_resource_usage_count\">$row.numInstances$</set>\n                </condition>\n                <condition/>\n            </drilldown>\n        </viz>\n      <chart>\n        <search>\n          <query>\n          `dmc_set_index_introspection` search_group=$role$ search_group=\"$group$\" sourcetype=splunk_resource_usage ((component=PerProcess data.search_props.sid::*) OR component=Hostwide)\n          | `dmc_rename_introspection_fields`\n          | `dmc_set_bin`\n          | eval sid = if(component==\"Hostwide\", \"n/a\", sid)\n          | eval pid = if(component==\"Hostwide\", \"n/a\", pid)\n          | eval $resourceType$ = if(component==\"Hostwide\", 0, $resourceType$)\n          | stats latest($resourceType$) AS resource_usage_dedup by _time, sid, pid, host\n          | stats sum(resource_usage_dedup) AS sum_resource_usage by _time, host\n          | eval sum_resource_usage = if(\"$resourceType$\" == \"pct_cpu\", round(sum_resource_usage / 100.0, 2), sum_resource_usage)\n          | `dmc_set_bin_for_timechart`\n          | stats $resourceAggrFunc$(sum_resource_usage) as resource_usage by _time, host\n          | `dmc_$resourceType$_rangemap_and_timechart`\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Instance count</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <drilldown>\n          <condition match=\"isnotnull('row._span')\">\n            <set token=\"drilldown_resource_usage\">true</set>\n            <set token=\"drilldown_resource_usage_span\">$row._span$</set>\n            <set token=\"drilldown_resource_usage_earliest\">$earliest$</set>\n            <eval token=\"drilldown_resource_usage_earliest_label\">strftime(earliest, \"%m/%d/%Y %H:%M:%S\")</eval>\n            <set token=\"drilldown_resource_usage_latest\">$latest$</set>\n            <eval token=\"drilldown_resource_usage_latest_label\">strftime(latest, \"%m/%d/%Y %H:%M:%S\")</eval>\n            <set token=\"drilldown_resource_usage_metric\">$click.name2$</set>\n            <set token=\"drilldown_resource_usage_count\">$click.value2$</set>\n          </condition>\n          <condition/>\n        </drilldown>\n      </chart>\n      <html>\n        <p>$cpuDocumentationNote$</p>\n      </html>      \n      <table depends=\"$drilldown_resource_usage$\" id=\"drilldown_resource_usage\">\n        <title>Time range: $drilldown_resource_usage_earliest_label$ ~ $drilldown_resource_usage_latest_label$. Metric: $resourceType$ usage range: $drilldown_resource_usage_metric$. ($drilldown_resource_usage_count$ instances)</title>\n        <search>\n          <query>`dmc_drilldown_search_activity_deployment_resource_usage(\"$role$\", \"$group$\", $resourceType$, $resourceAggrFunc$, $drilldown_resource_usage_metric$)`</query>\n          <earliest>$drilldown_resource_usage_earliest$</earliest>\n          <latest>$drilldown_resource_usage_latest$</latest>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <html depends=\"$drilldown_resource_usage$\">\n        <a data-unset-token=\"drilldown_resource_usage\">Close this drilldown table</a>\n      </html>\n    </panel>\n    <panel rejects=\"$snapshot$\" depends=\"$split_by_host$\">\n      <title>$resourceAggrLabel$ Search $resourceTypeLabel$ Usage By Instance</title>\n      <input type=\"dropdown\" token=\"resourceType\" searchWhenChanged=\"true\">\n        <label>Resource Type</label>\n        <showClearButton>false</showClearButton>\n        <default>pct_cpu</default>\n        <choice value=\"pct_cpu\">CPU</choice>\n        <choice value=\"mem_used\">Memory</choice>\n        <change>\n          <condition value=\"pct_cpu\">\n            <set token=\"resourceTypeLabel\">CPU</set>\n            <set token=\"resourceTypeYLabel\">CPU Usage (# cores)</set>\n            <set token=\"cpuDocumentationNote\">CPU usage is expressed in total number of CPU cores cumulatively used by search processes.</set>\n          </condition>\n          <condition value=\"mem_used\">\n            <set token=\"resourceTypeLabel\">Memory</set>\n            <set token=\"resourceTypeYLabel\">Memory Usage (MB)</set>\n            <set token=\"cpuDocumentationNote\"> </set>\n          </condition>\n        </change>\n      </input>\n      <input type=\"dropdown\" token=\"resourceAggrFunc\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>Median</default>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <change>\n          <set token=\"resourceAggrLabel\">$label$</set>\n        </change>\n      </input>          \n      <chart>\n        <search>\n          <query>\n          `dmc_set_index_introspection` search_group=$role$ search_group=\"$group$\" sourcetype=splunk_resource_usage ((component=PerProcess data.search_props.sid::*) OR component=Hostwide)\n          | `dmc_rename_introspection_fields`\n          | `dmc_set_bin`\n          | stats latest($resourceType$) AS resource_usage by _time, sid, pid, host\n          | eval resource_usage = if(\"$resourceType$\" == \"pct_cpu\", round(resource_usage / 100.0, 2), resource_usage)\n          | `dmc_timechart_for_metrics_log` partial=f limit=25 $resourceAggrFunc$(resource_usage) AS resource_usage by host\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">$resourceTypeYLabel$</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n      </chart>  \n      <html>\n        <p>$cpuDocumentationNote$</p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Top 20 Memory-Consuming Searches</title>\n      <table>\n        <search>\n          <query>\n            `dmc_set_index_introspection` search_group=$role$ search_group=\"$group$\" sourcetype=splunk_resource_usage data.search_props.sid::* data.search_props.mode!=RT\n            | `dmc_rename_introspection_fields`\n            | stats max(elapsed) as runtime max(mem_used) as mem_used earliest(_time) as _time by sid, label, provenance, type, mode, app, role, user, host\n            | eval mem_used = round(mem_used, 2)\n            | sort 20 - mem_used, runtime\n            | fields sid, label, provenance, mem_used, host, runtime, _time, type, mode, app, user, role\n            | eval _time=strftime(_time,\"%+\")\n            | rename sid as SID, label as Name, provenance as Provenance, mem_used as \"Memory Usage (MB)\", host as Instance, runtime as Runtime, _time as Started, type as Type, mode as Mode, app as App, user as User, role as Role\n            | fieldformat Runtime = `dmc_convert_runtime(Runtime)`\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"drilldown\">none</option>\n        <option name=\"rowNumbers\">true</option>\n      </table>\n    </panel>\n  </row>\n</form>",
"eai:type": "views",
"name": "search_activity_deployment",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "    <form version=\"1.1\" hideEdit=\"True\" onUnloadCancelJobs=\"true\" script=\"common_control.js\">\n  <label>Search Activity: Instance</label>\n  <description/>\n  <fieldset autoRun=\"true\" submitButton=\"false\">\n    <input type=\"radio\" searchWhenChanged=\"true\" token=\"role\">\n      <label>Role</label>\n      <choice value=\"dmc_group_search_head\">Search Heads</choice>\n      <choice value=\"dmc_group_indexer\">Indexers</choice>\n      <default>dmc_group_search_head</default>\n    </input>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"dmc_group\">\n      <label>Group</label>\n      <showClearButton>false</showClearButton>\n      <search>\n        <query>\n          | `dmc_get_groups_containing_role($role$)`\n          | search search_group!=\"dmc_group_*\"\n        </query>\n      </search>\n      <fieldForLabel>label</fieldForLabel>\n      <fieldForValue>search_group</fieldForValue>\n      <choice value=\"*\">All</choice>\n      <selectFirstChoice>true</selectFirstChoice>\n    </input>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"splunk_server\">\n      <label>Instance</label>\n      <showClearButton>false</showClearButton>\n      <populatingSearch fieldForLabel=\"serverName\" fieldForValue=\"serverName\">\n        | `dmc_get_instance_info($dmc_group$)`\n        | where search_group=\"$role$\"\n      </populatingSearch>\n      <selectFirstChoice>true</selectFirstChoice>\n      <change>\n        <condition value=\"*\">\n          <set token=\"host\">$row.host$</set>\n        </condition>\n      </change>\n    </input>\n  </fieldset>\n  <row>\n    <panel>\n      <html>\n        <h2>\n          <span>Select views: </span>\n          <span id=\"link-switcher-view\">\n            <a href=\"#\" class=\"btn-pill active\" data-item=\"all\">All</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"snapshot\">Snapshot</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"historical\">Historical</a>\n          </span>\n        </h2>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Snapshots</title>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Search Concurrency (Running/Limit)</title>\n      <search id=\"snapshot_search_concurrency_base\">\n        <query>\n          | rest splunk_server=$splunk_server$ /services/server/status/resource-usage/splunk-processes\n          | where process_type = \"search\"\n        </query>\n      </search>\n      <search base=\"snapshot_search_concurrency_base\">\n        <query>\n          | stats count(eval(('search_props.type'==\"scheduled\" OR 'search_props.type'==\"summary indexing\" OR 'search_props.type'==\"report acceleration\" OR 'search_props.type'==\"datamodel acceleration\" OR 'search_props.type'==\"ad-hoc\") AND ('search_props.mode'==\"historical\" OR 'search_props.mode'==\"historical batch\"))) as count_total_hist,\n          count(eval(('search_props.type'==\"scheduled\" OR 'search_props.type'==\"summary indexing\" OR 'search_props.type'==\"report acceleration\" OR 'search_props.type'==\"datamodel acceleration\" OR 'search_props.type'==\"ad-hoc\") AND ('search_props.mode'==\"RT\" OR 'search_props.mode'==\"RT indexed\"))) as count_total_rt,\n          count(eval(('search_props.type'==\"scheduled\" OR 'search_props.type'==\"summary indexing\" OR 'search_props.type'==\"report acceleration\" OR 'search_props.type'==\"datamodel acceleration\") AND ('search_props.mode'==\"historical\" OR 'search_props.mode'==\"historical batch\"))) as count_hist_scheduled_search,\n          count(eval(('search_props.type'==\"scheduled\" OR 'search_props.type'==\"summary indexing\" OR 'search_props.type'==\"report acceleration\" OR 'search_props.type'==\"datamodel acceleration\") AND ('search_props.mode'==\"RT\" OR 'search_props.mode'==\"RT indexed\"))) as count_rt_scheduled_search,\n          count(eval(('search_props.type'==\"report acceleration\" OR 'search_props.type'==\"datamodel acceleration\"))) as count_auto_summary_search by splunk_server,      \n          | eval count_total_hist = if(isnull(count_total_hist) OR count_total_hist==\"\", 0, count_total_hist)\n          | eval count_total_rt = if(isnull(count_total_rt) OR count_total_rt==\"\", 0, count_total_rt)\n          | eval count_hist_scheduled_search = if(isnull(count_hist_scheduled_search) OR count_hist_scheduled_search==\"\", 0, count_hist_scheduled_search)\n          | eval count_rt_scheduled_search = if(isnull(count_rt_scheduled_search) OR count_rt_scheduled_search==\"\", 0, count_rt_scheduled_search)\n          | eval count_auto_summary_search = if(isnull(count_auto_summary_search) OR count_auto_summary_search==\"\", 0, count_auto_summary_search)\n          | eval count_total_adhoc_scheduled_search = count_total_hist + count_total_rt\n          | eval count_total_scheduled_search = count_hist_scheduled_search + count_rt_scheduled_search\n        </query>\n        <finalized>\n          <eval token=\"count_total_hist\">if(isnotnull('result.count_total_hist'), 'result.count_total_hist', 0)</eval>\n          <eval token=\"count_total_rt\">if(isnotnull('result.count_total_rt'), 'result.count_total_rt', 0)</eval>\n          <eval token=\"count_total_adhoc_scheduled_search\">if(isnotnull('result.count_total_adhoc_scheduled_search'), 'result.count_total_adhoc_scheduled_search', 0)</eval>\n          <eval token=\"count_hist_scheduled_search\">if(isnotnull('result.count_hist_scheduled_search'), 'result.count_hist_scheduled_search', 0)</eval>\n          <eval token=\"count_rt_scheduled_search\">if(isnotnull('result.count_rt_scheduled_search'), 'result.count_rt_scheduled_search', 0)</eval>\n          <eval token=\"count_auto_summary_search\">if(isnotnull('result.count_auto_summary_search'), 'result.count_auto_summary_search', 0)</eval>\n          <eval token=\"count_total_scheduled_search\">if(isnotnull('result.count_total_scheduled_search'), 'result.count_total_scheduled_search', 0)</eval>\n        </finalized>\n        <progress>\n          <eval token=\"count_total_hist\">if(isnotnull('result.count_total_hist'), 'result.count_total_hist', 0)</eval>\n          <eval token=\"count_total_rt\">if(isnotnull('result.count_total_rt'), 'result.count_total_rt', 0)</eval>\n          <eval token=\"count_total_adhoc_scheduled_search\">if(isnotnull('result.count_total_adhoc_scheduled_search'), 'result.count_total_adhoc_scheduled_search', 0)</eval>\n          <eval token=\"count_hist_scheduled_search\">if(isnotnull('result.count_hist_scheduled_search'), 'result.count_hist_scheduled_search', 0)</eval>\n          <eval token=\"count_rt_scheduled_search\">if(isnotnull('result.count_rt_scheduled_search'), 'result.count_rt_scheduled_search', 0)</eval>\n          <eval token=\"count_auto_summary_search\">if(isnotnull('result.count_auto_summary_search'), 'result.count_auto_summary_search', 0)</eval>\n          <eval token=\"count_total_scheduled_search\">if(isnotnull('result.count_total_scheduled_search'), 'result.count_total_scheduled_search', 0)</eval>\n        </progress>\n      </search>\n      <search id=\"search_concurrency_limits_base\">\n        <query>\n          | rest splunk_server=$splunk_server$ /services/server/status/limits/search-concurrency\n        </query>\n      </search>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Ad hoc + Scheduled Searches ($count_total_adhoc_scheduled_search$ Running)</title>\n      <single>\n        <search base=\"search_concurrency_limits_base\">\n          <query>\n            eval total_historical_vs_limit = \"$count_total_hist$\".\"/\".max_hist_searches\n            | fields total_historical_vs_limit\n          </query>\n        </search>\n        <option name=\"underLabel\">Historical</option>\n        <option name=\"height\">80px</option>\n        <option name=\"drilldown\">all</option>\n        <drilldown>\n          <set token=\"show_total_hist_search_details\">true</set>\n          <unset token=\"show_total_rt_search_details\"></unset>\n          <unset token=\"show_hist_search_details\"></unset>\n          <unset token=\"show_rt_search_details\"></unset>\n          <unset token=\"show_summarization_search_details\"></unset>\n        </drilldown>\n      </single>\n      <single>\n        <search base=\"search_concurrency_limits_base\">\n          <query>\n            eval total_rt_vs_limit = \"$count_total_rt$\".\"/\".max_rt_searches\n            | fields total_rt_vs_limit\n          </query>\n        </search>\n        <option name=\"underLabel\">Real-time</option>\n        <option name=\"height\">80px</option>\n        <option name=\"drilldown\">all</option>\n        <drilldown>\n          <unset token=\"show_total_hist_search_details\"></unset>\n          <set token=\"show_total_rt_search_details\">true</set>\n          <unset token=\"show_hist_search_details\"></unset>\n          <unset token=\"show_rt_search_details\"></unset>\n          <unset token=\"show_summarization_search_details\"></unset>\n        </drilldown>\n      </single>\n    </panel>\n    <panel rejects=\"$historical$\">\n      <title>Scheduled Searches ($count_total_scheduled_search$ Running)</title>\n      <single>\n        <search base=\"search_concurrency_limits_base\">\n          <query>\n            eval scheduled_vs_total_hist_scheduled_search_limit = \"$count_hist_scheduled_search$\".\"/\".max_hist_scheduled_searches\n            | fields scheduled_vs_total_hist_scheduled_search_limit\n          </query>\n        </search>\n        <option name=\"underLabel\">Historical</option>\n        <option name=\"height\">80px</option>\n        <option name=\"drilldown\">all</option>\n        <drilldown>\n          <unset token=\"show_total_hist_search_details\"></unset>\n          <unset token=\"show_total_rt_search_details\"></unset>\n          <set token=\"show_hist_search_details\">true</set>\n          <unset token=\"show_rt_search_details\"></unset>\n          <unset token=\"show_summarization_search_details\"></unset>\n        </drilldown>\n      </single>\n      <single>\n        <search base=\"search_concurrency_limits_base\">\n          <query>\n            eval scheduled_vs_total_rt_scheduled_search_limit = \"$count_rt_scheduled_search$\".\"/\".max_rt_scheduled_searches\n            | fields scheduled_vs_total_rt_scheduled_search_limit\n          </query>\n        </search>\n        <option name=\"underLabel\">Real-time</option>\n        <option name=\"height\">80px</option>\n        <option name=\"drilldown\">all</option>\n        <drilldown>\n          <unset token=\"show_total_hist_search_details\"></unset>\n          <unset token=\"show_total_rt_search_details\"></unset>\n          <unset token=\"show_hist_search_details\"></unset>\n          <set token=\"show_rt_search_details\">true</set>\n          <unset token=\"show_summarization_search_details\"></unset>\n        </drilldown>\n      </single>\n      <single>\n        <search base=\"search_concurrency_limits_base\">\n          <query>\n            eval scheduled_vs_total_auto_summary_search_limit = \"$count_auto_summary_search$\".\"/\".max_auto_summary_searches\n            | fields scheduled_vs_total_auto_summary_search_limit\n          </query>\n        </search>\n        <option name=\"underLabel\">Summarization</option>\n        <option name=\"height\">80px</option>\n        <option name=\"drilldown\">all</option>\n        <drilldown>\n          <unset token=\"show_total_hist_search_details\"></unset>\n          <unset token=\"show_total_rt_search_details\"></unset>\n          <unset token=\"show_hist_search_details\"></unset>\n          <unset token=\"show_rt_search_details\"></unset>\n          <set token=\"show_summarization_search_details\">true</set>\n        </drilldown>\n      </single>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <html>\n        <p>\n          Click to see more details.\n        </p>\n        <p>\n        Search concurrency limits can be set in limits.conf. <a href=\"/help?location=learnmore.admin.limitsconf\" target=\"_blank\" class=\"external\">Learn More</a>\n        </p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel depends=\"$show_total_hist_search_details$\" rejects=\"$historical$\">\n      <title>Ad hoc + Scheduled Historical Search Concurrency Details</title>\n      <table>\n        <search base=\"snapshot_search_concurrency_base\">\n          <query>\n            where ('search_props.type'==\"scheduled\" OR 'search_props.type'==\"summary indexing\" OR 'search_props.type'==\"report acceleration\" OR 'search_props.type'==\"datamodel acceleration\" OR 'search_props.type'==\"ad-hoc\") AND ('search_props.mode'==\"historical\" OR 'search_props.mode'==\"historical batch\")\n            | eval mem_used = round(mem_used, 0)\n            | eval count_cpu = round(pct_cpu / 100.0, 2)\n            | eval elapsed = round(elapsed, 0)\n            | fields search_props.sid, search_props.label, search_props.app, search_props.user, search_props.type, search_props.mode, search_props.role, mem_used, count_cpu, elapsed\n            | rename search_props.sid as SID, search_props.label as \"Search Name\", search_props.app as App, search_props.user as User, search_props.type as Type, search_props.mode as Mode, search_props.role as Role, mem_used as \"Memory Used (MB)\", count_cpu as \"CPU Usage (# cores)\", elapsed as \"Time Elapsed (sec)\"\n          </query>\n        </search>\n        <drilldown target=\"_blank\">\n          <link target=\"_blank\"><![CDATA[\n            search?q=`dmc_get_last_hour_resource_usage_from_sid($host$, $click.value$)`&display.page.search.mode=verbose&latest=&display.page.search.tab=visualizations&display.general.type=visualizations]]>\n          </link>\n        </drilldown>\n      </table>\n      <html>\n        <a data-unset-token=\"show_total_hist_search_details\">Close this panel</a>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel depends=\"$show_total_rt_search_details$\" rejects=\"$historical$\">\n      <title>Ad hoc + Scheduled Real-time Search Concurrency Details</title>\n      <table>\n        <search base=\"snapshot_search_concurrency_base\">\n          <query>\n            where ('search_props.type'==\"scheduled\" OR 'search_props.type'==\"summary indexing\" OR 'search_props.type'==\"report acceleration\" OR 'search_props.type'==\"datamodel acceleration\" OR 'search_props.type'==\"ad-hoc\") AND ('search_props.mode'==\"RT\" OR 'search_props.mode'==\"RT indexed\")\n            | eval mem_used = round(mem_used, 0)\n            | eval count_cpu = round(pct_cpu / 100.0, 2)\n            | eval elapsed = round(elapsed, 0)\n            | fields search_props.sid, search_props.label, search_props.app, search_props.user, search_props.type, search_props.mode, search_props.role, mem_used, count_cpu, elapsed\n            | rename search_props.sid as SID, search_props.label as \"Search Name\", search_props.app as App, search_props.user as User, search_props.type as Type, search_props.mode as Mode, search_props.role as Role, mem_used as \"Memory Used (MB)\", count_cpu as \"CPU Usage (# cores)\", elapsed as \"Time Elapsed (sec)\"\n          </query>\n        </search>\n        <drilldown target=\"_blank\">\n          <link target=\"_blank\"><![CDATA[\n            search?q=`dmc_get_last_hour_resource_usage_from_sid($host$, $click.value$)`&display.page.search.mode=verbose&latest=&display.page.search.tab=visualizations&display.general.type=visualizations]]>\n          </link>\n        </drilldown>\n      </table>\n      <html>\n        <a data-unset-token=\"show_total_rt_search_details\">Close this panel</a>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel depends=\"$show_hist_search_details$\" rejects=\"$historical$\">\n      <title>Scheduled Historical Search Concurrency Details</title>\n      <table>\n        <search base=\"snapshot_search_concurrency_base\">\n          <query>\n            where ('search_props.type'==\"scheduled\" OR 'search_props.type'==\"summary indexing\" OR 'search_props.type'==\"report acceleration\" OR 'search_props.type'==\"datamodel acceleration\") AND ('search_props.mode'==\"historical\" OR 'search_props.mode'==\"historical batch\")\n            | eval mem_used = round(mem_used, 0)\n            | eval count_cpu = round(pct_cpu / 100.0, 2)\n            | eval elapsed = round(elapsed, 0)\n            | fields search_props.sid, search_props.label, search_props.app, search_props.user, search_props.type, search_props.mode, search_props.role, mem_used, count_cpu, elapsed\n            | rename search_props.sid as SID, search_props.label as \"Search Name\", search_props.app as App, search_props.user as User, search_props.type as Type, search_props.mode as Mode, search_props.role as Role, mem_used as \"Memory Used (MB)\", count_cpu as \"CPU Usage (# cores)\", elapsed as \"Time Elapsed (sec)\"\n          </query>\n        </search>\n        <drilldown target=\"_blank\">\n          <link target=\"_blank\"><![CDATA[\n            search?q=`dmc_get_last_hour_resource_usage_from_sid($host$, $click.value$)`&display.page.search.mode=verbose&latest=&display.page.search.tab=visualizations&display.general.type=visualizations]]>\n          </link>\n        </drilldown>\n      </table>\n      <html>\n        <a data-unset-token=\"show_hist_search_details\">Close this panel</a>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel depends=\"$show_rt_search_details$\" rejects=\"$historical$\">\n      <title>Scheduled Real-time Concurrency Search Details</title>\n      <table>\n        <search base=\"snapshot_search_concurrency_base\">\n          <query>\n            where ('search_props.type'==\"scheduled\" OR 'search_props.type'==\"summary indexing\" OR 'search_props.type'==\"report acceleration\" OR 'search_props.type'==\"datamodel acceleration\") AND ('search_props.mode'==\"RT\" OR 'search_props.mode'==\"RT indexed\")\n            | eval mem_used = round(mem_used, 0)\n            | eval count_cpu = round(pct_cpu / 100.0, 2)\n            | eval elapsed = round(elapsed, 0)\n            | fields search_props.sid, search_props.label, search_props.app, search_props.user, search_props.type, search_props.mode, search_props.role, mem_used, count_cpu, elapsed\n            | rename search_props.sid as SID, search_props.label as \"Search Name\", search_props.app as App, search_props.user as User, search_props.type as Type, search_props.mode as Mode, search_props.role as Role, mem_used as \"Memory Used (MB)\", count_cpu as \"CPU Usage (# cores)\", elapsed as \"Time Elapsed (sec)\"\n          </query>\n        </search>\n        <drilldown target=\"_blank\">\n          <link target=\"_blank\"><![CDATA[\n            search?q=`dmc_get_last_hour_resource_usage_from_sid($host$, $click.value$)`&display.page.search.mode=verbose&latest=&display.page.search.tab=visualizations&display.general.type=visualizations]]>\n          </link>\n        </drilldown>\n      </table>\n      <html>\n        <a data-unset-token=\"show_rt_search_details\">Close this panel</a>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel depends=\"$show_summarization_search_details$\" rejects=\"$historical$\">\n      <title>Summarization Search Details</title>\n      <table>\n        <search base=\"snapshot_search_concurrency_base\">\n          <query>\n            where ('search_props.type'==\"report acceleration\" OR 'search_props.type'==\"datamodel acceleration\")\n            | eval mem_used = round(mem_used, 0)\n            | eval count_cpu = round(pct_cpu / 100.0, 2)\n            | eval elapsed = round(elapsed, 0)\n            | fields search_props.sid, search_props.label, search_props.app, search_props.user, search_props.type, search_props.mode, search_props.role, mem_used, count_cpu, elapsed\n            | rename search_props.sid as SID, search_props.label as \"Search Name\", search_props.app as App, search_props.user as User, search_props.type as Type, search_props.mode as Mode, search_props.role as Role, mem_used as \"Memory Used (MB)\", count_cpu as \"CPU Usage (# cores)\", elapsed as \"Time Elapsed (sec)\"\n          </query>\n        </search>\n        <drilldown target=\"_blank\">\n          <link target=\"_blank\"><![CDATA[\n            search?q=`dmc_get_last_hour_resource_usage_from_sid($host$, $click.value$)`&display.page.search.mode=verbose&latest=&display.page.search.tab=visualizations&display.general.type=visualizations]]>\n          </link>\n        </drilldown>\n      </table>\n      <html>\n        <a data-unset-token=\"show_summarization_search_details\">Close this panel</a>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Search Activity</title>\n      <input type=\"dropdown\" token=\"resourceSnapshotSplitBy\" searchWhenChanged=\"true\">\n        <label>Split by</label>\n        <showClearButton>false</showClearButton>\n        <default>type</default>\n        <choice value=\"app\">App</choice>\n        <choice value=\"user\">User</choice>\n        <choice value=\"mode\">Mode</choice>\n        <choice value=\"type\">Type</choice>\n        <choice value=\"role\">Role</choice>\n        <choice value=\"search_head\">Dispatching Search Head</choice>\n        <choice value=\"label\">Search Name</choice>\n        <choice value=\"provenance\">Provenance</choice>\n        <choice value=\"workload_pool\">Workload Pool</choice>\n        <change>\n          <condition value=\"mode\">\n            <set token=\"resourceSnapshotModeDoc\">true</set>\n            <set token=\"resourceSnapshotSplitByLabel\">$label$</set>\n          </condition>\n          <condition value=\"*\">\n            <unset token=\"resourceSnapshotModeDoc\"></unset>\n            <set token=\"resourceSnapshotSplitByLabel\">$label$</set>\n          </condition>\n        </change>\n      </input>\n      <table>\n        <searchString>\n| rest splunk_server=$splunk_server$ /services/server/status/resource-usage/splunk-processes\n| eval search_props.provenance = if(isnull('search_props.provenance') AND isnotnull('search_props.sid'), \"unknown\", 'search_props.provenance')\n| eval search_props.label = if(isnull('search_props.label') AND isnotnull('search_props.sid'), \"N/A\", 'search_props.label')\n| search search_props.sid=* AND pct_cpu=* AND mem_used=*\n| stats dc(search_props.sid) AS Count sum(pct_cpu) as sum_pct_cpu sum(mem_used) as mem_used by search_props.$resourceSnapshotSplitBy$\n| sort -Count -sum_pct_cpu -mem_used\n| eval count_cpu = round(sum_pct_cpu / 100.0, 2)\n| rename app AS App user AS User mode AS Mode type AS Type role AS Role Count as \"Count of Searches\", count_cpu as \"CPU Usage (# cores)\", mem_used as \"Physical Memory Usage (MB)\", search_props.$resourceSnapshotSplitBy$ as \"$resourceSnapshotSplitByLabel$\"\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">collapsed</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">false</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">table</option>\n        <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n        <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n        <option name=\"charting.chart.bubbleSizeBy\">area</option>\n        <option name=\"charting.chart.nullValueMode\">gaps</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">default</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.axisTitleX.text\">Count</option>\n        <option name=\"charting.axisTitleY.text\">Count</option>\n        <option name=\"refresh.auto.interval\">60</option>\n        <option name=\"refresh.time.visible\">false</option>\n        <option name=\"wrap\">true</option>\n        <option name=\"rowNumbers\">false</option>\n        <option name=\"dataOverlayMode\">none</option>\n        <option name=\"drilldown\">none</option>\n        <drilldown>\n          <condition field=\"*\"></condition>\n        </drilldown>\n      </table>\n      <html depends=\"$resourceSnapshotModeDoc$\">\n        <p>Mode can be historical, historical batch, RT, or RT indexed.</p>\n        <p>CPU usage is expressed in total number of CPU cores cumulatively used by search processes.</p>\n      </html>\n      <html rejects=\"$resourceSnapshotModeDoc$\">\n        <p>CPU usage is expressed in total number of CPU cores cumulatively used by search processes.</p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Historical Charts</title>\n      <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n        <label>Time Range:</label>\n        <default>\n          <earliestTime>-4h@m</earliestTime>\n          <latestTime>now</latestTime>\n        </default>\n      </input>\n    </panel>\n  </row>\n\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>$concurrencyFuncLabel$ Search Concurrency</title>\n      <input type=\"dropdown\" token=\"concurrencyFunction\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>Median</default>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <change>\n          <set token=\"concurrencyFuncLabel\">$label$</set>\n        </change>\n      </input>\n      <input type=\"dropdown\" token=\"concurrencySplitBy\" searchWhenChanged=\"true\">\n        <label>Split by</label>\n        <showClearButton>false</showClearButton>\n        <default>type</default>\n        <choice value=\"app\">App</choice>\n        <choice value=\"user\">User</choice>\n        <choice value=\"mode\">Mode</choice>\n        <choice value=\"type\">Type</choice>\n        <choice value=\"role\">Role</choice>\n        <choice value=\"search_head\">Dispatching Search Head</choice>\n        <choice value=\"label\">Search Name</choice>\n        <choice value=\"provenance\">Provenance</choice>\n        <choice value=\"workload_pool\">Workload Pool</choice>\n        <change>\n          <condition value=\"mode\">\n            <set token=\"concurrencyModeDoc\">true</set>\n          </condition>\n          <condition value=\"*\">\n            <unset token=\"concurrencyModeDoc\"></unset>\n          </condition>\n        </change>\n      </input>\n      <chart>\n        <searchString>\n        `dmc_set_index_introspection` host=$host$ sourcetype=splunk_resource_usage component=PerProcess data.search_props.sid::*\n        | `dmc_rename_introspection_fields`\n        | `dmc_set_bin`\n        | stats dc(sid) AS distinct_search_count by _time, $concurrencySplitBy$\n        | `dmc_timechart` $concurrencyFunction$(distinct_search_count) AS \"$concurrencyFunction$ of search concurrency\" by $concurrencySplitBy$\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">false</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Count</option>\n        <!-- <option name=\"refresh.auto.interval\">300</option> -->\n        <drilldown target=\"_blank\">\n            <condition series=\"*\">\n                <link target=\"_blank\"><![CDATA[search?q=`dmc_search_activity_instance_drilldown($host$, $concurrencySplitBy$, $click.name2$)`&earliest=$earliest$&latest=$latest$]]></link>\n            </condition>\n        </drilldown>\n      </chart>\n      <html depends=\"$concurrencyModeDoc$\">\n        <p>Mode can be historical, historical batch, RT, or RT indexed.</p>\n      </html>\n    </panel>\n  </row>\n\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>$resourceFuncLabel$ Resource Usage of Searches</title>\n      <input type=\"dropdown\" token=\"resourceType\" searchWhenChanged=\"true\">\n        <label>Resource Type</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"pct_cpu\">CPU</choice>\n        <choice value=\"mem_used\">Memory</choice>\n        <default>pct_cpu</default>\n        <change>\n          <condition value=\"pct_cpu\">\n            <set token=\"usageYAxis\">CPU Usage (# cores)</set>\n            <set token=\"cpuDisplayMsg\">CPU usage is expressed in total number of CPU cores cumulatively used by search processes.</set>\n          </condition>\n          <condition value=\"mem_used\">\n            <set token=\"usageYAxis\">Memory Usage (MB)</set>\n            <set token=\"cpuDisplayMsg\"> </set>\n          </condition>\n        </change>\n      </input>\n      <input type=\"dropdown\" token=\"resourceFunction\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>Median</default>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <change>\n          <set token=\"resourceFuncLabel\">$label$</set>\n        </change>\n      </input>\n      <input type=\"dropdown\" token=\"resourceSplitBy\" searchWhenChanged=\"true\">\n        <label>Split by</label>\n        <showClearButton>false</showClearButton>\n        <default>type</default>\n        <choice value=\"app\">App</choice>\n        <choice value=\"user\">User</choice>\n        <choice value=\"mode\">Mode</choice>\n        <choice value=\"type\">Type</choice>\n        <choice value=\"role\">Role</choice>\n        <choice value=\"search_head\">Dispatching Search Head</choice>\n        <choice value=\"label\">Search Name</choice>\n        <choice value=\"provenance\">Provenance</choice>\n        <choice value=\"workload_pool\">Workload Pool</choice>\n        <change>\n          <condition value=\"mode\">\n            <set token=\"resourceModeDoc\">true</set>\n          </condition>\n          <condition value=\"*\">\n            <unset token=\"resourceModeDoc\"></unset>\n          </condition>\n        </change>\n      </input>\n      <chart>\n        <searchString>\n        `dmc_set_index_introspection` host=$host$ sourcetype=splunk_resource_usage component=PerProcess data.search_props.sid::*\n        | `dmc_rename_introspection_fields`\n        | `dmc_set_bin`\n        | stats latest($resourceType$) AS resource_usage_dedup by _time, $resourceSplitBy$, sid, pid\n        | stats sum(resource_usage_dedup) AS sum_resource_usage by _time,  $resourceSplitBy$\n        | eval sum_resource_usage = if(\"$resourceType$\" == \"pct_cpu\", round(sum_resource_usage / 100.0, 2), sum_resource_usage)\n        | `dmc_timechart` $resourceFunction$(sum_resource_usage) AS \"$resourceFunction$ of resource usage\" by $resourceSplitBy$\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">false</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"list.drilldown\">full</option>\n        <option name=\"list.wrap\">1</option>\n        <option name=\"maxLines\">5</option>\n        <option name=\"raw.drilldown\">full</option>\n        <option name=\"rowNumbers\">false</option>\n        <option name=\"table.drilldown\">all</option>\n        <option name=\"table.wrap\">1</option>\n        <option name=\"type\">list</option>\n        <option name=\"wrap\">true</option>\n        <option name=\"dataOverlayMode\">none</option>\n        <option name=\"charting.axisTitleY.text\">$usageYAxis$</option>\n        <!-- <option name=\"refresh.auto.interval\">300</option> -->\n        <drilldown target=\"_blank\">\n          <condition series=\"*\">\n              <link target=\"_blank\"><![CDATA[search?q=`dmc_search_activity_instance_drilldown($host$, $resourceSplitBy$, $click.name2$)`&earliest=$earliest$&latest=$latest$]]></link>\n          </condition>\n        </drilldown>\n      </chart>\n      <html depends=\"$resourceModeDoc$\">\n        <p>Mode can be historical, historical batch, RT, or RT indexed.</p>\n        <p>$cpuDisplayMsg$</p>\n      </html>\n      <html rejects=\"$resourceModeDoc$\">\n        <p>$cpuDisplayMsg$</p>\n      </html>\n    </panel>\n  </row>\n\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Top 20 Memory-Consuming Searches</title>\n      <table>\n        <searchString>\n        `dmc_set_index_introspection` host=$host$ sourcetype=splunk_resource_usage data.search_props.sid::* data.search_props.mode!=RT\n        | `dmc_rename_introspection_fields`\n        | stats max(elapsed) as runtime max(mem_used) as mem_used earliest(_time) as _time by sid, label, provenance, type, mode, app, role, search_head, user\n        | eval mem_used = round(mem_used, 2)\n        | sort 20 - mem_used\n        | fields - day, hour, minute, second\n        | eval _time = strftime(_time,\"%+\")\n        | rename sid as SID, label as \"Search Name\", provenance AS Provenance, type as Type, mode as Mode, app as App, role as Role, search_head as \"Search Head\", user as User, mem_used as \"Memory Usage (MB)\", _time as Started, runtime as Runtime\n        | fieldformat Runtime = `dmc_convert_runtime(Runtime)`\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"wrap\">true</option>\n        <option name=\"rowNumbers\">true</option>\n        <option name=\"dataOverlayMode\">none</option>\n        <option name=\"drilldown\">cell</option>\n        <option name=\"count\">10</option>\n        <drilldown>\n          <condition field=\"SID\">\n            <set token=\"top10_drilldown_sid\">$click.value2$</set>\n            <set token=\"top10_drilldown_earliest\">$earliest$</set>\n            <set token=\"top10_drilldown_latest\">$latest$</set>\n            <set token=\"top10drilldown\">$click.name2$</set>\n          </condition>\n          <condition field=\"*\"></condition>\n        </drilldown>\n      </table>\n      <html>\n        <p>Click on a SID to see more details</p>\n      </html>\n    </panel>\n    <panel depends=\"$top10drilldown$\">\n      <title>Details of SID: $top10_drilldown_sid$</title>\n      <table>\n        <searchString>\n`dmc_set_index_audit` action=search sourcetype=audittrail\n [ localop | stats count\n   | eval search_id = replace(\"$top10_drilldown_sid$\", \"^remote_[^_]*_\", \"\")\n   | table search_id ]\n [ localop | stats count\n   | eval earliest = $top10_drilldown_earliest$ - 86400\n   | table earliest ]\n [ localop | stats count\n   | eval host = if(like(\"$top10_drilldown_sid$\", \"remote_%\"), \"*\", \"$host$\")\n   | table host ]\n latest=\"$top10_drilldown_latest$\"\n| stats values(savedsearch_name) AS search_name values(result_count) AS result_count values(event_count) AS event_count values(scan_count) AS scan_count values(total_run_time) AS search_run_time values(host) as host values(search) AS search_string by search_id\n| transpose\n| rename column as Property, \"row 1\" as Value\n        </searchString>\n        <option name=\"drilldown\">off</option>\n        <option name=\"wrap\">true</option>\n      </table>\n      <html>\n        <p>Please try to choose a larger time range if this panel produces no result.</p>\n        <div> </div>\n        <a data-unset-token=\"top10drilldown\">Close this panel</a>\n      </html>\n    </panel>\n  </row>\n\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Searches Started Per Minute by Dispatcher</title>\n      <input type=\"dropdown\" token=\"dispatcher\" searchWhenChanged=\"true\">\n        <label>Dispatcher</label>\n        <showClearButton>false</showClearButton>\n        <default>(`dmc_event_local_search_dispatch`) OR (`dmc_event_remote_search_dispatch`)</default>\n        <choice value=\"(`dmc_event_local_search_dispatch`) OR (`dmc_event_remote_search_dispatch`)\">Local and Remote Instance(s)</choice>\n        <choice value=\"`dmc_event_local_search_dispatch`\">Local Instance</choice>\n        <choice value=\"`dmc_event_remote_search_dispatch`\">Remote Instance(s)</choice>\n      </input>\n      <chart>\n        <searchString>\n$dispatcher$ host=$host$\n| eval dispatcher = case(isnotnull(server) AND sourcetype==\"splunkd_remote_searches\", server, isnull(server) AND sourcetype==\"splunkd_remote_searches\", \"unknown\", sourcetype==\"audittrail\", \"local instance\")\n| bin _time\n| stats count by _time, dispatcher\n| timechart limit=50 per_minute(count) AS \"New searches per minute\" by dispatcher\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">false</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.axisTitleY.text\">New searches/minute</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n      </chart>\n      <html>\n        <p>This graph shows the number of searches newly dispatched every minute, grouped by instance that originally dispatched the search. The value \"local instance\" means that the search originated locally, as opposed to being dispatched by a remote search-head.</p>\n      </html>\n    </panel>\n  </row>\n\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Aggregate Search Runtime</title>\n      <input type=\"dropdown\" token=\"runtimeSplitBy\" searchWhenChanged=\"true\">\n        <label>Split by</label>\n        <showClearButton>false</showClearButton>\n        <default>type</default>\n        <choice value=\"app\">App</choice>\n        <choice value=\"user\">User</choice>\n        <choice value=\"mode\">Mode</choice>\n        <choice value=\"type\">Type</choice>\n        <choice value=\"role\">Role</choice>\n        <choice value=\"search_head\">Dispatching Search Head</choice>\n        <choice value=\"label\">Search Name</choice>\n        <choice value=\"provenance\">Provenance</choice>\n        <choice value=\"workload_pool\">Workload Pool</choice>\n        <change>\n          <condition value=\"mode\">\n            <set token=\"runtimeModeDoc\">true</set>\n          </condition>\n          <condition value=\"*\">\n            <unset token=\"runtimeModeDoc\"></unset>\n          </condition>\n        </change>\n      </input>\n      <chart>\n        <searchString>\n        `dmc_set_index_introspection` host=$host$ sourcetype=splunk_resource_usage component=PerProcess data.search_props.sid::*\n        | `dmc_rename_introspection_fields`\n        | `dmc_set_bin`\n        | stats max(elapsed) as ELAPSED by sid $runtimeSplitBy$ _time\n        | streamstats current=t global=f window=2 earliest(ELAPSED) as prev_ELAPSED latest(ELAPSED) as curr_ELAPSED by sid $runtimeSplitBy$\n        | eval `dmc_collection_interval`\n        | eval delta_ELAPSED = curr_ELAPSED - prev_ELAPSED\n        | eval runtime = if(delta_ELAPSED = 0, min(curr_ELAPSED, collection_interval), delta_ELAPSED)\n        | `dmc_timechart` sum(runtime) by $runtimeSplitBy$\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">false</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.axisTitleY.text\">Runtime (seconds)</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <drilldown target=\"_blank\">\n          <condition series=\"*\">\n              <link target=\"_blank\"><![CDATA[search?q=`dmc_search_activity_instance_drilldown($host$, $concurrencySplitBy$, $click.name2$)`&earliest=$earliest$&latest=$latest$]]></link>\n          </condition>\n        </drilldown>\n      </chart>\n      <html depends=\"$runtimeModeDoc$\">\n        <p>Mode can be historical, historical batch, RT, or RT indexed.</p>\n      </html>\n    </panel>\n  </row>\n\n</form>",
"eai:type": "views",
"name": "search_activity_instance",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" script=\"common_control.js\">\n  <label>Search Usage Statistics: Deployment</label>\n  <fieldset autoRun=\"true\" submitButton=\"false\">\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"group\">\n      <label>Group</label>\n      <showClearButton>false</showClearButton>\n      <search>\n        <query>\n          | `dmc_get_groups_containing_role(dmc_group_search_head)`\n          | search search_group=\"dmc_customgroup_*\" OR search_group=\"dmc_indexerclustergroup_*\" OR search_group=\"dmc_searchheadclustergroup_*\"\n        </query>\n      </search>\n      <fieldForLabel>label</fieldForLabel>\n      <fieldForValue>search_group</fieldForValue>\n      <choice value=\"*\">All Search Heads</choice>\n      <default>*</default>\n    </input>\n    <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n      <label>Time Range:</label>\n      <default>Last 4 hours</default>\n    </input>\n    <input type=\"radio\" searchWhenChanged=\"true\" token=\"filter_out_non_adhoc\">\n      <label>Only Ad Hoc Searches</label>\n      <default>search_type=&quot;ad hoc&quot;</default>\n      <choice value=\"search_type=&quot;ad hoc&quot;\">Yes</choice>\n      <choice value=\"true()\">No</choice>\n      <prefix>AND </prefix>\n    </input>\n  </fieldset>\n  <search id=\"get_audit_base\">\n    <query>\n      `dmc_audit_get_searches_for_groups(\"$group$\")`\n      | stats min(_time) as _time, values(user) as user, max(total_run_time) as total_run_time, first(search) as search, first(search_type) as search_type, first(apiStartTime) as apiStartTime, first(apiEndTime) as apiEndTime by search_id, host\n      | where isnotnull(search) $filter_out_non_adhoc$\n    </query>\n    <earliest>$time.earliest$</earliest>\n    <latest>$time.latest$</latest>\n  </search>\n  <search base=\"get_audit_base\">\n    <query>stats dc(user) as user_count</query>\n    <preview>\n      <set token=\"user_count\">$result.user_count$</set>\n    </preview>\n    <finalized>\n      <set token=\"user_count\">$result.user_count$</set>\n    </finalized>\n  </search>\n  <search base=\"get_audit_base\">\n    <query>stats dc(host) as search_head_count</query>\n    <preview>\n      <set token=\"search_head_count\">$result.search_head_count$</set>\n    </preview>\n    <finalized>\n      <set token=\"search_head_count\">$result.search_head_count$</set>\n    </finalized>\n  </search>\n  <row>\n    <panel>\n      <title>Search Activity by User ($user_count$)</title>\n      <table>\n        <search base=\"get_audit_base\">\n          <query>\n            stats dc(host) as count_host, median(total_run_time) as median_runtime, sum(total_run_time) as cum_runtime, count(search) as count, max(_time) as last_use by user\n            | eval median_runtime = if(isnotnull(median_runtime), median_runtime, \"-\")\n            | eval cum_runtime = if(isnotnull(cum_runtime), cum_runtime, \"-\")\n            | `dmc_time_format(last_use)`\n            | fields user, count, count_host, median_runtime, cum_runtime, last_use\n            | sort - count\n            | rename user as User, count_host as \"Search Head Count\", count as \"Search Count\", median_runtime as \"Median Runtime\", cum_runtime as \"Cumulative Runtime\", last_use as \"Last Search\"\n            | fieldformat \"Median Runtime\" = `dmc_convert_runtime('Median Runtime')`\n            | fieldformat \"Cumulative Runtime\" = `dmc_convert_runtime('Cumulative Runtime')`\n          </query>\n        </search>\n        <option name=\"drilldown\">row</option>\n        <drilldown>\n          <set token=\"user_drilldown_hosts\">$row.User$</set>\n          <set token=\"user_drilldown_searches\">$row.User$</set>\n        </drilldown>\n      </table>\n      <html>\n        <p>Click to see a list of search head names and a list of search strings.</p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel depends=\"$user_drilldown_hosts$\">\n      <title>Search Heads Used by $user_drilldown_hosts$</title>\n      <table>\n        <search base=\"get_audit_base\">\n          <query>\n            search user=$user_drilldown_hosts$\n            | stats count(search) as count by host\n            | sort - count\n            | fields host, count\n            | rename host as \"Search Head\", count as \"Search Count\"\n          </query>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <html>\n        <a data-unset-token=\"user_drilldown_hosts\">Close this panel</a>\n      </html>\n    </panel>\n    <panel depends=\"$user_drilldown_searches$\">\n      <title>Searches by $user_drilldown_searches$</title>\n      <table>\n        <search base=\"get_audit_base\">\n          <query>\n            search user=$user_drilldown_searches$\n            | stats count by search\n            | sort - count\n            | fields count, search\n            | rename search as \"Report Name/Search String\", count as \"Count\"\n          </query>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <html>\n        <a data-unset-token=\"user_drilldown_searches\">Close this panel</a>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel>\n      <title>Search Activity by Search Head ($search_head_count$)</title>\n      <table>\n        <search base=\"get_audit_base\">\n          <query>\n            stats median(total_run_time) as median_runtime sum(total_run_time) as cum_runtime count(search) as count_search max(_time) as last_use dc(user) as count_user by host\n            | eval median_runtime = if(isnotnull(median_runtime), median_runtime, \"-\")\n            | eval cum_runtime = if(isnotnull(cum_runtime), cum_runtime, \"-\")\n            | `dmc_time_format(last_use)`\n            | fields host, count_search, count_user, median_runtime, cum_runtime, last_use\n            | sort - count_search\n            | rename host as \"Search Head\", count_search as \"Search Count\", count_user as \"User Count\", median_runtime as \"Median Runtime\", cum_runtime as \"Cumulative Runtime\", last_use as \"Last Search\"\n            | fieldformat \"Median Runtime\" = `dmc_convert_runtime('Median Runtime')`\n            | fieldformat \"Cumulative Runtime\" = `dmc_convert_runtime('Cumulative Runtime')`\n          </query>\n        </search>\n        <option name=\"drilldown\">row</option>\n        <drilldown>\n          <set token=\"host_drilldown_users\">$row.Search Head$</set>\n          <set token=\"host_drilldown_searches\">$row.Search Head$</set>\n        </drilldown>\n      </table>\n      <html>\n        <p>Click to see a list of users and a list of search strings.</p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel depends=\"$host_drilldown_users$\">\n      <title>Users on $host_drilldown_users$</title>\n      <table>\n        <search base=\"get_audit_base\">\n          <query>\n            search host=$host_drilldown_users|s$\n            | stats count(search) as count by user\n            | sort - count\n            | fields user, count\n            | rename user as \"User\", count as \"Count\"\n          </query>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <html>\n        <a data-unset-token=\"host_drilldown_users\">Close this panel</a>\n      </html>\n    </panel>\n    <panel depends=\"$host_drilldown_searches$\">\n      <title>Searches on $host_drilldown_searches$</title>\n      <table>\n        <search base=\"get_audit_base\">\n          <query>\n            search host=$host_drilldown_searches|s$\n            | stats count by search\n            | sort - count        \n            | fields count, search\n            | rename search as \"Report Name/Search String\", count as \"Count\"\n          </query>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <html>\n        <a data-unset-token=\"host_drilldown_searches\">Close this panel</a>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel>\n      <title>Frequently Run Searches</title>\n      <table id=\"frequently_run_searches\">\n        <search base=\"get_audit_base\">\n          <query>\n            search user=\"*\"\n            | stats count(search) as count, median(total_run_time) as median_runtime, max(total_run_time) as max_runtime, values(user) as user, values(host) as host, values(search_type) as search_type by search\n            | eval median_runtime = if(isnotnull(median_runtime), median_runtime, \"-\")\n            | eval max_runtime = if(isnotnull(max_runtime), max_runtime, \"-\")\n            | sort - count\n            | rename search as \"Report Name/Search String\", count as \"Count\", median_runtime as \"Median Runtime\", max_runtime as \"Max Runtime\", user as Users, host as Hosts, search_type as Type\n            | fieldformat \"Median Runtime\" = `dmc_convert_runtime('Median Runtime')`\n            | fieldformat \"Max Runtime\" = `dmc_convert_runtime('Max Runtime')`\n          </query>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n    </panel>\n  </row>\n  <row>\n    <panel>\n      <title>Long-running Searches</title>\n      <table id=\"long_running_searches\">\n        <search base=\"get_audit_base\">\n          <query>\n            search user=\"*\" search=\"*\"\n            | eval earliest = case(like(apiStartTime, \"%ZERO_TIME%\") AND like(apiEndTime, \"%ZERO_TIME%\"), \"all time\", like(apiStartTime, \"%ZERO_TIME%\"), \"-\", 1 == 1, apiStartTime )\n            | eval latest = case(like(apiStartTime, \"%ZERO_TIME%\") AND like(apiEndTime, \"%ZERO_TIME%\"), \"all time\", like(apiEndTime, \"%ZERO_TIME%\"), \"-\", 1 == 1, apiEndTime ) \n            | `dmc_time_format(_time)`\n            | stats max(total_run_time) as total_run_time by search, _time, earliest, latest, search_type, user, host, search_id\n            | sort - total_run_time \n            | eval total_run_time = if(isnotnull(total_run_time), total_run_time, \"-\")\n            | fields search, total_run_time, _time, earliest, latest, search_type, user, host, search_id\n            | rename search as \"Report Name/Search String\", total_run_time as \"Search Runtime\", _time as \"Search Start\", earliest as \"Earliest Time\", latest as \"Latest Time\", search_type as Type, user as \"User\", host as \"Host\", search_id as SID\n            | fieldformat \"Search Runtime\" = `dmc_convert_runtime('Search Runtime')`\n          </query>\n        </search>\n        <option name=\"drilldown\">row</option>\n        <drilldown>\n          <set token=\"long_running_sid\">$row.SID$</set>\n        </drilldown>\n      </table>\n      <html>\n        <p>Click to see detail</p>\n      </html>\n      <event depends=\"$long_running_sid$\">\n        <title>Detail of SID: $long_running_sid$</title>\n        <search base=\"get_audit_base\">\n          <query>where search_id=$long_running_sid|s$</query>\n        </search>\n      </event>\n      <html depends=\"$long_running_sid$\">\n        <a data-unset-token=\"long_running_sid\">Close event view</a>\n      </html>\n    </panel>\n  </row>\n</form>",
"eai:type": "views",
"name": "search_usage_statistics_deployment",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" script=\"common_control.js\">\n  <label>Search Usage Statistics: Instance</label>\n  <description/>\n  <fieldset autoRun=\"true\" submitButton=\"false\">\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"dmc_group\">\n      <label>Group</label>\n      <showClearButton>false</showClearButton>\n      <search>\n        <query>\n          | `dmc_get_groups_containing_role(dmc_group_search_head)`\n          | search search_group!=\"dmc_group_*\"\n        </query>\n      </search>\n      <fieldForLabel>label</fieldForLabel>\n      <fieldForValue>search_group</fieldForValue>\n      <choice value=\"dmc_group_search_head\">All Search Heads</choice>\n      <default>dmc_group_search_head</default>\n    </input>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"splunk_server\">\n      <label>Instance</label>\n      <showClearButton>false</showClearButton>\n      <populatingSearch fieldForLabel=\"serverName\" fieldForValue=\"serverName\">\n        | `dmc_get_instance_info($dmc_group$)`\n        | where search_group=\"dmc_group_search_head\"\n      </populatingSearch>\n      <selectFirstChoice>true</selectFirstChoice>\n      <change>\n        <condition value=\"*\">\n          <set token=\"host\">$row.host$</set>\n        </condition>\n      </change>\n    </input>\n    <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n      <label>Time Range:</label>\n      <default>Last 4 hours</default>\n    </input>\n    <input type=\"radio\" searchWhenChanged=\"true\" token=\"filter_out_non_adhoc\">\n      <label>Only Ad Hoc Searches</label>\n      <default>search_type=&quot;ad hoc&quot;</default>\n      <choice value=\"search_type=&quot;ad hoc&quot;\">Yes</choice>\n      <choice value=\"true()\">No</choice>\n      <prefix>AND </prefix>\n    </input>\n  </fieldset>\n  <search id=\"get_audit_base\">\n    <query>\n      `dmc_audit_get_searches($host$)`\n      | stats min(_time) as _time, values(user) as user, max(total_run_time) as total_run_time, first(search) as search, first(search_type) as search_type, first(apiStartTime) as apiStartTime, first(apiEndTime) as apiEndTime by search_id\n      | where isnotnull(search) $filter_out_non_adhoc$\n    </query>\n    <earliest>$time.earliest$</earliest>\n    <latest>$time.latest$</latest>\n  </search>\n  <search base=\"get_audit_base\">\n    <query>stats dc(user) as user_count</query>\n    <preview>\n      <set token=\"user_count\">$result.user_count$</set>\n    </preview>\n    <finalized>\n      <set token=\"user_count\">$result.user_count$</set>\n    </finalized>\n  </search>\n  <row>\n    <panel>\n      <title>Search Activity by User ($user_count$)</title>\n      <table>\n        <search base=\"get_audit_base\">\n          <query>\n            | stats median(total_run_time) as median_runtime Perc90(total_run_time) as Perc90_runtime sum(total_run_time) as cum_runtime count(search) as count max(_time) as last_use by user\n            | eval last_use = strftime(last_use, \"%F %T\")\n            | fields user, count, median_runtime, Perc90_runtime, cum_runtime, last_use\n            | rename user as User, count as \"Search Count\", median_runtime as \"Median Runtime\", Perc90_runtime as \"90th Percentile Runtime\", cum_runtime as \"Cumulative Runtime\", last_use as \"Last Search\"\n            | fieldformat \"Median Runtime\" = `dmc_convert_runtime('Median Runtime')`\n            | fieldformat \"90th Percentile Runtime\" = `dmc_convert_runtime('90th Percentile Runtime')`\n            | fieldformat \"Cumulative Runtime\" = `dmc_convert_runtime('Cumulative Runtime')`\n          </query>\n        </search>\n        <option name=\"wrap\">true</option>\n        <option name=\"rowNumbers\">true</option>\n        <option name=\"drilldown\">none</option>\n        <option name=\"count\">10</option>\n        <drilldown>\n          <condition field=\"*\"></condition>\n        </drilldown>\n      </table>\n    </panel>\n  </row>\n  <row>\n    <panel>\n      <title>Frequently Run Searches</title>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"common_search_user_filter\">\n        <label>User</label>\n        <choice value=\"*\">All</choice>\n        <search>\n          <query>\n            `dmc_audit_get_searches($host$)`\n            | stats count by user\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <fieldForLabel>user</fieldForLabel>\n        <fieldForValue>user</fieldForValue>\n        <default>*</default>\n        <prefix>search user=\"</prefix>\n        <suffix>\"</suffix>\n        <showClearButton>false</showClearButton>\n      </input>\n      <table>\n        <search base=\"get_audit_base\">\n          <query>\n            $common_search_user_filter$\n            | stats count median(total_run_time) as median_runtime max(total_run_time) as max_runtime values(user) as user by search\n            | eval median_runtime=if(isnotnull(median_runtime), median_runtime, \"-\")\n            | eval max_runtime=if(isnotnull(max_runtime), max_runtime, \"-\")\n            | sort - count\n            | rename search as \"Search\", count as \"Count\", median_runtime as \"Median Runtime\", max_runtime as \"Max Runtime\", user as User\n            | fieldformat \"Median Runtime\" = `dmc_convert_runtime('Median Runtime')`\n            | fieldformat \"Max Runtime\" = `dmc_convert_runtime('Max Runtime')`\n          </query>\n        </search>\n        <option name=\"wrap\">true</option>\n        <option name=\"rowNumbers\">true</option>\n        <option name=\"dataOverlayMode\">none</option>\n        <option name=\"drilldown\">none</option>\n        <option name=\"count\">10</option>\n        <drilldown>\n          <condition field=\"*\"></condition>\n        </drilldown>\n      </table>\n    </panel>\n  </row>\n  <row>\n    <panel>\n      <title>Long-running Searches</title>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"long_running_search_user_filter\">\n        <label>User</label>\n        <choice value=\"*\">All</choice>\n        <search>\n          <query>\n            `dmc_audit_get_searches($host$)`\n            | stats count by user\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <fieldForLabel>user</fieldForLabel>\n        <fieldForValue>user</fieldForValue>\n        <default>*</default>\n        <prefix>search user=\"</prefix>\n        <suffix>\"</suffix>\n        <showClearButton>false</showClearButton>\n      </input>\n      <table>\n        <search base=\"get_audit_base\">\n          <query>\n$long_running_search_user_filter$\n| fields search, total_run_time, _time, apiStartTime, apiEndTime, search_type, user\n| eval earliest = case(\n    like(apiStartTime, \"%ZERO_TIME%\") AND like(apiEndTime, \"%ZERO_TIME%\"), \"all time\",\n    like(apiStartTime, \"%ZERO_TIME%\"), \"-\",\n    1 == 1, apiStartTime\n)\n| eval latest = case(\n    like(apiStartTime, \"%ZERO_TIME%\") AND like(apiEndTime, \"%ZERO_TIME%\"), \"all time\",\n    like(apiEndTime, \"%ZERO_TIME%\"), \"-\",\n    1 == 1, apiEndTime\n)\n| eval search = if(isnotnull(search), search, \"N/A\")\n| `dmc_time_format(_time)`\n| sort - total_run_time\n| fields search, total_run_time, _time, earliest, latest, search_type, user\n| rename search as Search, total_run_time as \"Search Runtime\", _time as \"Search Start\", earliest as \"Earliest Time\", latest as \"Latest Time\", search_type as Type, user as \"User\"\n| fieldformat \"Search Runtime\" = `dmc_convert_runtime('Search Runtime')`\n          </query>\n        </search>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"wrap\">true</option>\n        <option name=\"rowNumbers\">true</option>\n        <option name=\"dataOverlayMode\">none</option>\n        <option name=\"drilldown\">none</option>\n        <option name=\"count\">10</option>\n        <drilldown>\n          <condition field=\"*\"></condition>\n        </drilldown>\n      </table>\n    </panel>\n  </row>\n  <row>\n    <panel>\n      <title>Common Search Commands</title>\n      <table>\n        <search base=\"get_audit_base\">\n          <query>\neval commands = commands(search)\n| streamstats window=1 values(commands) as commands\n| stats count avg(total_run_time) as avg_runtime max(total_run_time) as max_runtime by commands\n| eval avg_runtime = round(avg_runtime, 2)\n| eval max_runtime = round(max_runtime, 2)\n| sort - count, - max_runtime, - avg_runtime\n| rename commands as Command, avg_runtime as \"Average Runtime\", max_runtime as \"Max Runtime\", count as \"Count\"\n| eval \"Average Runtime\" = `dmc_convert_runtime('Average Runtime')`\n| eval \"Max Runtime\" = `dmc_convert_runtime('Max Runtime')`\n          </query>\n        </search>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"wrap\">true</option>\n        <option name=\"rowNumbers\">true</option>\n        <option name=\"dataOverlayMode\">none</option>\n        <option name=\"drilldown\">none</option>\n        <option name=\"count\">20</option>\n        <drilldown>\n          <condition field=\"*\"></condition>\n        </drilldown>\n      </table>\n    </panel>\n  </row>\n</form>",
"eai:type": "views",
"name": "search_usage_statistics_instance",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" script=\"common_control.js\">\n  <label>Search Head Clustering: App Deployment</label>\n  <fieldset autoRun=\"true\" submitButton=\"false\">\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"group\">\n      <label>Search Head Cluster:</label>\n      <showClearButton>false</showClearButton>\n      <populatingSearch fieldForLabel=\"label\" fieldForValue=\"search_group\">\n        | `dmc_get_search_head_cluster_groups`\n      </populatingSearch>\n      <selectFirstChoice>true</selectFirstChoice>\n    </input>\n  </fieldset>\n  <row>\n    <panel>\n      <html>\n        <h2>\n          <span>Select views: </span>\n          <span id=\"link-switcher-view\">\n            <a href=\"#\" class=\"btn-pill active\" data-item=\"all\">All</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"snapshot\">Snapshot</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"historical\">Historical</a>\n          </span>\n        </h2>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Snapshots</title>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Apps Status</title>\n      <table>\n        <title>$countApps$ apps</title>\n        <search>\n          <query>\n| rest /services/apps/local splunk_server_group=\"$group$\" splunk_server_group=dmc_group_search_head\n| search install_source_checksum=*\n| fields title, label, splunk_server, install_source_checksum\n| rename title as app_name, install_source_checksum as checksum\n  | append [ | rest /services/apps/deploy splunk_server_group=\"$group$\" splunk_server_group=dmc_group_shc_deployer\n  | fields title, splunk_server, checksum\n| rename title as app_name]\n| stats values(checksum) as checksum, values(label) as label by app_name\n| eval status = if(mvcount(checksum) > 1, \"Out of Synchronization!\", \"Synchronized\")\n| fields label status app_name\n| rename label as App, status as \"Status\"\n| sort status\n          </query>\n          <done>\n            <set token=\"countApps\">$job.resultCount$</set>\n          </done>\n          <error>\n            <set token=\"countApps\">N/A</set>\n          </error>\n        </search>\n        <option name=\"drilldown\">row</option>\n        <fields>App, Status</fields>\n        <drilldown>\n          <set token=\"appLocalDrilldown\">$row.app_name$</set>\n          <set token=\"appLocalDrilldownLabel\">$row.App$</set>\n        </drilldown>\n      </table>\n      <html>\n        <p>This panel shows the status of apps pushed by deployer to search head cluster members.</p>\n        <p><b>Synchronized:</b> all members have the latest version of the app.</p>\n        <p><b>Out of Synchronization:</b> one or more members does not have the latest version of the app.</p>\n        <p>Click on a row to see more details.</p>\n      </html>\n    </panel>\n    <panel depends=\"$appLocalDrilldown$\">\n      <title>$appLocalDrilldownLabel$</title>\n      <table>\n        <title>Checksum on Search Head Cluster Members</title>\n        <search>\n          <query>\n| rest /services/apps/local splunk_server_group=\"$group$\" splunk_server_group=dmc_group_search_head\n| search install_source_checksum=* AND title=\"$appLocalDrilldown$\"\n| fields splunk_server, install_source_checksum\n| rename splunk_server as Instance, install_source_checksum as Checksum\n          </query>\n        </search>\n      </table>\n      <table>\n        <title>Checksum on Search Head Cluster Deployer</title>\n        <search>\n          <query>\n| rest /services/apps/deploy splunk_server_group=\"$group$\" splunk_server_group=dmc_group_shc_deployer\n| search title=\"$appLocalDrilldown$\"\n| fields splunk_server, checksum\n| rename splunk_server as Instance, checksum as Checksum\n          </query>\n        </search>\n      </table>\n      <html>\n        <a data-unset-token=\"appLocalDrilldown\">Close this panel</a>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Historical Charts</title>\n      <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n        <label>Time Range:</label>\n        <default>\n          <earliestTime>-4h@m</earliestTime>\n          <latestTime>now</latestTime>\n        </default>\n      </input>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>App Deployment Requests</title>\n      <search id=\"deploymentRequestBaseSearch\">\n        <query>\n`dmc_set_index_internal` search_group=dmc_group_shc_deployer sourcetype=splunkd_access uri_path=\"/services/apps/deploy\" method=POST\n| stats values(spent) as spent by _time, user, status\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <input type=\"dropdown\" token=\"deploymentRequestStatusScope\" searchWhenChanged=\"true\">\n        <label>Http Status Code</label>\n        <choice value=\"*\">All</choice>\n        <showClearButton>false</showClearButton>\n        <selectFirstChoice>true</selectFirstChoice>\n        <fieldForLabel>status</fieldForLabel>\n        <fieldForValue>status</fieldForValue>\n        <search base=\"deploymentRequestBaseSearch\">\n          <query>stats count by status</query>\n        </search>\n        <prefix>search status=\"</prefix>\n        <suffix>\"</suffix>\n      </input>\n      <input type=\"dropdown\" token=\"deploymentRequestUserScope\" searchWhenChanged=\"true\">\n        <label>User</label>\n        <choice value=\"*\">All</choice>\n        <showClearButton>false</showClearButton>\n        <selectFirstChoice>true</selectFirstChoice>\n        <fieldForLabel>user</fieldForLabel>\n        <fieldForValue>user</fieldForValue>\n        <search base=\"deploymentRequestBaseSearch\">\n          <query>stats count by user</query>\n        </search>\n        <prefix>search user=\"</prefix>\n        <suffix>\"</suffix>\n      </input>\n      <input type=\"dropdown\" token=\"deploymentRequestMetric\" searchWhenChanged=\"true\">\n        <label>Metric</label>\n        <showClearButton>false</showClearButton>\n        <default>count</default>\n        <choice value=\"count\">count</choice>\n        <choice value=\"avg(spent)\">average response time</choice>\n        <choice value=\"max(spent)\">maximum response time</choice>\n        <change>\n          <condition value=\"count\">\n            <set token=\"deploymentRequestYLabel\">Count</set>\n          </condition>\n          <condition value=\"*\">\n            <set token=\"deploymentRequestYLabel\">Time (ms)</set>\n          </condition>\n        </change>\n      </input>\n      <input type=\"dropdown\" token=\"deploymentRequestSplitBy\" searchWhenChanged=\"true\">\n        <label>Split by</label>\n        <showClearButton>false</showClearButton>\n        <default>status</default>\n        <choice value=\"user\">user</choice>\n        <choice value=\"status\">status</choice>\n        <prefix>by </prefix>\n      </input>\n      <chart>\n        <search base=\"deploymentRequestBaseSearch\">\n          <query>\n$deploymentRequestStatusScope$\n| $deploymentRequestStatusScope$\n| `dmc_timechart` $deploymentRequestMetric$ $deploymentRequestSplitBy$\n          </query>\n        </search>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.text\">$deploymentRequestYLabel$</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">0</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n        <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n        <option name=\"charting.chart.bubbleSizeBy\">area</option>\n        <option name=\"charting.chart.nullValueMode\">gaps</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.chart.showLabels\">auto</option>\n      </chart>\n      <html>\n        <p>This panel shows the number of app push requests made by user.</p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Count of App Deployment Actions on the Deployer</title>\n      <search id=\"sendDeployableAppsStatusBaseSearch\">\n        <query>\n`dmc_set_index_internal` search_group=dmc_group_shc_deployer sourcetype=splunkd_conf component=ConfDeployment data.task=sendDeployableApps\n| stats count by _time, data.target_label, data.status\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <input type=\"dropdown\" token=\"sendDeployableAppsStatusFilter\" searchWhenChanged=\"true\">\n        <label>Status</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"*\">All</choice>\n        <fieldForValue>data.status</fieldForValue>\n        <fieldForLabel>data.status</fieldForLabel>\n        <search base=\"sendDeployableAppsStatusBaseSearch\">\n          <query>stats count by data.status</query>\n        </search>\n        <selectFirstChoice>true</selectFirstChoice>\n        <prefix>search data.status=\"</prefix>\n        <suffix>\"</suffix>\n      </input>\n      <input type=\"dropdown\" token=\"sendDeployableAppsTargetFilter\" searchWhenChanged=\"true\">\n        <label>Target Member</label>\n        <showClearButton>false</showClearButton>\n        <selectFirstChoice>true</selectFirstChoice>\n        <choice value=\"*\">All</choice>\n        <fieldForLabel>data.target_label</fieldForLabel>\n        <fieldForValue>data.target_label</fieldForValue>\n        <search base=\"sendDeployableAppsStatusBaseSearch\">\n          <query>stats count by data.target_label</query>\n        </search>\n        <prefix>search data.target_label=\"</prefix>\n        <suffix>\"</suffix>\n      </input>\n      <input type=\"dropdown\" token=\"sendDeployableAppsSplitBy\" searchWhenChanged=\"true\">\n        <label>Split by</label>\n        <showClearButton>false</showClearButton>\n        <default>data.status</default>\n        <choice value=\"data.status\">Status</choice>\n        <choice value=\"data.target_label\">Target</choice>\n      </input>\n      <chart>\n        <search base=\"sendDeployableAppsStatusBaseSearch\">\n          <query>\n$sendDeployableAppsStatusFilter$\n| $sendDeployableAppsTargetFilter$\n| `dmc_timechart` count by $sendDeployableAppsSplitBy$\n          </query>\n        </search>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.text\">Count</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">0</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n        <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n        <option name=\"charting.chart.bubbleSizeBy\">area</option>\n        <option name=\"charting.chart.nullValueMode\">gaps</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.chart.showLabels\">auto</option>\n      </chart>\n      <html>\n        <p>This panel shows the activities on the deployer.</p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Count of App Deployment Actions by Search Head Cluster Members</title>\n      <input type=\"dropdown\" token=\"actionFilter\" searchWhenChanged=\"true\">\n        <label>Action</label>\n        <showClearButton>false</showClearButton>\n        <default>*</default>\n        <choice value=\"*\">All</choice>\n        <choice value=\"deleted\">deleted</choice>\n        <choice value=\"failed\">failed</choice>\n        <choice value=\"installed\">installed</choice>\n        <choice value=\"matched\">matched</choice>\n        <prefix>search action=\"</prefix>\n        <suffix>\"</suffix>\n      </input>\n      <input type=\"dropdown\" token=\"appNameFilter\" searchWhenChanged=\"true\">\n        <label>App</label>\n        <showClearButton>false</showClearButton>\n        <selectFirstChoice>true</selectFirstChoice>\n        <choice value=\"*\">All</choice>\n        <fieldForLabel>app_name</fieldForLabel>\n        <fieldForValue>app_name</fieldForValue>\n        <search>\n          <query>\n            `dmc_set_index_internal` search_group=\"$group$\" sourcetype=splunkd_conf component=ConfDeployment data.task=downloadDeployableApps\n            | table data.apps{}.action, data.apps{}.name\n            | eval apps = mvzip('data.apps{}.action', 'data.apps{}.name', \",\")\n            | fields - data.apps{}.action, data.apps{}.name\n            | mvexpand apps\n            | rex field=apps \"(?&lt;action&gt;\\w+),(?&lt;app_name&gt;.+)\"\n            | fields action, app_name\n            | where action!=\"preserved\"\n            | stats count by app_name\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <prefix>search app_name=\"</prefix>\n        <suffix>\"</suffix>\n      </input>\n      <input type=\"dropdown\" token=\"hostFilter\" searchWhenChanged=\"true\">\n        <label>Host</label>\n        <showClearButton>false</showClearButton>\n        <search>\n          <query>\n            `dmc_set_index_internal` search_group=\"$group$\" sourcetype=splunkd_conf component=ConfDeployment data.task=downloadDeployableApps\n            | stats count by host\n          </query>\n        </search>\n        <fieldForValue>host</fieldForValue>\n        <fieldForLabel>host</fieldForLabel>\n        <choice value=\"*\">All</choice>\n        <default>*</default>\n        <prefix>search host=\"</prefix>\n        <suffix>\"</suffix>\n      </input>\n      <input type=\"dropdown\" token=\"appDeploymentSplitBy\" searchWhenChanged=\"true\">\n        <label>Split by</label>\n        <showClearButton>false</showClearButton>\n        <default>host</default>\n        <choice value=\"app_name\">app</choice>\n        <choice value=\"host\">host</choice>\n        <choice value=\"action\">action</choice>\n      </input>\n      <chart>\n        <search>\n          <query>\n            `dmc_set_index_internal` search_group=\"$group$\" sourcetype=splunkd_conf component=ConfDeployment data.task=downloadDeployableApps\n            | table _time, data.apps{}.action, data.apps{}.name, host\n            | eval apps = mvzip('data.apps{}.action', 'data.apps{}.name', \",\")\n            | mvexpand apps\n            | rex field=apps \"(?&lt;action&gt;\\w+),(?&lt;app_name&gt;.+)\"\n            | fields _time, host, action, app_name\n            | where action!=\"preserved\"\n            | $actionFilter$\n            | $appNameFilter$\n            | $hostFilter$\n            | timechart count(action) as count_action by $appDeploymentSplitBy$\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.text\">Count</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">0</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n        <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n        <option name=\"charting.chart.bubbleSizeBy\">area</option>\n        <option name=\"charting.chart.nullValueMode\">gaps</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.chart.showLabels\">auto</option>\n      </chart>\n      <html>\n        <p>This panel shows the activities by search head cluster members.</p>\n      </html>\n    </panel>\n  </row>\n</form>",
"eai:type": "views",
"name": "shc_app_deployment",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" script=\"common_control.js\">\n  <label>Search Head Clustering: Artifact Replication</label>\n  <fieldset autoRun=\"true\" submitButton=\"false\">\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"group\">\n      <label>Search Head Cluster:</label>\n      <showClearButton>false</showClearButton>\n      <populatingSearch fieldForLabel=\"label\" fieldForValue=\"search_group\">\n        | `dmc_get_search_head_cluster_groups`\n      </populatingSearch>\n      <selectFirstChoice>true</selectFirstChoice>\n    </input>\n  </fieldset>\n  <row>\n    <panel>\n      <title>Warning and Error Patterns</title>\n      <input type=\"time\" searchWhenChanged=\"true\" token=\"warningErrorTime\">\n        <label>Time Range:</label>\n        <default>\n          <earliestTime>-24h</earliestTime>\n          <latestTime>now</latestTime>\n        </default>\n      </input>\n      <table>\n        <search>\n          <query>\n`dmc_get_warnings_and_errors(\"$group$\", *Artifact*)`\n| cluster showcount=t\n| table cluster_count, _time, log_level, component, event_message, punct\n| sort - cluster_count\n| `dmc_time_format(_time)`\n| rename cluster_count AS Count, _time AS \"Latest Time\", log_level as \"Log Level\", component as Component, event_message as \"Latest Message\"\n          </query>\n          <earliest>$warningErrorTime.earliest$</earliest>\n          <latest>$warningErrorTime.latest$</latest>\n        </search>\n        <fields>Count, \"Latest Time\", \"Log Level\", Component, \"Latest Message\"</fields>\n        <option name=\"drilldown\">row</option>\n        <drilldown>\n          <set token=\"warningErrorPunct\">$row.punct$</set>\n        </drilldown>\n      </table>\n      <html>\n        <p>Click on a row to see event details.</p>\n      </html>\n    </panel>\n    <panel depends=\"$warningErrorPunct$\">\n      <title>Event Details</title>\n      <event>\n        <search>\n          <query>\n`dmc_get_warnings_and_errors(\"$group$\", *Artifact*)` punct=\"$warningErrorPunct$\"\n          </query>\n          <earliest>$warningErrorTime.earliest$</earliest>\n          <latest>$warningErrorTime.latest$</latest>\n        </search>\n        <option name=\"rowNumbers\">true</option>\n      </event>\n      <html>\n        <a data-unset-token=\"warningErrorPunct\">Close this panel</a>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel>\n      <html>\n        <h2>\n          <span>Select views: </span>\n          <span id=\"link-switcher-view\">\n            <a href=\"#\" class=\"btn-pill active\" data-item=\"all\">All</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"snapshot\">Snapshot</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"historical\">Historical</a>\n          </span>\n        </h2>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Snapshots</title>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Count of Artifacts ($countArtifacts$)</title>\n      <search id=\"artifact_snapshot_base_search\">\n        <query>\n          | rest splunk_server_group=\"$group$\" splunk_server_group=dmc_group_search_head /services/shcluster/member/artifacts\n          | fields title, status, splunk_server, label, user, eai:acl.app\n          | rename splunk_server as member, label as search_name, eai:acl.app as app\n        </query>\n        <done>\n          <set token=\"countArtifacts\">$job.resultCount$</set>\n        </done>\n        <error>\n          <set token=\"countArtifacts\">N/A</set>\n        </error>\n      </search>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"count_artifact_status_filter\">\n        <label>Status</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"*\">All</choice>\n        <selectFirstChoice>true</selectFirstChoice>\n        <fieldForLabel>status</fieldForLabel>\n        <fieldForValue>status</fieldForValue>\n        <search base=\"artifact_snapshot_base_search\">\n          <query>stats count by status</query>\n        </search>\n        <prefix>search status=\"</prefix>\n        <suffix>\"</suffix>\n      </input>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"count_artifact_member_filter\">\n        <label>Member</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"*\">All</choice>\n        <selectFirstChoice>true</selectFirstChoice>\n        <fieldForLabel>member</fieldForLabel>\n        <fieldForValue>member</fieldForValue>\n        <search base=\"artifact_snapshot_base_search\">\n          <query>stats count by member</query>\n        </search>\n        <prefix>search member=\"</prefix>\n        <suffix>\"</suffix>\n      </input>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"count_artifact_app_filter\">\n        <label>App</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"*\">All</choice>\n        <selectFirstChoice>true</selectFirstChoice>\n        <fieldForLabel>app</fieldForLabel>\n        <fieldForValue>app</fieldForValue>\n        <search base=\"artifact_snapshot_base_search\">\n          <query>stats count by app</query>\n        </search>\n        <prefix>search app=\"</prefix>\n        <suffix>\"</suffix>\n      </input>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"count_artifact_search_name_filter\">\n        <label>Search Name</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"*\">All</choice>\n        <selectFirstChoice>true</selectFirstChoice>\n        <fieldForLabel>search_name</fieldForLabel>\n        <fieldForValue>search_name</fieldForValue>\n        <search base=\"artifact_snapshot_base_search\">\n          <query>stats count by search_name</query>\n        </search>\n        <prefix>search search_name=\"</prefix>\n        <suffix>\"</suffix>\n      </input>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"count_artifact_user_filter\">\n        <label>User</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"*\">All</choice>\n        <selectFirstChoice>true</selectFirstChoice>\n        <fieldForLabel>user</fieldForLabel>\n        <fieldForValue>user</fieldForValue>\n        <search base=\"artifact_snapshot_base_search\">\n          <query>stats count by user</query>\n        </search>\n        <prefix>search user=\"</prefix>\n        <suffix>\"</suffix>\n      </input>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"count_artifact_split_by\">\n        <label>Split by</label>\n        <showClearButton>false</showClearButton>\n        <default>status</default>\n        <choice value=\"status\">Status</choice>\n        <choice value=\"member\">Member</choice>\n        <choice value=\"app\">App</choice>\n        <choice value=\"search_name\">Search Name</choice>\n        <choice value=\"user\">User</choice>\n      </input>\n      <chart>\n        <search base=\"artifact_snapshot_base_search\" id=\"count_artifact_main_panel_search\">\n          <query>\n            $count_artifact_status_filter$\n            | $count_artifact_member_filter$\n            | $count_artifact_app_filter$\n            | $count_artifact_search_name_filter$\n            | $count_artifact_user_filter$\n            | stats count by $count_artifact_split_by$\n          </query>\n        </search>\n        <option name=\"charting.chart\">pie</option>\n        <option name=\"refresh.auto.interval\">60</option>\n        <option name=\"refresh.time.visible\">false</option>\n        <drilldown>\n          <set token=\"count_artifact_drilldown_name\">$click.name$</set>\n          <set token=\"count_artifact_drilldown_value\">$click.value$</set>\n          <set token=\"count_artifact_drilldown_value2\">$click.value2$</set>\n        </drilldown>\n      </chart>\n      <html>\n        <p>Click on pie chart for more details.</p>\n      </html>\n    </panel>\n    <panel depends=\"$count_artifact_drilldown_name$, $count_artifact_drilldown_value$, $count_artifact_drilldown_value2$\">\n      <title>Artifacts ($count_artifact_drilldown_value2$): $count_artifact_drilldown_name$ = $count_artifact_drilldown_value$</title>\n      <table>\n        <search base=\"artifact_snapshot_base_search\">\n          <query>\n            $count_artifact_status_filter$\n            | $count_artifact_member_filter$\n            | search $count_artifact_drilldown_name$ = \"$count_artifact_drilldown_value$\"\n          </query>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <html>\n        <a data-token-json='{\"count_artifact_drilldown_name\": null, \"count_artifact_drilldown_value\": null, \"count_artifact_drilldown_value2\": null}'>Close this panel</a>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Historical Charts</title>\n      <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n        <label>Time Range:</label>\n        <default>\n          <earliestTime>-4h@m</earliestTime>\n          <latestTime>now</latestTime>\n        </default>\n      </input>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Median Count of Artifacts to Replicate</title>\n      <chart>\n        <search>\n          <query>\n`dmc_set_index_internal` sourcetype=splunkd group=subtask_counts name=shccaptain_artifact search_group=\"$group$\"\n| `dmc_timechart_for_metrics_log` median(to_fix_rep_factor) as artifacts\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.axisTitleY.text\">Count</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">0</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n        <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n        <option name=\"charting.chart.bubbleSizeBy\">area</option>\n        <option name=\"charting.chart.nullValueMode\">gaps</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">none</option>\n        <option name=\"charting.chart.showLabels\">auto</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Artifact Replication Job Activity</title>\n      <chart>\n        <search>\n          <query>\n`dmc_set_index_internal` sourcetype=splunkd group=executor name=poolmember_executor search_group=\"$group$\"\n| eval backlog_change = jobs_added - jobs_finished\n| `dmc_timechart_for_metrics_log` sum(jobs_added) AS \"jobs added\" sum(jobs_finished) AS \"jobs finished\" sum(backlog_change) AS \"backlog change\"\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.axisTitleY.text\">Count</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">0</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n        <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n        <option name=\"charting.chart.bubbleSizeBy\">area</option>\n        <option name=\"charting.chart.nullValueMode\">gaps</option>\n        <option name=\"charting.chart.overlayFields\">\"backlog change\"</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">default</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.chart.showLabels\">auto</option>\n      </chart>\n    </panel>\n  </row>\n</form>",
"eai:type": "views",
"name": "shc_artifact_replication",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" script=\"common_control.js\" stylesheet=\"health-check.css\">\n  <label>Search Head Clustering: Configuration Replication</label>\n  <fieldset autoRun=\"true\" submitButton=\"false\">\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"group\">\n      <label>Search Head Cluster:</label>\n      <showClearButton>false</showClearButton>\n      <populatingSearch fieldForLabel=\"label\" fieldForValue=\"search_group\">\n        | `dmc_get_search_head_cluster_groups`\n      </populatingSearch>\n      <selectFirstChoice>true</selectFirstChoice>\n    </input>\n  </fieldset>\n  <search id=\"confOpSearch\">\n    <query>\n`dmc_set_index_internal` sourcetype=splunkd_conf search_group=\"$group$\" component=ConfOp data.task=*addCommit\n| stats count by _time, host, optype_desc, object_name, object_type, app, owner\n    </query>\n    <earliest>$time.earliest$</earliest>\n    <latest>$time.latest$</latest>\n  </search>\n  <row>\n    <panel>\n      <title>Health Check</title>\n      <search id=\"common_baseline_search\">\n        <query>\n          | rest splunk_server_group=\"$group$\" splunk_server_group=dmc_group_search_head /services/shcluster/member/members\n          | join label type=outer [\n            | rest /services/replication/configuration/health check_share_baseline=1 splunk_server_group=\"$group$\" splunk_server_group=dmc_group_search_head\n            | stats values(server_name) as baselines, count(server_name) as num_baselines by splunk_server, check_share_baseline\n            | eval shared_common_baseline = if(check_share_baseline == \"Yes\", baselines, \"\")\n            | eval no_shared_common_baseline = if(check_share_baseline == \"No\", baselines, \"\")\n            | eval unable_to_connect = if(check_share_baseline == \"Connection error\", baselines, \"\")\n            | eval num_shared_common_baseline = if(check_share_baseline == \"Yes\", num_baselines, 0)\n            | eval num_no_shared_common_baseline = if(check_share_baseline == \"No\", num_baselines, 0)\n            | eval num_unable_to_connect = if(check_share_baseline == \"Connection error\", num_baselines, 0)\n            | stats sum(num_shared_common_baseline) as total_shared_common_baseline, sum(num_no_shared_common_baseline) as total_no_shared_common_baseline, sum(num_unable_to_connect) as total_unable_to_connect, values(shared_common_baseline) as shared_common_baseline, values(no_shared_common_baseline) as no_shared_common_baseline, values(unable_to_connect) as unable_to_connect by splunk_server\n            | eval ratio = total_shared_common_baseline . \"/\" . (total_shared_common_baseline+total_no_shared_common_baseline+total_unable_to_connect)\n            | rename splunk_server as label\n          ]\n          | where total_no_shared_common_baseline+total_unable_to_connect > 0\n        </query>\n        <preview>\n          <condition match=\"$job.resultCount$ = 0\">\n            <set token=\"common_baseline_text_healthy\">All members in this cluster share a common baseline.</set>\n            <unset token=\"common_baseline_text_unhealthy\"></unset>\n          </condition>\n          <condition match=\"$job.resultCount$ > 0\">\n            <set token=\"common_baseline_text_unhealthy\">There are members in this cluster that do not share a common baseline. Action may be required.</set>\n            <unset token=\"common_baseline_text_healthy\"></unset>\n          </condition>\n        </preview>\n      </search>\n      <html depends=\"$common_baseline_text_unhealthy$\">\n        <div class=\"dmc-kpi-item\">\n          <div class=\"alert alert-warning\">\n            <i class=\"icon-alert\"></i>\n            <h5>$common_baseline_text_unhealthy$ <a href=\"shc_status_and_conf?form.group=$group$\">click to see more details.</a> <a href=\"/help?location=learnmore.shc.confreplication\" target=\"_blank\" class=\"external\">Learn More</a></h5>\n          </div>\n        </div>\n      </html>\n      <html depends=\"$common_baseline_text_healthy$\">\n        <div class=\"dmc-kpi-item\">\n          <div class=\"alert alert-success\">\n            <i class=\"icon-alert\"></i>\n            <h5>$common_baseline_text_healthy$</h5>\n          </div>\n        </div>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel>\n      <title>Warning and Error Patterns</title>\n      <input type=\"time\" searchWhenChanged=\"true\" token=\"warningErrorTime\">\n        <label>Time Range:</label>\n        <default>\n          <earliestTime>-24h</earliestTime>\n          <latestTime>now</latestTime>\n        </default>\n      </input>\n      <table>\n        <search>\n          <query>\n`dmc_get_warnings_and_errors(\"$group$\", ConfReplication*)`\n| cluster showcount=t\n| table cluster_count, _time, log_level, component, event_message, punct\n| sort - cluster_count\n| `dmc_time_format(_time)`\n| rename cluster_count AS Count, _time AS \"Latest Time\", log_level as \"Log Level\", component as Component, event_message as \"Latest Message\"\n          </query>\n          <earliest>$warningErrorTime.earliest$</earliest>\n          <latest>$warningErrorTime.latest$</latest>\n        </search>\n        <fields>Count, \"Latest Time\", \"Log Level\", Component, \"Latest Message\"</fields>\n        <option name=\"drilldown\">row</option>\n        <drilldown>\n          <set token=\"warningErrorPunct\">$row.punct$</set>\n        </drilldown>\n      </table>\n      <html>\n        <p>Click on a row to see event details.</p>\n      </html>\n    </panel>\n    <panel depends=\"$warningErrorPunct$\">\n      <title>Event Details</title>\n      <event>\n        <search>\n          <query>\n`dmc_get_warnings_and_errors(\"$group$\", ConfReplication*)` punct=\"$warningErrorPunct$\"\n          </query>\n          <earliest>$warningErrorTime.earliest$</earliest>\n          <latest>$warningErrorTime.latest$</latest>\n        </search>\n        <option name=\"rowNumbers\">true</option>\n      </event>\n      <html>\n        <a data-unset-token=\"warningErrorPunct\">Close this panel</a>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Historical Charts</title>\n      <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n        <label>Time Range:</label>\n        <default>\n          <earliestTime>-4h@m</earliestTime>\n          <latestTime>now</latestTime>\n        </default>\n      </input>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Configuration Replication Activity</title>\n      <input type=\"dropdown\" token=\"confOpHostScope\" searchWhenChanged=\"true\">\n        <label>Member</label>\n        <showClearButton>false</showClearButton>\n        <default>where 1==1</default>\n        <choice value=\"where 1==1\">All</choice>\n        <fieldForLabel>host</fieldForLabel>\n        <fieldForValue>host_scope</fieldForValue>\n        <search base=\"confOpSearch\">\n          <query>\n            | stats count by host\n            | eval host_scope = \"where host == \\\"\".host.\"\\\"\"\n          </query>\n        </search>\n      </input>\n      <input type=\"dropdown\" token=\"confOpAppScope\" searchWhenChanged=\"true\">\n        <label>App Context</label>\n        <showClearButton>false</showClearButton>\n        <default>where 1==1</default>\n        <choice value=\"where 1==1\">All</choice>\n        <fieldForLabel>app</fieldForLabel>\n        <fieldForValue>app_scope</fieldForValue>\n        <search base=\"confOpSearch\">\n          <query>\n            | stats count by app\n            | eval app_scope = \"where app == \\\"\".app.\"\\\"\"\n          </query>\n        </search>\n      </input>\n      <input type=\"dropdown\" token=\"confOpOperationTypeScope\" searchWhenChanged=\"true\">\n        <label>Operation Type</label>\n        <showClearButton>false</showClearButton>\n        <default>where 1==1</default>\n        <choice value=\"where 1==1\">All</choice>\n        <fieldForLabel>optype_desc</fieldForLabel>\n        <fieldForValue>optype_desc_scope</fieldForValue>\n        <search base=\"confOpSearch\">\n          <query>\n            | stats count by optype_desc\n            | eval optype_desc_scope = \"where optype_desc == \\\"\".optype_desc.\"\\\"\"\n          </query>\n        </search>\n      </input>\n      <input type=\"dropdown\" token=\"confOpObjTypeScope\" searchWhenChanged=\"true\">\n        <label>Object Type</label>\n        <showClearButton>false</showClearButton>\n        <default>where 1==1</default>\n        <choice value=\"where 1==1\">All</choice>\n        <fieldForLabel>object_type</fieldForLabel>\n        <fieldForValue>object_type_scope</fieldForValue>\n        <search base=\"confOpSearch\">\n          <query>\n            | stats count by object_type\n            | eval object_type_scope = \"where object_type == \\\"\".object_type.\"\\\"\"\n          </query>\n        </search>\n      </input>\n      <input type=\"dropdown\" token=\"confOpObjNameScope\" searchWhenChanged=\"true\">\n        <label>Object Name</label>\n        <showClearButton>false</showClearButton>\n        <default>where 1==1</default>\n        <choice value=\"where 1==1\">All</choice>\n        <fieldForLabel>object_name</fieldForLabel>\n        <fieldForValue>object_name_scope</fieldForValue>\n        <search base=\"confOpSearch\">\n          <query>\n            | stats count by object_name\n            | eval object_name_scope = \"where object_name == \\\"\".object_name.\"\\\"\"\n          </query>\n        </search>\n      </input>\n      <input type=\"dropdown\" token=\"confOpOwnerScope\" searchWhenChanged=\"true\">\n        <label>User Context</label>\n        <showClearButton>false</showClearButton>\n        <default>where 1==1</default>\n        <choice value=\"where 1==1\">All</choice>\n        <fieldForLabel>owner</fieldForLabel>\n        <fieldForValue>owner_scope</fieldForValue>\n        <search base=\"confOpSearch\">\n          <query>\n            | stats count by owner\n            | eval owner_scope = \"where owner == \\\"\".owner.\"\\\"\"\n          </query>\n        </search>\n      </input>\n      <input type=\"dropdown\" token=\"confOpBy\" searchWhenChanged=\"true\">\n        <label>Group by</label>\n        <showClearButton>false</showClearButton>\n        <default>object_type</default>\n        <choice value=\"optype_desc\">Operation Type</choice>\n        <choice value=\"object_type\">Object Type</choice>\n        <choice value=\"object_name\">Object Name</choice>\n        <choice value=\"owner\">Owner</choice>\n        <choice value=\"app\">App</choice>\n        <choice value=\"host\">Member</choice>\n      </input>\n      <chart>\n        <title>Replicated Configuration Operations</title>\n        <search base=\"confOpSearch\">\n          <query>\n            $confOpAppScope$\n            | $confOpOperationTypeScope$\n            | $confOpObjTypeScope$\n            | $confOpObjNameScope$\n            | $confOpOwnerScope$\n            | $confOpHostScope$\n            | timechart count by $confOpBy$ usenull=f\n          </query>\n        </search>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">false</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n        <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n        <option name=\"charting.chart.bubbleSizeBy\">area</option>\n        <option name=\"charting.chart.nullValueMode\">gaps</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.axisTitleY.text\">Operation Count</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n      </chart>\n      <table>\n        <title>Configuration Replication History</title>\n        <search base=\"confOpSearch\">\n          <query>\n            fields - count\n| $confOpOperationTypeScope$\n| $confOpObjTypeScope$\n| $confOpObjNameScope$\n| $confOpOwnerScope$\n| $confOpHostScope$\n| sort - _time\n| rename _time as Time, host as Instance, optype_desc as \"Operation Type\", object_name as \"Object Name\", object_type as \"Object Type\", app as App, owner as Owner\n| `dmc_time_format(Time)`\n          </query>\n        </search>\n        <option name=\"drilldown\">off</option>\n      </table>\n    </panel>\n  </row>\n  <row>\n    <panel>\n      <title>Configuration Replication Performance</title>\n      <search id=\"confRepPerfSearch\">\n        <query>\n`dmc_set_index_internal` sourcetype=splunkd search_group=\"$group$\" group=conf\n| `dmc_set_bin_for_metrics_log`\n| stats sum(count) as count, sum(wallclock_ms_total) as sum_total_time, max(wallclock_ms_max) as max_max_time by _time, action, host\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <chart>\n        <search base=\"confRepPerfSearch\">\n          <query>\n`dmc_timechart_for_metrics_log` sum(count) as count latest(eval(sum_total_time / count)) as avg_time_per_action latest(max_max_time) as max_time_per_action\n          </query>\n        </search>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisLabelsY2.majorUnit\">1</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">true</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n        <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n        <option name=\"charting.chart.bubbleSizeBy\">area</option>\n        <option name=\"charting.chart.nullValueMode\">gaps</option>\n        <option name=\"charting.chart.overlayFields\">count</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">default</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.chart.showLabels\">auto</option>\n        <option name=\"charting.axisTitleY2.text\">Count of Actions</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.axisTitleY.text\">Time Spent (ms)</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel>\n      <title>Count of Actions Over Time</title>\n      <input type=\"dropdown\" token=\"confRepPerfCountHostScope\" searchWhenChanged=\"true\">\n        <label>Host</label>\n        <showClearButton>false</showClearButton>\n        <default>*</default>\n        <choice value=\"*\">All</choice>\n        <fieldForLabel>host</fieldForLabel>\n        <fieldForValue>host</fieldForValue>\n        <search base=\"confRepPerfSearch\">\n          <query>stats count by host</query>\n        </search>\n        <prefix>search host=\"</prefix>\n        <suffix>\"</suffix>\n      </input>\n      <input type=\"dropdown\" token=\"confRepPerfCountActionScope\" searchWhenChanged=\"true\">\n        <label>Action</label>\n        <showClearButton>false</showClearButton>\n        <default>*</default>\n        <choice value=\"*\">All</choice>\n        <fieldForLabel>action</fieldForLabel>\n        <fieldForValue>action</fieldForValue>\n        <search base=\"confRepPerfSearch\">\n          <query>stats count by action</query>\n        </search>\n        <prefix>search action=\"</prefix>\n        <suffix>\"</suffix>\n      </input>\n      <input type=\"dropdown\" token=\"confRepPerfCountSplitBy\" searchWhenChanged=\"true\">\n        <label>Split by</label>\n        <showClearButton>false</showClearButton>\n        <default>action</default>\n        <choice value=\"action\">action</choice>\n        <choice value=\"host\">host</choice>\n      </input>\n      <chart>\n        <search base=\"confRepPerfSearch\">\n          <query>\n$confRepPerfCountHostScope$\n| $confRepPerfCountActionScope$\n| `dmc_timechart_for_metrics_log` sum(count) by $confRepPerfCountSplitBy$\n          </query>\n        </search>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.axisLabelsY2.majorUnit\">1</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.text\">Count</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">0</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n        <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n        <option name=\"charting.chart.bubbleSizeBy\">area</option>\n        <option name=\"charting.chart.nullValueMode\">gaps</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.chart.showLabels\">auto</option>\n      </chart>\n    </panel>\n    <panel>\n      <title>Time Spent on Actions Over Time</title>\n      <input type=\"dropdown\" token=\"confRepPerfMetric\" searchWhenChanged=\"true\">\n        <label>Metric</label>\n        <showClearButton>false</showClearButton>\n        <default>max(max_max_time) as max_time</default>\n        <choice value=\"latest(eval(sum_total_time/count)) as avg_time\">Average Time</choice>\n        <choice value=\"max(max_max_time) as max_time\">Max Time</choice>\n      </input>\n      <input type=\"dropdown\" token=\"confRepPerfTimeHostScope\" searchWhenChanged=\"true\">\n        <label>Host</label>\n        <showClearButton>false</showClearButton>\n        <default>*</default>\n        <choice value=\"*\">All</choice>\n        <fieldForLabel>host</fieldForLabel>\n        <fieldForValue>host</fieldForValue>\n        <search base=\"confRepPerfSearch\">\n          <query>stats count by host</query>\n        </search>\n        <prefix>search host=\"</prefix>\n        <suffix>\"</suffix>\n      </input>\n      <input type=\"dropdown\" token=\"confRepPerfTimeActionScope\" searchWhenChanged=\"true\">\n        <label>Action</label>\n        <showClearButton>false</showClearButton>\n        <default>*</default>\n        <choice value=\"*\">All</choice>\n        <fieldForLabel>action</fieldForLabel>\n        <fieldForValue>action</fieldForValue>\n        <search base=\"confRepPerfSearch\">\n          <query>stats count by action</query>\n        </search>\n        <prefix>search action=\"</prefix>\n        <suffix>\"</suffix>\n      </input>\n      <input type=\"dropdown\" token=\"confRepPerfTimeSplitBy\" searchWhenChanged=\"true\">\n        <label>Split by</label>\n        <showClearButton>false</showClearButton>\n        <default>action</default>\n        <choice value=\"action\">action</choice>\n        <choice value=\"host\">host</choice>\n      </input>\n      <chart>\n        <search base=\"confRepPerfSearch\">\n          <query>\n$confRepPerfTimeHostScope$\n| $confRepPerfTimeActionScope$\n| `dmc_timechart_for_metrics_log` $confRepPerfMetric$ by $confRepPerfTimeSplitBy$\n          </query>\n        </search>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.axisLabelsY2.majorUnit\">1</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.text\">Time Spent (ms)</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">0</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n        <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n        <option name=\"charting.chart.bubbleSizeBy\">area</option>\n        <option name=\"charting.chart.nullValueMode\">gaps</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.chart.showLabels\">auto</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel>\n      <html>\n        <p>Definitions for these actions are available in our online documentation. <a class=\"external\" href=\"/help?location=learnmore.shclustering.actions\" target=\"_blank\">Learn more</a>.</p>\n      </html>\n    </panel>\n  </row>\n</form>",
"eai:type": "views",
"name": "shc_conf_rep",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" script=\"common_control.js\">\n  <label>Search Head Clustering: Scheduler Delegation</label>\n  <fieldset autoRun=\"true\" submitButton=\"false\">\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"group\">\n      <label>Search Head Cluster:</label>\n      <showClearButton>false</showClearButton>\n      <populatingSearch fieldForLabel=\"label\" fieldForValue=\"search_group\">\n        | `dmc_get_search_head_cluster_groups`\n      </populatingSearch>\n      <selectFirstChoice>true</selectFirstChoice>\n    </input>\n  </fieldset>\n  <search id=\"getSchedulerData\">\n    <query>\n`dmc_set_index_internal` sourcetype=splunkd group=searchscheduler search_group=\"$group$\"\n| `dmc_timechart_for_metrics_log` sum(dispatched) as dispatched, sum(skipped) as skipped, sum(delegated) as delegated $funcStatus$(delegated_waiting) as delegated_waiting, sum(delegated_scheduled) as delegated_scheduled, $funcStatus$(max_pending) as max_pending, $funcStatus$(max_running) as max_running\n    </query>\n    <earliest>$time.earliest$</earliest>\n    <latest>$time.latest$</latest>\n  </search>\n  <row>\n    <panel>\n      <html>\n        <h2>\n          <span>Select views: </span>\n          <span id=\"link-switcher-view\">\n            <a href=\"#\" class=\"btn-pill active\" data-item=\"all\">All</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"snapshot\">Snapshot</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"historical\">Historical</a>\n          </span>\n        </h2>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Snapshots</title>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Scheduler Delegation Count</title>\n      <search>\n        <query>\n          | rest splunk_server_group=\"$group$\" splunk_server_group=dmc_group_search_head /services/shcluster/captain/info\n          | dedup label\n        </query>\n        <preview>\n          <set token=\"captain_server_name\">$result.label$</set>\n        </preview>\n      </search>\n      <search id=\"jobsSnapshotBaseSearch\">\n        <query>\n| rest splunk_server=$captain_server_name$ /services/shcluster/captain/jobs\n| eval peer = if(isnotnull(peer_servername), peer_servername, peer)\n| fields dispatch_time, job_state, peer, saved_search, savedsearchtype, search_app, search_owner, sid, splunk_server, success, title\n| eval sid = if(isnotnull(sid), sid, \"N/A\")\n        </query>\n      </search>\n      <search base=\"jobsSnapshotBaseSearch\">\n        <query>stats count</query>\n        <finalized>\n          <set token=\"countTotalDelegation\">$result.count$</set>\n        </finalized>\n        <error>\n          <set token=\"countTotalDelegation\">N/A</set>\n        </error>\n      </search>\n      <input type=\"dropdown\" token=\"jobsSplitBy\" searchWhenChanged=\"true\">\n        <label>Split by</label>\n        <default>search_app</default>\n        <showClearButton>false</showClearButton>\n        <choice value=\"search_app\">App</choice>\n        <choice value=\"savedsearchtype\">Type</choice>\n        <choice value=\"search_owner\">Owner</choice>\n        <choice value=\"peer\">Instance</choice>\n      </input>\n      <chart>\n        <title>total: $countTotalDelegation$</title>\n        <search base=\"jobsSnapshotBaseSearch\">\n          <query>stats count by $jobsSplitBy$</query>\n        </search>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">0</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">pie</option>\n        <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n        <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n        <option name=\"charting.chart.bubbleSizeBy\">area</option>\n        <option name=\"charting.chart.nullValueMode\">gaps</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">default</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">none</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.chart.showLabels\">auto</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Scheduler Delegation Activity</title>\n      <input type=\"dropdown\" token=\"jobStateFilter\" searchWhenChanged=\"true\">\n        <label>Job State</label>\n        <showClearButton>false</showClearButton>\n        <search base=\"jobsSnapshotBaseSearch\">\n          <query>stats count by job_state</query>\n        </search>\n        <fieldForValue>job_state</fieldForValue>\n        <fieldForLabel>job_state</fieldForLabel>\n        <prefix>search job_state=</prefix>\n        <choice value=\"*\">All</choice>\n        <selectFirstChoice>true</selectFirstChoice>\n      </input>\n      <input type=\"dropdown\" token=\"jobSavedSearchNameFilter\" searchWhenChanged=\"true\">\n        <label>Scheduled Search</label>\n        <showClearButton>false</showClearButton>\n        <search base=\"jobsSnapshotBaseSearch\">\n          <query>stats count by saved_search</query>\n        </search>\n        <fieldForLabel>saved_search</fieldForLabel>\n        <fieldForValue>saved_search</fieldForValue>\n        <prefix>search saved_search=\"</prefix>\n        <suffix>\"</suffix>\n        <choice value=\"*\">All</choice>\n        <selectFirstChoice>true</selectFirstChoice>\n      </input>\n      <input type=\"text\" token=\"jobSidFilter\" searchWhenChanged=\"true\">\n        <label>SID:</label>\n        <default>*</default>\n        <prefix>search sid=\"*</prefix>\n        <suffix>*\"</suffix>\n      </input>\n      <table>\n        <search base=\"jobsSnapshotBaseSearch\">\n          <query>\n$jobStateFilter$\n| $jobSidFilter$\n| $jobSavedSearchNameFilter$\n| `dmc_time_format(dispatch_time)`\n| sort - dispatch_time\n| fields dispatch_time, job_state, success, splunk_server, peer, saved_search, savedsearchtype, search_app, search_owner, sid\n| eval success = if (success == 1 or success == \"1\", \"Succeeded\", \"Failed\")\n| rename dispatch_time as \"Dispatch Time\", job_state as \"Job State\", success as Success, splunk_server as \"Delegating Instance (Captain)\" peer as \"Delegated Instance\", saved_search as \"Scheduled Search\", savedsearchtype as \"Saved Search Type\", search_app as App, search_owner as Owner, sid as SID\n          </query>\n        </search>\n        <option name=\"wrap\">true</option>\n        <option name=\"rowNumbers\">false</option>\n        <option name=\"dataOverlayMode\">none</option>\n        <option name=\"drilldown\">none</option>\n        <option name=\"count\">10</option>\n        <!--<option name=\"refresh.auto.interval\">60</option>-->\n        <option name=\"refresh.time.visible\">false</option>\n      </table>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Historical Charts</title>\n      <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n        <label>Time Range:</label>\n        <default>\n          <earliestTime>-4h@m</earliestTime>\n          <latestTime>now</latestTime>\n        </default>\n      </input>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Scheduler Activity</title>\n      <chart>\n        <search base=\"getSchedulerData\">\n          <query>fields - delegated_waiting delegated_scheduled max_pending max_running</query>\n        </search>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">0</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n        <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n        <option name=\"charting.chart.bubbleSizeBy\">area</option>\n        <option name=\"charting.chart.nullValueMode\">gaps</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">default</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisTitleY.text\">Count</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n      </chart>\n      <html>\n        <p><b>dispatched</b>: The number of scheduled search jobs that the captain successfully dispatched to members.</p>\n        <p><b>skipped</b>: The number of jobs that were skipped and not dispatched.</p>\n        <p><b>delegated</b>: The number of jobs that the captain attempted to dispatch. This is usually the same as the number of dispatched jobs.</p>\n      </html>\n    </panel>\n    <panel rejects=\"$snapshot$\">\n      <title>Scheduler Status</title>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"funcStatus\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>Max</default>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <change>\n          <set token=\"funcStatusLabel\">$label$</set>\n        </change>\n      </input>\n      <chart>\n        <search base=\"getSchedulerData\">\n          <query>fields - dispatched skipped delegated</query>\n        </search>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">0</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n        <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n        <option name=\"charting.chart.bubbleSizeBy\">area</option>\n        <option name=\"charting.chart.nullValueMode\">gaps</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">default</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisTitleY.text\">Count</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n      </chart>\n      <html>\n        <p><b>delegated_waiting</b>: The number of jobs currently running on members.</p>\n        <p><b>delegated_scheduled</b>: The number of jobs that the captain is trying to contact members to start running. This is usually 0, unless the captain or network is backed up.</p>\n        <p><b>max_pending</b>: The number of jobs pending over a 30 second period.</p>\n      </html>\n    </panel>\n  </row>\n</form>",
"eai:type": "views",
"name": "shc_scheduler_delegation_statistics",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" script=\"common_control.js\" stylesheet=\"shared.css, health-check.css\">\n  <label>Search Head Clustering: Status and Configuration</label>\n  <fieldset autoRun=\"true\" submitButton=\"false\">\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"group\">\n      <label>Search Head Cluster:</label>\n      <showClearButton>false</showClearButton>\n      <populatingSearch fieldForLabel=\"label\" fieldForValue=\"search_group\">\n        | `dmc_get_search_head_cluster_groups`\n      </populatingSearch>\n      <selectFirstChoice>true</selectFirstChoice>\n    </input>\n  </fieldset>\n  <search id=\"captainSnapshotSearch\">\n    <query>\n      | rest splunk_server_group=\"$group$\" splunk_server_group=dmc_group_search_head /services/shcluster/captain/info\n      | dedup peer_scheme_host_port\n      | fields label\n    </query>\n    <finalized>\n      <set token=\"captain_name\">$result.label$</set>\n    </finalized>\n  </search>\n  <search id=\"membersSnapshotSearch\">\n    <query>\n| rest splunk_server=local /services/search/distributed/peers\n| where search_groups=\"$group$\" AND server_roles=\"search_head\"\n| eval label = host\n| join guid type=outer [\n  | rest splunk_server_group=\"$group$\" splunk_server_group=dmc_group_search_head /services/shcluster/member/members count=0\n  | dedup label\n  | eval guid = title\n]\n| join label type=outer [\n  | rest splunk_server=$captain_name|s$ /services/shcluster/captain/members count=0\n  | where splunk_server == label\n  | fields label, last_heartbeat\n  | rename last_heartbeat as last_heartbeat_captain\n]\n| eventstats values(last_heartbeat_captain) as last_heartbeat_captain\n| join label type=outer [\n  | rest splunk_server_group=\"$group$\" splunk_server_group=dmc_group_search_head /services/shcluster/captain/info\n  | where splunk_server == label\n  | eval age = now() - elected_captain\n  | eval captain_age = case(age &lt; 60, \"&lt; 1m\", age &gt;= 60 AND age &lt; 3600, round(age / 60, 0).\"m\", age &gt;= 3600 AND age &lt; 86400, round(age / 3600, 0).\"h\", age &gt;= 86400, round(age / 86400, 0).\"d\")\n  | `dmc_time_format(elected_captain)`\n  | eval role = \"Captain (\" . captain_age . \")\"\n  | fields label captain_age elected_captain role\n]\n| join label type=outer [\n  | rest /services/replication/configuration/health check_share_baseline=1 splunk_server_group=\"$group$\" splunk_server_group=dmc_group_search_head\n  | stats values(server_name) as baselines, count(server_name) as num_baselines by splunk_server, check_share_baseline\n  | eval shared_common_baseline = if(check_share_baseline == \"Yes\", baselines, \"\")\n  | eval no_shared_common_baseline = if(check_share_baseline == \"No\", baselines, \"\")\n  | eval unable_to_connect = if(check_share_baseline == \"Connection error\", baselines, \"\")\n  | eval num_shared_common_baseline = if(check_share_baseline == \"Yes\", num_baselines, 0)\n  | eval num_no_shared_common_baseline = if(check_share_baseline == \"No\", num_baselines, 0)\n  | eval num_unable_to_connect = if(check_share_baseline == \"Connection error\", num_baselines, 0)\n  | stats sum(num_shared_common_baseline) as total_shared_common_baseline, sum(num_no_shared_common_baseline) as total_no_shared_common_baseline, sum(num_unable_to_connect) as total_unable_to_connect, values(shared_common_baseline) as shared_common_baseline, values(no_shared_common_baseline) as no_shared_common_baseline, values(unable_to_connect) as unable_to_connect by splunk_server\n  | eval ratio = total_shared_common_baseline . \"/\" . (total_shared_common_baseline+total_no_shared_common_baseline+total_unable_to_connect)\n  | rename splunk_server as label\n]\n| join label type=outer [\n  | rest /services/replication/configuration/health unpublished=1 splunk_server_group=\"$group$\" splunk_server_group=dmc_group_search_head\n  | rename \"Number of unpublished changes\" as unpublished_changes\n  | eval unpublished_changes=if(unpublished_changes==\"0 (this instance is the captain)\", 0, unpublished_changes)\n  | rename splunk_server as label\n]\n| eval role = if(isnotnull(role), role, \"Member\")\n| sort role\n    </query>\n  </search>\n  <row>\n    <!-- this is just a workaround. Replace this by mod viz whenever mod viz is merged to develop. -->\n    <panel>\n      <title>Health Check</title>\n      <search id=\"members_heartbeat_timeout_base\" base=\"membersSnapshotSearch\">\n        <query>\n          fields label, status, last_heartbeat, last_heartbeat_captain, unable_to_connect\n          | join label type=outer [\n            | rest splunk_server_group=\"$group$\" splunk_server_group=dmc_group_search_head /services/configs/conf-server/shclustering\n            | fields splunk_server, heartbeat_timeout\n            | rename splunk_server as label\n          ]\n          | where (status != \"Up\" OR (last_heartbeat_captain - last_heartbeat) > heartbeat_timeout) OR unable_to_connect != \"\"\n        </query>\n        <done>\n          <condition match=\"$job.resultCount$ > 0\">\n            <set token=\"member_heartbeat_text_unhealthy\">There are members in this cluster that do not have a healthy heartbeat status.</set>\n          </condition>\n          <condition match=\"$job.resultCount$ = 0\">\n            <set token=\"member_heartbeat_text_healthy\">All members in this cluster have a healthy heartbeat status.</set>\n          </condition>\n        </done>\n      </search>\n      <search id=\"member_peer_consistency_base\">\n        <query>\n          | rest splunk_server_group=\"$group$\" splunk_server_group=dmc_group_search_head /services/search/distributed/peers\n          | fields splunk_server, peerName\n          | stats values(peerName) as peers by splunk_server\n          | nomv peers\n          | stats values(splunk_server) AS search_heads by peers\n          | makemv peers\n          | fields search_heads peers\n          | rename search_heads as \"Search Head Cluster Member\", peers as \"Search Peer List\"\n        </query>\n        <done>\n          <condition match=\"$job.resultCount$ > 1\">\n            <set token=\"member_peer_inconsistency_text\">The list of distributed search peers is inconsistent among cluster members. This could result in inconsistent search results within the search head cluster.</set>\n          </condition>\n        </done>\n      </search>\n      <html depends=\"$member_heartbeat_text_unhealthy$\">\n        <div class=\"dmc-kpi-item\">\n          <div class=\"alert alert-warning\">\n            <i class=\"icon-alert\"></i>\n            <h5>$member_heartbeat_text_unhealthy$ <a data-set-token=\"show_member_heartbeat_detail\" data-value=\"true\">click to see more detail.</a></h5>\n          </div>\n        </div>\n      </html>\n      <html depends=\"$member_heartbeat_text_healthy$\">\n        <div class=\"dmc-kpi-item\">\n          <div class=\"alert alert-success\">\n            <i class=\"icon-alert\"></i>\n            <h5>$member_heartbeat_text_healthy$</h5>\n          </div>\n        </div>\n      </html>\n      <html depends=\"$member_peer_inconsistency_text$\">\n        <div class=\"dmc-kpi-item\">\n          <div class=\"alert alert-warning\">\n            <i class=\"icon-alert\"></i>\n            <h5>$member_peer_inconsistency_text$ <a data-set-token=\"show_member_peer_inconsistency_detail\" data-value=\"true\">click to see more detail.</a></h5>\n          </div>\n        </div>\n      </html>\n      <search base=\"membersSnapshotSearch\">\n        <query>\n          where total_no_shared_common_baseline+total_unable_to_connect > 0\n        </query>\n        <done>\n          <condition match=\"$job.resultCount$ > 0\">\n            <set token=\"common_baseline_text_unhealthy\">There are members in this cluster that do not share a common baseline. Action may be required.</set>\n            <unset token=\"common_baseline_text_healthy\"></unset>\n          </condition>\n          <condition match=\"$job.resultCount$ = 0\">\n            <set token=\"common_baseline_text_healthy\">All members in this cluster share a common baseline.</set>\n            <unset token=\"common_baseline_text_unhealthy\"></unset>\n          </condition>\n        </done>\n      </search>\n      <html depends=\"$common_baseline_text_unhealthy$\">\n        <div class=\"dmc-kpi-item\">\n          <div class=\"alert alert-warning\">\n            <i class=\"icon-alert\"></i>\n            <h5>$common_baseline_text_unhealthy$ Scroll down to see member status. <a href=\"/help?location=learnmore.shc.confreplication\" target=\"_blank\" class=\"external\">Learn More</a></h5>\n          </div>\n        </div>\n      </html>\n      <html depends=\"$common_baseline_text_healthy$\">\n      <div class=\"dmc-kpi-item\">\n        <div class=\"alert alert-success\">\n          <i class=\"icon-alert\"></i>\n          <h5>$common_baseline_text_healthy$</h5>\n        </div>\n      </div>\n      </html>\n    </panel>\n    <panel depends=\"$show_member_heartbeat_detail$\">\n      <table>\n        <title>Members that exceeded heartbeat timeout</title>\n        <search base=\"members_heartbeat_timeout_base\">\n          <query>\n            fields label, last_heartbeat, last_heartbeat_captain, heartbeat_timeout, status, unable_to_connect\n            | eval heartbeat_timeout = if(isnotnull(heartbeat_timeout), heartbeat_timeout, \"N/A\")\n            | `dmc_time_format(last_heartbeat)`\n            | `dmc_time_format(last_heartbeat_captain)`\n            | eval last_heartbeat = if(isnotnull(last_heartbeat), last_heartbeat, \"N/A\")\n            | rename label as Member, last_heartbeat as \"Last Heartbeat Sent to Captain\", last_heartbeat_captain as \"Last Heartbeat Received by Captain\", heartbeat_timeout as \"Heartbeat Timeout (sec)\", status as \"Status\", unable_to_connect as \"Member Unreachable\"\n          </query>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <html>\n        <a data-unset-token=\"show_member_heartbeat_detail\">Close this panel</a>\n      </html>\n    </panel>\n    <panel depends=\"$show_member_peer_inconsistency_detail$\">\n      <table>\n        <title>Search Head Cluster Members and Peers</title>\n        <search base=\"member_peer_consistency_base\"></search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <html>\n        <a data-unset-token=\"show_member_peer_inconsistency_detail\">Close this panel</a>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel>\n      <html>\n        <h2>\n          <span>Select views: </span>\n          <span id=\"link-switcher-view\">\n            <a href=\"#\" class=\"btn-pill active\" data-item=\"all\">All</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"snapshot\">Snapshot</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"historical\">Historical</a>\n          </span>\n        </h2>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Snapshots</title>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Search Concurrency (Running/Limit)</title>\n      <search id=\"snapshot_search_concurrency_base\">\n        <query>\n          | rest splunk_server_group=\"$group$\" splunk_server_group=dmc_group_search_head /services/server/status/resource-usage/splunk-processes\n          | search search_props.role=\"head\"\n          | dedup search_props.sid\n        </query>\n      </search>\n      <!--<table>--> <!-- table is only for testing purpose -->\n        <search id=\"search_concurrency_vs_limits_base\" base=\"snapshot_search_concurrency_base\">\n          <query>\n            stats count(eval(('search_props.type'==\"scheduled\" OR 'search_props.type'==\"summary indexing\" OR 'search_props.type'==\"report acceleration\" OR 'search_props.type'==\"datamodel acceleration\" OR 'search_props.type'==\"ad-hoc\") AND ('search_props.mode'==\"historical\" OR 'search_props.mode'==\"historical batch\"))) as count_total_hist,\n            count(eval(('search_props.type'==\"scheduled\" OR 'search_props.type'==\"summary indexing\" OR 'search_props.type'==\"report acceleration\" OR 'search_props.type'==\"datamodel acceleration\" OR 'search_props.type'==\"ad-hoc\") AND ('search_props.mode'==\"RT\" OR 'search_props.mode'==\"RT indexed\"))) as count_total_rt,\n            count(eval(('search_props.type'==\"scheduled\" OR 'search_props.type'==\"summary indexing\" OR 'search_props.type'==\"report acceleration\" OR 'search_props.type'==\"datamodel acceleration\") AND ('search_props.mode'==\"historical\" OR 'search_props.mode'==\"historical batch\"))) as count_hist_scheduled_search,\n            count(eval(('search_props.type'==\"scheduled\" OR 'search_props.type'==\"summary indexing\" OR 'search_props.type'==\"report acceleration\" OR 'search_props.type'==\"datamodel acceleration\") AND ('search_props.mode'==\"RT\" OR 'search_props.mode'==\"RT indexed\"))) as count_rt_scheduled_search,\n            count(eval(('search_props.type'==\"report acceleration\" OR 'search_props.type'==\"datamodel acceleration\"))) as count_auto_summary_search\n            | eval count_total_adhoc_scheduled_search = count_total_hist + count_total_rt\n            | eval count_total_scheduled_search = count_hist_scheduled_search + count_rt_scheduled_search\n            | eval dummy_key = \"dummy_key\"\n            | fields count_total_hist, count_hist_scheduled_search,\n                     count_total_rt, count_rt_scheduled_search,\n                     count_auto_summary_search,\n                     count_total_adhoc_scheduled_search, count_total_scheduled_search,\n                     dummy_key\n            | join dummy_key type=outer [\n              | rest splunk_server_group=\"$group$\" splunk_server_group=dmc_group_search_head \"/services/server/status/limits/search-concurrency?cluster_wide_quota=1\"\n              | stats max(max_hist_searches) as max_hist_searches, max(max_hist_scheduled_searches) as max_hist_scheduled_searches, max(max_rt_searches), as max_rt_searches, max(max_rt_scheduled_searches) as max_rt_scheduled_searches, max(max_auto_summary_searches) as max_auto_summary_searches\n              | eval dummy_key = \"dummy_key\"\n              | fields max_hist_searches, max_hist_scheduled_searches,\n                  max_rt_searches, max_rt_scheduled_searches,\n                  max_auto_summary_searches,\n                  dummy_key\n            ]\n          </query>\n          <preview>\n            <eval token=\"count_total_adhoc_scheduled_search\">if(isnotnull('result.count_total_adhoc_scheduled_search'), 'result.count_total_adhoc_scheduled_search', 0)</eval>\n            <eval token=\"count_total_scheduled_search\">if(isnotnull('result.count_total_scheduled_search'), 'result.count_total_scheduled_search', 0)</eval>\n          </preview>\n        </search>\n      <!--</table>-->\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Ad hoc + Scheduled Searches ($count_total_adhoc_scheduled_search$ Running)</title>\n      <single>\n        <search base=\"search_concurrency_vs_limits_base\">\n          <query>\n            eval total_historical_vs_limit = count_total_hist.\"/\".max_hist_searches\n            | fields total_historical_vs_limit\n          </query>\n        </search>\n        <option name=\"underLabel\">Historical</option>\n        <option name=\"drilldown\">all</option>\n        <drilldown>\n          <set token=\"show_total_hist_search_details\">true</set>\n          <unset token=\"show_total_rt_search_details\"></unset>\n          <unset token=\"show_hist_search_details\"></unset>\n          <unset token=\"show_rt_search_details\"></unset>\n          <unset token=\"show_summarization_search_details\"></unset>\n        </drilldown>\n      </single>\n      <single>\n        <search base=\"search_concurrency_vs_limits_base\">\n          <query>\n            eval total_rt_vs_limit = count_total_rt.\"/\".max_rt_searches\n            | fields total_rt_vs_limit\n          </query>\n        </search>\n        <option name=\"underLabel\">Real-time</option>\n        <option name=\"drilldown\">all</option>\n        <drilldown>\n          <unset token=\"show_total_hist_search_details\"></unset>\n          <set token=\"show_total_rt_search_details\">true</set>\n          <unset token=\"show_hist_search_details\"></unset>\n          <unset token=\"show_rt_search_details\"></unset>\n          <unset token=\"show_summarization_search_details\"></unset>\n        </drilldown>\n      </single>\n    </panel>\n    <panel rejects=\"$historical$\">\n      <title>Scheduled Searches ($count_total_scheduled_search$ Running)</title>\n      <single>\n        <search base=\"search_concurrency_vs_limits_base\">\n          <query>\n            eval scheduled_vs_total_hist_scheduled_search_limit = count_hist_scheduled_search.\"/\".max_hist_scheduled_searches\n            | fields scheduled_vs_total_hist_scheduled_search_limit\n          </query>\n        </search>\n        <option name=\"underLabel\">Historical</option>\n        <option name=\"drilldown\">all</option>\n        <drilldown>\n          <unset token=\"show_total_hist_search_details\"></unset>\n          <unset token=\"show_total_rt_search_details\"></unset>\n          <set token=\"show_hist_search_details\">true</set>\n          <unset token=\"show_rt_search_details\"></unset>\n          <unset token=\"show_summarization_search_details\"></unset>\n        </drilldown>\n      </single>\n      <single>\n        <search base=\"search_concurrency_vs_limits_base\">\n          <query>\n            eval scheduled_vs_total_rt_scheduled_search_limit = count_rt_scheduled_search.\"/\".max_rt_scheduled_searches\n            | fields scheduled_vs_total_rt_scheduled_search_limit\n          </query>\n        </search>\n        <option name=\"underLabel\">Real-time</option>\n        <option name=\"drilldown\">all</option>\n        <drilldown>\n          <unset token=\"show_total_hist_search_details\"></unset>\n          <unset token=\"show_total_rt_search_details\"></unset>\n          <unset token=\"show_hist_search_details\"></unset>\n          <set token=\"show_rt_search_details\">true</set>\n          <unset token=\"show_summarization_search_details\"></unset>\n        </drilldown>\n      </single>\n      <single>\n        <search base=\"search_concurrency_vs_limits_base\">\n          <query>\n            eval scheduled_vs_total_auto_summary_search_limit = count_auto_summary_search.\"/\".max_auto_summary_searches\n            | fields scheduled_vs_total_auto_summary_search_limit\n          </query>\n        </search>\n        <option name=\"underLabel\">Summarization</option>\n        <option name=\"drilldown\">all</option>\n        <drilldown>\n          <unset token=\"show_total_hist_search_details\"></unset>\n          <unset token=\"show_total_rt_search_details\"></unset>\n          <unset token=\"show_hist_search_details\"></unset>\n          <unset token=\"show_rt_search_details\"></unset>\n          <set token=\"show_summarization_search_details\">true</set>\n        </drilldown>\n      </single>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <html>\n        <p>\n          Click to see more details.\n        </p>\n        <p>\n          Search concurrency limits can be set in limits.conf. <a href=\"/help?location=learnmore.dmc.shc.concurrency\" target=\"_blank\" class=\"external\">Learn More</a>\n        </p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel depends=\"$show_total_hist_search_details$\" rejects=\"$historical$\">\n      <title>Ad hoc + Scheduled Historical Search Concurrency Details</title>\n      <table>\n        <search base=\"snapshot_search_concurrency_base\">\n          <query>\n            where ('search_props.type'==\"scheduled\" OR 'search_props.type'==\"summary indexing\" OR 'search_props.type'==\"report acceleration\" OR 'search_props.type'==\"datamodel acceleration\" OR 'search_props.type'==\"ad-hoc\") AND ('search_props.mode'==\"historical\" OR 'search_props.mode'==\"historical batch\")\n            | fields search_props.sid, search_props.label, splunk_server, search_props.app, search_props.user, search_props.type, search_props.mode, search_props.role, mem_used, pct_cpu, elapsed\n            | eval mem_used = round(mem_used, 0)\n            | eval pct_cpu = round(pct_cpu, 0)\n            | eval elapsed = round(elapsed, 0)\n            | rename search_props.sid as SID, search_props.label as \"Search Name\", splunk_server as Member, search_props.app as App, search_props.user as User, search_props.type as Type, search_props.mode as Mode, search_props.role as Role, mem_used as \"Memory Used (MB)\", pct_cpu as \"CPU Usage (%)\", elapsed as \"Time Elapsed (sec)\"\n          </query>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <html>\n        <a data-unset-token=\"show_total_hist_search_details\">Close this panel</a>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel depends=\"$show_total_rt_search_details$\" rejects=\"$historical$\">\n      <title>Ad hoc + Scheduled Real-time Search Concurrency Details</title>\n      <table>\n        <search base=\"snapshot_search_concurrency_base\">\n          <query>\n            where ('search_props.type'==\"scheduled\" OR 'search_props.type'==\"summary indexing\" OR 'search_props.type'==\"report acceleration\" OR 'search_props.type'==\"datamodel acceleration\" OR 'search_props.type'==\"ad-hoc\") AND ('search_props.mode'==\"RT\" OR 'search_props.mode'==\"RT indexed\")\n            | fields search_props.sid, search_props.label, splunk_server, search_props.app, search_props.user, search_props.type, search_props.mode, search_props.role, mem_used, pct_cpu, elapsed\n            | eval mem_used = round(mem_used, 0)\n            | eval pct_cpu = round(pct_cpu, 0)\n            | eval elapsed = round(elapsed, 0)\n            | rename search_props.sid as SID, search_props.label as \"Search Name\", splunk_server as Member, search_props.app as App, search_props.user as User, search_props.type as Type, search_props.mode as Mode, search_props.role as Role, mem_used as \"Memory Used (MB)\", pct_cpu as \"CPU Usage (%)\", elapsed as \"Time Elapsed (sec)\"\n          </query>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <html>\n        <a data-unset-token=\"show_total_rt_search_details\">Close this panel</a>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel depends=\"$show_hist_search_details$\" rejects=\"$historical$\">\n      <title>Scheduled Historical Search Concurrency Details</title>\n      <table>\n        <search base=\"snapshot_search_concurrency_base\">\n          <query>\n            where ('search_props.type'==\"scheduled\" OR 'search_props.type'==\"summary indexing\" OR 'search_props.type'==\"report acceleration\" OR 'search_props.type'==\"datamodel acceleration\") AND ('search_props.mode'==\"historical\" OR 'search_props.mode'==\"historical batch\")\n            | fields search_props.sid, search_props.label, splunk_server, search_props.app, search_props.user, search_props.type, search_props.mode, search_props.role, mem_used, pct_cpu, elapsed\n            | eval mem_used = round(mem_used, 0)\n            | eval pct_cpu = round(pct_cpu, 0)\n            | eval elapsed = round(elapsed, 0)\n            | rename search_props.sid as SID, search_props.label as \"Search Name\", splunk_server as Member, search_props.app as App, search_props.user as User, search_props.type as Type, search_props.mode as Mode, search_props.role as Role, mem_used as \"Memory Used (MB)\", pct_cpu as \"CPU Usage (%)\", elapsed as \"Time Elapsed (sec)\"\n          </query>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <html>\n        <a data-unset-token=\"show_hist_search_details\">Close this panel</a>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel depends=\"$show_rt_search_details$\" rejects=\"$historical$\">\n      <title>Scheduled Real-time Concurrency Search Details</title>\n      <table>\n        <search base=\"snapshot_search_concurrency_base\">\n          <query>\n            where ('search_props.type'==\"scheduled\" OR 'search_props.type'==\"summary indexing\" OR 'search_props.type'==\"report acceleration\" OR 'search_props.type'==\"datamodel acceleration\") AND ('search_props.mode'==\"RT\" OR 'search_props.mode'==\"RT indexed\")\n            | fields search_props.sid, search_props.label, splunk_server, search_props.app, search_props.user, search_props.type, search_props.mode, search_props.role, mem_used, pct_cpu, elapsed\n            | eval mem_used = round(mem_used, 0)\n            | eval pct_cpu = round(pct_cpu, 0)\n            | eval elapsed = round(elapsed, 0)\n            | rename search_props.sid as SID, search_props.label as \"Search Name\", splunk_server as Member, search_props.app as App, search_props.user as User, search_props.type as Type, search_props.mode as Mode, search_props.role as Role, mem_used as \"Memory Used (MB)\", pct_cpu as \"CPU Usage (%)\", elapsed as \"Time Elapsed (sec)\"\n          </query>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <html>\n        <a data-unset-token=\"show_rt_search_details\">Close this panel</a>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel depends=\"$show_summarization_search_details$\" rejects=\"$historical$\">\n      <title>Summarization Search Details</title>\n      <table>\n        <search base=\"snapshot_search_concurrency_base\">\n          <query>\n            where ('search_props.type'==\"report acceleration\" OR 'search_props.type'==\"datamodel acceleration\")\n            | fields search_props.sid, search_props.label, splunk_server, search_props.app, search_props.user, search_props.type, search_props.mode, search_props.role, mem_used, pct_cpu, elapsed\n            | eval mem_used = round(mem_used, 0)\n            | eval pct_cpu = round(pct_cpu, 0)\n            | eval elapsed = round(elapsed, 0)\n            | rename search_props.sid as SID, search_props.label as \"Search Name\", splunk_server as Member, search_props.app as App, search_props.user as User, search_props.type as Type, search_props.mode as Mode, search_props.role as Role, mem_used as \"Memory Used (MB)\", pct_cpu as \"CPU Usage (%)\", elapsed as \"Time Elapsed (sec)\"\n          </query>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <html>\n        <a data-unset-token=\"show_summarization_search_details\">Close this panel</a>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Status</title>\n      <table>\n        <title>$totalCountOfMembers$ Members</title>\n        <search base=\"membersSnapshotSearch\">\n          <query>\nfields label role status last_heartbeat ratio unpublished_changes artifact_count\n| eval ratio = if(isnotnull(ratio), ratio, \"N/A\")\n| eval unpublished_changes = if(isnotnull(unpublished_changes), unpublished_changes, \"N/A\")\n| eval artifact_count = if(isnotnull(artifact_count), artifact_count, \"N/A\")\n| `dmc_time_format(last_heartbeat)`\n| `dmc_time_format(last_heartbeat_captain)`\n| eval last_heartbeat = if(isnotnull(last_heartbeat), last_heartbeat, \"N/A\")\n| rename label as Instance, role as Role, status as Status, last_heartbeat as \"Last Heartbeat Sent to Captain\", ratio as \"Configuration Baseline Consistency\", unpublished_changes as \"Number of Unpublished Changes\", artifact_count as \"Artifact Count\"\n          </query>\n          <done>\n            <set token=\"totalCountOfMembers\">$job.resultCount$</set>\n          </done>\n          <error>\n            <set token=\"totalCountOfMembers\">N/A</set>\n          </error>\n        </search>\n        <option name=\"wrap\">true</option>\n        <option name=\"rowNumbers\">false</option>\n        <option name=\"dataOverlayMode\">none</option>\n        <option name=\"drilldown\">cell</option>\n        <option name=\"count\">10</option>\n        <!--<option name=\"refresh.auto.interval\">60</option>-->\n        <option name=\"refresh.time.visible\">false</option>\n        <drilldown>\n          <condition field=\"Instance\">\n            <set token=\"SHCMemberDrilldown\">$click.value2$</set>\n          </condition>\n          <condition field=\"Configuration Baseline Consistency\">\n            <set token=\"SHCMemberBaselineDrilldown\">$row.Instance$</set>\n          </condition>\n          <condition field=\"*\"></condition>\n        </drilldown>\n      </table>\n      <html>\n        <p>Click on instance name to see more details.</p>\n        <p>Click on configuration baseline ratio to see more details about configuration replication. <a href=\"/help?location=learnmore.shc.replication_sync_issues\" target=\"_blank\" class=\"external\">Learn More</a></p>\n      </html>\n    </panel>\n    <panel depends=\"$SHCMemberDrilldown$\">\n      <title>$SHCMemberDrilldown$</title>\n      <table>\n        <search base=\"membersSnapshotSearch\">\n          <query>\nwhere label == \"$SHCMemberDrilldown$\"\n| eval elected_captain = if(isnotnull(elected_captain), elected_captain, \"N/A\")\n| fields - _timediff\n| fields elected_captain guid advertise_restart_required advertise_restart_required_reason delayed_artifacts_to_discard fixup_set pending_job_count replication_count status_counter.Complete status_counter.PendingDiscard peer_scheme_host_port adhoc_searchhead kv_store_host_port replication_port replication_use_ssl site\n| transpose\n| rename column as \"Configuration and Status\", \"row 1\" as Value\n          </query>\n        </search>\n        <option name=\"wrap\">true</option>\n        <option name=\"rowNumbers\">false</option>\n        <option name=\"dataOverlayMode\">none</option>\n        <option name=\"drilldown\">none</option>\n        <option name=\"count\">20</option>\n        <!--<option name=\"refresh.auto.interval\">60</option>-->\n        <option name=\"refresh.time.visible\">false</option>\n      </table>\n      <html>\n        <a data-unset-token=\"SHCMemberDrilldown\">Close this panel</a>\n      </html>\n    </panel>\n    <panel depends=\"$SHCMemberBaselineDrilldown$\">\n      <title>Configuration Baseline Consistency for: $SHCMemberBaselineDrilldown$</title>\n      <table>\n        <search base=\"membersSnapshotSearch\">\n          <query>\n            where label == \"$SHCMemberBaselineDrilldown$\"\n            | fields shared_common_baseline no_shared_common_baseline unable_to_connect\n            | rename shared_common_baseline as \"Shares Common Baseline With\", no_shared_common_baseline as \"Does Not Share Common Baseline With\", unable_to_connect as \"No Response From\"\n          </query>\n        </search>\n      </table>\n      <html>\n        <a data-unset-token=\"SHCMemberBaselineDrilldown\">Close this panel</a>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Historical Charts</title>\n      <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n        <label>Time Range:</label>\n        <default>\n          <earliestTime>-4h@m</earliestTime>\n          <latestTime>now</latestTime>\n        </default>\n      </input>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Search Concurrency</title>\n      <search id=\"shcSearchConBase\">\n        <query>\n        `dmc_set_index_introspection` search_group=dmc_group_search_head search_group=\"$group$\" sourcetype=splunk_resource_usage ((component=PerProcess data.search_props.sid::*) OR component=Hostwide)\n        | `dmc_rename_introspection_fields`\n        | `dmc_set_bin`\n        | stats dc(sid) AS distinct_search_count by provenance, mode, app, type, user, host, _time\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <input type=\"dropdown\" token=\"shcSearchConFunc\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>Max</default>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n      </input>\n      <input type=\"dropdown\" token=\"shcSearchConHostScope\" searchWhenChanged=\"true\">\n        <label>Instance</label>\n        <showClearButton>false</showClearButton>\n        <default>*</default>\n        <choice value=\"*\">All</choice>\n        <fieldForLabel>host</fieldForLabel>\n        <fieldForValue>host</fieldForValue>\n        <prefix>search host=\"</prefix>\n        <suffix>\"</suffix>\n        <search base=\"shcSearchConBase\">\n          <query>stats count by host</query>\n        </search>\n      </input>\n      <input type=\"dropdown\" token=\"shcSearchConSplitBy\" searchWhenChanged=\"true\">\n        <label>Split by</label>\n        <showClearButton>false</showClearButton>\n        <default>host</default>\n        <choice value=\"app\">app</choice>\n        <choice value=\"user\">user</choice>\n        <choice value=\"provenance\">provenance</choice>\n        <choice value=\"mode\">mode</choice>\n        <choice value=\"type\">type</choice>\n        <choice value=\"host\">host</choice>\n      </input>\n      <input type=\"radio\" token=\"searchConVizMode\" searchWhenChanged=\"true\">\n        <label>Viz Mode</label>\n        <default>line</default>\n        <choice value=\"line\">Line</choice>\n        <choice value=\"column\">Stacked Column</choice>\n      </input>\n      <chart>\n        <search base=\"shcSearchConBase\">\n          <query>\n          $shcSearchConHostScope$\n          | stats sum(distinct_search_count) as total_distinct_search_count by provenance, mode, app, type, user, host, _time\n          | `dmc_timechart` partial=false $shcSearchConFunc$(total_distinct_search_count) as search_count by $shcSearchConSplitBy$\n          </query>\n        </search>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.text\">Count</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">0</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">$searchConVizMode$</option>\n        <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n        <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n        <option name=\"charting.chart.bubbleSizeBy\">area</option>\n        <option name=\"charting.chart.nullValueMode\">zero</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.chart.showLabels\">auto</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <search id=\"captainElectionBaseSearch\">\n        <query>\n`dmc_set_index_internal` search_group=\"$group$\" sourcetype=splunkd component=Metrics group=captainstability upgrades_to_captain=1\n| stats count by _time, upgrades_to_captain, host\n        </query>\n        <earliest>$time.earliest$</earliest>\n        <latest>$time.latest$</latest>\n      </search>\n      <title>Captain Election Activity</title>\n      <input type=\"dropdown\" token=\"captainElectionHostScope\" searchWhenChanged=\"true\">\n        <label>Instance</label>\n        <showClearButton>false</showClearButton>\n        <default>*</default>\n        <choice value=\"*\">All</choice>\n        <fieldForLabel>host</fieldForLabel>\n        <fieldForValue>host</fieldForValue>\n        <prefix>search host=\"</prefix>\n        <suffix>\"</suffix>\n        <search base=\"captainElectionBaseSearch\">\n          <query>stats count by host</query>\n        </search>\n      </input>\n      <chart>\n        <search base=\"captainElectionBaseSearch\">\n          <query>\n$captainElectionHostScope$\n| `dmc_timechart_for_metrics_log` count(upgrades_to_captain) as captain_election_event\n          </query>\n        </search>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.text\">Count</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">0</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n        <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n        <option name=\"charting.chart.bubbleSizeBy\">area</option>\n        <option name=\"charting.chart.nullValueMode\">gaps</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">default</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.chart.showLabels\">auto</option>\n      </chart>\n    </panel>\n    <panel rejects=\"$snapshot$\">\n      <title>Captain Election Details</title>\n      <table>\n        <search base=\"captainElectionBaseSearch\">\n          <query>\n$captainElectionHostScope$\n| eval event = host.\" was elected as captain.\"\n| fields _time, event\n| sort - _time\n| rename _time as Time, event as Event\n| `dmc_time_format(Time)`\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"drilldown\">off</option>\n      </table>\n      <html>\n        <p>Please use the dropdown menu on the left side panel to select an instance or all instances.</p>\n      </html>\n    </panel>\n  </row>\n  <!-- <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Count of Captain Election Actions</title>\n      <chart>\n        <search>\n          <query>\n`dmc_set_index_internal` search_group=\"$group$\" sourcetype=splunkd component=Metrics group=captainstability (upgrades_to_captain=1 OR downgrades_from_captain=1 OR num_pollled_candidates&gt;0)\n| `dmc_timechart_for_metrics_log` count(num_polled_captain) as candidate sum(upgrades_to_captain) as upgrades_to_captain sum(downgrades_from_captain) as downgrades_from_captain\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.text\">Count</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">0</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.bubbleMaximumSize\">50</option>\n        <option name=\"charting.chart.bubbleMinimumSize\">10</option>\n        <option name=\"charting.chart.bubbleSizeBy\">area</option>\n        <option name=\"charting.chart.nullValueMode\">gaps</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">default</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.chart.showLabels\">auto</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Captain Stability History</title>\n      <input type=\"radio\" token=\"captainHistoryFilter\" searchWhenChanged=\"true\">\n        <label>Status</label>\n        <prefix>search status=\"</prefix>\n        <suffix>\"</suffix>\n        <default>*</default>\n        <choice value=\"*\">All</choice>\n        <choice value=\"perturbing\">Perturbing</choice>\n      </input>\n      <table>\n        <search>\n          <query>\n`dmc_set_index_internal` search_group=\"$group$\" sourcetype=splunkd component=Metrics group=captainstability\n| `dmc_set_bin_for_metrics_log`\n| eval status=case(\n(upgrades_to_captain=0) AND (downgrades_from_captain=0) AND (num_polled_candidate=0), \"stable\",\n1=1, \"perturbing\")\n| eval reason=case(\nupgrades_to_captain=1 AND num_polled_candidate&gt;0, host.\" became candidate and was elected as captain\",\nupgrades_to_captain=0 AND num_polled_candidate&gt;0, host.\" became candidate\",\nupgrades_to_captain=1 AND num_polled_candidate=0, host.\" was elected as captain\",\ndowngrades_from_captain=1, host.\" changed from captain to a member\",\n1=1, \"\")\n| stats count by _time, status, reason\n| sort - _time\n| fields - count\n| $captainHistoryFilter$\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"drilldown\">off</option>\n      </table>\n    </panel>\n  </row> -->\n</form>",
"eai:type": "views",
"name": "shc_status_and_conf",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" script=\"cell_fill_gauge.js, common_control.js\" stylesheet=\"index_type.css\">\n  <label>SmartStore Activity: Deployment</label>\n  <fieldset autoRun=\"true\" submitButton=\"false\">\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"search_group\">\n      <label>Group</label>\n      <showClearButton>false</showClearButton>\n      <search>\n        <query>\n          | `dmc_get_groups_containing_role(dmc_group_indexer)`\n          | where search_group!=\"dmc_group_indexer\"\n        </query>\n      </search>\n      <fieldForLabel>label</fieldForLabel>\n      <fieldForValue>search_group</fieldForValue>\n      <choice value=\"*\">All Indexers</choice>\n      <default>*</default>\n    </input>\n    <input type=\"time\" token=\"range\">\n      <label>Time Range</label>\n      <default>\n        <earliest>-4h@h</earliest>\n        <latest>now</latest>\n      </default>\n    </input>\n    <input type=\"checkbox\" token=\"migration\" searchWhenChanged=\"true\">\n      <label>Show Migration Progress</label>\n      <choice value=\"Enable\"></choice>\n    </input>\n    <input type=\"checkbox\" token=\"bootstrap\" searchWhenChanged=\"true\">\n      <label>Show Bootstrap Progress</label>\n      <choice value=\"Enable\"></choice>\n    </input>\n  </fieldset>\n   <row>\n    <panel>\n      <single>\n        <title>Remote Storage Connectivity</title>\n        <search>\n          <query>`dmc_set_index_internal` search_group=$search_group$ source=*splunkd.log CacheManager action=* earliest=-1h \n                | stats count(eval(status=\"failed\")) as txn_failed, count(eval(status=\"succeeded\")) as txn_succeeded \n                | eval available=case(txn_failed=0 AND txn_succeeded=0, \"IDLE\", txn_succeeded>0, \"ONLINE\", true(), \"OFFLINE\") \n                | fields - txn_failed - txn_succeeded</query>\n        </search>\n        <option name=\"drilldown\">none</option>\n        <option name=\"refresh.display\">progressbar</option>\n      </single>\n      <html>\n        <p>IDLE means no remote activity has happened in the last hour.</p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel depends=\"$migration$\">\n      <single>\n        <title>Migration Progress</title>\n        <search>\n          <query>\n            | rest splunk_server_group=$search_group$ /services/admin/cacheman\n            | eval stable_size = if('cm:bucket.stable'=1, 'cm:bucket.estimated_size', 0)\n            | stats sum(stable_size) as stable_bytes, sum(cm:bucket.estimated_size) as all_bytes\n            | eval migration_progress=round((stable_bytes / all_bytes) * 100)\n            | fields - stable_bytes - all_bytes\n          </query>\n          <!-- check with igor s about how this works with cluster -->\n        </search>\n        <option name=\"drilldown\">none</option>\n      </single>\n      <html>This tracks progress when migrating data from non-SmartStore to SmartStore. Otherwise ignore this.</html>\n    </panel>\n    <panel depends=\"$bootstrap$\">\n      <single>\n        <title>Bootstrapping progress</title>\n        <search>\n          <query>\n            `dmc_set_index_internal` search_group=$search_group$ group=cmmaster source=*metrics.log subgroup=buckets_re_creation\n            | stats sum(success_count) as successes, sum(in_progress_count) as in_progress\n            | eval total = successes + in_progress\n            | eval percent = if(total=0, 100, (1 - ((in_progress - successes) / total)) * 100)\n            | fields percent\n          </query>\n          <earliest>$range.earliest$</earliest>\n          <latest>$range.latest$</latest>\n        </search>\n        <option name=\"drilldown\">none</option>\n        <option name=\"numberPrecision\">0.00</option>\n        <option name=\"refresh.display\">progressbar</option>\n        <option name=\"unit\">%</option>\n      </single>\n      <html>This tracks progress when bootstrapping data from remote storage onto indexers. Otherwise, ignore this.</html>\n    </panel>\n  </row>\n  <row>\n    <panel>\n      <title>Bucket Activity</title>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"funcAggregate\">\n        <label>Metric</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"count\">Buckets</choice>\n        <choice value=\"sum\">Volume (MB)</choice>\n        <choice value=\"per_second\">Throughput (MB/s)</choice>\n        <default>count</default>\n        <change>\n          <condition value=\"count\">\n            <set token=\"y_label\">Buckets</set>\n          </condition>\n          <condition value=\"sum\">\n            <set token=\"y_label\">MB</set>\n          </condition>\n          <condition value=\"per_second\">\n            <set token=\"y_label\">MB/s</set>\n          </condition>\n        </change>\n      </input>\n      <chart>\n        <search>\n          <query>\n            `dmc_set_index_internal` search_group=$search_group$ source=*splunkd.log ((action=download AND download_set=*journal*) OR action=upload) status=succeeded component=CacheManager\n            | eval mb = kb / 1024\n            | timechart $funcAggregate$(mb) by action\n          </query>\n          <earliest>$range.earliest$</earliest>\n          <latest>$range.latest$</latest>\n        </search>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">$y_label$</option>\n      </chart>\n      <html>\n        <p>Each new warm bucket gets uploaded to remote storage. Buckets are only downloaded if they're required for a search and are not already in the local cache. High download rates are a negative indicator of cache health</p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel>\n        <title>Bucket Upload/Download Failure Count</title>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"aggregation\">\n        <label>Group by</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"action\">Upload/Download</choice>\n        <choice value=\"reason_str\">HTTP Status Code</choice>\n        <default>action</default>\n      </input>\n      <chart>\n        <search>\n          <query>\n            <![CDATA[\n              `dmc_set_index_internal` search_group=$search_group$ source=*splunkd.log (action=download OR action=upload) status=failed component=CacheManager\n              | rex field=reason \"HTTP Error (?<statuscode>\\d*): (?<description>.*)\"\n              | eval reason_str = statuscode.\": \".description\n              | fillnull reason_str value=\"Non-HTTP\"\n              | timechart count by $aggregation$\n            ]]>\n          </query>\n          <earliest>$range.earliest$</earliest>\n          <latest>$range.latest$</latest>\n      </search>\n        <option name=\"charting.axisTitleY.text\">Count</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.drilldown\">none</option>\n        <option name=\"height\">323</option>\n        <option name=\"refresh.display\">progressbar</option>\n      </chart>\n      <html>\n        Check the logs for details on non-http errors.\n      </html>\n    </panel>\n  </row>\n</form>",
"eai:type": "views",
"name": "smartstore_activity_deployment",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" script=\"cell_fill_gauge.js, common_control.js\" stylesheet=\"index_type.css\">\n  <label>SmartStore Activity: Instance</label>\n  <fieldset autoRun=\"true\" submitButton=\"false\">\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"dmc_group\">\n      <label>Group</label>\n      <showClearButton>false</showClearButton>\n      <search>\n        <query>\n          | `dmc_get_groups_containing_role(dmc_group_indexer)`\n          | search search_group!=\"dmc_group_*\"\n        </query>\n      </search>\n      <fieldForLabel>label</fieldForLabel>\n      <fieldForValue>search_group</fieldForValue>\n      <choice value=\"dmc_group_indexer\">All Indexers</choice>\n      <default>dmc_group_indexer</default>\n    </input>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"splunk_server\">\n      <label>Instance</label>\n      <showClearButton>false</showClearButton>\n      <populatingSearch fieldForLabel=\"serverName\" fieldForValue=\"serverName\">\n        | `dmc_get_instance_info($dmc_group$)`\n        | where search_group=\"dmc_group_indexer\"\n      </populatingSearch>\n      <selectFirstChoice>true</selectFirstChoice>\n      <change>\n        <condition value=\"*\">\n          <set token=\"host\">$row.host$</set>\n        </condition>\n      </change>\n    </input>\n    <input type=\"time\" token=\"range\">\n      <label>Time Range</label>\n      <default>\n        <earliest>-4h@h</earliest>\n        <latest>now</latest>\n      </default>\n    </input>\n    <input type=\"checkbox\" token=\"migration\" searchWhenChanged=\"true\">\n      <label>Show Migration Progress</label>\n      <choice value=\"Enable\"></choice>\n    </input>\n    <input type=\"checkbox\" token=\"bootstrap\" searchWhenChanged=\"true\">\n      <label>Show Bootstrap Progress</label>\n      <choice value=\"Enable\"></choice>\n    </input>\n  </fieldset>\n   <row>\n    <panel>\n      <single>\n        <title>Remote Storage Connectivity</title>\n        <search>\n          <query>`dmc_set_index_internal` host=$splunk_server$ source=*splunkd.log CacheManager AND action=* AND earliest=-1h \n                | stats count(eval(status=\"failed\")) as txn_failed, count(eval(status=\"succeeded\")) as txn_succeeded \n                | eval available=case(txn_failed=0 AND txn_succeeded=0, \"IDLE\", txn_succeeded>0, \"ONLINE\", true(), \"OFFLINE\") \n                | fields - txn_failed - txn_succeeded</query>\n          <earliest>$range.earliest$</earliest>\n          <latest>$range.latest$</latest>\n        </search>\n        <option name=\"drilldown\">none</option>\n        <option name=\"refresh.display\">progressbar</option>\n      </single>\n      <html>\n        <p>IDLE means no remote activity has happened in the last hour.</p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel depends=\"$migration$\">\n      <single>\n        <title>Migration Progress</title>\n        <search>\n          <query>\n            | rest splunk_server=$splunk_server$ /services/admin/cacheman\n            | eval stable_size = if('cm:bucket.stable'=1, 'cm:bucket.estimated_size', 0)\n            | stats sum(stable_size) as stable_bytes, sum(cm:bucket.estimated_size) as all_bytes\n            | eval migration_progress=round((stable_bytes / all_bytes) * 100)\n            | fields - stable_bytes - all_bytes\n          </query>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </single>\n      <html>This tracks progress when migrating data from non-SmartStore to SmartStore. Otherwise ignore this.</html>\n    </panel>\n    <panel depends=\"$bootstrap$\">\n      <single>\n        <title>Bootstrapping progress</title>\n        <search>\n          <query>\n            `dmc_set_index_internal` host=$splunk_server$ group=cmmaster source=*metrics.log subgroup=buckets_re_creation\n            | stats sum(success_count) as successes, sum(in_progress_count) as in_progress\n            | eval total = successes + in_progress\n            | eval percent = if(total=0, 100, (1 - ((in_progress - successes) / total)) * 100)\n            | fields percent\n          </query>\n          <earliest>$range.earliest$</earliest>\n          <latest>$range.latest$</latest>\n          <earliest>-24h@h</earliest>\n          <latest>now</latest>\n        </search>\n        <option name=\"drilldown\">none</option>\n        <option name=\"numberPrecision\">0.00</option>\n        <option name=\"refresh.display\">progressbar</option>\n        <option name=\"unit\">%</option>\n      </single>\n      <html>This tracks progress when bootstrapping data from remote storage onto indexers. Otherwise, ignore this.</html>\n    </panel>\n  </row>\n  <row>\n    <panel>\n      <title>Bucket Activity</title>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"funcAggregate\">\n        <label>Metric</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"count\">Buckets</choice>\n        <choice value=\"sum\">Volume (MB)</choice>\n        <choice value=\"per_second\">Throughput (MB/s)</choice>\n        <default>count</default>\n        <change>\n          <condition value=\"count\">\n            <set token=\"y_label\">Buckets</set>\n          </condition>\n          <condition value=\"sum\">\n            <set token=\"y_label\">MB</set>\n          </condition>\n          <condition value=\"per_second\">\n            <set token=\"y_label\">MB/s</set>\n          </condition>\n        </change>\n      </input>\n      <chart>\n        <search>\n          <query>\n            `dmc_set_index_internal` host=$splunk_server$ source=*splunkd.log ((action=download AND download_set=*journal*) OR action=upload) status=succeeded component=CacheManager\n            | eval mb = kb / 1024\n            | timechart $funcAggregate$(mb) by action\n          </query>\n          <earliest>$range.earliest$</earliest>\n          <latest>$range.latest$</latest>\n        </search>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">$y_label$</option>\n      </chart>\n      <html>\n        <p>Each new warm bucket gets uploaded to remote storage. Buckets are only downloaded if they're required for a search and are not already in the local cache. High download rates are a negative indicator of cache health</p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel>\n        <title>Bucket Upload/Download Failure Count</title>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"aggregation\">\n        <label>Group by</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"action\">Upload/Download</choice>\n        <choice value=\"reason_str\">HTTP Status Code</choice>\n        <default>action</default>\n      </input>\n      <chart>\n        <search>\n          <query>\n            <![CDATA[\n              `dmc_set_index_internal` host=$splunk_server$ source=*splunkd.log (action=download OR action=upload) status=failed component=CacheManager\n              | rex field=reason \"HTTP Error (?<statuscode>\\d*): (?<description>.*)\"\n              | eval reason_str = statuscode.\": \".description\n              | fillnull reason_str value=\"Non-HTTP\"\n              | timechart count by $aggregation$\n            ]]>\n          </query>\n          <earliest>$range.earliest$</earliest>\n          <latest>$range.latest$</latest>\n      </search>\n        <option name=\"charting.axisTitleY.text\">Count</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.drilldown\">none</option>\n        <option name=\"height\">323</option>\n        <option name=\"refresh.display\">progressbar</option>\n      </chart>\n      <html>\n        Check the logs for details on non-http errors.\n      </html>\n    </panel>\n  </row>\n</form>",
"eai:type": "views",
"name": "smartstore_activity_instance",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" script=\"cell_fill_gauge.js, common_control.js\" stylesheet=\"index_type.css\">\n  <label>SmartStore Cache Performance: Deployment</label>\n  <fieldset autoRun=\"true\" submitButton=\"false\">\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"search_group\">\n      <label>Group</label>\n      <showClearButton>false</showClearButton>\n      <search>\n        <query>\n          | `dmc_get_groups_containing_role(dmc_group_indexer)`\n          | where search_group!=\"dmc_group_indexer\"\n        </query>\n      </search>\n      <fieldForLabel>label</fieldForLabel>\n      <fieldForValue>search_group</fieldForValue>\n      <choice value=\"*\">All Indexers</choice>\n      <default>*</default>\n    </input>\n    <input type=\"time\" token=\"range\">\n      <label>Time Range</label>\n      <default>\n        <earliest>-4h@h</earliest>\n        <latest>now</latest>\n      </default>\n    </input>\n  </fieldset>\n  <row>\n    <panel>\n      <single>\n        <title>Minimum Disk Space Conf Setting</title>\n        <search>\n          <query>| REST splunk_server_group=$search_group$ /services/properties/server/diskUsage/minFreeSpace | eval label = IF(match(value,\"\\%\"), value, tostring(value, \"commas\").\"MB\") | fields label</query>\n          <earliest>-24h@h</earliest>\n          <latest>now</latest>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </single>\n      <html>diskUsage.minFreeSpace in server.conf</html>\n    </panel>\n    <panel>\n      <single>\n        <title>Eviction Padding</title>\n        <search>\n          <query>| REST splunk_server_group=$search_group$ /services/properties/server/cachemanager/eviction_padding | fields value</query>\n          <earliest>-24h@h</earliest>\n          <latest>now</latest>\n        </search>\n        <option name=\"drilldown\">none</option>\n        <option name=\"unit\">MB</option>\n      </single>\n      <html>cachemanager.eviction_padding in server.conf</html>\n    </panel>\n    <panel>\n      <single>\n        <title>Max Cache Size</title>\n        <search>\n          <query>| REST splunk_server_group=$search_group$ /services/properties/server/cachemanager/max_cache_size | eval size=if(value=0, \"No Max\", tostring(value, \"commas\").\"MB\") | fields size</query>\n          <earliest>-24h@h</earliest>\n          <latest>now</latest>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </single>\n      <html>cachemanager.max_cache_size in server.conf</html>\n    </panel>\n    <panel>\n      <single>\n        <title>Hotlist Recency Seconds</title>\n        <search>\n          <query>| REST splunk_server_group=$search_group$ /services/properties/server/cachemanager/hotlist_recency_secs | appendpipe [stats count | eval value=86500 | where count=0] | fields value</query>\n          <earliest>-24h@h</earliest>\n          <latest>now</latest>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </single>\n      <html>cachemanager.hotlist_recency_secs in server.conf</html>\n    </panel>\n    <panel>\n      <single>\n        <title>Hotlist Bloom Filter Recency Hours</title>\n        <search>\n          <query>| REST splunk_server_group=$search_group$ /services/properties/server/cachemanager/hotlist_bloom_filter_recency_hours | appendpipe [stats count | eval value=360 | where count=0] | fields value</query>\n          <earliest>-24h@h</earliest>\n          <latest>now</latest>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </single>\n      <html>cachemanager.hotlist_bloom_filter_recency_hours in server.conf</html>\n    </panel>\n  </row>\n  <row>\n    <panel>\n      <html>These are <a href=\"/help?location=learnmore.server.settings\" class=\"external\" target=\"_blank\">server.conf</a> settings that affect SmartStore operations</html>\n    </panel>\n  </row>\n  <row>\n    <panel>\n      <chart>\n        <title>Buckets Evicted</title>\n        <search>\n          <query>`dmc_set_index_internal` search_group=$search_group$ source=*metrics.log | timechart sum(evicted) as Evicted</query>\n          <earliest>$range.earliest$</earliest>\n          <latest>$range.latest$</latest>\n        </search>\n        <option name=\"charting.axisTitleY.text\">Buckets</option>\n        <option name=\"charting.axisY.abbreviation\">none</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.drilldown\">none</option>\n        <option name=\"refresh.display\">progressbar</option>\n      </chart>\n      <html>A steady stream of evictions is expected once the local cache fills up and the oldest data is removed according to the eviction policy. </html>\n    </panel>\n  </row>\n  <row>\n    <panel>\n      <chart>\n        <title>Remote Storage Search Overhead</title>\n        <search>\n          <query>\n            <![CDATA[\n             `dmc_set_index_internal` search_group=$search_group$  source=*/splunkd_access.log\n              | rex field=uri \"/services/admin/cacheman/bid|(?<bid>[^|]*)|/close\"\n              | search uri=*/close*\n              | eval mytime=strftime(_time, \"%Y-%m-%d %H:%M:%S\")\n              | stats last(_time) as _time count as buckets, sum(miss_ms) as miss_ms sum(search_ms) as search_ms, min(mytime) as issuetime by sid\n              | fillnull value=0 search_ms\n              | eval overheadRatio=(miss_ms/search_ms)\n              | fillnull value=0 overheadRatio\n              | eval searchSpeed=case(overheadRatio > 2,\"More than 50%\", overheadRatio < .2, \"Less than 10%\", true(), \"10%-50%\")\n              | timechart count by searchSpeed\n            ]]>\n          </query>\n          <earliest>$range.earliest$</earliest>\n          <latest>$range.latest$</latest>\n        </search>\n        <option name=\"charting.axisTitleY.text\">Searches</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.drilldown\">none</option>\n      </chart>\n      <html>Portion of search time spent downloading buckets from remote storage.</html>\n    </panel>\n  </row>\n  <row>\n    <panel>\n      <chart>\n        <title>Cache Hits/Misses</title>\n        <search>\n          <query>`dmc_set_index_internal` search_group=$search_group$ group=cachemgr_bucket source=*metrics.log | timechart count(cache_hit) as Hits count(cache_miss) as Misses</query>\n          <earliest>$range.earliest$</earliest>\n          <latest>$range.latest$</latest>\n        </search>\n        <option name=\"charting.axisTitleY.text\">Hit/Miss Ratio</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.stackMode\">stacked100</option>\n        <option name=\"charting.drilldown\">none</option>\n        <option name=\"refresh.display\">progressbar</option>\n      </chart>\n      <html>When a search needs a bucket and it's already in cache, that's a hit. If the bucket needs to be downloaded, that's a miss.</html>\n    </panel>\n  </row>\n  <row>\n    <panel>\n      <table>\n        <title>Cache Thrash by Index</title>\n        <search>\n          <query>\n            <![CDATA[\n              `dmc_set_index_internal` search_group=$search_group$ source=*splunkd.log CacheManager AND TERM(action=download) AND TERM(status=succeeded) AND download_set=\"*journal*\"\n              | rex field=cache_id \".*\\|(?<customer_index>.*)~.*~.*\\|\"\n              | eval identifier=(cache_id + host)\n              | stats count by identifier, customer_index\n              | stats count(eval(count>1)) as duplicate_downloads, sum(count) as all_downloads count(eval(count>=10)) as excessive_duplicate_downloads by customer_index\n              | eval duplicate_percent=if(all_downloads=0, 0, round((duplicate_downloads/all_downloads)*100, 2))\n              | sort  - duplicate_percent\n              | fields customer_index, duplicate_percent  all_downloads duplicate_downloads excessive_duplicate_downloads \n              | rename customer_index as Index, duplicate_percent as \"Repeat Download Percent\",  all_downloads as \"All Downloads\", duplicate_downloads as \"Repeated Downloads\", excessive_duplicate_downloads as \"Excessively Repeated Downloads\"\n            ]]>\n          </query>\n          <earliest>-24h@h</earliest>\n          <latest>now</latest>\n        </search>\n        <option name=\"count\">10</option>\n        <option name=\"drilldown\">none</option>\n        <option name=\"refresh.display\">progressbar</option>\n        <format type=\"number\" field=\"Repeat Download Percent\">\n          <option name=\"unit\">%</option>\n        </format>\n      </table>\n      <html>This is the percentage of bucket downloads that are repeats. This happens when a bucket is downloaded for a search, evicted based on policy, and then needed by a search again. \"Excessively Repeated Downloads\" are buckets that have been downloaded more than 10 times.</html>\n    </panel>\n  </row>\n</form>",
"eai:type": "views",
"name": "smartstore_cache_performance_deployment",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" script=\"cell_fill_gauge.js, common_control.js\" stylesheet=\"index_type.css\">\n  <label>SmartStore Cache Performance: Instance</label>\n  <fieldset autoRun=\"true\" submitButton=\"false\">\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"dmc_group\">\n      <label>Group</label>\n      <showClearButton>false</showClearButton>\n      <search>\n        <query>\n          | `dmc_get_groups_containing_role(dmc_group_indexer)`\n          | search search_group!=\"dmc_group_*\"\n        </query>\n      </search>\n      <fieldForLabel>label</fieldForLabel>\n      <fieldForValue>search_group</fieldForValue>\n      <choice value=\"dmc_group_indexer\">All Indexers</choice>\n      <default>dmc_group_indexer</default>\n    </input>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"splunk_server\">\n      <label>Instance</label>\n      <showClearButton>false</showClearButton>\n      <populatingSearch fieldForLabel=\"serverName\" fieldForValue=\"serverName\">\n        | `dmc_get_instance_info($dmc_group$)`\n        | where search_group=\"dmc_group_indexer\"\n      </populatingSearch>\n      <selectFirstChoice>true</selectFirstChoice>\n      <change>\n        <condition value=\"*\">\n          <set token=\"host\">$row.host$</set>\n        </condition>\n      </change>\n    </input>\n    <input type=\"time\" token=\"range\">\n      <label>Time Range</label>\n      <default>\n        <earliest>-1h@h</earliest>\n        <latest>now</latest>\n      </default>\n    </input>\n  </fieldset>\n  <row>\n    <panel>\n      <single>\n        <title>Minimum Free Space</title>\n        <search>\n          <query>| REST splunk_server=$splunk_server$ /services/properties/server/diskUsage/minFreeSpace | eval label = IF(match(value,\"\\%\"), value, tostring(value, \"commas\").\"MB\") | fields label</query>\n          <earliest>-24h@h</earliest>\n          <latest>now</latest>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </single>\n      <html>diskUsage.minFreeSpace in server.conf</html>\n    </panel>\n    <panel>\n      <single>\n        <title>Eviction Padding</title>\n        <search>\n          <query>| REST splunk_server=$splunk_server$ /services/properties/server/cachemanager/eviction_padding | fields value</query>\n          <earliest>-24h@h</earliest>\n          <latest>now</latest>\n        </search>\n        <option name=\"drilldown\">none</option>\n        <option name=\"unit\">MB</option>\n      </single>\n      <html>cachemanager.eviction_padding in server.conf</html>\n    </panel>\n    <panel>\n      <single>\n        <title>Max Cache Size</title>\n        <search>\n          <query>| REST splunk_server=$splunk_server$ /services/properties/server/cachemanager/max_cache_size | eval size=if(value=0, \"No Max\", tostring(value, \"commas\").\"MB\") | fields size</query>\n          <earliest>-24h@h</earliest>\n          <latest>now</latest>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </single>\n      <html>cachemanager.max_cache_size in server.conf</html>\n    </panel>\n    <panel>\n      <single>\n        <title>Hotlist Recency Seconds</title>\n        <search>\n          <query>| REST splunk_server=$splunk_server$ /services/properties/server/cachemanager/hotlist_recency_secs | appendpipe [stats count | eval value=86500 | where count=0] | fields value</query>\n          <earliest>-24h@h</earliest>\n          <latest>now</latest>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </single>\n      <html>cachemanager.hotlist_recency_secs in indexes.conf</html>\n    </panel>\n    <panel>\n      <single>\n        <title>Hotlist Bloom Filter Recency Hours</title>\n        <search>\n          <query>| REST splunk_server=$splunk_server$ /services/properties/server/cachemanager/hotlist_bloom_filter_recency_hours | appendpipe [stats count | eval value=360 | where count=0] | fields value</query>\n          <earliest>-24h@h</earliest>\n          <latest>now</latest>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </single>\n      <html>cachemanager.hotlist_bloom_filter_recency_hours in indexes.conf</html>\n    </panel>\n  </row>\n  <row>\n    <panel>\n        <html>These are <a href=\"/help?location=learnmore.server.settings\" class=\"external\" target=\"_blank\">server.conf</a> settings that affect SmartStore operations</html>\n    </panel>\n  </row>\n  <row>\n    <panel>\n      <chart>\n        <title>Buckets Evicted</title>\n        <search>\n          <query>`dmc_set_index_internal` host=$splunk_server$ source=*metrics.log | timechart sum(evicted) as Evicted</query>\n          <earliest>$range.earliest$</earliest>\n          <latest>$range.latest$</latest>\n        </search>\n        <option name=\"charting.axisTitleY.text\">Buckets</option>\n        <option name=\"charting.axisY.abbreviation\">none</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.drilldown\">none</option>\n        <option name=\"refresh.display\">progressbar</option>\n      </chart>\n      <html>A steady stream of evictions is expected once the local cache fills up and the oldest data is removed according to the eviction policy. </html>\n    </panel>\n  </row>\n  <row>\n    <panel>\n      <chart>\n        <title>Remote Storage Search Overhead</title>\n        <search>\n          <query>\n            <![CDATA[\n              `dmc_set_index_internal` host=$splunk_server$  source=*/splunkd_access.log\n              | rex field=uri \"/services/admin/cacheman/bid|(?<bid>[^|]*)|/close\"\n              | search uri=*/close*\n              | eval mytime=strftime(_time, \"%Y-%m-%d %H:%M:%S\")\n              | stats last(_time) as _time count as buckets, sum(miss_ms) as miss_ms sum(search_ms) as search_ms, min(mytime) as issuetime by sid\n              | fillnull value=0 search_ms\n              | eval overheadRatio=(miss_ms/search_ms)\n              | fillnull value=0 overheadRatio\n              | eval searchSpeed=case(overheadRatio > 2,\"More than 50%\", overheadRatio < .2, \"Less than 10%\", true(), \"10%-50%\")\n              | timechart count by searchSpeed\n            ]]>\n          </query>\n          <earliest>$range.earliest$</earliest>\n          <latest>$range.latest$</latest>\n        </search>\n        <option name=\"charting.axisTitleY.text\">Searches</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.drilldown\">none</option>\n      </chart>\n      <html>Portion of search time spent downloading buckets from remote storage.</html>\n    </panel>\n  </row>\n  <row>\n    <panel>\n      <chart>\n        <title>Cache Hits/Misses</title>\n        <search>\n          <query>`dmc_set_index_internal` host=$splunk_server$ source=*metrics.log group=cachemgr_bucket | timechart count(cache_hit) as Hits count(cache_miss) as Misses</query>\n          <earliest>$range.earliest$</earliest>\n          <latest>$range.latest$</latest>\n        </search>\n        <option name=\"charting.axisTitleY.text\">Hit/Miss Ratio</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.stackMode\">stacked100</option>\n        <option name=\"charting.drilldown\">none</option>\n        <option name=\"refresh.display\">progressbar</option>\n      </chart>\n      <html>When a search needs a bucket and it's already in cache, that's a hit. If the bucket needs to be downloaded, that's a miss.</html>\n    </panel>\n  </row>\n  <row>\n    <panel>\n      <table>\n        <title>Cache Thrash by Index</title>\n        <search>\n          <query>\n            <![CDATA[\n              `dmc_set_index_internal` host=$splunk_server$  source=*splunkd.log CacheManager AND TERM(action=download) AND TERM(status=succeeded) AND download_set=\"*journal*\"\n              | rex field=cache_id \".*\\|(?<customer_index>.*)~.*~.*\\|\"\n              | eval identifier=(cache_id + host)\n              | stats count by identifier, customer_index\n              | stats count(eval(count>1)) as duplicate_downloads, sum(count) as all_downloads count(eval(count>=10)) as excessive_duplicate_downloads by customer_index\n              | eval duplicate_percent=if(all_downloads=0, 0, round((duplicate_downloads/all_downloads)*100, 2))\n              | sort  - duplicate_percent\n              | fields customer_index, duplicate_percent  all_downloads duplicate_downloads excessive_duplicate_downloads \n              | rename customer_index as Index, duplicate_percent as \"Repeated Download Percent\",  all_downloads as \"All Downloads\", duplicate_downloads as \"Repeated Downloads\", excessive_duplicate_downloads as \"Excessively Repeated Downloads\"\n            ]]>\n          </query>\n          <earliest>-24h@h</earliest>\n          <latest>now</latest>\n        </search>\n        <option name=\"count\">10</option>\n        <option name=\"drilldown\">none</option>\n        <option name=\"refresh.display\">progressbar</option>\n        <format type=\"number\" field=\"Repeated Download Percent\">\n          <option name=\"unit\">%</option>\n        </format>\n      </table>\n      <html>This is the percentage of bucket downloads that are repeats. This happens when a bucket is downloaded for a search, evicted based on policy, and then needed by a search again. \"Excessively Repeated Downloads\" are buckets that have been downloaded more than 10 times.</html>\n    </panel>\n  </row>\n</form>",
"eai:type": "views",
"name": "smartstore_cache_performance_instance",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" script=\"common_control.js, drilldown_action_extension.js, splunk_tcpin_performance_extension.js, splunk_tcpin_performance_deployment_extension.js\" stylesheet=\"splunk_tcpin_performance_extension.css\">\n  <label>Splunk TCP Input Performance: Deployment</label>\n  <search id=\"tcp_queue_fill_ratio_snapshot\">\n    <query>\n      <![CDATA[\n        | rest splunk_server_group=dmc_group_indexer splunk_server_group=\"$group$\" services/server/introspection/queues\n        | search title=\"tcpin_queue*\"\n        | rex field=title \"tcpin_queue\\.(?<pipeline_number>\\d+)\"\n        | join splunk_server\n        [ | rest splunk_server_group=dmc_group_indexer splunk_server_group=\"$group$\" /services/properties/inputs\n        | where match(title, \"splunktcp(-ssl)?:\")\n        `dmc_get_port_from_splunktcp_stanza(title)`\n        | stats delim=\", \" values(port) as ports by splunk_server\n        | mvcombine ports\n        | fields splunk_server, ports]\n        | join splunk_server [|rest splunk_server_group=dmc_group_indexer services/data/inputs/tcp/ssl]\n        | eval val_last_1min=if(isnotnull(value_cntr1_size_bytes_lookback), round(value_cntr1_size_bytes_lookback, 2), \"N/A\")\n        | eval val_last_10min=if(isnotnull(value_cntr2_size_bytes_lookback), round(value_cntr2_size_bytes_lookback, 2), \"N/A\")\n        | eval queue_fill_last_1min = if(isnotnull(pipeline_number), \"pset\".pipeline_number.\": \".val_last_1min, val_last_1min)\n        | eval queue_fill_last_10min = if(isnotnull(pipeline_number), \"pset\".pipeline_number.\": \".val_last_10min, val_last_10min)\n      ]]>\n    </query>\n  </search>\n  <fieldset autoRun=\"true\" submitButton=\"false\">\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"group\">\n      <label>Group</label>\n      <showClearButton>false</showClearButton>\n      <search>\n        <query>\n          | `dmc_get_groups_containing_role(dmc_group_indexer)`| search search_group!=\"dmc_group_*\"\n        </query>\n      </search>\n      <fieldForLabel>label</fieldForLabel>\n      <fieldForValue>search_group</fieldForValue>\n      <choice value=\"*\">All</choice>\n      <selectFirstChoice>true</selectFirstChoice>\n    </input>\n  </fieldset>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Health Check</title>\n      <viz type=\"splunk_monitoring_console.KpiTrafficLight\">\n        <search base=\"tcp_queue_fill_ratio_snapshot\">\n          <query>\n            <![CDATA[\n              rex field=queue_fill_last_10min \"pset\\d+:\\s(?<queue_fill_last_10min>\\d+\\.\\d+)\"\n              | stats max(queue_fill_last_10min) as queue_fill_last_10min by splunk_server\n              | where queue_fill_last_10min > 60\n              | stats count as degraded_instance_count_queue_fill_ratio\n            ]]>\n          </query>\n          <preview>\n            <set token=\"degraded_instance_count_queue_fill_ratio\">$result.degraded_instance_count_queue_fill_ratio$</set>\n          </preview>\n        </search>\n        <option name=\"height\">45</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.field\">degraded_instance_count_queue_fill_ratio</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.detail\">splunk_server</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.rangeValues\">[0]</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.rangeIcons\">[\"success\", \"error\"]</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.rangeLabels\">[\"Queue fill ratio within the last 10 minutes is healthy for all instances.\", \"Queue fill ratio within the last 10 minutes is degraded on $degraded_instance_count_queue_fill_ratio$ instance(s).\"]</option>\n        <!-- <option name=\"splunk_monitoring_console.KpiTrafficLight.description\">KPI Description</option> -->\n      </viz>\n      <viz type=\"splunk_monitoring_console.KpiTrafficLight\">\n        <search>\n          <query>\n            `dmc_set_index_internal` search_group=dmc_group_indexer search_group=\"$group$\" sourcetype=splunkd source=*splunkd.log \"WARN\" TcpInputConfig \"reverse dns lookups appear to be excessively slow, this may impact receiving from network inputs.\"\n            | stats count as degraded_instance_count_dnc_lookup, values(host) as hosts\n          </query>\n          <preview>\n            <set token=\"degraded_instance_count_dnc_lookup\">$result.degraded_instance_count_dnc_lookup$</set>\n          </preview>\n          <earliest>-60m@m</earliest>\n          <latest>now</latest>\n        </search>\n        <option name=\"height\">45</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.field\">degraded_instance_count_dnc_lookup</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.detail\">hosts</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.rangeValues\">[0]</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.rangeIcons\">[\"success\", \"error\"]</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.rangeLabels\">[\"There were no reverse DNS lookup warnings within the last hour.\", \"There were $degraded_instance_count_dnc_lookup$ reverse DNS lookup warning(s) within the last hour.\"]</option>\n        <!-- <option name=\"splunk_monitoring_console.KpiTrafficLight.description\">KPI Description</option> -->      </viz>\n\n      <viz type=\"splunk_monitoring_console.KpiTrafficLight\">\n        <search>\n          <query>\n            `dmc_set_index_internal` search_group=dmc_group_indexer search_group=\"$group$\" sourcetype=splunkd source=*splunkd.log log_level=\"WARN\" component=TcpInputProc \"Stopping all listening ports.\"\n            | stats count as degraded_instance_count_port_closure, values(host) as hosts\n          </query>\n          <preview>\n            <set token=\"degraded_instance_count_port_closure\">$result.degraded_instance_count_port_closure$</set>\n          </preview>\n          <earliest>-60m@m</earliest>\n          <latest>now</latest>\n        </search>\n        <option name=\"height\">45</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.field\">degraded_instance_count_port_closure</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.detail\">hosts</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.rangeValues\">[0]</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.rangeIcons\">[\"success\", \"error\"]</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.rangeLabels\">[\"There were no Splunk TCP port closures due to queue blockages within the last hour.\", \"There were $degraded_instance_count_port_closure$ Splunk TCP port closure(s) due to queue blockages within the last hour.\"]</option>\n        <!-- <option name=\"splunk_monitoring_console.KpiTrafficLight.description\">KPI Description</option> -->      </viz>\n    </panel>\n  </row>\n  <row>\n    <panel>\n      <html>\n        <h2>\n          <span>Select views: </span>\n          <span id=\"link-switcher-view\">\n            <a href=\"#\" class=\"btn-pill active\" data-item=\"all\">All</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"snapshot\">Snapshot</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"historical\">Historical</a>\n          </span>\n        </h2>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Snapshots</title>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Current Splunk TCP Input Queue Fill Ratio</title>\n      <table id=\"snapshotTcpInFillRatioTable\">\n        <search base=\"tcp_queue_fill_ratio_snapshot\">\n          <query>\n            stats count as pset_count, values(ports), as ports values(queue_fill_last_1min) as queue_fill_last_1min, values(queue_fill_last_10min) as queue_fill_last_10min by splunk_server\n            | fields splunk_server, pset_count, ports, queue_fill_last_1min, queue_fill_last_10min\n            | rename splunk_server as \"Instance\", pset_count as \"Pipeline Set Count\", ports as \"Ports\", queue_fill_last_1min as \"Queue Fill Ratio (Last 1 Minute)\", queue_fill_last_10min as \"Queue Fill Ratio (Last 10 Minutes)\"\n          </query>\n        </search>\n        <option name=\"drilldown\">row</option>\n        <drilldown>\n          <link target=\"_blank\">splunk_tcpin_performance_instance?form.splunk_server=$row.Instance$</link>\n        </drilldown>\n      </table>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Historical Charts</title>\n      <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n        <label>Time Range:</label>\n        <default>\n          <earliestTime>-4h@m</earliestTime>\n          <latestTime>now</latestTime>\n        </default>\n      </input>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"split_by\">\n        <label>Split by Options</label>\n        <showClearButton>false</showClearButton>\n\n        <!-- default -->\n        <selectFirstChoice>True</selectFirstChoice>\n\n        <choice value=\"total\">Total</choice>\n        <choice value=\"indexer\">Split by Indexer</choice>\n        <choice value=\"forwarder\">Split by Forwarder Type</choice>\n        <choice value=\"port\">Split by Port</choice>\n        <change>\n          <condition value=\"total\">\n            <set token=\"total\">true</set>\n            <unset token=\"split_by_indexer\" />\n            <unset token=\"split_by_forwarder_type\" />\n            <unset token=\"split_by_port\" />\n          </condition>\n          <condition value=\"indexer\">\n            <set token=\"split_by_indexer\">true</set>\n            <unset token=\"total\" />\n            <unset token=\"split_by_forwarder_type\" />\n            <unset token=\"split_by_port\" />\n          </condition>\n          <condition value=\"forwarder\">\n            <set token=\"split_by_forwarder_type\">true</set>\n            <unset token=\"total\" />\n            <unset token=\"split_by_indexer\" />\n            <unset token=\"split_by_port\" />\n          </condition>\n          <condition value=\"port\">\n            <set token=\"split_by_port\">true</set>\n            <unset token=\"total\" />\n            <unset token=\"split_by_indexer\" />\n            <unset token=\"split_by_forwarder_type\" />\n          </condition>\n        </change>\n      </input>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$ $total$ $split_by_forwarder_type$ $split_by_port$\" depends=\"$split_by_indexer$\">\n      <title>Average Splunk TCP Incoming Throughput by Indexer</title>\n      <chart>\n        <search>\n          <query>\n            `dmc_tcp_throughput_split_by(host, \"$group$\")`\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Average KB/s</option>\n        <option name=\"charting.axisLabelsX.axisVisibility\">hide</option>\n      </chart>\n    </panel>\n    <panel rejects=\"$snapshot$ $total$ $split_by_indexer$ $split_by_port$\" depends=\"$split_by_forwarder_type$\">\n      <title>Average Splunk TCP Incoming Throughput by Forwarder Type</title>\n      <chart>\n        <search>\n          <query>\n            `dmc_get_forwarder_tcpin` search_group=dmc_group_indexer search_group=\"$group$\"\n            | `dmc_rename_forwarder_type(fwdType)`\n            | `dmc_timechart_for_metrics_log` per_second(kb) as avg_tcp_KBps by fwdType\n            | rename avg_tcp_KBps as \"KB/s\"\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Average KB/s</option>\n        <option name=\"charting.axisLabelsX.axisVisibility\">hide</option>\n      </chart>\n    </panel>\n    <panel rejects=\"$snapshot$ $total$ $split_by_indexer$ $split_by_forwarder_type$\" depends=\"$split_by_port$\">\n      <title>Average Splunk TCP Incoming Throughput by Port</title>\n      <chart>\n        <search>\n          <query>\n            `dmc_tcp_throughput_split_by(destPort, \"$group$\")`\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Average KB/s</option>\n        <option name=\"charting.axisLabelsX.axisVisibility\">hide</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$ $split_by_indexer$ $split_by_forwarder_type$ $split_by_port$\">\n      <title>Total Average Splunk TCP Incoming Throughput and Forwarder Count</title>\n      <chart>\n        <search>\n          <query>\n            `dmc_get_forwarder_tcpin` search_group=dmc_group_indexer search_group=\"$group$\"\n            | `dmc_timechart_for_metrics_log` dc(guid) as forwarder_count, per_second(kb) as tcp_KBps\n            | rename forwarder_count as \"Forwarder Count\", tcp_KBps as \"Throughput (KB/s)\"\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.axisY2.enabled\">true</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.chart.overlayFields\">\"Throughput (KB/s)\"</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.axisLabelsY2.majorUnit\">1</option>\n        <option name=\"charting.axisTitleY.text\">Count</option>\n        <option name=\"charting.axisTitleY2.text\">Average KB/s</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <drilldown>\n          <condition match=\"isnotnull('row._span')\">\n            <set token=\"drilldown_global_forwarder\">true</set>\n            <set token=\"drilldown_global_forwarder\">$row._span$</set>\n            <set token=\"drilldown_global_forwarder_earliest\">$earliest$</set>\n            <eval token=\"drilldown_global_forwarder_earliest_label\">strftime(earliest, \"%m/%d/%Y %H:%M:%S\")</eval>\n            <set token=\"drilldown_global_forwarder_latest\">$latest$</set>\n            <eval token=\"drilldown_global_forwarder_latest_label\">strftime(latest, \"%m/%d/%Y %H:%M:%S\")</eval>\n            <set token=\"drilldown_global_forwarder_count\">$click.value2$</set>\n          </condition>\n        </drilldown>\n      </chart>\n    </panel>\n    <panel rejects=\"$snapshot$ $total$ $split_by_forwarder_type$ $split_by_port$\" depends=\"$split_by_indexer$\">\n      <title>Connection Count by Indexer</title>\n      <chart>\n        <search>\n          <query>\n            `dmc_tcp_forwarder_count_split_by(host, \"$group$\")`\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.axisY2.enabled\">true</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.axisLabelsY2.majorUnit\">1</option>\n        <option name=\"charting.axisTitleY.text\">Count</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <drilldown>\n          <condition match=\"isnotnull('row._span')\">\n            <set token=\"drilldown_indexer_forwarder\">true</set>\n            <set token=\"drilldown_indexer_forwarder\">$row._span$</set>\n            <set token=\"drilldown_indexer_forwarder_earliest\">$earliest$</set>\n            <eval token=\"drilldown_indexer_forwarder_earliest_label\">strftime(earliest, \"%m/%d/%Y %H:%M:%S\")</eval>\n            <set token=\"drilldown_indexer_forwarder_latest\">$latest$</set>\n            <eval token=\"drilldown_indexer_forwarder_latest_label\">strftime(latest, \"%m/%d/%Y %H:%M:%S\")</eval>\n            <set token=\"drilldown_indexer_name\">$click.name2$</set>\n            <set token=\"drilldown_indexer_forwarder_count\">$click.value2$</set>\n          </condition>\n        </drilldown>\n      </chart>\n    </panel>\n    <panel rejects=\"$snapshot$ $total$ $split_by_indexer$ $split_by_port$\" depends=\"$split_by_forwarder_type$\">\n      <title>Forwarder Count by Forwarder Type</title>\n      <chart>\n        <search>\n          <query>\n            `dmc_get_forwarder_tcpin` search_group=dmc_group_indexer search_group=\"$group$\"\n            | `dmc_rename_forwarder_type(fwdType)`\n            | `dmc_timechart_for_metrics_log` dc(guid) as forwarder_count by fwdType\n            | rename forwarder_count as \"Forwarder Count\"\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.axisY2.enabled\">true</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.axisLabelsY2.majorUnit\">1</option>\n        <option name=\"charting.axisTitleY.text\">Count</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <drilldown>\n          <condition match=\"isnotnull('row._span')\">\n            <set token=\"drilldown_type_forwarder\">true</set>\n            <set token=\"drilldown_type_forwarder\">$row._span$</set>\n            <set token=\"drilldown_type_forwarder_earliest\">$earliest$</set>\n            <eval token=\"drilldown_type_forwarder_earliest_label\">strftime(earliest, \"%m/%d/%Y %H:%M:%S\")</eval>\n            <set token=\"drilldown_type_forwarder_latest\">$latest$</set>\n            <eval token=\"drilldown_type_forwarder_latest_label\">strftime(latest, \"%m/%d/%Y %H:%M:%S\")</eval>\n            <set token=\"drilldown_type_forwarder_type\">$click.name2$</set>\n            <set token=\"drilldown_type_forwarder_count\">$click.value2$</set>\n          </condition>\n        </drilldown>\n      </chart>\n    </panel>\n    <panel rejects=\"$snapshot$ $total$ $split_by_indexer$ $split_by_forwarder_type$\" depends=\"$split_by_port$\">\n      <title>Forwarder Count by Port</title>\n      <chart>\n        <search>\n          <query>\n            `dmc_tcp_forwarder_count_split_by(destPort, \"$group$\")`\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.axisY2.enabled\">true</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.axisLabelsY2.majorUnit\">1</option>\n        <option name=\"charting.axisTitleY.text\">Count</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <drilldown>\n          <condition match=\"isnotnull('row._span')\">\n            <set token=\"drilldown_port_forwarder\">true</set>\n            <set token=\"drilldown_port_forwarder\">$row._span$</set>\n            <set token=\"drilldown_port_forwarder_earliest\">$earliest$</set>\n            <eval token=\"drilldown_port_forwarder_earliest_label\">strftime(earliest, \"%m/%d/%Y %H:%M:%S\")</eval>\n            <set token=\"drilldown_port_forwarder_latest\">$latest$</set>\n            <eval token=\"drilldown_port_forwarder_latest_label\">strftime(latest, \"%m/%d/%Y %H:%M:%S\")</eval>\n            <set token=\"drilldown_port_forwarder_port\">$click.name2$</set>\n            <set token=\"drilldown_port_forwarder_count\">$click.value2$</set>\n          </condition>\n        </drilldown>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel depends=\"$drilldown_global_forwarder$\" rejects=\"$snapshot$\" id=\"drilldown_global_forwarder\">\n      <table>\n        <title>$drilldown_global_forwarder_count$ forwarders connected to selected indexer group between $drilldown_global_forwarder_earliest_label$ ~ $drilldown_global_forwarder_latest_label$</title>\n        <search>\n          <query>\n            `dmc_get_forwarder_tcpin` search_group=dmc_group_indexer search_group=\"$group$\"\n            | stats dc(host) as connection_count by guid\n            | join type=outer guid [| inputlookup dmc_forwarder_assets]\n            | `dmc_rename_forwarder_type(forwarder_type)`\n            | makemv delim=\" \" avg_tcp_kbps_sparkline\n            | eval sum_kb = if (status == \"missing\", \"N/A\", sum_kb)\n            | eval avg_tcp_kbps_sparkline = if (status == \"missing\", \"N/A\", avg_tcp_kbps_sparkline)\n            | eval avg_tcp_kbps = if (status == \"missing\", \"N/A\", avg_tcp_kbps)\n            | eval avg_tcp_eps = if (status == \"missing\", \"N/A\", avg_tcp_eps)\n            | `dmc_rename_forwarder_type(fwdType)`\n            | `dmc_time_format(last_connected)`\n            | fields hostname, forwarder_type, version, os, arch, status, last_connected, sum_kb, avg_tcp_kbps_sparkline, avg_tcp_kbps, avg_tcp_eps, connection_count\n            | search hostname=\"***\"\n            | search status=\"*\"\n            | rename hostname as Instance, forwarder_type as Type, version as Version, os as OS, arch as Architecture, status as Status, last_connected as \"Last Connected to Indexers\", sum_kb as \"Total KB\", avg_tcp_kbps_sparkline as \"Average KB/s Over Time\", avg_tcp_kbps as \"Average KB/s\", avg_tcp_eps as \"Average Events/s\", connection_count as \"Number of Connections\"\n          </query>\n          <earliest>$drilldown_global_forwarder_earliest$</earliest>\n          <latest>$drilldown_global_forwarder_latest$</latest>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <html depends=\"$drilldown_global_forwarder$\">\n        <a data-unset-token=\"drilldown_global_forwarder\">Close this drilldown table</a>\n      </html>\n    </panel>\n    <panel depends=\"$drilldown_indexer_forwarder$\" rejects=\"$snapshot$\" id=\"drilldown_indexer_forwarder\">\n      <table>\n        <title>$drilldown_indexer_forwarder_count$ forwarders connected to $drilldown_indexer_name$ between $drilldown_indexer_forwarder_earliest_label$ ~ $drilldown_indexer_forwarder_latest_label$</title>\n        <search>\n          <query>\n            `dmc_get_forwarder_tcpin` search_group=dmc_group_indexer search_group=\"$group$\"\n            | where host=\"$drilldown_indexer_name$\"\n            | stats dc(host) as connection_count by guid\n            | join type=outer guid [| inputlookup dmc_forwarder_assets]\n            | `dmc_rename_forwarder_type(forwarder_type)`\n            | makemv delim=\" \" avg_tcp_kbps_sparkline\n            | eval sum_kb = if (status == \"missing\", \"N/A\", sum_kb)\n            | eval avg_tcp_kbps_sparkline = if (status == \"missing\", \"N/A\", avg_tcp_kbps_sparkline)\n            | eval avg_tcp_kbps = if (status == \"missing\", \"N/A\", avg_tcp_kbps) | eval avg_tcp_eps = if (status == \"missing\", \"N/A\", avg_tcp_eps)\n            | `dmc_rename_forwarder_type(fwdType)`\n            | `dmc_time_format(last_connected)`\n            | fields hostname, forwarder_type, version, os, arch, status, last_connected, sum_kb, avg_tcp_kbps_sparkline, avg_tcp_kbps, avg_tcp_eps\n            | search hostname=\"***\"\n            | search status=\"*\"\n            | rename hostname as Instance, forwarder_type as Type, version as Version, os as OS, arch as Architecture, status as Status, last_connected as \"Last Connected to Indexers\", sum_kb as \"Total KB\", avg_tcp_kbps_sparkline as \"Average KB/s Over Time\", avg_tcp_kbps as \"Average KB/s\", avg_tcp_eps as \"Average Events/s\"\n          </query>\n          <earliest>$drilldown_indexer_forwarder_earliest$</earliest>\n          <latest>$drilldown_indexer_forwarder_latest$</latest>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <html depends=\"$drilldown_indexer_forwarder$\">\n        <a data-unset-token=\"drilldown_indexer_forwarder\">Close this drilldown table</a>\n      </html>\n    </panel>\n    <panel depends=\"$drilldown_type_forwarder$\" rejects=\"$snapshot$\" id=\"drilldown_type_forwarder\">\n      <table>\n        <title>$drilldown_type_forwarder_count$ $drilldown_type_forwarder_type$ forwarders connected to selected indexer group between $drilldown_type_forwarder_earliest_label$ ~ $drilldown_type_forwarder_latest_label$ </title>\n        <search>\n          <query>\n            `dmc_get_forwarder_tcpin` search_group=dmc_group_indexer search_group=\"$group$\"\n            | `dmc_rename_forwarder_type(fwdType)`\n            | where fwdType=\"$drilldown_type_forwarder_type$\"\n            | stats dc(host) as connection_count by guid\n            | join type=outer guid [| inputlookup dmc_forwarder_assets]\n            | `dmc_rename_forwarder_type(forwarder_type)`\n            | makemv delim=\" \" avg_tcp_kbps_sparkline\n            | eval sum_kb = if (status == \"missing\", \"N/A\", sum_kb)\n            | eval avg_tcp_kbps_sparkline = if (status == \"missing\", \"N/A\", avg_tcp_kbps_sparkline)\n            | eval avg_tcp_kbps = if (status == \"missing\", \"N/A\", avg_tcp_kbps)\n            | eval avg_tcp_eps = if (status == \"missing\", \"N/A\", avg_tcp_eps)\n            | `dmc_time_format(last_connected)`\n            | fields hostname, forwarder_type, version, os, arch, status, last_connected, sum_kb, avg_tcp_kbps_sparkline, avg_tcp_kbps, avg_tcp_eps, connection_count\n            | search hostname=\"***\"\n            | search status=\"*\"\n            | rename hostname as Instance, forwarder_type as Type, version as Version, os as OS, arch as Architecture, status as Status, last_connected as \"Last Connected to Indexers\", sum_kb as \"Total KB\", avg_tcp_kbps_sparkline as \"Average KB/s Over Time\", avg_tcp_kbps as \"Average KB/s\", avg_tcp_eps as \"Average Events/s\", connection_count as \"Number of Connections\"\n          </query>\n          <earliest>$drilldown_type_forwarder_earliest$</earliest>\n          <latest>$drilldown_type_forwarder_latest$</latest>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <html depends=\"$drilldown_type_forwarder$\">\n        <a data-unset-token=\"drilldown_type_forwarder\">Close this drilldown table</a>\n      </html>\n    </panel>\n    <panel depends=\"$drilldown_port_forwarder$\" rejects=\"$snapshot$\" id=\"drilldown_port_forwarder\">\n      <table>\n        <title>$drilldown_port_forwarder_count$ forwarders on port $drilldown_port_forwarder_port$ connected to selected indexer group between $drilldown_port_forwarder_earliest_label$ ~ $drilldown_port_forwarder_latest_label$ </title>\n        <search>\n          <query>\n            `dmc_get_forwarder_tcpin` search_group=dmc_group_indexer search_group=\"$group$\"\n            | where destPort=\"$drilldown_port_forwarder_port$\"\n            | stats dc(host) as connection_count by guid\n            | join type=outer guid [| inputlookup dmc_forwarder_assets]\n            | `dmc_rename_forwarder_type(forwarder_type)`\n            | makemv delim=\" \" avg_tcp_kbps_sparkline\n            | eval sum_kb = if (status == \"missing\", \"N/A\", sum_kb)\n            | eval avg_tcp_kbps_sparkline = if (status == \"missing\", \"N/A\", avg_tcp_kbps_sparkline)\n            | eval avg_tcp_kbps = if (status == \"missing\", \"N/A\", avg_tcp_kbps) | eval avg_tcp_eps = if (status == \"missing\", \"N/A\", avg_tcp_eps)\n            | `dmc_rename_forwarder_type(fwdType)`\n            | `dmc_time_format(last_connected)`\n            | fields hostname, forwarder_type, version, os, arch, status, last_connected, sum_kb, avg_tcp_kbps_sparkline, avg_tcp_kbps, avg_tcp_eps, connection_count\n            | search hostname=\"***\"\n            | search status=\"*\"\n            | rename hostname as Instance, forwarder_type as Type, version as Version, os as OS, arch as Architecture, status as Status, last_connected as \"Last Connected to Indexers\", sum_kb as \"Total KB\", avg_tcp_kbps_sparkline as \"Average KB/s Over Time\", avg_tcp_kbps as \"Average KB/s\", avg_tcp_eps as \"Average Events/s\", connection_count as \"Number of Connections\"\n          </query>\n          <earliest>$drilldown_port_forwarder_earliest$</earliest>\n          <latest>$drilldown_port_forwarder_latest$</latest>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <html depends=\"$drilldown_port_forwarder$\">\n        <a data-unset-token=\"drilldown_port_forwarder\">Close this drilldown table</a>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <input type=\"dropdown\" token=\"fillRatioAggrFunc\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <default>Median</default>\n        <change>\n          <set token=\"fillRatioAggrLabel\">$label$</set>\n        </change>\n      </input>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$ $split_by_indexer$\" id=\"indexer_count_by_tcp_input_queue_fill_ratio\">\n      <title>Indexer Count by $fillRatioAggrLabel$ Splunk TCP Input Queue Fill Ratio</title>\n      <html>\n        <div class=\"heatmap_toggle\"></div>\n      </html>\n      <viz type=\"splunk_monitoring_console.heatmap\">\n        <search>\n          <query>\n            `dmc_set_index_internal` sourcetype=splunkd source=*metrics.log search_group=dmc_group_indexer search_group=\"$group$\" group=queue name=splunktcpin\n            | eval max=if(isnotnull(max_size_kb),max_size_kb,max_size)\n            | eval curr=if(isnotnull(current_size_kb),current_size_kb,current_size)\n            | eval fill_perc=round((curr/max)*100,2)\n            | bin _time minspan=30s\n            | stats $fillRatioAggrFunc$(fill_perc) AS \"fill_percentage\" by host, _time\n            | `dmc_queue_fill_ratio_rangemap_and_timechart`\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <drilldown>\n          <condition match=\"isnotnull('row._span')\">\n            <set token=\"drilldown_queue_fill_ratio\">true</set>\n            <set token=\"drilldown_queue_fill_ratio_span\">$row._span$</set>\n            <set token=\"drilldown_queue_fill_ratio_earliest\">$row.earliest$</set>\n            <eval token=\"drilldown_queue_fill_ratio_earliest_label\">$row.earliest_label$</eval>\n            <set token=\"drilldown_queue_fill_ratio_latest\">$row.latest$</set>\n            <eval token=\"drilldown_queue_fill_ratio_latest_label\">$row.latest_label$</eval>\n            <set token=\"drilldown_queue_fill_ratio_metric\">$row.drilldown_indexing_rate_metric$</set>\n            <set token=\"drilldown_queue_fill_ratio_count\">$row.numInstances$</set>\n          </condition>\n          <condition/>\n        </drilldown>\n      </viz>\n      <chart>\n        <search>\n          <query>\n            `dmc_set_index_internal` sourcetype=splunkd source=*metrics.log search_group=dmc_group_indexer search_group=\"$group$\" group=queue name=splunktcpin\n            | eval max=if(isnotnull(max_size_kb),max_size_kb,max_size)\n            | eval curr=if(isnotnull(current_size_kb),current_size_kb,current_size)\n            | eval fill_perc=round((curr/max)*100,2)\n            | bin _time minspan=30s\n            | stats $fillRatioAggrFunc$(fill_perc) AS \"fill_percentage\" by host, _time\n            | `dmc_queue_fill_ratio_rangemap_and_timechart`\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Instance count</option>\n        <option name=\"charting.fieldColors\">{\"80-100%\": 0xD85D3C, \"60-80%\": 0xF7902B, \"0-60%\":0x9AC23C, \"abnormal\":0xC4C4C0}</option>\n        <drilldown>\n          <condition match=\"isnotnull('row._span')\">\n            <set token=\"drilldown_queue_fill_ratio\">true</set>\n            <set token=\"drilldown_queue_fill_ratio_span\">$row._span$</set>\n            <set token=\"drilldown_queue_fill_ratio_earliest\">$earliest$</set>\n            <eval token=\"drilldown_queue_fill_ratio_earliest_label\">strftime(earliest, \"%m/%d/%Y %H:%M:%S\")</eval>\n            <set token=\"drilldown_queue_fill_ratio_latest\">$latest$</set>\n            <eval token=\"drilldown_queue_fill_ratio_latest_label\">strftime(latest, \"%m/%d/%Y %H:%M:%S\")</eval>\n            <set token=\"drilldown_queue_fill_ratio_metric\">$click.name2$</set>\n            <set token=\"drilldown_queue_fill_ratio_count\">$click.value2$</set>\n          </condition>\n          <condition/>\n        </drilldown>\n      </chart>\n      <table depends=\"$drilldown_queue_fill_ratio$\" id=\"drilldown_queue_fill_ratio\">\n        <title>$drilldown_queue_fill_ratio_count$ indexers in the $drilldown_queue_fill_ratio_metric$ fill ratio range between $drilldown_queue_fill_ratio_earliest_label$ ~ $drilldown_queue_fill_ratio_latest_label$</title>\n        <search>\n          <query>`dmc_drilldown_indexing_performance_deployment_queue_fill_ratio(\"*\", splunktcpin, $fillRatioAggrFunc$, $drilldown_queue_fill_ratio_metric$)`</query>\n          <earliest>$drilldown_queue_fill_ratio_earliest$</earliest>\n          <latest>$drilldown_queue_fill_ratio_latest$</latest>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <html depends=\"$drilldown_queue_fill_ratio$\">\n        <a data-unset-token=\"drilldown_queue_fill_ratio\">Close this drilldown table</a>\n      </html>\n    </panel>\n    <panel rejects=\"$snapshot$\" depends=\"$split_by_indexer$\">\n      <title>Splunk $fillRatioAggrLabel$ TCP Input Queue Fill Ratio By Instance</title>\n      <chart>\n        <search>\n          <query>\n            `dmc_set_index_internal` sourcetype=splunkd source=*metrics.log search_group=dmc_group_indexer search_group=\"$group$\" group=queue name=splunktcpin\n            | eval max=if(isnotnull(max_size_kb),max_size_kb,max_size)\n            | eval curr=if(isnotnull(current_size_kb),current_size_kb,current_size)\n            | eval fill_perc=round((curr/max)*100,2)\n            | `dmc_timechart_for_metrics_log` partial=f limit=25 $fillRatioAggrFunc$(fill_perc) AS fill_percentage by host\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisY.maximumNumber\">100</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">25</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Queue % filled</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Deployment-Wide $fillRatioAggrLabel$ Splunk TCP Input Queue Fill Ratio</title>\n      <chart>\n        <search>\n          <query>\n            `dmc_set_index_internal` sourcetype=splunkd source=*metrics.log search_group=dmc_group_indexer search_group=\"$group$\" group=queue name=splunktcpin\n            | eval max=if(isnotnull(max_size_kb),max_size_kb,max_size)\n            | eval curr=if(isnotnull(current_size_kb),current_size_kb,current_size)\n            | eval fill_perc=round((curr/max)*100,2)\n            | `dmc_timechart_for_metrics_log` partial=f $fillRatioAggrFunc$(fill_perc) AS fill_percentage\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">line</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.legend.placement\">none</option>\n        <option name=\"charting.axisY.maximumNumber\">100</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">25</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Queue % filled</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <html rejects=\"$split_by_indexer$\">\n        <p>Count of instances grouped by the $fillRatioAggrLabel$ fill ratio of the Splunk TCP queue over time.</p>\n      </html>\n      <html depends=\"$split_by_indexer$\">\n        <p>$fillRatioAggrLabel$ fill ratio of the Splunk TCP queue over time by instance.</p>\n      </html>\n    </panel>\n  </row>\n</form>",
"eai:type": "views",
"name": "splunk_tcpin_performance_deployment",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" script=\"common_control.js, drilldown_action_extension.js, splunk_tcpin_performance_instance_extension.js\" stylesheet=\"splunk_tcpin_performance_extension.css\">\n  <label>Splunk TCP Input Performance: Instance</label>\n  <search id=\"queue_fill_ratio_base\">\n    <query>\n      <![CDATA[\n            | rest splunk_server=$splunk_server$ services/server/introspection/queues\n            | search title=\"tcpin_queue*\"\n            | rex field=title \"tcpin_queue\\.(?<pipeline_number>\\d+)\"\n            | join splunk_server\n            [ | rest splunk_server=$splunk_server$ /services/properties/inputs\n              | where match(title, \"splunktcp(-ssl)?:\")\n              `dmc_get_port_from_splunktcp_stanza(title)`\n              | stats delim=\", \" values(port) as ports by splunk_server\n              | mvcombine ports\n              | fields splunk_server, ports]\n            | join splunk_server [|rest splunk_server_group=dmc_group_indexer services/data/inputs/tcp/ssl]\n            | eval val_last_1min=if(isnotnull(value_cntr1_size_bytes_lookback), round(value_cntr1_size_bytes_lookback, 2), \"N/A\")\n            | eval val_last_10min=if(isnotnull(value_cntr2_size_bytes_lookback), round(value_cntr2_size_bytes_lookback, 2), \"N/A\")\n            | eval queue_fill_last_1min = if(isnotnull(pipeline_number), \"pset\".pipeline_number.\": \".val_last_1min, val_last_1min)\n            | eval queue_fill_last_10min = if(isnotnull(pipeline_number), \"pset\".pipeline_number.\": \".val_last_10min, val_last_10min)\n            ]]>\n    </query>\n  </search>\n  <fieldset autoRun=\"true\" submitButton=\"false\">\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"splunk_server\">\n      <label>Instance:</label>\n      <showClearButton>false</showClearButton>\n      <populatingSearch fieldForLabel=\"splunk_server\" fieldForValue=\"splunk_server\">\n        | rest splunk_server_group=dmc_group_indexer services/server/introspection/queues\n        | search title=\"tcpin_queue*\"\n        | fields splunk_server\n        | dedup splunk_server\n        | join type=left splunk_server\n        [|`dmc_get_instance_info(*)` | rename serverName as splunk_server]\n      </populatingSearch>\n      <selectFirstChoice>true</selectFirstChoice>\n      <change>\n        <condition value=\"*\">\n          <set token=\"host\">$row.host$</set>\n        </condition>\n      </change>\n    </input>\n  </fieldset>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Health Check</title>\n      <viz type=\"splunk_monitoring_console.KpiTrafficLight\">\n        <search base=\"queue_fill_ratio_base\">\n          <query>\n            <![CDATA[\n              rex field=queue_fill_last_10min \"pset\\d+:\\s(?<queue_fill_last_10min>\\d+\\.\\d+)\"\n              | stats max(queue_fill_last_10min) as queue_fill_last_10min\n              | where queue_fill_last_10min > 60\n              | stats count as degraded_instance_count_queue_fill_ratio\n            ]]>\n          </query>\n          <preview>\n            <set token=\"degraded_instance_count_queue_fill_ratio\">$result.degraded_instance_count_queue_fill_ratio$</set>\n          </preview>\n        </search>\n        <option name=\"height\">45</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.field\">degraded_instance_count_queue_fill_ratio</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.detail\">splunk_server</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.rangeValues\">[0]</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.rangeIcons\">[\"success\", \"error\"]</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.rangeLabels\">[\"Queue fill ratio within the last 10 minutes is healthy for this instance.\", \"Queue fill ratio within the last 10 minutes is degraded for this instance.\"]</option>\n        <!-- <option name=\"splunk_monitoring_console.KpiTrafficLight.description\">KPI Description</option> -->\n      </viz>\n\n      <viz type=\"splunk_monitoring_console.KpiTrafficLight\">\n        <search>\n          <query>\n            `dmc_set_index_internal` splunk_server=$splunk_server$ sourcetype=splunkd source=*splunkd.log \"WARN\" TcpInputConfig \"reverse dns lookups appear to be excessively slow, this may impact receiving from network inputs.\"\n            | stats count as dns_lookup_warning_count\n          </query>\n          <earliest>-60m@m</earliest>\n          <latest>now</latest>\n        </search>\n        <option name=\"height\">45</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.field\">dns_lookup_warning_count</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.rangeValues\">[0]</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.rangeIcons\">[\"success\", \"error\"]</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.rangeLabels\">[\"There were no reverse DNS lookup warnings within the last hour for this instance.\", \"There was at least one reverse DNS lookup warning within the last hour for this instance.\"]</option>\n        <!-- <option name=\"splunk_monitoring_console.KpiTrafficLight.description\">KPI Description</option> -->      </viz>\n\n      <viz type=\"splunk_monitoring_console.KpiTrafficLight\">\n        <search>\n          <query>\n            `dmc_set_index_internal` splunk_server=$splunk_server$ sourcetype=splunkd source=*splunkd.log log_level=\"WARN\" component=TcpInputProc \"Stopping all listening ports.\"\n            | stats count as port_closure_count\n          </query>\n          <earliest>-60m@m</earliest>\n          <latest>now</latest>\n        </search>\n        <option name=\"height\">45</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.field\">port_closure_count</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.rangeValues\">[0]</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.rangeIcons\">[\"success\", \"error\"]</option>\n        <option name=\"splunk_monitoring_console.KpiTrafficLight.rangeLabels\">[\"There were no Splunk TCP port closures due to queue blockages within the last hour for this instance.\", \"There were Splunk TCP port closures due to queue blockages within the last hour for this instance.\"]</option>\n        <!-- <option name=\"splunk_monitoring_console.KpiTrafficLight.description\">KPI Description</option> -->      </viz>\n\n    </panel>\n  </row>\n  <row>\n    <panel>\n      <html>\n        <h2>\n          <span>Select views: </span>\n          <span id=\"link-switcher-view\">\n            <a href=\"#\" class=\"btn-pill active\" data-item=\"all\">All</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"snapshot\">Snapshot</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"historical\">Historical</a>\n          </span>\n        </h2>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Snapshots</title>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Current Splunk TCP Input Queue Fill Ratio</title>\n      <table id=\"snapshotTcpInFillRatioTable\">\n        <search base=\"queue_fill_ratio_base\">\n          <query>\n            stats count as pset_count, values(ports), as ports values(queue_fill_last_1min) as queue_fill_last_1min, values(queue_fill_last_10min) as queue_fill_last_10min by splunk_server\n            | fields splunk_server, pset_count, ports, queue_fill_last_1min, queue_fill_last_10min\n            | rename splunk_server as \"Instance\", pset_count as \"Pipeline Set Count\", ports as \"Ports\", queue_fill_last_1min as \"Queue Fill Ratio (Last 1 Minute)\", queue_fill_last_10min as \"Queue Fill Ratio (Last 10 Minutes)\"\n          </query>\n        </search>\n      </table>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Historical Charts</title>\n      <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n        <label>Time Range:</label>\n        <default>\n          <earliestTime>-4h@m</earliestTime>\n          <latestTime>now</latestTime>\n        </default>\n      </input>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Average Splunk TCP Incoming Throughput and Forwarder Count</title>\n      <chart>\n        <search>\n          <query>\n            `dmc_get_forwarder_tcpin` host=$host$\n            | `dmc_timechart_for_metrics_log` dc(guid) as forwarder_count, avg(tcp_KBps) as avg_tcp_KBps\n            | rename forwarder_count as \"Forwarder Count\", avg_tcp_KBps as \"Throughput (KB/s)\"\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.axisY2.enabled\">true</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.chart.overlayFields\">\"Throughput (KB/s)\"</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.axisLabelsY2.majorUnit\">1</option>\n        <option name=\"charting.axisTitleY.text\">Count</option>\n        <option name=\"charting.axisTitleY2.text\">Average KB/s</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <drilldown>\n          <condition match=\"isnotnull('row._span')\">\n            <set token=\"drilldown_forwarder\">true</set>\n            <set token=\"drilldown_forwarder\">$row._span$</set>\n            <set token=\"drilldown_forwarder_earliest\">$earliest$</set>\n            <eval token=\"drilldown_forwarder_earliest_label\">strftime(earliest, \"%m/%d/%Y %H:%M:%S\")</eval>\n            <set token=\"drilldown_forwarder_latest\">$latest$</set>\n            <eval token=\"drilldown_forwarder_latest_label\">strftime(latest, \"%m/%d/%Y %H:%M:%S\")</eval>\n            <set token=\"drilldown_forwarder_count\">$click.value2$</set>\n          </condition>\n        </drilldown>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel depends=\"$drilldown_forwarder$\" id=\"drilldown_forwarder\" rejects=\"$snapshot$\">\n      <table>\n        <title>$drilldown_forwarder_count$ forwarders connected to selected indexer group between $drilldown_forwarder_earliest_label$ ~ $drilldown_forwarder_latest_label$</title>\n        <search>\n          <query>\n            `dmc_get_forwarder_tcpin` host=$host$\n            | stats dc(host) as connection_count by guid\n            | join type=outer guid [| inputlookup dmc_forwarder_assets]\n            | `dmc_rename_forwarder_type(forwarder_type)`\n            | makemv delim=\" \" avg_tcp_kbps_sparkline \n            | eval sum_kb = if (status == \"missing\", \"N/A\", sum_kb) \n            | eval avg_tcp_kbps_sparkline = if (status == \"missing\", \"N/A\", avg_tcp_kbps_sparkline) \n            | eval avg_tcp_kbps = if (status == \"missing\", \"N/A\", avg_tcp_kbps) \n            | eval avg_tcp_eps = if (status == \"missing\", \"N/A\", avg_tcp_eps) \n            | `dmc_rename_forwarder_type(fwdType)` \n            | `dmc_time_format(last_connected)` \n            | fields hostname, forwarder_type, version, os, arch, status, last_connected, sum_kb, avg_tcp_kbps_sparkline, avg_tcp_kbps, avg_tcp_eps, connection_count \n            | search hostname=\"***\" \n            | search status=\"*\" \n            | rename hostname as Instance, forwarder_type as Type, version as Version, os as OS, arch as Architecture, status as Status, last_connected as \"Last Connected to Indexers\", sum_kb as \"Total KB\", avg_tcp_kbps_sparkline as \"Average KB/s Over Time\", avg_tcp_kbps as \"Average KB/s\", avg_tcp_eps as \"Average Events/s\", connection_count as \"Number of Connections\"\n          </query>\n          <earliest>$drilldown_forwarder_earliest$</earliest>\n          <latest>$drilldown_forwarder_latest$</latest>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <html depends=\"$drilldown_forwarder$\">\n        <a data-unset-token=\"drilldown_forwarder\">Close this drilldown table</a>\n      </html>\n    </panel>\n  </row>\n</form>",
"eai:type": "views",
"name": "splunk_tcpin_performance_instance",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" stylesheet=\"standalone.css\">\n\t<label>Not available in standalone mode</label>\n\t<description>The page you have requested is not available in standalone mode.</description>\n</form>",
"eai:type": "views",
"name": "standalone",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" script=\"common_control.js, cell_fill_gauge.js, volume_detail_deployment_extension.js\">\n  <search id=\"volumes_base_search\">\n    <query>\n      | rest splunk_server_group=dmc_group_indexer splunk_server_group=\"$group$\" /services/data/index-volumes/$volume$\n      | eval volumeSizeGB = if(total_size > 1, round(total_size / 1024, 2), 0)\n      | eval maxSizeGB = if(isNum(max_size), round(max_size / 1024, 2), \"unlimited\")\n      | eval diskUsageGB = if(volumeSizeGB == 0, \"-\", volumeSizeGB).\" / \".maxSizeGB\n    </query>\n    <earliest>0</earliest>\n    <latest>now</latest>\n    <preview>\n      <eval token=\"instanceCount\">if(isnotnull('job.resultCount'), 'job.resultCount', 0)</eval>\n    </preview>\n    <done>\n      <eval token=\"instanceCount\">if(isnotnull('job.resultCount'), 'job.resultCount', 0)</eval>\n    </done>\n  </search>\n  <fieldset autoRun=\"true\" submitButton=\"false\">\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"group\">\n      <label>Group</label>\n      <showClearButton>false</showClearButton>\n      <search>\n        <query>\n          | `dmc_get_groups_containing_role(dmc_group_indexer)`\n          | where search_group!=\"dmc_group_indexer\"\n        </query>\n      </search>\n      <fieldForLabel>label</fieldForLabel>\n      <fieldForValue>search_group</fieldForValue>\n      <choice value=\"*\">All Indexers</choice>\n      <default>*</default>\n    </input>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"volume\">\n      <label>Volume</label>\n      <showClearButton>false</showClearButton>\n      <selectFirstChoice>true</selectFirstChoice>\n      <fieldForLabel>title</fieldForLabel>\n      <fieldForValue>title</fieldForValue>\n      <search>\n        <query>\n          | rest splunk_server_group=dmc_group_indexer splunk_server_group=\"$group$\" /services/data/index-volumes\n          | `dmc_exclude_volumes`\n          | fields title\n          | dedup title\n        </query>\n      </search>\n    </input>\n  </fieldset>\n  <label>Volume Detail: Deployment</label>\n  <row>\n    <panel>\n      <html>\n        <h2>\n          <span>Select views:</span>\n          <span id=\"link-switcher-view\">\n            <a href=\"#\" class=\"btn-pill active\" data-item=\"all\">All</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"snapshot\">Snapshot</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"historical\">Historical</a>\n          </span>\n        </h2>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Snapshots</title>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Volume Structure Overview</title>\n      <single>\n        <option name=\"height\">80px</option>\n        <search base=\"volumes_base_search\">\n          <query>\n            stats dc(splunk_server) as Indexers\n          </query>\n        </search>\n        <option name=\"underLabel\">Indexers</option>\n      </single>\n      <single>\n        <option name=\"height\">80px</option>\n        <search base=\"volumes_base_search\">\n          <query>\n            stats sum(volumeSizeGB) as totalVolumeSizeGB\n            | eval totalVolumeSizeGB = round(totalVolumeSizeGB, 2).\" GB\"\n          </query>\n        </search>\n        <option name=\"underLabel\">Total Volume Size</option>\n      </single>\n      <single>\n        <option name=\"height\">80px</option>\n        <search base=\"volumes_base_search\">\n          <query>\n            stats avg(volumeSizeGB) as avgVolumeSizeGB\n            | eval avgVolumeSizeGB = round(avgVolumeSizeGB, 2).\" GB\"\n          </query>\n        </search>\n        <option name=\"underLabel\">Average Volume Size Per Indexer</option>\n      </single>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Instances ($instanceCount$)</title>\n      <table id=\"table1\">\n        <search base=\"volumes_base_search\">\n          <query>\n            fields splunk_server, diskUsageGB, maxSizeGB, volume_path\n            | rename splunk_server as \"Instance\", diskUsageGB as \"Volume Usage (GB)\", maxSizeGB as \"Volume Capacity (GB)\", volume_path as \"Volume Path\"\n          </query>\n        </search>\n        <drilldown target=\"_blank\">\n          <link>\n            /app/splunk_monitoring_console/volume_detail_instance?form.single_volume_name=$volume$&amp;form.splunk_server=$row.Instance$\n          </link>\n        </drilldown>\n      </table>\n      <html>\n        <p>\n          <b>Volume Usage:</b>\n          The first value is the current size of the volume. The second value is the volume capacity, as specified by the maxVolumeDataSizeMB attribute in\n          <a href=\"/help?location=learnmore.index.settings\" class=\"external\" target=\"_blank\">indexes.conf</a>.\n        </p>\n        <p>\n          <b>Note:</b>\n          if the volume is \"unlimited\", it is not possible to determine the disk usage for the volume.\n        </p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Historical Charts</title>\n      <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n        <label>Time Range:</label>\n        <default>\n          <earliestTime>-15d@d</earliestTime>\n          <latestTime>now</latestTime>\n        </default>\n      </input>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>$VolumeUsageChartTitle$ Volume Size (GB)</title>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"funcDiskSizeUsage\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>Max</default>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <change>\n          <set token=\"VolumeUsageChartTitle\">$label$</set>\n        </change>\n      </input>\n      <chart>\n        <search>\n          <query>\n            index=_introspection sourcetype=splunk_disk_objects component=Volumes data.name=$volume$ search_group=dmc_group_indexer search_group=\"$group$\"\n            | `dmc_set_bin_for_disk_usage`\n            | stats latest(data.total_size) as totalSize by host _time\n            | `dmc_timechart_for_disk_usage` $funcDiskSizeUsage$(eval(totalSize /1024)) as \"Volume Size\"\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">area</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">GB</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\" id=\"instances_by_volume_usage\">\n      <title>Instances by $PercentVolumeUsageChartTitle$ Volume Usage (%)</title>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"funcDiskPercUsage\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>Avg</default>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <change>\n          <set token=\"PercentVolumeUsageChartTitle\">$label$</set>\n        </change>\n      </input>\n      <html>\n        <div class=\"heatmap_toggle\"></div>\n      </html>\n      <viz type=\"splunk_monitoring_console.heatmap\">\n        <search>\n          <query>\n            index=_introspection sourcetype=splunk_disk_objects component=Volumes data.name=$volume$ search_group=dmc_group_indexer search_group=\"$group$\"\n            | eval pctDiskUsage = 'data.total_size' / 'data.max_size'\n            | bin _time minspan=10min\n            | stats $funcDiskPercUsage$(pctDiskUsage) as pctDiskUsage by host _time\n            | rangemap field=pctDiskUsage \"0-25%\"=0-0.25 \"25-50%\"=0.2501-0.5 \"50-75%\"=0.5001-0.75 \"75-100%\"=0.7501-1 default=abnormal\n            | `dmc_timechart_for_disk_usage` partial=f dc(host) as host by range\n            | fields _time, \"0-25%\", \"25-50%\", \"50-75%\", \"75-100%\"\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n      </viz>\n      <chart>\n        <search>\n          <query>\n            index=_introspection sourcetype=splunk_disk_objects component=Volumes data.name=$volume$ search_group=dmc_group_indexer search_group=\"$group$\"\n            | eval pctDiskUsage = 'data.total_size' / 'data.max_size'\n            | bin _time minspan=10min\n            | stats $funcDiskPercUsage$(pctDiskUsage) as pctDiskUsage by host _time\n            | rangemap field=pctDiskUsage \"0-25%\"=0-0.25 \"25-50%\"=0.2501-0.5 \"50-75%\"=0.5001-0.75 \"75-100%\"=0.7501-1 default=abnormal\n            | `dmc_timechart_for_disk_usage` partial=f dc(host) as host by range\n            | fields _time, \"0-25%\", \"25-50%\", \"50-75%\", \"75-100%\"\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Instance Count</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n      </chart>\n      <html>\n        <p>* Note: An indexer on which the maximum data size of the volume is infinite will not be represented here.</p>\n      </html>\n    </panel>\n  </row>\n</form>",
"eai:type": "views",
"name": "volume_detail_deployment",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" script=\"cell_fill_gauge.js, common_control.js\" stylesheet=\"index_type.css\">\n  <label>Volume Detail: Instance</label>\n  <search id=\"volume_base_search\">\n    <query>\n      | rest splunk_server=$splunk_server$ /services/data/index-volumes\n      | fields title, total_size, max_size, volume_path\n      | `dmc_exclude_volumes`\n    </query>\n  </search>\n  <search id=\"index_base_search\">\n    <query>\n      | rest splunk_server=$splunk_server$ /services/data/indexes-extended $datatype$\n      | join type=outer title [\n        | rest splunk_server=$splunk_server$ /services/data/indexes $datatype$]\n      | `dmc_exclude_indexes`\n      | rex field=homePath \"volume:(?&lt;home_vol_name&gt;[^/\\\\\\]*)(?:/|\\\\\\)\"\n      | rex field=coldPath \"volume:(?&lt;cold_vol_name&gt;[^/\\\\\\]*)(?:/|\\\\\\)\"\n    </query>\n  </search>\n  <fieldset autoRun=\"true\" submitButton=\"false\">\n    <input type=\"radio\" searchWhenChanged=\"true\" token=\"datatype\">\n      <label>Index Type</label>\n      <choice value=\"\">Event Indexes Only</choice>\n      <choice value=\"datatype=all\">All Index Types *</choice>\n      <default></default>\n    </input>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"dmc_group\">\n      <label>Group</label>\n      <showClearButton>false</showClearButton>\n      <search>\n        <query>\n          | `dmc_get_groups_containing_role(dmc_group_indexer)`\n          | search search_group!=\"dmc_group_*\"\n        </query>\n      </search>\n      <fieldForLabel>label</fieldForLabel>\n      <fieldForValue>search_group</fieldForValue>\n      <choice value=\"dmc_group_indexer\">All Indexers</choice>\n      <default>dmc_group_indexer</default>\n    </input>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"splunk_server\">\n      <label>Instance</label>\n      <showClearButton>false</showClearButton>\n      <populatingSearch fieldForLabel=\"serverName\" fieldForValue=\"serverName\">\n        | `dmc_get_instance_info($dmc_group$)`\n        | where search_group=\"dmc_group_indexer\"\n      </populatingSearch>\n      <selectFirstChoice>true</selectFirstChoice>\n      <change>\n        <condition value=\"*\">\n          <set token=\"host\">$row.host$</set>\n        </condition>\n      </change>\n    </input>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"volume_name\">\n      <label>Volume</label>\n      <showClearButton>false</showClearButton>\n      <selectFirstChoice>true</selectFirstChoice>\n      <fieldForValue>title</fieldForValue>\n      <fieldForLabel>title</fieldForLabel>\n      <search base=\"volume_base_search\">\n        <query>stats count by title</query>\n      </search>\n    </input>\n    <html id=\"index_type_disclaimer\">\n      <p>The \"All Index Types\" option is not compatible with indexers running Splunk Enterprise 6.6 or earlier, where only event indexes exist.</p>\n    </html>\n  </fieldset>\n  <row>\n    <panel>\n      <html>\n        <h2>\n          <span>Select views: </span>\n          <span id=\"link-switcher-view\">\n            <a href=\"#\" class=\"btn-pill active\" data-item=\"all\">All</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"snapshot\">Snapshot</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"historical\">Historical</a>\n          </span>\n        </h2>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Snapshots</title>\n    </panel>\n  </row>\n  <row>\n    <panel>\n      <title>Overview</title>\n      <single>\n        <option name=\"height\">80px</option>\n        <search base=\"index_base_search\">\n          <query>\n            fields title, home_vol_name, cold_vol_name\n            | where home_vol_name == \"$volume_name$\" OR cold_vol_name == \"$volume_name$\"\n            | stats dc(title) as count\n          </query>\n        </search>\n        <option name=\"underLabel\">Indexes using Volume \"$volume_name$\"</option>\n      </single>\n      <single>\n        <option name=\"height\">80px</option>\n        <search base=\"index_base_search\">\n          <query>\n            fields title, bucket_dirs.home.hot_bucket_count, bucket_dirs.home.warm_bucket_count, bucket_dirs.cold.bucket_count, home_vol_name, cold_vol_name\n            | where home_vol_name == \"$volume_name$\" OR cold_vol_name == \"$volume_name$\"\n            | eval bucket_dirs.home.hot_bucket_count = if(isnotnull('bucket_dirs.home.hot_bucket_count'), 'bucket_dirs.home.hot_bucket_count', 0)\n            | eval bucket_dirs.home.warm_bucket_count = if(isnotnull('bucket_dirs.home.warm_bucket_count'), 'bucket_dirs.home.warm_bucket_count', 0)\n            | eval bucket_dirs.cold.bucket_count = if(isnotnull('bucket_dirs.cold.bucket_count'), 'bucket_dirs.cold.bucket_count', 0)\n            | eval bucket_count = case(\n                home_vol_name == cold_vol_name, 'bucket_dirs.home.hot_bucket_count' + 'bucket_dirs.home.warm_bucket_count' + 'bucket_dirs.cold.bucket_count',\n                home_vol_name == \"$volume_name$\", 'bucket_dirs.home.hot_bucket_count' + 'bucket_dirs.home.warm_bucket_count',\n                cold_vol_name == \"$volume_name$\", 'bucket_dirs.cold.bucket_count')\n            | stats sum(bucket_count) as bucket_count\n            | eval bucket_count = toString(bucket_count, \"commas\")\n          </query>\n        </search>\n        <option name=\"underLabel\">Buckets</option>\n      </single>\n    </panel>\n  </row>\n  <row>\n    <panel>\n      <title>Events</title>\n      <single>\n        <option name=\"height\">80px</option>\n        <search base=\"index_base_search\">\n          <query>\n            fields title, bucket_dirs.home.event_count, bucket_dirs.cold.event_count, home_vol_name, cold_vol_name\n            | where home_vol_name == \"$volume_name$\" OR cold_vol_name == \"$volume_name$\"\n            | eval bucket_dirs.home.event_count = if(isnotnull('bucket_dirs.home.event_count'), 'bucket_dirs.home.event_count', 0)\n            | eval bucket_dirs.cold.event_count = if(isnotnull('bucket_dirs.cold.event_count'), 'bucket_dirs.cold.event_count', 0)\n            | eval event_count = case(\n            home_vol_name == cold_vol_name, 'bucket_dirs.home.event_count' + 'bucket_dirs.cold.event_count',\n            home_vol_name == \"$volume_name$\", 'bucket_dirs.home.event_count',\n            cold_vol_name == \"$volume_name$\", 'bucket_dirs.cold.event_count')\n            | stats sum(event_count) as count\n            | eval count = toString(count, \"commas\")\n          </query>\n        </search>\n        <option name=\"underLabel\">Event Count</option>\n      </single>\n      <single>\n        <option name=\"height\">80px</option>\n        <search base=\"index_base_search\">\n          <query>\n            fields title, bucket_dirs.home.event_min_time, bucket_dirs.cold.event_min_time, home_vol_name, cold_vol_name\n            | where home_vol_name == \"$volume_name$\" OR cold_vol_name == \"$volume_name$\"\n            | eval min_time = case(\n            home_vol_name == cold_vol_name, min('bucket_dirs.home.event_min_time', 'bucket_dirs.cold.event_min_time'),\n            home_vol_name == \"$volume_name$\", 'bucket_dirs.home.event_min_time',\n            cold_vol_name == \"$volume_name$\", 'bucket_dirs.cold.event_min_time')\n            | stats min(min_time) as min_time\n            | `dmc_time_format(min_time)`\n          </query>\n        </search>\n        <option name=\"underLabel\">Earliest Event</option>\n      </single>\n      <single>\n        <option name=\"height\">80px</option>\n        <search base=\"index_base_search\">\n          <query>\n            fields title, bucket_dirs.home.event_max_time, bucket_dirs.cold.event_max_time, home_vol_name, cold_vol_name\n            | where home_vol_name == \"$volume_name$\" OR cold_vol_name == \"$volume_name$\"\n            | eval max_time = case(\n            home_vol_name == cold_vol_name, max('bucket_dirs.home.event_max_time', 'bucket_dirs.cold.event_max_time'),\n            home_vol_name == \"$volume_name$\", 'bucket_dirs.home.event_max_time',\n            cold_vol_name == \"$volume_name$\", 'bucket_dirs.cold.event_max_time')\n            | stats max(max_time) as max_time\n            | `dmc_time_format(max_time)`\n          </query>\n        </search>\n        <option name=\"underLabel\">Latest Event</option>\n      </single>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Volume Usage</title>\n      <table id=\"table1\">\n        <search base=\"volume_base_search\">\n          <query>\n            where title == \"$volume_name$\"\n            | eval total_size_gb = if(isnull(total_size), \"-\", round(total_size / 1024, 2))\n            | eval max_size_gb = if(isnull(max_size) OR max_size = \"infinite\", \"unlimited\", round(max_size / 1024, 2))\n            | eval disk_usage_gb = total_size_gb.\" / \".max_size_gb\n            | fields title, disk_usage_gb, max_size_gb, volume_path\n            | rename title as Volume, disk_usage_gb as \"Volume Usage (GB)\", max_size_gb as \"Volume Capacity (GB)\", volume_path as \"Volume Path\"\n          </query>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n      <html>\n        <p><b>Volume Usage:</b> The first value is the current size of the volume. The second value is the volume capacity, as specified by the maxVolumeDataSizeMB attribute in <a href=\"/help?location=learnmore.index.settings\" class=\"external\" target=\"_blank\">indexes.conf</a>.</p>\n        <p><b>Note: </b>if the volume is \"unlimited\", it is not possible to determine the disk usage for the volume. </p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Index Directories Using This Volume</title>\n      <table id=\"configured_indexes_list\">\n        <search base=\"index_base_search\">\n          <query>\n            eval cold_bucket_size = if(isnotnull('bucket_dirs.cold.bucket_size'), 'bucket_dirs.cold.bucket_size', 'bucket_dirs.cold.size')\n            | fields title, bucket_dirs.home.event_min_time, bucket_dirs.cold.event_min_time, cold_bucket_size, total_size, home_vol_name, cold_vol_name\n            | rename cold_bucket_size AS cold_size\n            | eval cold_size = if(isnull(cold_size), 0, cold_size)\n            | eval home_size = total_size - cold_size\n            | eval cold_size = round(cold_size / 1024, 2)\n            | eval home_size = round(home_size / 1024, 2)\n            | eval dir = \"home,cold\"\n            | makemv dir delim=\",\"\n            | mvexpand dir\n            | eval dir_size = case(dir == \"home\", home_size, dir == \"cold\", cold_size)\n            | eval vol_name = case(dir == \"home\", home_vol_name, dir == \"cold\", cold_vol_name)\n            | eval data_age_home_day = if(dir == \"home\", round((now() - 'bucket_dirs.home.event_min_time') / 86400, 0), NULL)\n            | eval data_age_cold_day = if(dir == \"cold\", round((now() - 'bucket_dirs.cold.event_min_time') / 86400, 0), NULL)\n            | eval data_age_day = case(dir == \"home\", data_age_home_day, dir == \"cold\", data_age_cold_day)\n            | eval data_age_day = if(isnull(data_age_day), \"n/a\", data_age_day)\n            | where vol_name == \"$volume_name$\"\n            | fields title dir dir_size data_age_day vol_name\n            | where isnotnull(vol_name)\n            | eval index_dir_name = title.\":\".dir\n            | fields index_dir_name dir_size data_age_day\n            | sort - dir_size\n            | rename index_dir_name as \"Index:Directory\" dir_size AS \"Disk Usage (GB)\" data_age_day as \"Data Age (Days)\"\n          </query>\n        </search>\n        <option name=\"drilldown\">none</option>\n      </table>\n    </panel>\n    <panel rejects=\"$historical$\">\n      <title>Volume Usage By Index Directory</title>\n      <chart>\n        <search base=\"index_base_search\">\n          <query>\n            eval cold_bucket_size = if(isnotnull('bucket_dirs.cold.bucket_size'), 'bucket_dirs.cold.bucket_size', 'bucket_dirs.cold.size')\n            | fields title, cold_bucket_size, total_size, home_vol_name, cold_vol_name\n            | rename cold_bucket_size AS cold_size\n            | eval cold_size = if(isnull(cold_size), 0, cold_size)\n            | eval home_size = total_size - cold_size\n            | eval cold_size = round(cold_size / 1024, 2)\n            | eval home_size = round(home_size / 1024, 2)\n            | eval dir = \"home,cold\"\n            | makemv dir delim=\",\"\n            | mvexpand dir\n            | eval dir_size = case(dir == \"home\", home_size, dir == \"cold\", cold_size)\n            | eval vol_name = case(dir == \"home\", home_vol_name, dir == \"cold\", cold_vol_name)\n            | where vol_name == \"$volume_name$\"\n            | fields title dir dir_size vol_name\n            | where isnotnull(vol_name) AND isnotnull(dir_size) AND dir_size > 0\n            | eval index_dir_name = title.\":\".dir\n            | where vol_name == \"$volume_name$\"\n            | stats sum(dir_size) AS dir_size by index_dir_name\n          </query>\n        </search>\n        <option name=\"charting.chart\">pie</option>\n        <option name=\"charting.axisTitleY.text\">Volume Usage (GB)</option>\n      </chart>\n      <html>\n        <p><center>Volume Usage (GB)</center></p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Data Age By Index Directory</title>\n      <chart>\n        <search base=\"index_base_search\">\n          <query>\n            fields title, bucket_dirs.home.event_min_time, bucket_dirs.cold.event_min_time, home_vol_name, cold_vol_name, datatype\n            | eval dir = \"home,cold\"\n            | makemv dir delim=\",\"\n            | mvexpand dir\n            | eval indexwithtype=title.\":\".datatype, title = case(dir == \"home\", title.\":home\", dir == \"cold\", title.\":cold\")\n            | eval data_age_home_day = if(dir == \"home\", round((now() - 'bucket_dirs.home.event_min_time') / 86400, 0), NULL)\n            | eval data_age_cold_day = if(dir == \"cold\", round((now() - 'bucket_dirs.cold.event_min_time') / 86400, 0), NULL)\n            | eval data_age_day = case(dir == \"home\", data_age_home_day, dir == \"cold\", data_age_cold_day)\n            | eval vol_name = case(dir == \"home\", home_vol_name, dir == \"cold\", cold_vol_name)\n            | where vol_name == \"$volume_name$\"\n            | sort - data_age_day\n            | fields title, data_age_home_day, data_age_cold_day, indexwithtype\n            | where NOT (isnull(data_age_home_day) AND isnull(data_age_cold_day))\n            | rename title as Index, data_age_home_day as \"home data age (days)\", data_age_cold_day as \"cold data age (days)\"\n          </query>\n        </search>\n        <option name=\"charting.chart\">bar</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.axisTitleX.text\">Index Directories</option>\n        <option name=\"charting.axisTitleY.text\">Data Age (days)</option>\n        <option name=\"charting.legend.placement\">none</option>\n        <drilldown>\n          <link target=\"_blank\">index_detail_instance?form.datatype=$datatype$&amp;form.splunk_server=$splunk_server$&amp;form.single_index_name=$row.indexwithtype$</link>\n        </drilldown>\n      </chart>\n      <html>\n        <p>Tip: you can adjust the height of the bar chart when there are many bars.</p>\n      </html>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Historical Charts</title>\n      <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n        <label>Time Range:</label>\n        <default>\n          <earliestTime>-15d@d</earliestTime>\n          <latestTime>now</latestTime>\n        </default>\n      </input>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Volume Size Over Time</title>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"funcVolume\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>latest</default>\n        <choice value=\"latest\">Latest</choice>\n        <choice value=\"avg\">Average</choice>\n        <choice value=\"min\">Minimum</choice>\n        <choice value=\"max\">Maximum</choice>\n      </input>\n      <input type=\"radio\" searchWhenChanged=\"true\" token=\"capacityOverlay\">\n        <label>Volume Capacity Overlay</label>\n        <choice value=\"volume_capacity\">show</choice>\n        <choice value=\" \">hide</choice>\n        <default>volume_capacity</default>\n      </input>\n      <chart>\n        <search>\n          <query>\n            index=_introspection host=$host$ sourcetype=splunk_disk_objects component=Volumes data.name=\"$volume_name$\"\n            | eval data.total_size = round('data.total_size' / 1024, 2)\n            | eval data.total_capacity = round('data.max_size' / 1024, 2)                    \n            | `dmc_timechart_for_disk_usage` partial=false $funcVolume$(data.total_size) as volume_usage, latest(data.total_capacity) as volume_capacity\n            | fields _time, volume_usage $capacityOverlay$\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">area</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Volume Size (GB)</option>\n        <option name=\"charting.axisLabelsY.majorUnit\">1</option>\n        <option name=\"charting.legend.placement\">none</option>\n        <option name=\"charting.chart.overlayFields\">volume_capacity</option>\n      </chart>\n    </panel>\n  </row>\n</form>",
"eai:type": "views",
"name": "volume_detail_instance",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" script=\"cell_fill_gauge.js, common_control.js\">\n  <label>Workload Management Overview</label>\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Workload Management Status</title>\n      <table>\n        <searchString>\n          | inputlookup dmc_assets\n          | rename serverName AS splunk_server\n          | where (match(search_group, \"dmc_group_\"))\n          | `dmc_set_group_label_and_sort(search_group)`\n          | stats values(label) AS roles by splunk_server\n          | makemv roles\n          | join type=outer splunk_server [rest splunk_server=* /services/server/info\n              | fields splunk_server, os_name, os_version]\n          | eval OS = 'os_name'.\" \".'os_version'\n          | join type=outer splunk_server [rest splunk_server=* /services/workloads/status/workload-management-status\n              | fields splunk_server, general.isSupported, general.enabled, general.error_message]\n          | eval Status = case('general.isSupported' = 0 OR isnull('general.isSupported'), \"Unsupported\", 'general.isSupported' = 1, \"Supported\").\" / \".case('general.enabled' = 0, \"Disabled\", 'general.enabled' = 1, \"Enabled\", isnull('general.enabled'), \"N/A\")\n          | fields splunk_server, roles, OS, Status, general.error_message\n          | rename splunk_server AS \"Instance\", roles AS Roles, general.error_message AS \"Error Messages\"\n        </searchString>\n      </table>\n    </panel>\n  </row>\n\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Workload Pool Configuration</title>\n      <table>\n        <searchString>\n          | inputlookup dmc_assets\n          | rename serverName AS splunk_server\n          | where (match(search_group, \"dmc_group_\"))\n          | `dmc_set_group_label_and_sort(search_group)`\n          | stats values(label) AS roles by splunk_server\n          | makemv roles\n          | join type=outer splunk_server [rest splunk_server=* /services/workloads/pools\n              | eval default_pool=if(category==\"search\" and default_category_pool==\"1\",(if(isNull('title'), \"Not Configured\", 'title')),NULL)\n              | eval ingest_pool=if(category==\"ingest\" and default_category_pool==\"1\",(if(isNull('title'), \"Not Configured\", 'title')),NULL)\n              | stats values(eval(if(title!=\"general\",title,NULL))) as pools values(default_pool) AS default_pool values(ingest_pool) AS ingest_pool by splunk_server]\n          | fields splunk_server, roles, default_pool, ingest_pool, pools\n          | rename splunk_server AS \"Instance\", roles AS Roles, default_pool AS \"Default Search Pool\", ingest_pool AS \"Default Ingest Pool\" pools AS \"All Pools\"\n        </searchString>\n      </table>\n    </panel>\n  </row>\n\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Historical Charts</title>\n      <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n        <label>Time Range:</label>\n        <default>\n          <earliestTime>-4h@m</earliestTime>\n          <latestTime>now</latestTime>\n        </default>\n      </input>\n\n      <input type=\"radio\" searchWhenChanged=\"true\" token=\"role\">\n        <label>Role</label>\n        <choice value=\"dmc_group_search_head\">Search Heads</choice>\n        <choice value=\"dmc_group_indexer\">Indexers</choice>\n        <choice value=\"*\">All</choice>\n        <default>dmc_group_search_head</default>\n      </input>\n    </panel>\n  </row>\n\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Deployment-Wide $CPUFunctionLabel$ CPU Usage by Workload Pool</title>\n      <input type=\"dropdown\" token=\"CPUFunction\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>Median</default>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <change>\n          <set token=\"CPUFunctionLabel\">$label$</set>\n        </change>\n      </input>\n\n      <chart>\n        <search>\n          <query>\n             `dmc_set_index_introspection` search_group=\"$role$\" sourcetype=splunk_resource_usage component=PerProcess\n             | `dmc_rename_introspection_fields`\n             | `dmc_set_bin`\n             | stats sum(pct_cpu) as pct_cpu by host, workload_pool, _time\n             | `dmc_timechart` $CPUFunction$(pct_cpu) as pct_cpu by workload_pool\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">CPU Usage (%)</option>\n        <option name=\"charting.axisY.minimumNumber\">0</option>\n      </chart>\n    </panel>\n</row>\n\n<row>\n    <panel rejects=\"$snapshot$\">\n      <title>Deployment-Wide $MemFuncLabel$ Physical Memory Usage by Workload Pool </title>\n      <input type=\"dropdown\" token=\"MemFunc\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>Median</default>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <change>\n          <set token=\"MemFuncLabel\">$label$</set>\n        </change>\n      </input>\n\n      <chart>\n        <search>\n          <query>\n             `dmc_set_index_introspection` search_group=\"$role$\" sourcetype=splunk_resource_usage component=PerProcess\n             | `dmc_rename_introspection_fields`\n             | `dmc_set_bin`\n             | stats sum(mem_used) as mem_used by host, workload_pool _time\n             | `dmc_timechart` $MemFunc$(mem_used) as mem_used by workload_pool\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.legend.placement\">bottom</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">Memory Usage (MB)</option>\n        <option name=\"charting.axisY.minimumNumber\">0</option>\n      </chart>\n    </panel>\n</row>\n</form>",
"eai:type": "views",
"name": "workload_management",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" script=\"cell_fill_gauge.js, common_control.js\">\n  <label>Workload Management Monitoring: Distributed</label>\n\n  <fieldset autoRun=\"true\" submitButton=\"false\">\n    <input type=\"radio\" searchWhenChanged=\"true\" token=\"role\">\n      <label>Role</label>\n      <choice value=\"dmc_group_search_head\">Search Heads</choice>\n      <choice value=\"dmc_group_indexer\">Indexers</choice>\n      <default>dmc_group_search_head</default>\n    </input>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"dmc_group\">\n      <label>Group</label>\n      <showClearButton>false</showClearButton>\n      <search>\n        <query>\n          | `dmc_get_groups_containing_role($role$)`\n          | search search_group!=\"dmc_group_*\"\n        </query>\n      </search>\n      <fieldForLabel>label</fieldForLabel>\n      <fieldForValue>search_group</fieldForValue>\n      <choice value=\"*\">All</choice>\n      <selectFirstChoice>true</selectFirstChoice>\n    </input>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"host\">\n      <label>Instance</label>\n      <showClearButton>false</showClearButton>\n      <populatingSearch fieldForLabel=\"serverName\" fieldForValue=\"serverName\">\n        | `dmc_get_instance_info($dmc_group$)`\n        | where search_group=\"$role$\"\n      </populatingSearch>\n      <selectFirstChoice>true</selectFirstChoice>\n      <change>\n        <condition value=\"*\">\n          <set token=\"host\">$row.host$</set>\n        </condition>\n      </change>\n    </input>\n  </fieldset>\n\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Historical Charts</title>\n      <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n        <label>Time Range:</label>\n        <default>\n          <earliestTime>-4h@m</earliestTime>\n          <latestTime>now</latestTime>\n        </default>\n      </input>\n      <input type=\"dropdown\" token=\"SplitByVariable\">\n        <label>Split by</label>\n        <showClearButton>false</showClearButton>\n        <default>Rule</default>\n        <choice value=\"wlm_action\">Action</choice>\n        <choice value=\"wlm_triggered_rule\">Rule</choice>\n        <choice value=\"user\">User</choice>\n        <choice value=\"app\">App</choice>\n        <choice value=\"search_type\">Search Type</choice>\n        <set token=\"searchBy\">by $SplitByVariable$</set>\n        <change>\n            <condition value=\"wlm_action\">\n                <set token=\"isAction\">true</set>\n                <unset token=\"isNotAction\"></unset>\n            </condition>\n            <condition>\n                <set token=\"isNotAction\">true</set>\n                <unset token=\"isAction\"></unset>\n            </condition>\n        </change>\n    </input>\n  </panel>\n  </row>\n\n  <search id=\"base_total_search_count\">\n      <query>\n         `dmc_set_index_internal` search_group=$role$ search_group=$dmc_group$ host=$host$ sourcetype=wlm_*\n         | stats dc(search_id) as \"search_count\" by wlm_action\n      </query>\n      <earliest>$time.earliest$</earliest>\n      <latest>$time.latest$</latest>\n  </search>\n\n  <row>\n    <panel>\n      <title>Number of searches aborted</title>\n      <single>\n       <search base=\"base_total_search_count\">\n          <query>\n             | where wlm_action = \"abort\" | fields search_count\n          </query>\n        </search>\n        <option name=\"height\">80px</option>\n      </single>\n    </panel>\n\n    <panel>\n      <title>Number of searches moved to alternate pool</title>\n      <single>\n       <search base=\"base_total_search_count\">\n          <query>\n             | where wlm_action = \"move\" | fields search_count\n          </query>\n        </search>\n        <option name=\"height\">80px</option>\n      </single>\n    </panel>\n\n    <panel>\n      <title>Number of searches triggering an alert</title>\n      <single>\n       <search base=\"base_total_search_count\">\n          <query>\n             | where wlm_action = \"alert\" | fields search_count\n          </query>\n        </search>\n        <option name=\"height\">80px</option>\n      </single>\n    </panel>\n  </row>\n\n  <row>\n    <panel depends=\"$isAction$\">\n      <title>Number of searches per action triggered</title>\n      <chart>\n        <searchString>\n            `dmc_set_index_internal` search_group=$role$ search_group=$dmc_group$ host=$host$ sourcetype=wlm_*\n            | chart dc(search_id) AS search_count over wlm_action \n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.chart\">bar</option>\n\t<option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.axisTitleY.text\">Total # of searches</option>\n        <option name=\"charting.axisTitleX.text\">Action triggered</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <drilldown target=\"_blank\">\n          <condition series=\"*\">\n              <link target=\"_blank\"><![CDATA[search?q=`dmc_set_index_internal` search_group=$role$ search_group=$dmc_group$ host=$host$ sourcetype=wlm_* wlm_action=$click.value$&earliest=$earliest$&latest=$latest$]]></link>\n          </condition>\n        </drilldown>\n      </chart>\n    </panel>\n  </row>\n\n  <row>\n    <panel depends=\"$isNotAction$\">\n      <title>Number of searches per action triggered</title>\n      <chart>\n        <searchString>\n            `dmc_set_index_internal` search_group=$role$ search_group=$dmc_group$ host=$host$ sourcetype=wlm_* | chart dc(search_id) over wlm_action by $SplitByVariable$\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.chart\">bar</option>\n\t<option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.axisTitleY.text\">Total # of searches</option>\n        <option name=\"charting.axisTitleX.text\">Action triggered</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <drilldown target=\"_blank\">\n          <condition series=\"*\">\n              <link target=\"_blank\"><![CDATA[search?q=`dmc_set_index_internal` search_group=$role$ search_group=$dmc_group$ host=$host$ sourcetype=wlm_* $SplitByVariable$=$click.name2$&earliest=$earliest$&latest=$latest$]]></link>\n          </condition>\n        </drilldown>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel>\n      <title>Number of searches per action triggered over time</title>\n      <chart>\n        <searchString>\n           `dmc_set_index_internal` search_group=$role$ search_group=$dmc_group$ host=$host$ sourcetype=wlm_*\n              | `dmc_timechart` partial=f bins=200 dc(search_id) AS \"Search count\" by $SplitByVariable$\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">false</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\"># of searches</option>\n        <option name=\"list.drilldown\">full</option>\n        <option name=\"list.wrap\">1</option>\n        <option name=\"maxLines\">5</option>\n        <option name=\"raw.drilldown\">full</option>\n        <option name=\"rowNumbers\">false</option>\n        <option name=\"table.drilldown\">all</option>\n        <option name=\"table.wrap\">1</option>\n        <option name=\"type\">list</option>\n        <option name=\"wrap\">true</option>\n        <option name=\"dataOverlayMode\">none</option>\n        <!-- <option name=\"refresh.auto.interval\">300</option> -->\n        <drilldown target=\"_blank\">\n          <condition series=\"*\">\n              <link target=\"_blank\"><![CDATA[search?q=`dmc_set_index_internal` search_group=$role$ search_group=$dmc_group$ host=$host$ sourcetype=wlm_* $SplitByVariable$=$click.name2$&earliest=$earliest$&latest=$latest$]]></link>\n          </condition>\n        </drilldown>\n      </chart>\n    </panel>\n  </row>\n\n   <row>\n     <panel>\n      <title>Overview of scheduled searches triggering rules</title>\n      <table>\n        <searchString>\n          `dmc_set_index_internal` search_group=$role$ search_group=$dmc_group$ host=$host$ sourcetype=wlm_* search_type=\"scheduled*\"\n          | stats count(eval(wlm_action = \"alert\")) AS alert count(eval(wlm_action = \"move\")) AS move count(eval(wlm_action = \"abort\")) AS abort by search_id\n           | join type=outer search_id\n               [ search `dmc_set_index_introspection` search_group=$role$ search_group=$dmc_group$ host=$host$ sourcetype=splunk_resource_usage\n                 data.search_props.label::*  NOT data.search_props.type::ad-hoc\n                 | rename data.search_props.sid as search_id, data.search_props.label as search_name\n                | stats latest(search_name) AS search_name by search_id\n               ]\n          | stats sum(alert) as \"searches triggering an alert\", sum(move) as \"searches reclassified\", sum(abort) as \"searches aborted\" by search_name\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n      </table>\n    </panel>\n  </row>\n\n\n</form>",
"eai:type": "views",
"name": "workload_management_monitoring_distributed",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" script=\"cell_fill_gauge.js, common_control.js\">\n  <label>Workload Management Monitoring: Instance</label>\n\n  <fieldset autoRun=\"true\" submitButton=\"false\">\n    <input type=\"radio\" searchWhenChanged=\"true\" token=\"role\">\n      <label>Role</label>\n      <choice value=\"dmc_group_search_head\">Search Heads</choice>\n      <choice value=\"dmc_group_indexer\">Indexers</choice>\n      <default>dmc_group_search_head</default>\n    </input>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"dmc_group\">\n      <label>Group</label>\n      <showClearButton>false</showClearButton>\n      <search>\n        <query>\n          | `dmc_get_groups_containing_role($role$)`\n          | search search_group!=\"dmc_group_*\"\n        </query>\n      </search>\n      <fieldForLabel>label</fieldForLabel>\n      <fieldForValue>search_group</fieldForValue>\n      <choice value=\"*\">All</choice>\n      <selectFirstChoice>true</selectFirstChoice>\n    </input>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"host\">\n      <label>Instance</label>\n      <showClearButton>false</showClearButton>\n      <populatingSearch fieldForLabel=\"serverName\" fieldForValue=\"serverName\">\n        | `dmc_get_instance_info($dmc_group$)`\n        | where search_group=\"$role$\"\n      </populatingSearch>\n      <change>\n        <condition value=\"*\">\n          <set token=\"host\">$row.host$</set>\n        </condition>\n      </change>\n      <selectFirstChoice>true</selectFirstChoice>\n    </input>\n  </fieldset>\n\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Historical Charts</title>\n      <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n        <label>Time Range:</label>\n        <default>\n          <earliestTime>-4h@m</earliestTime>\n          <latestTime>now</latestTime>\n        </default>\n      </input>\n      <input type=\"dropdown\" token=\"SplitByVariable\">\n        <label>Split by</label>\n        <showClearButton>false</showClearButton>\n        <default>Rule</default>\n        <choice value=\"wlm_action\">Action</choice>\n        <choice value=\"wlm_triggered_rule\">Rule</choice>\n        <choice value=\"user\">User</choice>\n        <choice value=\"app\">App</choice>\n        <choice value=\"search_type\">Search Type</choice>\n        <set token=\"searchBy\">by $SplitByVariable$</set>\n        <change>\n            <condition value=\"wlm_action\">\n                <set token=\"isAction\">true</set>\n                <unset token=\"isNotAction\"></unset>\n            </condition>\n            <condition>\n                <set token=\"isNotAction\">true</set>\n                <unset token=\"isAction\"></unset>\n            </condition>\n        </change>\n    </input>\n  </panel>\n  </row>\n\n  <search id=\"base_total_search_count\">\n      <query>\n\t  `dmc_set_index_internal` host=$host$ sourcetype=wlm_*\n\t  | stats dc(search_id) as \"search_count\" by wlm_action\n      </query>\n      <earliest>$time.earliest$</earliest>\n      <latest>$time.latest$</latest>\n  </search>\n\n  <row>\n    <panel>\n      <title>Number of searches aborted</title>\n      <single>\n\t<search base=\"base_total_search_count\">\n          <query>\n             | where wlm_action = \"abort\" | fields search_count\n          </query>\n        </search>\n        <option name=\"height\">80px</option>\n      </single>\n    </panel>\n\n    <panel>\n      <title>Number of searches moved to alternate pools</title>\n      <single>\n\t<search base=\"base_total_search_count\">\n          <query>\n             | where wlm_action = \"move\" | fields search_count\n          </query>\n        </search>\n        <option name=\"height\">80px</option>\n      </single>\n    </panel>\n\n    <panel>\n      <title>Number of searches triggering an alert</title>\n      <single>\n\t<search base=\"base_total_search_count\">\n          <query>\n             | where wlm_action = \"alert\" | fields search_count\n          </query>\n        </search>\n        <option name=\"height\">80px</option>\n      </single>\n    </panel>\n  </row>\n\n  <row>\n    <panel depends=\"$isAction$\">\n      <title>Number of searches per action triggered</title>\n      <chart>\n        <searchString>\n           `dmc_set_index_internal` sourcetype=wlm_* host=$host$ |\n           chart dc(search_id) AS search_count over wlm_action \n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.chart\">bar</option>\n\t<option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.axisTitleY.text\">Total # of searches</option>\n        <option name=\"charting.axisTitleX.text\">Action triggered</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <drilldown target=\"_blank\">\n          <condition series=\"*\">\n              <link target=\"_blank\"><![CDATA[search?q=`dmc_set_index_internal` sourcetype=wlm_* host=$host$ wlm_action=$click.value$&earliest=$earliest$&latest=$latest$]]></link>\n          </condition>\n        </drilldown>\n      </chart>\n    </panel>\n  </row>\n\n  <row>\n    <panel depends=\"$isNotAction$\">\n      <title>Number of searches per action triggered</title>\n      <chart>\n        <searchString>\n            `dmc_set_index_internal` sourcetype=wlm_* host=$host$ | chart dc(search_id) over wlm_action by $SplitByVariable$\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.chart\">bar</option>\n\t<option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.axisTitleY.text\">Total # of searches</option>\n        <option name=\"charting.axisTitleX.text\">Action triggered</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <drilldown target=\"_blank\">\n          <condition series=\"*\">\n              <link target=\"_blank\"><![CDATA[search?q=`dmc_set_index_internal` sourcetype=wlm_* host=$host$ $SplitByVariable$=$click.name2$&earliest=$earliest$&latest=$latest$]]></link>\n          </condition>\n        </drilldown>\n      </chart>\n    </panel>\n  </row>\n  <row>\n    <panel>\n      <title>Number of searches per action triggered over time</title>\n      <chart>\n        <searchString>\n           `dmc_set_index_internal` host=$host$ sourcetype=wlm_*\n              | `dmc_timechart` partial=f bins=200 dc(search_id) AS \"Search count\" by $SplitByVariable$\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">false</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\"># of searches</option>\n        <option name=\"list.drilldown\">full</option>\n        <option name=\"list.wrap\">1</option>\n        <option name=\"maxLines\">5</option>\n        <option name=\"raw.drilldown\">full</option>\n        <option name=\"rowNumbers\">false</option>\n        <option name=\"table.drilldown\">all</option>\n        <option name=\"table.wrap\">1</option>\n        <option name=\"type\">list</option>\n        <option name=\"wrap\">true</option>\n        <option name=\"dataOverlayMode\">none</option>\n        <!-- <option name=\"refresh.auto.interval\">300</option> -->\n        <drilldown target=\"_blank\">\n          <condition series=\"*\">\n              <link target=\"_blank\"><![CDATA[search?q=`dmc_set_index_internal` sourcetype=wlm_* host=$host$ $SplitByVariable$=$click.name2$&earliest=$earliest$&latest=$latest$]]></link>\n          </condition>\n        </drilldown>\n      </chart>\n    </panel>\n  </row>\n\n   <row>\n     <panel>\n      <title>Overview of scheduled searches triggering rules</title>\n      <table>\n        <searchString>\n          `dmc_set_index_internal` host=$host$ sourcetype=wlm_* search_type=\"scheduled*\"\n          | stats count(eval(wlm_action = \"alert\")) AS alert count(eval(wlm_action = \"move\")) AS move count(eval(wlm_action = \"abort\")) AS abort by search_id\n          | join type=outer search_id\n               [ search `dmc_set_index_introspection` host=$host$ sourcetype=splunk_resource_usage\n                 data.search_props.label::*  NOT data.search_props.type::ad-hoc\n                 | rename data.search_props.sid as search_id, data.search_props.label as search_name\n\t\t | stats latest(search_name) AS search_name by search_id\n               ]\n          | stats sum(alert) as \"searches triggering an alert\", sum(move) as \"searches reclassified\", sum(abort) as \"searches aborted\" by search_name\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n      </table>\n    </panel>\n  </row>\n\n</form>",
"eai:type": "views",
"name": "workload_management_monitoring_instance",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" script=\"cell_fill_gauge.js, common_control.js\">\n  <label>Workload Management Activity: Deployment</label>\n\n  <fieldset autoRun=\"true\" submitButton=\"false\">\n    <input type=\"radio\" searchWhenChanged=\"true\" token=\"role\">\n      <label>Role</label>\n      <choice value=\"dmc_group_search_head\">Search Heads</choice>\n      <choice value=\"dmc_group_indexer\">Indexers</choice>\n      <default>dmc_group_search_head</default>\n    </input>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"dmc_group\">\n      <label>Group</label>\n      <showClearButton>false</showClearButton>\n      <search>\n        <query>\n          | `dmc_get_groups_containing_role($role$)`\n          | search search_group!=\"dmc_group_*\"\n        </query>\n      </search>\n      <fieldForLabel>label</fieldForLabel>\n      <fieldForValue>search_group</fieldForValue>\n      <choice value=\"*\">All</choice>\n      <selectFirstChoice>true</selectFirstChoice>\n    </input>\n  </fieldset>\n\n<row>\n    <panel>\n      <html>\n        <h2>\n          <span>Select views: </span>\n          <span id=\"link-switcher-view\">\n            <a href=\"#\" class=\"btn-pill active\" data-item=\"all\">All</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"snapshot\">Snapshot</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"historical\">Historical</a>\n          </span>\n        </h2>\n      </html>\n    </panel>\n  </row>\n\n<row>\n    <panel rejects=\"$historical$\">\n      <title>Snapshots</title>\n    </panel>\n  </row>\n\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Workload Management Pool Limits</title>\n      <table>\n        <searchString>\n          | rest splunk_server_group=$role$ splunk_server_group=\"$dmc_group$\" /services/workloads/pools\n          | rename category as pool_type\n          | eval pool_and_type = title.\" (\".pool_type.\")\"\n          | eventstats dc(splunk_server) as total_instance_count \n          | stats avg(mem_limit) as mem_limit dc(splunk_server) as instance_count max(total_instance_count) as total_instance_count values(ingest_pool) as ingest_pool values(pool_and_type) as pool_and_type by title, pool_type\n          | eval instance_count=instance_count.\"/\".total_instance_count\n          | eval mem_limit=round(mem_limit/1024/1024, 0)\n          | rename title as workload_pool\n          | join workload_pool type=outer\n              [rest splunk_server_group=$role$ splunk_server_group=\"$dmc_group$\" /services/server/status/resource-usage/splunk-processes\n                | stats sum(mem_used) as mem_used sum(pct_cpu) as pct_cpu by splunk_server, workload_pool\n                | stats avg(mem_used) as avg_mem_used avg(pct_cpu) as avg_pct_cpu by workload_pool\n              ]\n          | eval avg_mem_used=if(isNULL('avg_mem_used'), 0, round(avg_mem_used, 2))\n          | eval avg_num_cores = if(isNull('avg_pct_cpu'), 0, round(avg_pct_cpu/100.0, 2))\n          | fields workload_pool, pool_type, instance_count, mem_limit, avg_mem_used, avg_num_cores\n          | rename workload_pool as \"Workload Pool\" pool_type as \"Pool Type\" instance_count as \"Instance Count\" mem_limit as \"Memory Limit (MB)\" avg_mem_used as \"Avg Memory Used Per Instance (MB)\" avg_num_cores as \"Avg CPU Used Per Instance (# of Cores)\"\n        </searchString>\n      </table>\n    </panel>\n  </row>\n\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Historical Charts</title>\n      <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n        <label>Time Range:</label>\n        <default>\n          <earliestTime>-4h@m</earliestTime>\n          <latestTime>now</latestTime>\n        </default>\n      </input>\n\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"workload_pool\">\n        <label>Workload Pool</label>\n        <search>\n          <query>\n            | rest /services/workloads/pools splunk_server_group=* splunk_server_group=*\n            | rename title AS pool_name category AS pool_type\n            | eval pool_and_type = pool_name.\" (\".pool_type.\")\"\n            | stats values(splunk_server)  values(pool_type) as pool_type values(pool_name) as pool_name by pool_and_type\n            | fields pool_and_type pool_type pool_name\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <fieldForLabel>pool_and_type</fieldForLabel>\n        <fieldForValue>pool_and_type</fieldForValue>\n        <selectFirstChoice>true</selectFirstChoice>\n        <showClearButton>false</showClearButton>\n        <change>\n          <condition match=\"like($value$,&quot;%ingest%&quot;)\">\n            <set token=\"wlm_pool\">$row.pool_name$</set>\n            <set token=\"wlm_pool_type\">$row.pool_type$</set>\n            <set token=\"isIngest\">true</set>\n            <unset token=\"isSearch\"></unset>\n          </condition>\n          <condition match=\"like($value$,&quot;%search%&quot;)\">\n            <set token=\"wlm_pool\">$row.pool_name$</set>\n            <set token=\"wlm_pool_type\">$row.pool_type$</set>\n            <set token=\"isSearch\">true</set>\n            <unset token=\"isIngest\"></unset>\n          </condition>\n        </change>\n      </input>\n    </panel>\n  </row>\n\n  <row depends=\"$isSearch$\">\n    <panel rejects=\"$snapshot$\">\n      <title>$resourceFuncLabel$ Memory Usage</title>\n      <input type=\"dropdown\" token=\"resourceFunction\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>Median</default>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <change>\n          <set token=\"resourceFuncLabel\">$label$</set>\n        </change>\n      </input>\n      <input type=\"dropdown\" token=\"resourceSplitBySearch\" searchWhenChanged=\"true\">\n        <label>Split by</label>\n        <showClearButton>false</showClearButton>\n        <default>type</default>\n        <choice value=\"app\">App</choice>\n        <choice value=\"user\">User</choice>\n        <choice value=\"mode\">Mode</choice>\n        <choice value=\"type\">Type</choice>\n        <choice value=\"role\">Role</choice>\n        <choice value=\"search_head\">Dispatching Search Head</choice>\n        <choice value=\"label\">Search Name</choice>\n        <choice value=\"provenance\">Provenance</choice>\n      </input>\n      <chart>\n        <searchString>\n        `dmc_set_index_introspection` search_group=$role$ search_group=\"$dmc_group$\" data.workload_pool=$wlm_pool$ data.workload_pool_type=$wlm_pool_type$ sourcetype=splunk_resource_usage component=PerProcess\n        | `dmc_rename_introspection_fields`\n        | `dmc_set_bin`\n        | eval process=process.\" \".args\n        | stats latest(mem_used) AS mem_used_dedup by _time, $resourceSplitBySearch$, pid, host\n        | stats sum(mem_used_dedup) AS sum_mem_used by _time, $resourceSplitBySearch$, host\n        | `dmc_timechart` $resourceFunction$(sum_mem_used) AS \"$resourceFunction$ of resource usage\" by $resourceSplitBySearch$\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">false</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart.overlayFields\">Memory Limit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"list.drilldown\">full</option>\n        <option name=\"list.wrap\">1</option>\n        <option name=\"maxLines\">5</option>\n        <option name=\"raw.drilldown\">full</option>\n        <option name=\"rowNumbers\">false</option>\n        <option name=\"table.drilldown\">all</option>\n        <option name=\"table.wrap\">1</option>\n        <option name=\"type\">list</option>\n        <option name=\"wrap\">true</option>\n        <option name=\"dataOverlayMode\">none</option>\n        <option name=\"charting.axisTitleY.text\">MB</option>\n        <!-- <option name=\"refresh.auto.interval\">300</option> -->\n        <drilldown target=\"_blank\">\n          <condition series=\"*\">\n              <link target=\"_blank\"><![CDATA[search?q=`dmc_search_activity_instance_drilldown($host$, $resourceSplitBySearch$, $click.name2$)`&earliest=$earliest$&latest=$latest$]]></link>\n          </condition>\n        </drilldown>\n      </chart>\n    </panel>\n  </row>\n\n  <row depends=\"$isIngest$\">\n    <panel rejects=\"$snapshot$\">\n      <title>$resourceFuncLabel$ Memory Usage</title>\n      <input type=\"dropdown\" token=\"resourceFunction\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>Median</default>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <change>\n          <set token=\"resourceFuncLabel\">$label$</set>\n        </change>\n      </input>\n      <input type=\"dropdown\" token=\"resourceSplitByIngest\" searchWhenChanged=\"true\">\n        <label>Split by</label>\n        <showClearButton>false</showClearButton>\n        <default>data.process_type</default>\n        <choice value=\"data.process_type\">Process Type</choice>\n        <choice value=\"process\">Process</choice>\n      </input>\n      <chart>\n        <searchString>\n        `dmc_set_index_introspection` search_group=$role$ search_group=\"$dmc_group$\" data.workload_pool=$wlm_pool$ data.workload_pool_type=$wlm_pool_type$ sourcetype=splunk_resource_usage component=PerProcess\n        | `dmc_rename_introspection_fields`\n        | `dmc_set_bin`\n        | eval process=process.\" \".args\n        | stats latest(mem_used) AS mem_used_dedup by _time, $resourceSplitByIngest$, pid, host\n        | stats sum(mem_used_dedup) AS sum_mem_used by _time, $resourceSplitByIngest$, host\n        | `dmc_timechart` $resourceFunction$(sum_mem_used) AS \"$resourceFunction$ of resource usage\" by $resourceSplitByIngest$\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">false</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart.overlayFields\">Memory Limit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"list.drilldown\">full</option>\n        <option name=\"list.wrap\">1</option>\n        <option name=\"maxLines\">5</option>\n        <option name=\"raw.drilldown\">full</option>\n        <option name=\"rowNumbers\">false</option>\n        <option name=\"table.drilldown\">all</option>\n        <option name=\"table.wrap\">1</option>\n        <option name=\"type\">list</option>\n        <option name=\"wrap\">true</option>\n        <option name=\"dataOverlayMode\">none</option>\n        <option name=\"charting.axisTitleY.text\">MB</option>\n        <!-- <option name=\"refresh.auto.interval\">300</option> -->\n        <drilldown target=\"_blank\">\n          <condition series=\"*\">\n              <link target=\"_blank\"><![CDATA[search?q=`dmc_search_activity_instance_drilldown($host$, $resourceSplitByIngest$, $click.name2$)`&earliest=$earliest$&latest=$latest$]]></link>\n          </condition>\n        </drilldown>\n      </chart>\n    </panel>\n  </row>\n\n  <row depends=\"$isSearch$\">\n    <panel rejects=\"$snapshot$\">\n      <title>$resourceFuncLabel$ CPU Usage</title>\n      <input type=\"dropdown\" token=\"resourceFunction\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>Median</default>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <change>\n          <set token=\"resourceFuncLabel\">$label$</set>\n        </change>\n      </input>\n      <input type=\"dropdown\" token=\"resourceSplitBySearch\" searchWhenChanged=\"true\">\n        <label>Split by</label>\n        <showClearButton>false</showClearButton>\n        <default>type</default>\n        <choice value=\"app\">App</choice>\n        <choice value=\"user\">User</choice>\n        <choice value=\"mode\">Mode</choice>\n        <choice value=\"type\">Type</choice>\n        <choice value=\"role\">Role</choice>\n        <choice value=\"search_head\">Dispatching Search Head</choice>\n        <choice value=\"label\">Search Name</choice>\n        <choice value=\"provenance\">Provenance</choice>\n      </input>\n      <chart>\n        <searchString>\n        `dmc_set_index_introspection` search_group=$role$ search_group=\"$dmc_group$\" data.workload_pool=$wlm_pool$ data.workload_pool_type=$wlm_pool_type$ sourcetype=splunk_resource_usage component=PerProcess\n        | `dmc_rename_introspection_fields`\n        | `dmc_set_bin`\n        | eval process=process.\" \".args\n        | stats latest(pct_cpu) AS pct_cpu_dedup by _time, $resourceSplitBySearch$, pid, host\n        | stats sum(pct_cpu_dedup) AS sum_pct_cpu by _time, $resourceSplitBySearch$, host\n        | eval sum_pct_cpu = round(sum_pct_cpu/ 100.0, 2)\n        | `dmc_timechart` $resourceFunction$(sum_pct_cpu) AS \"$resourceFunction$ of resource usage\" by $resourceSplitBySearch$\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">false</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"list.drilldown\">full</option>\n        <option name=\"list.wrap\">1</option>\n        <option name=\"maxLines\">5</option>\n        <option name=\"raw.drilldown\">full</option>\n        <option name=\"rowNumbers\">false</option>\n        <option name=\"table.drilldown\">all</option>\n        <option name=\"table.wrap\">1</option>\n        <option name=\"type\">list</option>\n        <option name=\"wrap\">true</option>\n        <option name=\"dataOverlayMode\">none</option>\n        <option name=\"charting.axisTitleY.text\"># Of Cores</option>\n        <!-- <option name=\"refresh.auto.interval\">300</option> -->\n        <drilldown target=\"_blank\">\n          <condition series=\"*\">\n              <link target=\"_blank\"><![CDATA[search?q=`dmc_search_activity_instance_drilldown($host$, $resourceSplitBySearch$, $click.name2$)`&earliest=$earliest$&latest=$latest$]]></link>\n          </condition>\n        </drilldown>\n      </chart>\n    </panel>\n  </row>\n\n  <row depends=\"$isIngest$\">\n    <panel rejects=\"$snapshot$\">\n      <title>$resourceFuncLabel$ CPU Usage</title>\n      <input type=\"dropdown\" token=\"resourceFunction\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>Median</default>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <change>\n          <set token=\"resourceFuncLabel\">$label$</set>\n        </change>\n      </input>\n      <input type=\"dropdown\" token=\"resourceSplitByIngest\" searchWhenChanged=\"true\">\n        <label>Split by</label>\n        <showClearButton>false</showClearButton>\n        <default>data.process_type</default>\n        <choice value=\"data.process_type\">Process Type</choice>\n        <choice value=\"process\">Process</choice>\n      </input>\n      <chart>\n        <searchString>\n        `dmc_set_index_introspection` search_group=$role$ search_group=\"$dmc_group$\" data.workload_pool=$wlm_pool$ data.workload_pool_type=$wlm_pool_type$ sourcetype=splunk_resource_usage component=PerProcess\n        | `dmc_rename_introspection_fields`\n        | `dmc_set_bin`\n        | eval process=process.\" \".args\n        | stats latest(pct_cpu) AS pct_cpu_dedup by _time, $resourceSplitByIngest$, pid, host\n        | stats sum(pct_cpu_dedup) AS sum_pct_cpu by _time, $resourceSplitByIngest$, host\n        | eval sum_pct_cpu = round(sum_pct_cpu/ 100.0, 2)\n        | `dmc_timechart` $resourceFunction$(sum_pct_cpu) AS \"$resourceFunction$ of resource usage\" by $resourceSplitByIngest$\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">false</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"list.drilldown\">full</option>\n        <option name=\"list.wrap\">1</option>\n        <option name=\"maxLines\">5</option>\n        <option name=\"raw.drilldown\">full</option>\n        <option name=\"rowNumbers\">false</option>\n        <option name=\"table.drilldown\">all</option>\n        <option name=\"table.wrap\">1</option>\n        <option name=\"type\">list</option>\n        <option name=\"wrap\">true</option>\n        <option name=\"dataOverlayMode\">none</option>\n        <option name=\"charting.axisTitleY.text\"># Of Cores</option>\n        <!-- <option name=\"refresh.auto.interval\">300</option> -->\n        <drilldown target=\"_blank\">\n          <condition series=\"*\">\n              <link target=\"_blank\"><![CDATA[search?q=`dmc_search_activity_instance_drilldown($host$, $resourceSplitByIngest$, $click.name2$)`&earliest=$earliest$&latest=$latest$]]></link>\n          </condition>\n        </drilldown>\n      </chart>\n    </panel>\n  </row>\n</form>",
"eai:type": "views",
"name": "workload_management_per_pool_deployment",
"owner": "nobody",
"sharing": "app"
},
{
"eai:data": "<form version=\"1.1\" hideEdit=\"True\" script=\"cell_fill_gauge.js, common_control.js\">\n  <label>Workload Management Activity: Instance</label>\n\n  <fieldset autoRun=\"true\" submitButton=\"false\">\n    <input type=\"radio\" searchWhenChanged=\"true\" token=\"role\">\n      <label>Role</label>\n      <choice value=\"dmc_group_search_head\">Search Heads</choice>\n      <choice value=\"dmc_group_indexer\">Indexers</choice>\n      <default>dmc_group_search_head</default>\n    </input>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"dmc_group\">\n      <label>Group</label>\n      <showClearButton>false</showClearButton>\n      <search>\n        <query>\n          | `dmc_get_groups_containing_role($role$)`\n          | search search_group!=\"dmc_group_*\"\n        </query>\n      </search>\n      <fieldForLabel>label</fieldForLabel>\n      <fieldForValue>search_group</fieldForValue>\n      <choice value=\"*\">All</choice>\n      <selectFirstChoice>true</selectFirstChoice>\n    </input>\n    <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"splunk_server\">\n      <label>Instance</label>\n      <showClearButton>false</showClearButton>\n      <populatingSearch fieldForLabel=\"serverName\" fieldForValue=\"serverName\">\n        | `dmc_get_instance_info($dmc_group$)`\n        | where search_group=\"$role$\"\n      </populatingSearch>\n      <selectFirstChoice>true</selectFirstChoice>\n      <change>\n        <condition value=\"*\">\n          <set token=\"host\">$row.host$</set>\n        </condition>\n      </change>\n    </input>\n  </fieldset>\n\n<row>\n    <panel>\n      <html>\n        <h2>\n          <span>Select views: </span>\n          <span id=\"link-switcher-view\">\n            <a href=\"#\" class=\"btn-pill active\" data-item=\"all\">All</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"snapshot\">Snapshot</a>\n            <a href=\"#\" class=\"btn-pill\" data-item=\"historical\">Historical</a>\n          </span>\n        </h2>\n      </html>\n    </panel>\n  </row>\n\n<row>\n    <panel rejects=\"$historical$\">\n      <title>Snapshots</title>\n    </panel>\n  </row>\n\n  <row>\n    <panel rejects=\"$historical$\">\n      <title>Workload Management Pool Limits</title>\n      <table>\n        <searchString>\n          | rest splunk_server=$splunk_server$ /services/workloads/pools\n          | rename title AS workload_pool category AS pool_type\n          | eval mem_limit=if(isNULL(mem_limit), 0, round(mem_limit/1024/1024, 0))\n          | join workload_pool type=outer\n              [rest splunk_server=$splunk_server$ /services/server/status/resource-usage/splunk-processes\n                | stats sum(mem_used) as mem_used sum(pct_cpu) as pct_cpu by workload_pool\n              ]\n          | fields workload_pool, pool_type, mem_limit, mem_used, cpu_cores_used\n          | eval cpu_cores_used = if(isNull('pct_cpu'), 0, round(pct_cpu / 100.0, 2))\n          | eval mem_used = if(isNULL('mem_used'), 0, round(mem_used, 2))\n          | rename workload_pool as \"Workload Pool\", pool_type as \"Pool Type\" mem_used as \"Memory Used (MB)\", cpu_cores_used as \"CPU used (# of cores)\" mem_limit as \"Memory Limit (MB)\"\n        </searchString>\n      </table>\n    </panel>\n  </row>\n  <row>\n    <panel rejects=\"$snapshot$\">\n      <title>Historical Charts</title>\n      <input type=\"time\" searchWhenChanged=\"true\" token=\"time\">\n        <label>Time Range:</label>\n        <default>\n          <earliestTime>-4h@m</earliestTime>\n          <latestTime>now</latestTime>\n        </default>\n      </input>\n      <input type=\"dropdown\" searchWhenChanged=\"true\" token=\"workload_pool\">\n        <label>Workload Pool</label>\n        <search>\n          <query>\n              | rest splunk_server_group=$role$ splunk_server_group=$dmc_group$ splunk_server=$host$ /services/workloads/pools\n              | rename title AS pool_name category AS pool_type\n              | eval pool_and_type = pool_name.\" (\".pool_type.\")\"\n              | stats values(pool_type) as pool_type values(pool_name) as pool_name by pool_and_type\n              | fields pool_and_type pool_type pool_name\n          </query>\n          <earliest>$time.earliest$</earliest>\n          <latest>$time.latest$</latest>\n        </search>\n        <fieldForLabel>pool_and_type</fieldForLabel>\n        <fieldForValue>pool_and_type</fieldForValue>\n        <selectFirstChoice>true</selectFirstChoice>\n        <showClearButton>false</showClearButton>\n        <change>\n          <condition match=\"like($value$,&quot;%ingest%&quot;)\">\n            <set token=\"wlm_pool\">$row.pool_name$</set>\n            <set token=\"wlm_pool_type\">$row.pool_type$</set>\n            <set token=\"isIngest\">true</set>\n            <unset token=\"isSearch\"></unset>\n            <unset token=\"isMisc\"></unset>\n          </condition>\n          <condition match=\"like($value$,&quot;%search%&quot;)\">\n            <set token=\"wlm_pool\">$row.pool_name$</set>\n            <set token=\"wlm_pool_type\">$row.pool_type$</set>\n            <set token=\"isSearch\">true</set>\n            <unset token=\"isIngest\"></unset>\n            <unset token=\"isMisc\"></unset>\n          </condition>\n          <condition match=\"like($value$,&quot;%misc%&quot;)\">\n            <set token=\"wlm_pool\">$row.pool_name$</set>\n            <set token=\"wlm_pool_type\">$row.pool_type$</set>\n            <set token=\"isInget\">true</set>\n            <unset token=\"isSearch\"></unset>\n          </condition>\n        </change>\n      </input>\n    </panel>\n  </row>\n\n  <row depends=\"$isSearch$\">\n    <panel rejects=\"$snapshot$\">\n      <title>$resourceFuncLabel$ Memory Usage</title>\n      <input type=\"dropdown\" token=\"resourceFunction\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>Median</default>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <change>\n          <set token=\"resourceFuncLabel\">$label$</set>\n        </change>\n      </input>\n      <input type=\"dropdown\" token=\"resourceSplitBySearch\" searchWhenChanged=\"true\">\n        <label>Split by</label>\n        <showClearButton>false</showClearButton>\n        <default>type</default>\n        <choice value=\"app\">App</choice>\n        <choice value=\"user\">User</choice>\n        <choice value=\"mode\">Mode</choice>\n        <choice value=\"type\">Type</choice>\n        <choice value=\"role\">Role</choice>\n        <choice value=\"search_head\">Dispatching Search Head</choice>\n        <choice value=\"label\">Search Name</choice>\n        <choice value=\"provenance\">Provenance</choice>\n      </input>\n      <chart>\n        <searchString>\n        `dmc_set_index_introspection` host=$splunk_server$ data.workload_pool=$wlm_pool$ sourcetype=splunk_resource_usage component=PerProcess\n        | `dmc_rename_introspection_fields`\n        | `dmc_set_bin`\n        | eval process=process.\" \".args\n        | stats latest(mem_used) AS mem_used_dedup by _time, $resourceSplitBySearch$, pid\n        | stats sum(mem_used_dedup) AS sum_mem_used by _time,  $resourceSplitBySearch$\n        | `dmc_timechart` $resourceFunction$(sum_mem_used) AS \"$resourceFunction$ of resource usage\" by $resourceSplitBySearch$\n        | eval mem_limit = [rest /services/workloads/pools/$wlm_pool$ splunk_server=$splunk_server$\n                             |eval mem_limit = if(isNULL(mem_limit), 0, round(mem_limit/1024/1024, 0))\n                             |return $mem_limit]\n        | rename mem_limit as \"Memory Limit\"\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">false</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart.overlayFields\">\"Memory Limit\"</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">MB</option>\n        <option name=\"list.drilldown\">full</option>\n        <option name=\"list.wrap\">1</option>\n        <option name=\"maxLines\">5</option>\n        <option name=\"raw.drilldown\">full</option>\n        <option name=\"rowNumbers\">false</option>\n        <option name=\"table.drilldown\">all</option>\n        <option name=\"table.wrap\">1</option>\n        <option name=\"type\">list</option>\n        <option name=\"wrap\">true</option>\n        <option name=\"dataOverlayMode\">none</option>\n        <!-- <option name=\"refresh.auto.interval\">300</option> -->\n        <drilldown target=\"_blank\">\n          <condition series=\"*\">\n              <link target=\"_blank\"><![CDATA[search?q=`dmc_search_activity_instance_drilldown($host$, $resourceSplitBySearch$, $click.name2$)`&earliest=$earliest$&latest=$latest$]]></link>\n          </condition>\n        </drilldown>\n      </chart>\n    </panel>\n  </row>\n\n  <row depends=\"$isIngest$\">\n    <panel rejects=\"$snapshot$\">\n      <title>$resourceFuncLabel$ Memory Usage</title>\n      <input type=\"dropdown\" token=\"resourceFunction\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>Median</default>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <change>\n          <set token=\"resourceFuncLabel\">$label$</set>\n        </change>\n      </input>\n      <input type=\"dropdown\" token=\"resourceSplitByIngest\" searchWhenChanged=\"true\">\n        <label>Split by</label>\n        <showClearButton>false</showClearButton>\n        <default>data.process_type</default>\n        <choice value=\"data.process_type\">Process Type</choice>\n        <choice value=\"process\">Process</choice>\n      </input>\n      <chart>\n        <searchString>\n        `dmc_set_index_introspection` host=$splunk_server$ data.workload_pool=$wlm_pool$ sourcetype=splunk_resource_usage component=PerProcess\n        | `dmc_rename_introspection_fields`\n        | `dmc_set_bin`\n        | eval process=process.\" \".args\n        | stats latest(mem_used) AS mem_used_dedup by _time, $resourceSplitByIngest$, pid\n        | stats sum(mem_used_dedup) AS sum_mem_used by _time,  $resourceSplitByIngest$\n        | `dmc_timechart` $resourceFunction$(sum_mem_used) AS \"$resourceFunction$ of resource usage\" by $resourceSplitByIngest$\n        | eval mem_limit = [rest /services/workloads/pools/$wlm_pool$ splunk_server=$splunk_server$\n                             |eval mem_limit = if(isNULL(mem_limit), 0, round(mem_limit/1024/1024, 0))\n                             |return $mem_limit]\n        | rename mem_limit as \"Memory Limit\"\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">false</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart.overlayFields\">\"Memory Limit\"</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\">MB</option>\n        <option name=\"list.drilldown\">full</option>\n        <option name=\"list.wrap\">1</option>\n        <option name=\"maxLines\">5</option>\n        <option name=\"raw.drilldown\">full</option>\n        <option name=\"rowNumbers\">false</option>\n        <option name=\"table.drilldown\">all</option>\n        <option name=\"table.wrap\">1</option>\n        <option name=\"type\">list</option>\n        <option name=\"wrap\">true</option>\n        <option name=\"dataOverlayMode\">none</option>\n        <!-- <option name=\"refresh.auto.interval\">300</option> -->\n        <drilldown target=\"_blank\">\n          <condition series=\"*\">\n              <link target=\"_blank\"><![CDATA[search?q=`dmc_search_activity_instance_drilldown($host$, $resourceSplitByIngest$, $click.name2$)`&earliest=$earliest$&latest=$latest$]]></link>\n          </condition>\n        </drilldown>\n      </chart>\n    </panel>\n  </row>\n\n  <row depends=\"$isSearch$\">\n    <panel rejects=\"$snapshot$\">\n      <title>$resourceFuncLabel$ CPU Usage</title>\n      <input type=\"dropdown\" token=\"resourceFunction\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>Median</default>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <change>\n          <set token=\"resourceFuncLabel\">$label$</set>\n        </change>\n      </input>\n      <input type=\"dropdown\" token=\"resourceSplitBySearch\" searchWhenChanged=\"true\">\n        <label>Split by</label>\n        <showClearButton>false</showClearButton>\n        <default>type</default>\n        <choice value=\"app\">App</choice>\n        <choice value=\"user\">User</choice>\n        <choice value=\"mode\">Mode</choice>\n        <choice value=\"type\">Type</choice>\n        <choice value=\"role\">Role</choice>\n        <choice value=\"search_head\">Dispatching Search Head</choice>\n        <choice value=\"label\">Search Name</choice>\n        <choice value=\"provenance\">Provenance</choice>\n      </input>\n      <chart>\n        <searchString>\n        `dmc_set_index_introspection` host=$splunk_server$ data.workload_pool=$wlm_pool$ sourcetype=splunk_resource_usage component=PerProcess\n        | `dmc_rename_introspection_fields`\n        | `dmc_set_bin`\n        | eval process=process.\" \".args\n        | stats latest(pct_cpu) AS pct_cpu_dedup by _time, $resourceSplitBySearch$, pid\n        | stats sum(pct_cpu_dedup) AS sum_pct_cpu by _time,  $resourceSplitBySearch$\n        | eval sum_pct_cpu = round(sum_pct_cpu/ 100.0, 2)\n        | `dmc_timechart` $resourceFunction$(sum_pct_cpu) AS \"$resourceFunction$ of resource usage\" by $resourceSplitBySearch$\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">false</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\"># Of Cores</option>\n        <option name=\"list.drilldown\">full</option>\n        <option name=\"list.wrap\">1</option>\n        <option name=\"maxLines\">5</option>\n        <option name=\"raw.drilldown\">full</option>\n        <option name=\"rowNumbers\">false</option>\n        <option name=\"table.drilldown\">all</option>\n        <option name=\"table.wrap\">1</option>\n        <option name=\"type\">list</option>\n        <option name=\"wrap\">true</option>\n        <option name=\"dataOverlayMode\">none</option>\n        <!-- <option name=\"refresh.auto.interval\">300</option> -->\n        <drilldown target=\"_blank\">\n          <condition series=\"*\">\n              <link target=\"_blank\"><![CDATA[search?q=`dmc_search_activity_instance_drilldown($host$, $resourceSplitBySearch$, $click.name2$)`&earliest=$earliest$&latest=$latest$]]></link>\n          </condition>\n        </drilldown>\n      </chart>\n    </panel>\n  </row>\n\n  <row depends=\"$isIngest$\">\n    <panel rejects=\"$snapshot$\">\n      <title>$resourceFuncLabel$ CPU Usage</title>\n      <input type=\"dropdown\" token=\"resourceFunction\" searchWhenChanged=\"true\">\n        <label>Aggregation</label>\n        <showClearButton>false</showClearButton>\n        <default>Median</default>\n        <choice value=\"Avg\">Average</choice>\n        <choice value=\"Median\">Median</choice>\n        <choice value=\"Min\">Minimum</choice>\n        <choice value=\"Max\">Maximum</choice>\n        <choice value=\"Perc90\">90th Percentile</choice>\n        <choice value=\"First\">Sampled</choice>\n        <change>\n          <set token=\"resourceFuncLabel\">$label$</set>\n        </change>\n      </input>\n      <input type=\"dropdown\" token=\"resourceSplitByIngest\" searchWhenChanged=\"true\">\n        <label>Split by</label>\n        <showClearButton>false</showClearButton>\n        <default>data.process_type</default>\n        <choice value=\"data.process_type\">Process Type</choice>\n        <choice value=\"process\">Process</choice>\n      </input>\n      <chart>\n        <searchString>\n        `dmc_set_index_introspection` host=$splunk_server$ data.workload_pool=$wlm_pool$ sourcetype=splunk_resource_usage component=PerProcess\n        | `dmc_rename_introspection_fields`\n        | `dmc_set_bin`\n        | eval process=process.\" \".args\n        | stats latest(pct_cpu) AS pct_cpu_dedup by _time, $resourceSplitByIngest$, pid\n        | stats sum(pct_cpu_dedup) AS sum_pct_cpu by _time,  $resourceSplitByIngest$\n        | eval sum_pct_cpu = round(sum_pct_cpu/ 100.0, 2)\n        | `dmc_timechart` $resourceFunction$(sum_pct_cpu) AS \"$resourceFunction$ of resource usage\" by $resourceSplitByIngest$\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.overflowMode\">ellipsisNone</option>\n        <option name=\"charting.axisLabelsX.majorLabelStyle.rotation\">0</option>\n        <option name=\"charting.axisTitleX.visibility\">visible</option>\n        <option name=\"charting.axisTitleY.visibility\">visible</option>\n        <option name=\"charting.axisTitleY2.visibility\">visible</option>\n        <option name=\"charting.axisX.scale\">linear</option>\n        <option name=\"charting.axisY.scale\">linear</option>\n        <option name=\"charting.axisY2.enabled\">false</option>\n        <option name=\"charting.axisY2.scale\">inherit</option>\n        <option name=\"charting.chart\">column</option>\n        <option name=\"charting.chart.nullValueMode\">connect</option>\n        <option name=\"charting.chart.sliceCollapsingThreshold\">0.01</option>\n        <option name=\"charting.chart.stackMode\">stacked</option>\n        <option name=\"charting.chart.style\">shiny</option>\n        <option name=\"charting.drilldown\">all</option>\n        <option name=\"charting.layout.splitSeries\">0</option>\n        <option name=\"charting.legend.labelStyle.overflowMode\">ellipsisMiddle</option>\n        <option name=\"charting.legend.placement\">right</option>\n        <option name=\"charting.axisTitleX.text\">Time</option>\n        <option name=\"charting.axisTitleY.text\"># Of Cores</option>\n        <option name=\"list.drilldown\">full</option>\n        <option name=\"list.wrap\">1</option>\n        <option name=\"maxLines\">5</option>\n        <option name=\"raw.drilldown\">full</option>\n        <option name=\"rowNumbers\">false</option>\n        <option name=\"table.drilldown\">all</option>\n        <option name=\"table.wrap\">1</option>\n        <option name=\"type\">list</option>\n        <option name=\"wrap\">true</option>\n        <option name=\"dataOverlayMode\">none</option>\n        <!-- <option name=\"refresh.auto.interval\">300</option> -->\n        <drilldown target=\"_blank\">\n          <condition series=\"*\">\n              <link target=\"_blank\"><![CDATA[search?q=`dmc_search_activity_instance_drilldown($host$, $resourceSplitByIngest$, $click.name2$)`&earliest=$earliest$&latest=$latest$]]></link>\n          </condition>\n        </drilldown>\n      </chart>\n    </panel>\n  </row>\n\n  <row>\n    <panel rejects=\"$snapshot$\" depends=\"$isSearch$\">\n      <title>Top 10 Memory-Consuming Searches In This Pool</title>\n      <table>\n        <searchString>\n        `dmc_set_index_introspection` host=$splunk_server$ data.workload_pool=$wlm_pool$ sourcetype=splunk_resource_usage data.search_props.mode!=RT\n        | `dmc_rename_introspection_fields`\n        | stats max(elapsed) as runtime max(mem_used) as mem_used earliest(_time) as _time by sid, label, provenance, type, mode, app, role, search_head, user\n        | eval mem_used = round(mem_used, 2)\n        | sort 10 - mem_used\n        | fields - day, hour, minute, second\n        | eval _time = strftime(_time,\"%+\")\n        | rename sid as SID, label as \"Search Name\",mem_used as \"Memory Usage (MB)\", provenance AS Provenance, type as Type, mode as Mode, app as App, role as Role, search_head as \"Search Head\", user as User, _time as Started, runtime as Runtime\n        | fields SID, \"Search Name\",\"Memory Usage (MB)\", Provenance, Type, Mode, App, Role, \"Search Head\", User, Started, Runtime\n        | fieldformat Runtime = `dmc_convert_runtime(Runtime)`\n        </searchString>\n        <earliestTime>$time.earliest$</earliestTime>\n        <latestTime>$time.latest$</latestTime>\n        <option name=\"wrap\">true</option>\n        <option name=\"rowNumbers\">true</option>\n        <option name=\"dataOverlayMode\">none</option>\n        <option name=\"drilldown\">cell</option>\n        <option name=\"count\">10</option>\n        <drilldown>\n          <condition field=\"SID\">\n            <set token=\"top10_drilldown_sid\">$click.value2$</set>\n            <set token=\"top10_drilldown_earliest\">$earliest$</set>\n            <set token=\"top10_drilldown_latest\">$latest$</set>\n            <set token=\"top10drilldown\">$click.name2$</set>\n          </condition>\n          <condition field=\"*\"></condition>\n        </drilldown>\n      </table>\n      <html>\n        <p>Click on a SID to see more details</p>\n      </html>\n    </panel>\n    <panel depends=\"$top10drilldown$\">\n      <title>Details of SID: $top10_drilldown_sid$</title>\n      <table>\n        <searchString>\n          `dmc_set_index_audit` action=search sourcetype=audittrail\n           [ localop | stats count\n             | eval search_id = replace(\"$top10_drilldown_sid$\", \"^remote_[^_]*_\", \"\")\n             | table search_id ]\n           [ localop | stats count\n             | eval earliest = $top10_drilldown_earliest$ - 86400\n             | table earliest ]\n           [ localop | stats count\n             | eval host = if(like(\"$top10_drilldown_sid$\", \"remote_%\"), \"*\", \"$host$\")\n             | table host ]\n           latest=\"$top10_drilldown_latest$\"\n          | stats values(savedsearch_name) AS search_name values(result_count) AS result_count values(event_count) AS event_count values(scan_count) AS scan_count values(total_run_time) AS search_run_time values(host) as host values(search) AS search_string by search_id\n          | transpose\n          | rename column as Property, \"row 1\" as Value\n        </searchString>\n        <option name=\"drilldown\">off</option>\n        <option name=\"wrap\">true</option>\n      </table>\n      <html>\n        <p>Please try to choose a larger time range if this panel produces no result.</p>\n        <div> </div>\n        <a data-unset-token=\"top10drilldown\">Close this panel</a>\n      </html>\n    </panel>\n  </row>\n</form>",
"eai:type": "views",
"name": "workload_management_per_pool_instance",
"owner": "nobody",
"sharing": "app"
}
]
